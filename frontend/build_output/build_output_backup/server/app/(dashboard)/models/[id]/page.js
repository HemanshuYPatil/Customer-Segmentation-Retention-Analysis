(()=>{var e={};e.id=301,e.ids=[301],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},74026:e=>{"use strict";e.exports=require("string_decoder")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},35311:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(47961),r(68032),r(35866),r(48457);var s=r(23191),a=r(88716),n=r(37922),o=r.n(n),d=r(95231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);r.d(t,i);let l=["",{children:["(dashboard)",{children:["models",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,47961)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\models\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,68032)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,48457)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\models\\[id]\\page.tsx"],u="/(dashboard)/models/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/models/[id]/page",pathname:"/models/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},22887:(e,t,r)=>{Promise.resolve().then(r.bind(r,80113))},80113:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(10326),a=r(20108),n=r(35047),o=r(33071),d=r(90772),i=r(25517);let l=(0,r(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var c=r(94019),u=r(17577);function m(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),r=t?.id,m=Array.isArray(r)?r[0]:r,[p,x]=(0,u.useState)(!1),h=(0,a.a)({queryKey:["model-detail",m],queryFn:()=>i.h.modelDetail(m??""),enabled:!!m}),b=(0,a.a)({queryKey:["model-json",m],queryFn:()=>i.h.modelJson(m??""),enabled:!!m,retry:!1}),f=(0,a.a)({queryKey:["model-dataset",m],queryFn:()=>i.h.modelDataset(m??""),enabled:!!m&&p,retry:!1}),g=(0,u.useMemo)(()=>Object.entries(h.data?.metrics??{}).sort((e,t)=>e[0].localeCompare(t[0])),[h.data]);return(0,s.jsxs)("div",{className:"grid gap-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:(0,s.jsxs)(d.z,{variant:"ghost",className:"gap-2",onClick:()=>e.back(),children:[s.jsx(l,{size:16}),"Back to models"]})}),(0,s.jsxs)(o.Zb,{children:[s.jsx(o.ll,{children:"Model Details"}),s.jsx(o.SZ,{children:"Full record pulled from Firestore and stored artifacts."}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-xl border border-panelBorder bg-background p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Model name"}),s.jsx("p",{className:"text-sm font-semibold",children:h.data?.name??"--"})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-panelBorder bg-background p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Model ID"}),s.jsx("p",{className:"text-sm font-semibold",children:m??"--"})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-panelBorder bg-background p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Created"}),s.jsx("p",{className:"text-sm font-semibold",children:h.data?.created_at?function(e){if(!e)return"--";let t=null;if(e instanceof Date&&(t=e),"number"==typeof e&&(t=new Date(e)),"string"==typeof e){let r=new Date(e);t=Number.isNaN(r.getTime())?null:r}if(e.seconds&&(t=new Date(1e3*e.seconds)),e._seconds&&(t=new Date(1e3*e._seconds)),e.toDate&&(t=e.toDate()),e.toMillis&&(t=new Date(e.toMillis())),!t)return"--";let r=Date.now()-t.getTime();if(r<0)return"just now";let s=Math.floor(r/1e3),a=Math.floor(s/60),n=Math.floor(a/60),o=Math.floor(n/24),d=Math.floor(o/30);return s<60?`${s}s ago`:a<60?`${a}m ago`:n<24?`${n}h ago`:o<30?`${o}d ago`:d<12?`${d}mo ago`:`${Math.floor(o/365)}y ago`}(h.data.created_at):"--"})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-panelBorder bg-background p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Artifact prefix"}),s.jsx("p",{className:"truncate text-sm font-semibold",children:h.data?.artifact_prefix??"--"})]}),(0,s.jsxs)("div",{className:"flex items-end justify-between rounded-xl border border-panelBorder bg-background p-3 md:col-span-2",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-muted",children:"Training dataset"}),s.jsx("p",{className:"truncate text-sm font-semibold",children:f.data?.path||"Dataset path available from training run"})]}),s.jsx(d.z,{variant:"secondary",onClick:()=>x(!0),children:"View"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2 auto-rows-fr",children:[(0,s.jsxs)(o.Zb,{children:[s.jsx(o.ll,{children:"Metrics"}),s.jsx(o.SZ,{children:"All metrics saved with this model."}),s.jsx("div",{className:"mt-4 space-y-2",children:0===g.length?s.jsx("p",{className:"text-sm text-muted",children:"No metrics available."}):g.map(([e,t])=>(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-panelBorder bg-background p-2",children:[s.jsx("span",{className:"text-xs text-muted",children:e}),s.jsx("span",{className:"text-sm font-semibold",children:"number"==typeof t?t.toFixed(4):String(t)})]},e))})]}),(0,s.jsxs)(o.Zb,{className:"flex flex-col",children:[s.jsx(o.ll,{children:"Raw Firestore Record"}),s.jsx(o.SZ,{children:"Full document payload from Firestore."}),s.jsx("div",{className:"mt-4 flex-1 rounded-xl border border-panelBorder bg-background p-3",children:s.jsx("pre",{className:"no-scrollbar h-full min-h-[18rem] overflow-auto rounded-lg bg-panel/60 p-3 text-xs text-muted",children:JSON.stringify(h.data??{},null,2)})})]})]}),b.data&&(0,s.jsxs)(o.Zb,{children:[s.jsx(o.ll,{children:"JSON Artifacts"}),s.jsx(o.SZ,{children:"Displays stored JSON files if available."}),s.jsx("div",{className:"mt-4",children:(0,s.jsxs)("div",{className:"rounded-xl border border-panelBorder bg-background p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:b.data.filename}),s.jsx("pre",{className:"mt-2 max-h-72 overflow-auto rounded-lg bg-panel/60 p-3 text-xs text-muted",children:JSON.stringify(b.data.data,null,2)})]})})]}),p&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-6 backdrop-blur-sm",onClick:()=>x(!1),children:(0,s.jsxs)("div",{className:"w-full max-w-6xl rounded-3xl border border-panelBorder bg-panel/95 shadow-[0_24px_60px_rgba(0,0,0,0.45)]",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-panelBorder px-7 py-5",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-muted",children:"Dataset"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Training data"}),s.jsx("p",{className:"mt-1 text-xs text-muted",children:f.data?.path??"Loading dataset path..."})]}),s.jsx(d.z,{variant:"ghost",className:"h-9 w-9 rounded-full border border-panelBorder/60 p-0 hover:border-accent/60",onClick:()=>x(!1),"aria-label":"Close",children:s.jsx(c.Z,{size:16})})]}),s.jsx("div",{className:"max-h-[70vh] overflow-auto p-6",children:f.isLoading?s.jsx("p",{className:"text-sm text-muted",children:"Loading dataset..."}):f.data?s.jsx("div",{className:"overflow-auto rounded-2xl border border-panelBorder bg-background",children:(0,s.jsxs)("table",{className:"min-w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-panel/90 text-muted",children:s.jsx("tr",{children:f.data.columns.map(e=>s.jsx("th",{className:"border-b border-panelBorder px-3 py-2",children:e},e))})}),s.jsx("tbody",{children:f.data.rows.map((e,t)=>s.jsx("tr",{className:"odd:bg-panel/40",children:f.data.columns.map(r=>s.jsx("td",{className:"border-b border-panelBorder px-3 py-2 text-muted",children:String(e[r]??"")},`${t}-${r}`))},t))})]})}):s.jsx("p",{className:"text-sm text-muted",children:"Dataset not available."})})]})})]})}},33071:(e,t,r)=>{"use strict";r.d(t,{SZ:()=>d,Zb:()=>n,ll:()=>o});var s=r(10326),a=r(77863);function n({className:e,...t}){return s.jsx("div",{className:(0,a.cn)("rounded-xl border border-panelBorder bg-panel p-4",e),...t})}function o({className:e,...t}){return s.jsx("h3",{className:(0,a.cn)("text-lg font-semibold",e),...t})}function d({className:e,...t}){return s.jsx("p",{className:(0,a.cn)("text-sm text-muted",e),...t})}},25517:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});let s=function(){let e=process.env.NEXT_PUBLIC_API_BASE_URL;return e&&e.trim()?e.trim():"https://csr-vx85.onrender.com"}();async function a(e,t){let{auth:a}=await Promise.resolve().then(r.bind(r,20902)),n=a.currentUser,o=n?await n.getIdToken():null,d=n?.uid,i=await fetch(`${s}${e}`,{headers:{"Content-Type":"application/json",...o?{Authorization:`Bearer ${o}`}:{},...d?{"X-Tenant-Id":d}:{}},...t});if(!i.ok)throw Error(`API request failed: ${i.status}`);return i.json()}let n={health:()=>a("/health"),predict:e=>a("/predict",{method:"POST",body:JSON.stringify(e)}),metrics:()=>a("/metrics"),segments:()=>a("/segments"),models:()=>a("/models"),modelDetail:e=>a(`/models/${e}`),modelJson:e=>a(`/models/${e}/json`),modelDataset:e=>a(`/models/${e}/dataset`),defaultModel:()=>a("/models/default"),setDefaultModel:e=>a("/models/default",{method:"POST",body:JSON.stringify({model_id:e})}),predictions:()=>a("/predictions"),predictionDetail:e=>a(`/predictions/${e}`),predictionDownload:e=>a(`/predictions/${e}/download`),predictionCsv:async e=>{let{auth:t}=await Promise.resolve().then(r.bind(r,20902));return fetch(`${s}/predictions/${e}/csv`,{headers:{"Content-Type":"text/csv",...t.currentUser?.uid?{"X-Tenant-Id":t.currentUser.uid}:{}}})},retrain:async e=>{let t=await fetch("/api/queue/train",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to queue training");return t.json()},uploadDataset:async(e,t,r)=>{let a=new FormData;a.append("tenant_id",e),a.append("file",t),r&&a.append("mapping",JSON.stringify(r));let n=await fetch(`${s}/upload`,{method:"POST",body:a});if(!n.ok)throw Error("Upload failed");return n.json()},queueSinglePrediction:async e=>{let t=await fetch("/api/queue/predict-single",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Failed to queue single prediction");return t.json()},queueBatchPrediction:async e=>{let t=await fetch("/api/queue/predict-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to queue batch prediction");return t.json()}}},47961:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Data-Science-Project\Customer-Segmentation-Retention-Analysis\frontend\app\(dashboard)\models\[id]\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,771,496,872,108,332],()=>r(35311));module.exports=s})();