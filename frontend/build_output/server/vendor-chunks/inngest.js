"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/inngest";
exports.ids = ["vendor-chunks/inngest"];
exports.modules = {

/***/ "(rsc)/./node_modules/inngest/node_modules/ansi-regex/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/inngest/node_modules/ansi-regex/index.js ***!
  \***************************************************************/
/***/ ((module) => {

eval("\nmodule.exports = (options)=>{\n    options = Object.assign({\n        onlyFirst: false\n    }, options);\n    const pattern = [\n        \"[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]+)*|[a-zA-Z\\\\d]+(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?\\\\u0007)\",\n        \"(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-ntqry=><~]))\"\n    ].join(\"|\");\n    return new RegExp(pattern, options.onlyFirst ? undefined : \"g\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9ub2RlX21vZHVsZXMvYW5zaS1yZWdleC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUVBQSxPQUFPQyxPQUFPLEdBQUdDLENBQUFBO0lBQ2hCQSxVQUFVQyxPQUFPQyxNQUFNLENBQUM7UUFDdkJDLFdBQVc7SUFDWixHQUFHSDtJQUVILE1BQU1JLFVBQVU7UUFDZjtRQUNBO0tBQ0EsQ0FBQ0MsSUFBSSxDQUFDO0lBRVAsT0FBTyxJQUFJQyxPQUFPRixTQUFTSixRQUFRRyxTQUFTLEdBQUdJLFlBQVk7QUFDNUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9ub2RlX21vZHVsZXMvYW5zaS1yZWdleC9pbmRleC5qcz8xYmNhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBvcHRpb25zID0+IHtcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdG9ubHlGaXJzdDogZmFsc2Vcblx0fSwgb3B0aW9ucyk7XG5cblx0Y29uc3QgcGF0dGVybiA9IFtcblx0XHQnW1xcXFx1MDAxQlxcXFx1MDA5Ql1bW1xcXFxdKCkjOz9dKig/Oig/Oig/Oig/OjtbLWEtekEtWlxcXFxkXFxcXC8jJi46PT8lQH5fXSspKnxbYS16QS1aXFxcXGRdKyg/OjtbLWEtekEtWlxcXFxkXFxcXC8jJi46PT8lQH5fXSopKik/XFxcXHUwMDA3KScsXG5cdFx0Jyg/Oig/OlxcXFxkezEsNH0oPzo7XFxcXGR7MCw0fSkqKT9bXFxcXGRBLVBSLVRaY2YtbnRxcnk9Pjx+XSkpJ1xuXHRdLmpvaW4oJ3wnKTtcblxuXHRyZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuLCBvcHRpb25zLm9ubHlGaXJzdCA/IHVuZGVmaW5lZCA6ICdnJyk7XG59O1xuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJvcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwib25seUZpcnN0IiwicGF0dGVybiIsImpvaW4iLCJSZWdFeHAiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/node_modules/ansi-regex/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/node_modules/strip-ansi/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/inngest/node_modules/strip-ansi/index.js ***!
  \***************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst ansiRegex = __webpack_require__(/*! ansi-regex */ \"(rsc)/./node_modules/inngest/node_modules/ansi-regex/index.js\");\nconst stripAnsi = (string)=>typeof string === \"string\" ? string.replace(ansiRegex(), \"\") : string;\nmodule.exports = stripAnsi;\nmodule.exports[\"default\"] = stripAnsi;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9ub2RlX21vZHVsZXMvc3RyaXAtYW5zaS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFlBQVlDLG1CQUFPQSxDQUFDO0FBRTFCLE1BQU1DLFlBQVlDLENBQUFBLFNBQVUsT0FBT0EsV0FBVyxXQUFXQSxPQUFPQyxPQUFPLENBQUNKLGFBQWEsTUFBTUc7QUFFM0ZFLE9BQU9DLE9BQU8sR0FBR0o7QUFDakJHLHlCQUFzQixHQUFHSCIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L25vZGVfbW9kdWxlcy9zdHJpcC1hbnNpL2luZGV4LmpzPzAxMjYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuY29uc3QgYW5zaVJlZ2V4ID0gcmVxdWlyZSgnYW5zaS1yZWdleCcpO1xuXG5jb25zdCBzdHJpcEFuc2kgPSBzdHJpbmcgPT4gdHlwZW9mIHN0cmluZyA9PT0gJ3N0cmluZycgPyBzdHJpbmcucmVwbGFjZShhbnNpUmVnZXgoKSwgJycpIDogc3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHN0cmlwQW5zaTtcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBzdHJpcEFuc2k7XG4iXSwibmFtZXMiOlsiYW5zaVJlZ2V4IiwicmVxdWlyZSIsInN0cmlwQW5zaSIsInN0cmluZyIsInJlcGxhY2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/node_modules/strip-ansi/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js":
/*!***********************************************************!*\
  !*** ./node_modules/inngest/_virtual/rolldown_runtime.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __export: () => (/* binding */ __export),\n/* harmony export */   __require: () => (/* binding */ __require)\n/* harmony export */ });\n//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __export = (all, symbols) => {\n\tlet target = {};\n\tfor (var name in all) {\n\t\t__defProp(target, name, {\n\t\t\tget: all[name],\n\t\t\tenumerable: true\n\t\t});\n\t}\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\treturn target;\n};\nvar __require = /* @__PURE__ */ ((x) => typeof require !== \"undefined\" ? require : typeof Proxy !== \"undefined\" ? new Proxy(x, { get: (a, b) => (typeof require !== \"undefined\" ? require : a)[b] }) : x)(function(x) {\n\tif (typeof require !== \"undefined\") return require.apply(this, arguments);\n\tthrow Error(\"Calling `require` for \\\"\" + x + \"\\\" in an environment that doesn't expose the `require` function.\");\n});\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMENBQTBDLGlCQUFpQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxpSUFBaUksa0VBQWtFO0FBQ25NO0FBQ0E7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qcz9iZmNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiByb2xsZG93bjpydW50aW1lXG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKGFsbCwgc3ltYm9scykgPT4ge1xuXHRsZXQgdGFyZ2V0ID0ge307XG5cdGZvciAodmFyIG5hbWUgaW4gYWxsKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgbmFtZSwge1xuXHRcdFx0Z2V0OiBhbGxbbmFtZV0sXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdH1cblx0aWYgKHN5bWJvbHMpIHtcblx0XHRfX2RlZlByb3AodGFyZ2V0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSk7XG5cdH1cblx0cmV0dXJuIHRhcmdldDtcbn07XG52YXIgX19yZXF1aXJlID0gLyogQF9fUFVSRV9fICovICgoeCkgPT4gdHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIgPyByZXF1aXJlIDogdHlwZW9mIFByb3h5ICE9PSBcInVuZGVmaW5lZFwiID8gbmV3IFByb3h5KHgsIHsgZ2V0OiAoYSwgYikgPT4gKHR5cGVvZiByZXF1aXJlICE9PSBcInVuZGVmaW5lZFwiID8gcmVxdWlyZSA6IGEpW2JdIH0pIDogeCkoZnVuY3Rpb24oeCkge1xuXHRpZiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiByZXF1aXJlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdHRocm93IEVycm9yKFwiQ2FsbGluZyBgcmVxdWlyZWAgZm9yIFxcXCJcIiArIHggKyBcIlxcXCIgaW4gYW4gZW52aXJvbm1lbnQgdGhhdCBkb2Vzbid0IGV4cG9zZSB0aGUgYHJlcXVpcmVgIGZ1bmN0aW9uLlwiKTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9fZXhwb3J0LCBfX3JlcXVpcmUgfTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/api/api.js":
/*!*****************************************!*\
  !*** ./node_modules/inngest/api/api.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestApi: () => (/* binding */ InngestApi)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _schema_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schema.js */ \"(rsc)/./node_modules/inngest/api/schema.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _helpers_devserver_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/devserver.js */ \"(rsc)/./node_modules/inngest/helpers/devserver.js\");\n/* harmony import */ var _helpers_net_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers/net.js */ \"(rsc)/./node_modules/inngest/helpers/net.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n\n\n\n\n\n//#region src/api/api.ts\nconst realtimeSubscriptionTokenSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ jwt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string() });\nconst sendSignalSuccessResponseSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ data: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ run_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1) }) });\nconst checkpointNewRunResponseSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ data: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\tfn_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n\tapp_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n\ttoken: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().min(1).optional()\n}) });\nvar InngestApi = class {\n\tapiBaseUrl;\n\tsigningKey;\n\tsigningKeyFallback;\n\tfetch;\n\tmode;\n\tconstructor({ baseUrl, signingKey, signingKeyFallback, fetch, mode }) {\n\t\tthis.apiBaseUrl = baseUrl;\n\t\tthis.signingKey = signingKey;\n\t\tthis.signingKeyFallback = signingKeyFallback;\n\t\tthis.fetch = fetch;\n\t\tthis.mode = mode;\n\t}\n\tget hashedKey() {\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__.hashSigningKey)(this.signingKey);\n\t}\n\tget hashedFallbackKey() {\n\t\tif (!this.signingKeyFallback) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__.hashSigningKey)(this.signingKeyFallback);\n\t}\n\tsetSigningKey(key) {\n\t\tif (typeof key === \"string\" && this.signingKey === \"\") this.signingKey = key;\n\t}\n\tsetSigningKeyFallback(key) {\n\t\tif (typeof key === \"string\" && !this.signingKeyFallback) this.signingKeyFallback = key;\n\t}\n\tasync getTargetUrl(path) {\n\t\tif (this.apiBaseUrl) return new URL(path, this.apiBaseUrl);\n\t\tlet url = new URL(path, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.defaultInngestApiBaseUrl);\n\t\tif (this.mode.isDev && this.mode.isInferred && !this.apiBaseUrl) {\n\t\t\tif (await (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_3__.devServerAvailable)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.defaultDevServerHost, this.fetch)) url = new URL(path, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.defaultDevServerHost);\n\t\t}\n\t\treturn url;\n\t}\n\tasync req(url, options) {\n\t\tconst finalUrl = typeof url === \"string\" ? await this.getTargetUrl(url) : url;\n\t\ttry {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(await (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_5__.fetchWithAuthFallback)({\n\t\t\t\tauthToken: this.hashedKey,\n\t\t\t\tauthTokenFallback: this.hashedFallbackKey,\n\t\t\t\tfetch: this.fetch,\n\t\t\t\turl: finalUrl,\n\t\t\t\toptions: {\n\t\t\t\t\t...options,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t...options?.headers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t} catch (error) {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(error);\n\t\t}\n\t}\n\tasync getRunSteps(runId, version) {\n\t\tconst result = await this.req(`/v0/runs/${runId}/actions`);\n\t\tif (result.ok) {\n\t\t\tconst res = result.value;\n\t\t\tconst data = await res.json();\n\t\t\tif (res.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.stepsSchemas[version].parse(data));\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(data));\n\t\t}\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error retrieving step data\"),\n\t\t\tstatus: 500\n\t\t});\n\t}\n\tasync getRunBatch(runId) {\n\t\tconst result = await this.req(`/v0/runs/${runId}/batch`);\n\t\tif (result.ok) {\n\t\t\tconst res = result.value;\n\t\t\tconst data = await res.json();\n\t\t\tif (res.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.batchSchema.parse(data));\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(data));\n\t\t}\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error retrieving event batch\"),\n\t\t\tstatus: 500\n\t\t});\n\t}\n\tasync publish(publishOptions, data) {\n\t\tconst isStream = data instanceof ReadableStream;\n\t\tconst url = await this.getTargetUrl(\"/v1/realtime/publish\");\n\t\turl.searchParams.set(\"channel\", publishOptions.channel || \"\");\n\t\tif (publishOptions.runId) url.searchParams.set(\"run_id\", publishOptions.runId);\n\t\tfor (const topic of publishOptions.topics) url.searchParams.append(\"topic\", topic);\n\t\tconst result = await this.req(url, {\n\t\t\tbody: isStream ? data : typeof data === \"string\" ? data : JSON.stringify(data),\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": isStream ? \"text/stream\" : \"application/json\" },\n\t\t\t...isStream ? { duplex: \"half\" } : {}\n\t\t});\n\t\tif (result.ok) {\n\t\t\tconst res = result.value;\n\t\t\tif (!res.ok) throw new Error(`Failed to publish event: ${res.status} ${res.statusText}`);\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(void 0);\n\t\t}\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error publishing event\"),\n\t\t\tstatus: 500\n\t\t});\n\t}\n\tasync sendSignal(signalOptions, options) {\n\t\tconst url = await this.getTargetUrl(\"/v1/signals\");\n\t\tconst body = {\n\t\t\tsignal: signalOptions.signal,\n\t\t\tdata: signalOptions.data\n\t\t};\n\t\treturn (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_5__.fetchWithAuthFallback)({\n\t\t\tauthToken: this.hashedKey,\n\t\t\tauthTokenFallback: this.hashedFallbackKey,\n\t\t\tfetch: this.fetch,\n\t\t\turl,\n\t\t\toptions: {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: JSON.stringify(body),\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t...options?.headers\n\t\t\t\t}\n\t\t\t}\n\t\t}).then(async (res) => {\n\t\t\tif (res.status === 404) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)({ runId: void 0 });\n\t\t\tconst resClone = res.clone();\n\t\t\tlet json;\n\t\t\ttry {\n\t\t\t\tjson = await res.json();\n\t\t\t} catch {\n\t\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\t\terror: `Failed to send signal: ${res.status} ${res.statusText} - ${await resClone.text()}`,\n\t\t\t\t\tstatus: res.status\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!res.ok) try {\n\t\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(json));\n\t\t\t} catch {\n\t\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\t\terror: `Failed to send signal: ${res.status} ${res.statusText} - ${await res.text()}`,\n\t\t\t\t\tstatus: res.status\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst parseRes = sendSignalSuccessResponseSchema.safeParse(json);\n\t\t\tif (!parseRes.success) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: `Successfully sent signal, but response parsing failed: ${res.status} ${res.statusText} - ${await resClone.text()}`,\n\t\t\t\tstatus: res.status\n\t\t\t});\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)({ runId: parseRes.data.data.run_id });\n\t\t}).catch((error) => {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(error, \"Unknown error sending signal\"),\n\t\t\t\tstatus: 500\n\t\t\t});\n\t\t});\n\t}\n\tasync getSubscriptionToken(channel, topics) {\n\t\tconst url = await this.getTargetUrl(\"/v1/realtime/token\");\n\t\tconst body = topics.map((topic) => ({\n\t\t\tchannel,\n\t\t\tname: topic,\n\t\t\tkind: \"run\"\n\t\t}));\n\t\treturn (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_5__.fetchWithAuthFallback)({\n\t\t\tauthToken: this.hashedKey,\n\t\t\tauthTokenFallback: this.hashedFallbackKey,\n\t\t\tfetch: this.fetch,\n\t\t\turl,\n\t\t\toptions: {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: JSON.stringify(body),\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" }\n\t\t\t}\n\t\t}).then(async (res) => {\n\t\t\tif (!res.ok) throw new Error(`Failed to get subscription token: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t\t\treturn realtimeSubscriptionTokenSchema.parse(await res.json()).jwt;\n\t\t}).catch((error) => {\n\t\t\tthrow new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(error, \"Unknown error getting subscription token\"));\n\t\t});\n\t}\n\tasync updateMetadata(args, options) {\n\t\tconst payload = {\n\t\t\ttarget: args.target,\n\t\t\tmetadata: args.metadata\n\t\t};\n\t\tconst result = await this.req(`/v1/runs/${args.target.run_id}/metadata`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(payload),\n\t\t\theaders: options?.headers\n\t\t});\n\t\tif (!result.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error updating metadata\"),\n\t\t\tstatus: 500\n\t\t});\n\t\tconst res = result.value;\n\t\tif (res.ok) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(void 0);\n\t\tconst resClone = res.clone();\n\t\tlet json;\n\t\ttry {\n\t\t\tjson = await res.json();\n\t\t} catch {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: `Failed to update metadata: ${res.status} ${res.statusText} - ${await resClone.text()}`,\n\t\t\t\tstatus: res.status\n\t\t\t});\n\t\t}\n\t\ttry {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(_schema_js__WEBPACK_IMPORTED_MODULE_6__.errorSchema.parse(json));\n\t\t} catch {\n\t\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)({\n\t\t\t\terror: `Failed to update metadata: ${res.status} ${res.statusText}`,\n\t\t\t\tstatus: res.status\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t* Start a new run, optionally passing in a number of steps to initialize the\n\t* run with.\n\t*/\n\tasync checkpointNewRun(args) {\n\t\tconst body = JSON.stringify({\n\t\t\trun_id: args.runId,\n\t\t\tevent: args.event,\n\t\t\tsteps: args.steps,\n\t\t\tts: (/* @__PURE__ */ new Date()).valueOf()\n\t\t});\n\t\tconst result = await this.req(\"/v1/checkpoint\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody\n\t\t});\n\t\tif (!result.ok) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error checkpointing new run\"));\n\t\tconst res = result.value;\n\t\tif (res.ok) {\n\t\t\tconst rawData = await res.json();\n\t\t\treturn checkpointNewRunResponseSchema.parse(rawData);\n\t\t}\n\t\tthrow new Error(`Failed to checkpoint new run: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t}\n\t/**\n\t* Checkpoint steps for a given sync run.\n\t*/\n\tasync checkpointSteps(args) {\n\t\tconst body = JSON.stringify({\n\t\t\tfn_id: args.fnId,\n\t\t\tapp_id: args.appId,\n\t\t\trun_id: args.runId,\n\t\t\tsteps: args.steps,\n\t\t\tts: (/* @__PURE__ */ new Date()).valueOf()\n\t\t});\n\t\tconst result = await this.req(`/v1/checkpoint/${args.runId}/steps`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody\n\t\t});\n\t\tif (!result.ok) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error checkpointing steps\"));\n\t\tconst res = result.value;\n\t\tif (!res.ok) throw new Error(`Failed to checkpoint steps: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t}\n\t/**\n\t* Checkpoint steps for a given async run.\n\t*/\n\tasync checkpointStepsAsync(args) {\n\t\tconst body = JSON.stringify({\n\t\t\trun_id: args.runId,\n\t\t\tfn_id: args.fnId,\n\t\t\tqi_id: args.queueItemId,\n\t\t\tsteps: args.steps,\n\t\t\tts: (/* @__PURE__ */ new Date()).valueOf()\n\t\t});\n\t\tconst result = await this.req(`/v1/checkpoint/${args.runId}/async`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody\n\t\t});\n\t\tif (!result.ok) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.getErrorMessage)(result.error, \"Unknown error checkpointing async\"));\n\t\tconst res = result.value;\n\t\tif (!res.ok) throw new Error(`Failed to checkpoint async: ${res.status} ${res.statusText} - ${await res.text()}`);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9hcGkvYXBpLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFzRjtBQUNoRDtBQUMrQjtBQUNkO0FBQ0E7QUFDTTtBQUNIO0FBQy9COztBQUUzQjtBQUNBLHdDQUF3QywwQ0FBUSxHQUFHLEtBQUssMENBQVEsSUFBSTtBQUNwRSx3Q0FBd0MsMENBQVEsR0FBRyxNQUFNLDBDQUFRLEdBQUcsUUFBUSwwQ0FBUSxXQUFXLEdBQUc7QUFDbEcsdUNBQXVDLDBDQUFRLEdBQUcsTUFBTSwwQ0FBUTtBQUNoRSxRQUFRLDBDQUFRO0FBQ2hCLFNBQVMsMENBQVE7QUFDakIsU0FBUywwQ0FBUTtBQUNqQixRQUFRLDBDQUFRO0FBQ2hCLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQXNEO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtRUFBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1FQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3RUFBd0I7QUFDbEQ7QUFDQSxhQUFhLHlFQUFrQixDQUFDLG9FQUFvQixtQ0FBbUMsb0VBQW9CO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsNkNBQUUsT0FBTyxzRUFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0osVUFBVSw4Q0FBRztBQUNiO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxNQUFNO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2Q0FBRSxDQUFDLG9EQUFZO0FBQ3JDLFVBQVUsOENBQUcsQ0FBQyxtREFBVztBQUN6QjtBQUNBLFNBQVMsOENBQUc7QUFDWixVQUFVLG1FQUFlO0FBQ3pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw0Q0FBNEMsTUFBTTtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQUUsQ0FBQyxtREFBVztBQUNwQyxVQUFVLDhDQUFHLENBQUMsbURBQVc7QUFDekI7QUFDQSxTQUFTLDhDQUFHO0FBQ1osVUFBVSxtRUFBZTtBQUN6QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK0RBQStEO0FBQzdFLG1CQUFtQixpQkFBaUI7QUFDcEMsR0FBRztBQUNIO0FBQ0E7QUFDQSw0REFBNEQsWUFBWSxFQUFFLGVBQWU7QUFDekYsVUFBVSw2Q0FBRTtBQUNaO0FBQ0EsU0FBUyw4Q0FBRztBQUNaLFVBQVUsbUVBQWU7QUFDekI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNFQUFxQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0NBQWtDLDZDQUFFLEdBQUcsZUFBZTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxXQUFXLDhDQUFHO0FBQ2Qsc0NBQXNDLFlBQVksRUFBRSxnQkFBZ0IsSUFBSSxzQkFBc0I7QUFDOUY7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFdBQVcsOENBQUcsQ0FBQyxtREFBVztBQUMxQixLQUFLO0FBQ0wsV0FBVyw4Q0FBRztBQUNkLHNDQUFzQyxZQUFZLEVBQUUsZ0JBQWdCLElBQUksaUJBQWlCO0FBQ3pGO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxpQ0FBaUMsOENBQUc7QUFDcEMscUVBQXFFLFlBQVksRUFBRSxnQkFBZ0IsSUFBSSxzQkFBc0I7QUFDN0g7QUFDQSxJQUFJO0FBQ0osVUFBVSw2Q0FBRSxHQUFHLGtDQUFrQztBQUNqRCxHQUFHO0FBQ0gsVUFBVSw4Q0FBRztBQUNiLFdBQVcsbUVBQWU7QUFDMUI7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsc0VBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsR0FBRztBQUNILHFFQUFxRSxZQUFZLEVBQUUsZ0JBQWdCLElBQUksaUJBQWlCO0FBQ3hIO0FBQ0EsR0FBRztBQUNILG1CQUFtQixtRUFBZTtBQUNsQyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLG1CQUFtQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gseUJBQXlCLDhDQUFHO0FBQzVCLFVBQVUsbUVBQWU7QUFDekI7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxQkFBcUIsNkNBQUU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osVUFBVSw4Q0FBRztBQUNiLHlDQUF5QyxZQUFZLEVBQUUsZ0JBQWdCLElBQUksc0JBQXNCO0FBQ2pHO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxVQUFVLDhDQUFHLENBQUMsbURBQVc7QUFDekIsSUFBSTtBQUNKLFVBQVUsOENBQUc7QUFDYix5Q0FBeUMsWUFBWSxFQUFFLGVBQWU7QUFDdEU7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxrQ0FBa0MsbUVBQWU7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxZQUFZLEVBQUUsZ0JBQWdCLElBQUksaUJBQWlCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0RBQWtELFdBQVc7QUFDN0Q7QUFDQTtBQUNBLEdBQUc7QUFDSCxrQ0FBa0MsbUVBQWU7QUFDakQ7QUFDQSw4REFBOEQsWUFBWSxFQUFFLGdCQUFnQixJQUFJLGlCQUFpQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtEQUFrRCxXQUFXO0FBQzdEO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0NBQWtDLG1FQUFlO0FBQ2pEO0FBQ0EsOERBQThELFlBQVksRUFBRSxnQkFBZ0IsSUFBSSxpQkFBaUI7QUFDakg7QUFDQTs7QUFFQTtBQUNzQjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2FwaS9hcGkuanM/NmUzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZhdWx0RGV2U2VydmVySG9zdCwgZGVmYXVsdElubmdlc3RBcGlCYXNlVXJsIH0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RzLmpzXCI7XG5pbXBvcnQgeyBlcnIsIG9rIH0gZnJvbSBcIi4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBiYXRjaFNjaGVtYSwgZXJyb3JTY2hlbWEsIHN0ZXBzU2NoZW1hcyB9IGZyb20gXCIuL3NjaGVtYS5qc1wiO1xuaW1wb3J0IHsgZ2V0RXJyb3JNZXNzYWdlIH0gZnJvbSBcIi4uL2hlbHBlcnMvZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBoYXNoU2lnbmluZ0tleSB9IGZyb20gXCIuLi9oZWxwZXJzL3N0cmluZ3MuanNcIjtcbmltcG9ydCB7IGRldlNlcnZlckF2YWlsYWJsZSB9IGZyb20gXCIuLi9oZWxwZXJzL2RldnNlcnZlci5qc1wiO1xuaW1wb3J0IHsgZmV0Y2hXaXRoQXV0aEZhbGxiYWNrIH0gZnJvbSBcIi4uL2hlbHBlcnMvbmV0LmpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9hcGkudHNcbmNvbnN0IHJlYWx0aW1lU3Vic2NyaXB0aW9uVG9rZW5TY2hlbWEgPSB6Lm9iamVjdCh7IGp3dDogei5zdHJpbmcoKSB9KTtcbmNvbnN0IHNlbmRTaWduYWxTdWNjZXNzUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7IGRhdGE6IHoub2JqZWN0KHsgcnVuX2lkOiB6LnN0cmluZygpLm1pbigxKSB9KSB9KTtcbmNvbnN0IGNoZWNrcG9pbnROZXdSdW5SZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHsgZGF0YTogei5vYmplY3Qoe1xuXHRmbl9pZDogei5zdHJpbmcoKS5taW4oMSksXG5cdGFwcF9pZDogei5zdHJpbmcoKS5taW4oMSksXG5cdHJ1bl9pZDogei5zdHJpbmcoKS5taW4oMSksXG5cdHRva2VuOiB6LnN0cmluZygpLm1pbigxKS5vcHRpb25hbCgpXG59KSB9KTtcbnZhciBJbm5nZXN0QXBpID0gY2xhc3Mge1xuXHRhcGlCYXNlVXJsO1xuXHRzaWduaW5nS2V5O1xuXHRzaWduaW5nS2V5RmFsbGJhY2s7XG5cdGZldGNoO1xuXHRtb2RlO1xuXHRjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIHNpZ25pbmdLZXksIHNpZ25pbmdLZXlGYWxsYmFjaywgZmV0Y2gsIG1vZGUgfSkge1xuXHRcdHRoaXMuYXBpQmFzZVVybCA9IGJhc2VVcmw7XG5cdFx0dGhpcy5zaWduaW5nS2V5ID0gc2lnbmluZ0tleTtcblx0XHR0aGlzLnNpZ25pbmdLZXlGYWxsYmFjayA9IHNpZ25pbmdLZXlGYWxsYmFjaztcblx0XHR0aGlzLmZldGNoID0gZmV0Y2g7XG5cdFx0dGhpcy5tb2RlID0gbW9kZTtcblx0fVxuXHRnZXQgaGFzaGVkS2V5KCkge1xuXHRcdHJldHVybiBoYXNoU2lnbmluZ0tleSh0aGlzLnNpZ25pbmdLZXkpO1xuXHR9XG5cdGdldCBoYXNoZWRGYWxsYmFja0tleSgpIHtcblx0XHRpZiAoIXRoaXMuc2lnbmluZ0tleUZhbGxiYWNrKSByZXR1cm47XG5cdFx0cmV0dXJuIGhhc2hTaWduaW5nS2V5KHRoaXMuc2lnbmluZ0tleUZhbGxiYWNrKTtcblx0fVxuXHRzZXRTaWduaW5nS2V5KGtleSkge1xuXHRcdGlmICh0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICYmIHRoaXMuc2lnbmluZ0tleSA9PT0gXCJcIikgdGhpcy5zaWduaW5nS2V5ID0ga2V5O1xuXHR9XG5cdHNldFNpZ25pbmdLZXlGYWxsYmFjayhrZXkpIHtcblx0XHRpZiAodHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiAmJiAhdGhpcy5zaWduaW5nS2V5RmFsbGJhY2spIHRoaXMuc2lnbmluZ0tleUZhbGxiYWNrID0ga2V5O1xuXHR9XG5cdGFzeW5jIGdldFRhcmdldFVybChwYXRoKSB7XG5cdFx0aWYgKHRoaXMuYXBpQmFzZVVybCkgcmV0dXJuIG5ldyBVUkwocGF0aCwgdGhpcy5hcGlCYXNlVXJsKTtcblx0XHRsZXQgdXJsID0gbmV3IFVSTChwYXRoLCBkZWZhdWx0SW5uZ2VzdEFwaUJhc2VVcmwpO1xuXHRcdGlmICh0aGlzLm1vZGUuaXNEZXYgJiYgdGhpcy5tb2RlLmlzSW5mZXJyZWQgJiYgIXRoaXMuYXBpQmFzZVVybCkge1xuXHRcdFx0aWYgKGF3YWl0IGRldlNlcnZlckF2YWlsYWJsZShkZWZhdWx0RGV2U2VydmVySG9zdCwgdGhpcy5mZXRjaCkpIHVybCA9IG5ldyBVUkwocGF0aCwgZGVmYXVsdERldlNlcnZlckhvc3QpO1xuXHRcdH1cblx0XHRyZXR1cm4gdXJsO1xuXHR9XG5cdGFzeW5jIHJlcSh1cmwsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBmaW5hbFVybCA9IHR5cGVvZiB1cmwgPT09IFwic3RyaW5nXCIgPyBhd2FpdCB0aGlzLmdldFRhcmdldFVybCh1cmwpIDogdXJsO1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gb2soYXdhaXQgZmV0Y2hXaXRoQXV0aEZhbGxiYWNrKHtcblx0XHRcdFx0YXV0aFRva2VuOiB0aGlzLmhhc2hlZEtleSxcblx0XHRcdFx0YXV0aFRva2VuRmFsbGJhY2s6IHRoaXMuaGFzaGVkRmFsbGJhY2tLZXksXG5cdFx0XHRcdGZldGNoOiB0aGlzLmZldGNoLFxuXHRcdFx0XHR1cmw6IGZpbmFsVXJsLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHRcdC4uLm9wdGlvbnM/LmhlYWRlcnNcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0cmV0dXJuIGVycihlcnJvcik7XG5cdFx0fVxuXHR9XG5cdGFzeW5jIGdldFJ1blN0ZXBzKHJ1bklkLCB2ZXJzaW9uKSB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZXEoYC92MC9ydW5zLyR7cnVuSWR9L2FjdGlvbnNgKTtcblx0XHRpZiAocmVzdWx0Lm9rKSB7XG5cdFx0XHRjb25zdCByZXMgPSByZXN1bHQudmFsdWU7XG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcblx0XHRcdGlmIChyZXMub2spIHJldHVybiBvayhzdGVwc1NjaGVtYXNbdmVyc2lvbl0ucGFyc2UoZGF0YSkpO1xuXHRcdFx0cmV0dXJuIGVycihlcnJvclNjaGVtYS5wYXJzZShkYXRhKSk7XG5cdFx0fVxuXHRcdHJldHVybiBlcnIoe1xuXHRcdFx0ZXJyb3I6IGdldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IsIFwiVW5rbm93biBlcnJvciByZXRyaWV2aW5nIHN0ZXAgZGF0YVwiKSxcblx0XHRcdHN0YXR1czogNTAwXG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgZ2V0UnVuQmF0Y2gocnVuSWQpIHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlcShgL3YwL3J1bnMvJHtydW5JZH0vYmF0Y2hgKTtcblx0XHRpZiAocmVzdWx0Lm9rKSB7XG5cdFx0XHRjb25zdCByZXMgPSByZXN1bHQudmFsdWU7XG5cdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcblx0XHRcdGlmIChyZXMub2spIHJldHVybiBvayhiYXRjaFNjaGVtYS5wYXJzZShkYXRhKSk7XG5cdFx0XHRyZXR1cm4gZXJyKGVycm9yU2NoZW1hLnBhcnNlKGRhdGEpKTtcblx0XHR9XG5cdFx0cmV0dXJuIGVycih7XG5cdFx0XHRlcnJvcjogZ2V0RXJyb3JNZXNzYWdlKHJlc3VsdC5lcnJvciwgXCJVbmtub3duIGVycm9yIHJldHJpZXZpbmcgZXZlbnQgYmF0Y2hcIiksXG5cdFx0XHRzdGF0dXM6IDUwMFxuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIHB1Ymxpc2gocHVibGlzaE9wdGlvbnMsIGRhdGEpIHtcblx0XHRjb25zdCBpc1N0cmVhbSA9IGRhdGEgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbTtcblx0XHRjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmdldFRhcmdldFVybChcIi92MS9yZWFsdGltZS9wdWJsaXNoXCIpO1xuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2hhbm5lbFwiLCBwdWJsaXNoT3B0aW9ucy5jaGFubmVsIHx8IFwiXCIpO1xuXHRcdGlmIChwdWJsaXNoT3B0aW9ucy5ydW5JZCkgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJydW5faWRcIiwgcHVibGlzaE9wdGlvbnMucnVuSWQpO1xuXHRcdGZvciAoY29uc3QgdG9waWMgb2YgcHVibGlzaE9wdGlvbnMudG9waWNzKSB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChcInRvcGljXCIsIHRvcGljKTtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlcSh1cmwsIHtcblx0XHRcdGJvZHk6IGlzU3RyZWFtID8gZGF0YSA6IHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiID8gZGF0YSA6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogaXNTdHJlYW0gPyBcInRleHQvc3RyZWFtXCIgOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0Li4uaXNTdHJlYW0gPyB7IGR1cGxleDogXCJoYWxmXCIgfSA6IHt9XG5cdFx0fSk7XG5cdFx0aWYgKHJlc3VsdC5vaykge1xuXHRcdFx0Y29uc3QgcmVzID0gcmVzdWx0LnZhbHVlO1xuXHRcdFx0aWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHB1Ymxpc2ggZXZlbnQ6ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcblx0XHRcdHJldHVybiBvayh2b2lkIDApO1xuXHRcdH1cblx0XHRyZXR1cm4gZXJyKHtcblx0XHRcdGVycm9yOiBnZXRFcnJvck1lc3NhZ2UocmVzdWx0LmVycm9yLCBcIlVua25vd24gZXJyb3IgcHVibGlzaGluZyBldmVudFwiKSxcblx0XHRcdHN0YXR1czogNTAwXG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgc2VuZFNpZ25hbChzaWduYWxPcHRpb25zLCBvcHRpb25zKSB7XG5cdFx0Y29uc3QgdXJsID0gYXdhaXQgdGhpcy5nZXRUYXJnZXRVcmwoXCIvdjEvc2lnbmFsc1wiKTtcblx0XHRjb25zdCBib2R5ID0ge1xuXHRcdFx0c2lnbmFsOiBzaWduYWxPcHRpb25zLnNpZ25hbCxcblx0XHRcdGRhdGE6IHNpZ25hbE9wdGlvbnMuZGF0YVxuXHRcdH07XG5cdFx0cmV0dXJuIGZldGNoV2l0aEF1dGhGYWxsYmFjayh7XG5cdFx0XHRhdXRoVG9rZW46IHRoaXMuaGFzaGVkS2V5LFxuXHRcdFx0YXV0aFRva2VuRmFsbGJhY2s6IHRoaXMuaGFzaGVkRmFsbGJhY2tLZXksXG5cdFx0XHRmZXRjaDogdGhpcy5mZXRjaCxcblx0XHRcdHVybCxcblx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHQuLi5vcHRpb25zPy5oZWFkZXJzXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KS50aGVuKGFzeW5jIChyZXMpID0+IHtcblx0XHRcdGlmIChyZXMuc3RhdHVzID09PSA0MDQpIHJldHVybiBvayh7IHJ1bklkOiB2b2lkIDAgfSk7XG5cdFx0XHRjb25zdCByZXNDbG9uZSA9IHJlcy5jbG9uZSgpO1xuXHRcdFx0bGV0IGpzb247XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRyZXR1cm4gZXJyKHtcblx0XHRcdFx0XHRlcnJvcjogYEZhaWxlZCB0byBzZW5kIHNpZ25hbDogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fSAtICR7YXdhaXQgcmVzQ2xvbmUudGV4dCgpfWAsXG5cdFx0XHRcdFx0c3RhdHVzOiByZXMuc3RhdHVzXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFyZXMub2spIHRyeSB7XG5cdFx0XHRcdHJldHVybiBlcnIoZXJyb3JTY2hlbWEucGFyc2UoanNvbikpO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdHJldHVybiBlcnIoe1xuXHRcdFx0XHRcdGVycm9yOiBgRmFpbGVkIHRvIHNlbmQgc2lnbmFsOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9IC0gJHthd2FpdCByZXMudGV4dCgpfWAsXG5cdFx0XHRcdFx0c3RhdHVzOiByZXMuc3RhdHVzXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcGFyc2VSZXMgPSBzZW5kU2lnbmFsU3VjY2Vzc1Jlc3BvbnNlU2NoZW1hLnNhZmVQYXJzZShqc29uKTtcblx0XHRcdGlmICghcGFyc2VSZXMuc3VjY2VzcykgcmV0dXJuIGVycih7XG5cdFx0XHRcdGVycm9yOiBgU3VjY2Vzc2Z1bGx5IHNlbnQgc2lnbmFsLCBidXQgcmVzcG9uc2UgcGFyc2luZyBmYWlsZWQ6ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH0gLSAke2F3YWl0IHJlc0Nsb25lLnRleHQoKX1gLFxuXHRcdFx0XHRzdGF0dXM6IHJlcy5zdGF0dXNcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIG9rKHsgcnVuSWQ6IHBhcnNlUmVzLmRhdGEuZGF0YS5ydW5faWQgfSk7XG5cdFx0fSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0XHRyZXR1cm4gZXJyKHtcblx0XHRcdFx0ZXJyb3I6IGdldEVycm9yTWVzc2FnZShlcnJvciwgXCJVbmtub3duIGVycm9yIHNlbmRpbmcgc2lnbmFsXCIpLFxuXHRcdFx0XHRzdGF0dXM6IDUwMFxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgZ2V0U3Vic2NyaXB0aW9uVG9rZW4oY2hhbm5lbCwgdG9waWNzKSB7XG5cdFx0Y29uc3QgdXJsID0gYXdhaXQgdGhpcy5nZXRUYXJnZXRVcmwoXCIvdjEvcmVhbHRpbWUvdG9rZW5cIik7XG5cdFx0Y29uc3QgYm9keSA9IHRvcGljcy5tYXAoKHRvcGljKSA9PiAoe1xuXHRcdFx0Y2hhbm5lbCxcblx0XHRcdG5hbWU6IHRvcGljLFxuXHRcdFx0a2luZDogXCJydW5cIlxuXHRcdH0pKTtcblx0XHRyZXR1cm4gZmV0Y2hXaXRoQXV0aEZhbGxiYWNrKHtcblx0XHRcdGF1dGhUb2tlbjogdGhpcy5oYXNoZWRLZXksXG5cdFx0XHRhdXRoVG9rZW5GYWxsYmFjazogdGhpcy5oYXNoZWRGYWxsYmFja0tleSxcblx0XHRcdGZldGNoOiB0aGlzLmZldGNoLFxuXHRcdFx0dXJsLFxuXHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcblx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9XG5cdFx0XHR9XG5cdFx0fSkudGhlbihhc3luYyAocmVzKSA9PiB7XG5cdFx0XHRpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHN1YnNjcmlwdGlvbiB0b2tlbjogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fSAtICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcblx0XHRcdHJldHVybiByZWFsdGltZVN1YnNjcmlwdGlvblRva2VuU2NoZW1hLnBhcnNlKGF3YWl0IHJlcy5qc29uKCkpLmp3dDtcblx0XHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihnZXRFcnJvck1lc3NhZ2UoZXJyb3IsIFwiVW5rbm93biBlcnJvciBnZXR0aW5nIHN1YnNjcmlwdGlvbiB0b2tlblwiKSk7XG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgdXBkYXRlTWV0YWRhdGEoYXJncywgb3B0aW9ucykge1xuXHRcdGNvbnN0IHBheWxvYWQgPSB7XG5cdFx0XHR0YXJnZXQ6IGFyZ3MudGFyZ2V0LFxuXHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGFcblx0XHR9O1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVxKGAvdjEvcnVucy8ke2FyZ3MudGFyZ2V0LnJ1bl9pZH0vbWV0YWRhdGFgLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG5cdFx0XHRoZWFkZXJzOiBvcHRpb25zPy5oZWFkZXJzXG5cdFx0fSk7XG5cdFx0aWYgKCFyZXN1bHQub2spIHJldHVybiBlcnIoe1xuXHRcdFx0ZXJyb3I6IGdldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IsIFwiVW5rbm93biBlcnJvciB1cGRhdGluZyBtZXRhZGF0YVwiKSxcblx0XHRcdHN0YXR1czogNTAwXG5cdFx0fSk7XG5cdFx0Y29uc3QgcmVzID0gcmVzdWx0LnZhbHVlO1xuXHRcdGlmIChyZXMub2spIHJldHVybiBvayh2b2lkIDApO1xuXHRcdGNvbnN0IHJlc0Nsb25lID0gcmVzLmNsb25lKCk7XG5cdFx0bGV0IGpzb247XG5cdFx0dHJ5IHtcblx0XHRcdGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0cmV0dXJuIGVycih7XG5cdFx0XHRcdGVycm9yOiBgRmFpbGVkIHRvIHVwZGF0ZSBtZXRhZGF0YTogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fSAtICR7YXdhaXQgcmVzQ2xvbmUudGV4dCgpfWAsXG5cdFx0XHRcdHN0YXR1czogcmVzLnN0YXR1c1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gZXJyKGVycm9yU2NoZW1hLnBhcnNlKGpzb24pKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiBlcnIoe1xuXHRcdFx0XHRlcnJvcjogYEZhaWxlZCB0byB1cGRhdGUgbWV0YWRhdGE6ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gLFxuXHRcdFx0XHRzdGF0dXM6IHJlcy5zdGF0dXNcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHQvKipcblx0KiBTdGFydCBhIG5ldyBydW4sIG9wdGlvbmFsbHkgcGFzc2luZyBpbiBhIG51bWJlciBvZiBzdGVwcyB0byBpbml0aWFsaXplIHRoZVxuXHQqIHJ1biB3aXRoLlxuXHQqL1xuXHRhc3luYyBjaGVja3BvaW50TmV3UnVuKGFyZ3MpIHtcblx0XHRjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0cnVuX2lkOiBhcmdzLnJ1bklkLFxuXHRcdFx0ZXZlbnQ6IGFyZ3MuZXZlbnQsXG5cdFx0XHRzdGVwczogYXJncy5zdGVwcyxcblx0XHRcdHRzOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnZhbHVlT2YoKVxuXHRcdH0pO1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVxKFwiL3YxL2NoZWNrcG9pbnRcIiwge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGJvZHlcblx0XHR9KTtcblx0XHRpZiAoIXJlc3VsdC5vaykgdGhyb3cgbmV3IEVycm9yKGdldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IsIFwiVW5rbm93biBlcnJvciBjaGVja3BvaW50aW5nIG5ldyBydW5cIikpO1xuXHRcdGNvbnN0IHJlcyA9IHJlc3VsdC52YWx1ZTtcblx0XHRpZiAocmVzLm9rKSB7XG5cdFx0XHRjb25zdCByYXdEYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcblx0XHRcdHJldHVybiBjaGVja3BvaW50TmV3UnVuUmVzcG9uc2VTY2hlbWEucGFyc2UocmF3RGF0YSk7XG5cdFx0fVxuXHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNoZWNrcG9pbnQgbmV3IHJ1bjogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fSAtICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcblx0fVxuXHQvKipcblx0KiBDaGVja3BvaW50IHN0ZXBzIGZvciBhIGdpdmVuIHN5bmMgcnVuLlxuXHQqL1xuXHRhc3luYyBjaGVja3BvaW50U3RlcHMoYXJncykge1xuXHRcdGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRmbl9pZDogYXJncy5mbklkLFxuXHRcdFx0YXBwX2lkOiBhcmdzLmFwcElkLFxuXHRcdFx0cnVuX2lkOiBhcmdzLnJ1bklkLFxuXHRcdFx0c3RlcHM6IGFyZ3Muc3RlcHMsXG5cdFx0XHR0czogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS52YWx1ZU9mKClcblx0XHR9KTtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlcShgL3YxL2NoZWNrcG9pbnQvJHthcmdzLnJ1bklkfS9zdGVwc2AsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRib2R5XG5cdFx0fSk7XG5cdFx0aWYgKCFyZXN1bHQub2spIHRocm93IG5ldyBFcnJvcihnZXRFcnJvck1lc3NhZ2UocmVzdWx0LmVycm9yLCBcIlVua25vd24gZXJyb3IgY2hlY2twb2ludGluZyBzdGVwc1wiKSk7XG5cdFx0Y29uc3QgcmVzID0gcmVzdWx0LnZhbHVlO1xuXHRcdGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjaGVja3BvaW50IHN0ZXBzOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9IC0gJHthd2FpdCByZXMudGV4dCgpfWApO1xuXHR9XG5cdC8qKlxuXHQqIENoZWNrcG9pbnQgc3RlcHMgZm9yIGEgZ2l2ZW4gYXN5bmMgcnVuLlxuXHQqL1xuXHRhc3luYyBjaGVja3BvaW50U3RlcHNBc3luYyhhcmdzKSB7XG5cdFx0Y29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdHJ1bl9pZDogYXJncy5ydW5JZCxcblx0XHRcdGZuX2lkOiBhcmdzLmZuSWQsXG5cdFx0XHRxaV9pZDogYXJncy5xdWV1ZUl0ZW1JZCxcblx0XHRcdHN0ZXBzOiBhcmdzLnN0ZXBzLFxuXHRcdFx0dHM6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudmFsdWVPZigpXG5cdFx0fSk7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZXEoYC92MS9jaGVja3BvaW50LyR7YXJncy5ydW5JZH0vYXN5bmNgLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0Ym9keVxuXHRcdH0pO1xuXHRcdGlmICghcmVzdWx0Lm9rKSB0aHJvdyBuZXcgRXJyb3IoZ2V0RXJyb3JNZXNzYWdlKHJlc3VsdC5lcnJvciwgXCJVbmtub3duIGVycm9yIGNoZWNrcG9pbnRpbmcgYXN5bmNcIikpO1xuXHRcdGNvbnN0IHJlcyA9IHJlc3VsdC52YWx1ZTtcblx0XHRpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2hlY2twb2ludCBhc3luYzogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fSAtICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBJbm5nZXN0QXBpIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/api/api.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/api/schema.js":
/*!********************************************!*\
  !*** ./node_modules/inngest/api/schema.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   batchSchema: () => (/* binding */ batchSchema),\n/* harmony export */   errorSchema: () => (/* binding */ errorSchema),\n/* harmony export */   stepsSchemas: () => (/* binding */ stepsSchemas)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n//#region src/api/schema.ts\nconst errorSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tstatus: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nconst v0StepSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().refine((v) => typeof v !== \"undefined\", { message: \"Values in steps must be defined\" })).optional().nullable();\nconst v1StepSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(\"data\").optional().default(\"data\"),\n\tdata: zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().refine((v) => typeof v !== \"undefined\", { message: \"Data in steps must be defined\" })\n}).strict().or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\").optional().default(\"error\"),\n\terror: _types_js__WEBPACK_IMPORTED_MODULE_1__.jsonErrorSchema\n}).strict()).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(\"input\").optional().default(\"input\"),\n\tinput: zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().refine((v) => typeof v !== \"undefined\", { message: \"If input is present it must not be `undefined`\" })\n}).strict()).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any().transform((v) => ({\n\ttype: \"data\",\n\tdata: v\n})))).default({});\nconst v2StepSchema = v1StepSchema;\nconst stepsSchemas = {\n\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0]: v0StepSchema,\n\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1]: v1StepSchema,\n\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2]: v2StepSchema\n};\nconst batchSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()).transform((v) => v));\n\n//#endregion\n\n//# sourceMappingURL=schema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9hcGkvc2NoZW1hLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNWO0FBQ25COztBQUUzQjtBQUNBLG9CQUFvQiwwQ0FBUTtBQUM1QixRQUFRLDBDQUFRO0FBQ2hCLFNBQVMsMENBQVE7QUFDakIsQ0FBQztBQUNELHFCQUFxQiwwQ0FBUSxDQUFDLHVDQUFLLDZDQUE2Qyw0Q0FBNEM7QUFDNUgscUJBQXFCLDBDQUFRLENBQUMsMENBQVE7QUFDdEMsT0FBTywyQ0FBUztBQUNoQixPQUFPLHVDQUFLLDZDQUE2QywwQ0FBMEM7QUFDbkcsQ0FBQyxjQUFjLDBDQUFRO0FBQ3ZCLE9BQU8sMkNBQVM7QUFDaEIsUUFBUSxzREFBZTtBQUN2QixDQUFDLGVBQWUsMENBQVE7QUFDeEIsT0FBTywyQ0FBUztBQUNoQixRQUFRLHVDQUFLLDZDQUE2QywyREFBMkQ7QUFDckgsQ0FBQyxlQUFlLHVDQUFLO0FBQ3JCO0FBQ0E7QUFDQSxDQUFDLGVBQWU7QUFDaEI7QUFDQTtBQUNBLEVBQUUsZ0VBQWdCO0FBQ2xCLEVBQUUsZ0VBQWdCO0FBQ2xCLEVBQUUsZ0VBQWdCO0FBQ2xCO0FBQ0Esb0JBQW9CLHlDQUFPLENBQUMsMENBQVEsQ0FBQyx1Q0FBSzs7QUFFMUM7QUFDa0Q7QUFDbEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9hcGkvc2NoZW1hLmpzP2Q0OTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXhlY3V0aW9uVmVyc2lvbiB9IGZyb20gXCIuLi9oZWxwZXJzL2NvbnN0cy5qc1wiO1xuaW1wb3J0IHsganNvbkVycm9yU2NoZW1hIH0gZnJvbSBcIi4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92M1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9zY2hlbWEudHNcbmNvbnN0IGVycm9yU2NoZW1hID0gei5vYmplY3Qoe1xuXHRlcnJvcjogei5zdHJpbmcoKSxcblx0c3RhdHVzOiB6Lm51bWJlcigpXG59KTtcbmNvbnN0IHYwU3RlcFNjaGVtYSA9IHoucmVjb3JkKHouYW55KCkucmVmaW5lKCh2KSA9PiB0eXBlb2YgdiAhPT0gXCJ1bmRlZmluZWRcIiwgeyBtZXNzYWdlOiBcIlZhbHVlcyBpbiBzdGVwcyBtdXN0IGJlIGRlZmluZWRcIiB9KSkub3B0aW9uYWwoKS5udWxsYWJsZSgpO1xuY29uc3QgdjFTdGVwU2NoZW1hID0gei5yZWNvcmQoei5vYmplY3Qoe1xuXHR0eXBlOiB6LmxpdGVyYWwoXCJkYXRhXCIpLm9wdGlvbmFsKCkuZGVmYXVsdChcImRhdGFcIiksXG5cdGRhdGE6IHouYW55KCkucmVmaW5lKCh2KSA9PiB0eXBlb2YgdiAhPT0gXCJ1bmRlZmluZWRcIiwgeyBtZXNzYWdlOiBcIkRhdGEgaW4gc3RlcHMgbXVzdCBiZSBkZWZpbmVkXCIgfSlcbn0pLnN0cmljdCgpLm9yKHoub2JqZWN0KHtcblx0dHlwZTogei5saXRlcmFsKFwiZXJyb3JcIikub3B0aW9uYWwoKS5kZWZhdWx0KFwiZXJyb3JcIiksXG5cdGVycm9yOiBqc29uRXJyb3JTY2hlbWFcbn0pLnN0cmljdCgpKS5vcih6Lm9iamVjdCh7XG5cdHR5cGU6IHoubGl0ZXJhbChcImlucHV0XCIpLm9wdGlvbmFsKCkuZGVmYXVsdChcImlucHV0XCIpLFxuXHRpbnB1dDogei5hbnkoKS5yZWZpbmUoKHYpID0+IHR5cGVvZiB2ICE9PSBcInVuZGVmaW5lZFwiLCB7IG1lc3NhZ2U6IFwiSWYgaW5wdXQgaXMgcHJlc2VudCBpdCBtdXN0IG5vdCBiZSBgdW5kZWZpbmVkYFwiIH0pXG59KS5zdHJpY3QoKSkub3Ioei5hbnkoKS50cmFuc2Zvcm0oKHYpID0+ICh7XG5cdHR5cGU6IFwiZGF0YVwiLFxuXHRkYXRhOiB2XG59KSkpKS5kZWZhdWx0KHt9KTtcbmNvbnN0IHYyU3RlcFNjaGVtYSA9IHYxU3RlcFNjaGVtYTtcbmNvbnN0IHN0ZXBzU2NoZW1hcyA9IHtcblx0W0V4ZWN1dGlvblZlcnNpb24uVjBdOiB2MFN0ZXBTY2hlbWEsXG5cdFtFeGVjdXRpb25WZXJzaW9uLlYxXTogdjFTdGVwU2NoZW1hLFxuXHRbRXhlY3V0aW9uVmVyc2lvbi5WMl06IHYyU3RlcFNjaGVtYVxufTtcbmNvbnN0IGJhdGNoU2NoZW1hID0gei5hcnJheSh6LnJlY29yZCh6LmFueSgpKS50cmFuc2Zvcm0oKHYpID0+IHYpKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBiYXRjaFNjaGVtYSwgZXJyb3JTY2hlbWEsIHN0ZXBzU2NoZW1hcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/api/schema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/Fetch.js":
/*!**************************************************!*\
  !*** ./node_modules/inngest/components/Fetch.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\");\n\n\n\n\n//#region src/components/Fetch.ts\nconst globalFetch = globalThis.fetch;\nconst debug = debug__WEBPACK_IMPORTED_MODULE_0__(\"inngest:fetch\");\nconst createFetchShim = () => {\n\tlet stepFetch;\n\tconst fetch$1 = async (input, init) => {\n\t\tconst ctx = await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_1__.getAsyncCtx)();\n\t\tif (!ctx?.execution) {\n\t\t\tif (!stepFetch.fallback) throw new Error(\"step.fetch() called outside of a function and had no fallback set\");\n\t\t\tdebug(\"step.fetch() called outside of a function; falling back to global fetch\");\n\t\t\treturn stepFetch.fallback(input, init);\n\t\t}\n\t\tif (ctx.execution.executingStep) {\n\t\t\tif (!stepFetch.fallback) throw new Error(`step.fetch() called inside step \"${ctx.execution.executingStep.id}\" and had no fallback set`);\n\t\t\tdebug(`step.fetch() called inside step \"${ctx.execution.executingStep.id}\"; falling back to global fetch`);\n\t\t\treturn stepFetch.fallback(input, init);\n\t\t}\n\t\tconst targetUrl = new URL(input instanceof Request ? input.url : input.toString());\n\t\tdebug(\"step.fetch() shimming request to\", targetUrl.hostname);\n\t\tconst jsonRes = await ctx.execution.ctx.step[_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_2__.gatewaySymbol](`step.fetch: ${targetUrl.hostname}`, input, init);\n\t\treturn new Response(jsonRes.body, {\n\t\t\theaders: jsonRes.headers,\n\t\t\tstatus: jsonRes.status_code\n\t\t});\n\t};\n\tconst optionsRef = { fallback: globalFetch };\n\tconst extras = {\n\t\tconfig: (options) => {\n\t\t\tObject.assign(optionsRef, options);\n\t\t\tObject.assign(stepFetch, optionsRef);\n\t\t\treturn stepFetch;\n\t\t},\n\t\t...optionsRef\n\t};\n\tstepFetch = Object.assign(fetch$1, extras);\n\treturn stepFetch;\n};\n/**\n* `fetch` is a Fetch API-compatible function that can be used to make any HTTP\n* code durable if it's called within an Inngest function.\n*\n* It will gracefully fall back to the global `fetch` if called outside of this\n* context, and a custom fallback can be set using the `config` method.\n*\n* @example Basic usage\n* ```ts\n* import { fetch } from \"inngest\";\n*\n* const api = new MyProductApi({ fetch });\n* ```\n*\n* @example Setting a custom fallback\n* ```ts\n* import { fetch } from \"inngest\";\n*\n* const api = new MyProductApi({\n*            fetch: fetch.config({ fallback: myCustomFetch }),\n* });\n* ```\n*\n* @example Do not allow fallback\n* ```ts\n* import { fetch } from \"inngest\";\n*\n* const api = new MyProductApi({\n*            fetch: fetch.config({ fallback: undefined }),\n* });\n* ```\n*/\nconst fetch = createFetchShim();\n\n//#endregion\n\n//# sourceMappingURL=Fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUQ7QUFDSztBQUM1Qjs7QUFFMUI7QUFDQTtBQUNBLGNBQWMsa0NBQUs7QUFDbkI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhEQUFXO0FBQy9CO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLCtCQUErQjtBQUMvRyw2Q0FBNkMsK0JBQStCLEdBQUc7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsK0RBQWEsaUJBQWlCLG1CQUFtQjtBQUNoRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsaUNBQWlDLE9BQU87QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBLG1DQUFtQyx5QkFBeUI7QUFDNUQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxtQ0FBbUMscUJBQXFCO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDaUI7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0ZldGNoLmpzP2IwZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXN5bmNDdHggfSBmcm9tIFwiLi9leGVjdXRpb24vYWxzLmpzXCI7XG5pbXBvcnQgeyBnYXRld2F5U3ltYm9sIH0gZnJvbSBcIi4vSW5uZ2VzdFN0ZXBUb29scy5qc1wiO1xuaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvRmV0Y2gudHNcbmNvbnN0IGdsb2JhbEZldGNoID0gZ2xvYmFsVGhpcy5mZXRjaDtcbmNvbnN0IGRlYnVnID0gRGVidWcoXCJpbm5nZXN0OmZldGNoXCIpO1xuY29uc3QgY3JlYXRlRmV0Y2hTaGltID0gKCkgPT4ge1xuXHRsZXQgc3RlcEZldGNoO1xuXHRjb25zdCBmZXRjaCQxID0gYXN5bmMgKGlucHV0LCBpbml0KSA9PiB7XG5cdFx0Y29uc3QgY3R4ID0gYXdhaXQgZ2V0QXN5bmNDdHgoKTtcblx0XHRpZiAoIWN0eD8uZXhlY3V0aW9uKSB7XG5cdFx0XHRpZiAoIXN0ZXBGZXRjaC5mYWxsYmFjaykgdGhyb3cgbmV3IEVycm9yKFwic3RlcC5mZXRjaCgpIGNhbGxlZCBvdXRzaWRlIG9mIGEgZnVuY3Rpb24gYW5kIGhhZCBubyBmYWxsYmFjayBzZXRcIik7XG5cdFx0XHRkZWJ1ZyhcInN0ZXAuZmV0Y2goKSBjYWxsZWQgb3V0c2lkZSBvZiBhIGZ1bmN0aW9uOyBmYWxsaW5nIGJhY2sgdG8gZ2xvYmFsIGZldGNoXCIpO1xuXHRcdFx0cmV0dXJuIHN0ZXBGZXRjaC5mYWxsYmFjayhpbnB1dCwgaW5pdCk7XG5cdFx0fVxuXHRcdGlmIChjdHguZXhlY3V0aW9uLmV4ZWN1dGluZ1N0ZXApIHtcblx0XHRcdGlmICghc3RlcEZldGNoLmZhbGxiYWNrKSB0aHJvdyBuZXcgRXJyb3IoYHN0ZXAuZmV0Y2goKSBjYWxsZWQgaW5zaWRlIHN0ZXAgXCIke2N0eC5leGVjdXRpb24uZXhlY3V0aW5nU3RlcC5pZH1cIiBhbmQgaGFkIG5vIGZhbGxiYWNrIHNldGApO1xuXHRcdFx0ZGVidWcoYHN0ZXAuZmV0Y2goKSBjYWxsZWQgaW5zaWRlIHN0ZXAgXCIke2N0eC5leGVjdXRpb24uZXhlY3V0aW5nU3RlcC5pZH1cIjsgZmFsbGluZyBiYWNrIHRvIGdsb2JhbCBmZXRjaGApO1xuXHRcdFx0cmV0dXJuIHN0ZXBGZXRjaC5mYWxsYmFjayhpbnB1dCwgaW5pdCk7XG5cdFx0fVxuXHRcdGNvbnN0IHRhcmdldFVybCA9IG5ldyBVUkwoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0ID8gaW5wdXQudXJsIDogaW5wdXQudG9TdHJpbmcoKSk7XG5cdFx0ZGVidWcoXCJzdGVwLmZldGNoKCkgc2hpbW1pbmcgcmVxdWVzdCB0b1wiLCB0YXJnZXRVcmwuaG9zdG5hbWUpO1xuXHRcdGNvbnN0IGpzb25SZXMgPSBhd2FpdCBjdHguZXhlY3V0aW9uLmN0eC5zdGVwW2dhdGV3YXlTeW1ib2xdKGBzdGVwLmZldGNoOiAke3RhcmdldFVybC5ob3N0bmFtZX1gLCBpbnB1dCwgaW5pdCk7XG5cdFx0cmV0dXJuIG5ldyBSZXNwb25zZShqc29uUmVzLmJvZHksIHtcblx0XHRcdGhlYWRlcnM6IGpzb25SZXMuaGVhZGVycyxcblx0XHRcdHN0YXR1czoganNvblJlcy5zdGF0dXNfY29kZVxuXHRcdH0pO1xuXHR9O1xuXHRjb25zdCBvcHRpb25zUmVmID0geyBmYWxsYmFjazogZ2xvYmFsRmV0Y2ggfTtcblx0Y29uc3QgZXh0cmFzID0ge1xuXHRcdGNvbmZpZzogKG9wdGlvbnMpID0+IHtcblx0XHRcdE9iamVjdC5hc3NpZ24ob3B0aW9uc1JlZiwgb3B0aW9ucyk7XG5cdFx0XHRPYmplY3QuYXNzaWduKHN0ZXBGZXRjaCwgb3B0aW9uc1JlZik7XG5cdFx0XHRyZXR1cm4gc3RlcEZldGNoO1xuXHRcdH0sXG5cdFx0Li4ub3B0aW9uc1JlZlxuXHR9O1xuXHRzdGVwRmV0Y2ggPSBPYmplY3QuYXNzaWduKGZldGNoJDEsIGV4dHJhcyk7XG5cdHJldHVybiBzdGVwRmV0Y2g7XG59O1xuLyoqXG4qIGBmZXRjaGAgaXMgYSBGZXRjaCBBUEktY29tcGF0aWJsZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIG1ha2UgYW55IEhUVFBcbiogY29kZSBkdXJhYmxlIGlmIGl0J3MgY2FsbGVkIHdpdGhpbiBhbiBJbm5nZXN0IGZ1bmN0aW9uLlxuKlxuKiBJdCB3aWxsIGdyYWNlZnVsbHkgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgYGZldGNoYCBpZiBjYWxsZWQgb3V0c2lkZSBvZiB0aGlzXG4qIGNvbnRleHQsIGFuZCBhIGN1c3RvbSBmYWxsYmFjayBjYW4gYmUgc2V0IHVzaW5nIHRoZSBgY29uZmlnYCBtZXRob2QuXG4qXG4qIEBleGFtcGxlIEJhc2ljIHVzYWdlXG4qIGBgYHRzXG4qIGltcG9ydCB7IGZldGNoIH0gZnJvbSBcImlubmdlc3RcIjtcbipcbiogY29uc3QgYXBpID0gbmV3IE15UHJvZHVjdEFwaSh7IGZldGNoIH0pO1xuKiBgYGBcbipcbiogQGV4YW1wbGUgU2V0dGluZyBhIGN1c3RvbSBmYWxsYmFja1xuKiBgYGB0c1xuKiBpbXBvcnQgeyBmZXRjaCB9IGZyb20gXCJpbm5nZXN0XCI7XG4qXG4qIGNvbnN0IGFwaSA9IG5ldyBNeVByb2R1Y3RBcGkoe1xuKiAgICAgICAgICAgIGZldGNoOiBmZXRjaC5jb25maWcoeyBmYWxsYmFjazogbXlDdXN0b21GZXRjaCB9KSxcbiogfSk7XG4qIGBgYFxuKlxuKiBAZXhhbXBsZSBEbyBub3QgYWxsb3cgZmFsbGJhY2tcbiogYGBgdHNcbiogaW1wb3J0IHsgZmV0Y2ggfSBmcm9tIFwiaW5uZ2VzdFwiO1xuKlxuKiBjb25zdCBhcGkgPSBuZXcgTXlQcm9kdWN0QXBpKHtcbiogICAgICAgICAgICBmZXRjaDogZmV0Y2guY29uZmlnKHsgZmFsbGJhY2s6IHVuZGVmaW5lZCB9KSxcbiogfSk7XG4qIGBgYFxuKi9cbmNvbnN0IGZldGNoID0gY3JlYXRlRmV0Y2hTaGltKCk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZmV0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZldGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/Fetch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/Inngest.js":
/*!****************************************************!*\
  !*** ./node_modules/inngest/components/Inngest.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Inngest: () => (/* binding */ Inngest)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _helpers_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n/* harmony import */ var _helpers_devserver_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../helpers/devserver.js */ \"(rsc)/./node_modules/inngest/helpers/devserver.js\");\n/* harmony import */ var _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InngestMetadata.js */ \"(rsc)/./node_modules/inngest/components/InngestMetadata.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _InngestFunction_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./InngestFunction.js */ \"(rsc)/./node_modules/inngest/components/InngestFunction.js\");\n/* harmony import */ var _api_api_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/api.js */ \"(rsc)/./node_modules/inngest/api/api.js\");\n/* harmony import */ var _helpers_crypto_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers/crypto.js */ \"(rsc)/./node_modules/inngest/helpers/crypto.js\");\n/* harmony import */ var _middleware_logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware/logger.js */ \"(rsc)/./node_modules/inngest/middleware/logger.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/Inngest.ts\n/**\n* A client used to interact with the Inngest API by sending or reacting to\n* events.\n*\n* To provide event typing, see {@link EventSchemas}.\n*\n* ```ts\n* const inngest = new Inngest({ id: \"my-app\" });\n*\n* // or to provide event typing too\n* const inngest = new Inngest({\n*   id: \"my-app\",\n*   schemas: new EventSchemas().fromRecord<{\n*     \"app/user.created\": {\n*       data: { userId: string };\n*     };\n*   }>(),\n* });\n* ```\n*\n* @public\n*/\nvar Inngest = class Inngest {\n\tget [Symbol.toStringTag]() {\n\t\treturn Inngest.Tag;\n\t}\n\t/**\n\t* The ID of this instance, most commonly a reference to the application it\n\t* resides in.\n\t*\n\t* The ID of your client should remain the same for its lifetime; if you'd\n\t* like to change the name of your client as it appears in the Inngest UI,\n\t* change the `name` property instead.\n\t*/\n\tid;\n\t/**\n\t* Stores the options so we can remember explicit settings the user has\n\t* provided.\n\t*/\n\toptions;\n\t/**\n\t* Inngest event key, used to send events to Inngest Cloud.\n\t*/\n\teventKey = \"\";\n\t_apiBaseUrl;\n\t_eventBaseUrl;\n\tinngestApi;\n\t/**\n\t* The absolute URL of the Inngest Cloud API.\n\t*/\n\tsendEventUrl = new URL(`e/${this.eventKey}`, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestEventBaseUrl);\n\theaders;\n\tfetch;\n\tlogger;\n\tlocalFns = [];\n\t/**\n\t* A promise that resolves when the middleware stack has been initialized and\n\t* the client is ready to be used.\n\t*/\n\tmiddleware;\n\t/**\n\t* Whether the client is running in a production environment. This can\n\t* sometimes be `undefined` if the client has expressed no preference or\n\t* perhaps environment variables are only available at a later stage in the\n\t* runtime, for example when receiving a request.\n\t*\n\t* An {@link InngestCommHandler} should prioritize this value over all other\n\t* settings, but should still check for the presence of an environment\n\t* variable if it is not set.\n\t*/\n\t_mode;\n\tschemas;\n\t_appVersion;\n\t/**\n\t* @internal\n\t* Flag set by metadataMiddleware to enable step.metadata()\n\t*/\n\texperimentalMetadataEnabled = false;\n\tget apiBaseUrl() {\n\t\treturn this._apiBaseUrl;\n\t}\n\tget eventBaseUrl() {\n\t\treturn this._eventBaseUrl;\n\t}\n\tget env() {\n\t\treturn this.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment] ?? null;\n\t}\n\tget appVersion() {\n\t\treturn this._appVersion;\n\t}\n\t/**\n\t* Access the metadata builder for updating run and step metadata.\n\t*\n\t* @example\n\t* ```ts\n\t* // Update metadata for the current run\n\t* await inngest.metadata.update({ status: \"processing\" });\n\t*\n\t* // Update metadata for a different run\n\t* await inngest.metadata.run(otherRunId).update({ key: \"val\" });\n\t*\n\t* ```\n\t*/\n\tget metadata() {\n\t\tif (!this.experimentalMetadataEnabled) throw new Error(\"inngest.metadata is experimental. Enable it by adding metadataMiddleware() from \\\"inngest/experimental\\\" to your client middleware.\");\n\t\treturn new _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_1__.UnscopedMetadataBuilder(this);\n\t}\n\t/**\n\t* A client used to interact with the Inngest API by sending or reacting to\n\t* events.\n\t*\n\t* To provide event typing, see {@link EventSchemas}.\n\t*\n\t* ```ts\n\t* const inngest = new Inngest({ name: \"My App\" });\n\t*\n\t* // or to provide event typing too\n\t* const inngest = new Inngest({\n\t*   name: \"My App\",\n\t*   schemas: new EventSchemas().fromRecord<{\n\t*     \"app/user.created\": {\n\t*       data: { userId: string };\n\t*     };\n\t*   }>(),\n\t* });\n\t* ```\n\t*/\n\tconstructor(options) {\n\t\tthis.options = options;\n\t\tconst { id, fetch, logger = new _middleware_logger_js__WEBPACK_IMPORTED_MODULE_2__.DefaultLogger(), middleware, isDev, schemas, appVersion } = this.options;\n\t\tif (!id) throw new Error(\"An `id` must be passed to create an Inngest instance.\");\n\t\tthis.id = id;\n\t\tthis._mode = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getMode)({ explicitMode: typeof isDev === \"boolean\" ? isDev ? \"dev\" : \"cloud\" : void 0 });\n\t\tthis.fetch = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getFetch)(fetch);\n\t\tthis.inngestApi = new _api_api_js__WEBPACK_IMPORTED_MODULE_4__.InngestApi({\n\t\t\tbaseUrl: this.apiBaseUrl,\n\t\t\tsigningKey: (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.processEnv)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestSigningKey) || \"\",\n\t\t\tsigningKeyFallback: (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.processEnv)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestSigningKeyFallback),\n\t\t\tfetch: this.fetch,\n\t\t\tmode: this.mode\n\t\t});\n\t\tthis.schemas = schemas;\n\t\tthis.loadModeEnvVars();\n\t\tthis.logger = logger;\n\t\tthis.middleware = this.initializeMiddleware([...builtInMiddleware, ...middleware || []]);\n\t\tthis._appVersion = appVersion;\n\t}\n\t/**\n\t* Returns a `Promise` that resolves when the app is ready and all middleware\n\t* has been initialized.\n\t*/\n\tget ready() {\n\t\treturn this.middleware.then(() => {});\n\t}\n\t/**\n\t* Set the environment variables for this client. This is useful if you are\n\t* passed environment variables at runtime instead of as globals and need to\n\t* update the client with those values as requests come in.\n\t*/\n\tsetEnvVars(env = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)()) {\n\t\tthis.mode = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getMode)({\n\t\t\tenv,\n\t\t\tclient: this\n\t\t});\n\t\treturn this;\n\t}\n\tloadModeEnvVars() {\n\t\tthis._apiBaseUrl = this.options.baseUrl || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestApiBaseUrl] || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestBaseUrl] || this.mode.getExplicitUrl(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestApiBaseUrl);\n\t\tthis._eventBaseUrl = this.options.baseUrl || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestEventApiBaseUrl] || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestBaseUrl] || this.mode.getExplicitUrl(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestEventBaseUrl);\n\t\tthis.setEventKey(this.options.eventKey || this.mode[\"env\"][_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestEventKey] || \"\");\n\t\tthis.headers = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.inngestHeaders)({\n\t\t\tinngestEnv: this.options.env,\n\t\t\tenv: this.mode[\"env\"]\n\t\t});\n\t\tthis.inngestApi[\"mode\"] = this.mode;\n\t\tthis.inngestApi[\"apiBaseUrl\"] = this._apiBaseUrl;\n\t}\n\t/**\n\t* Initialize all passed middleware, running the `register` function on each\n\t* in sequence and returning the requested hook registrations.\n\t*/\n\tasync initializeMiddleware(middleware = [], opts) {\n\t\t/**\n\t\t* Wait for the prefix stack to run first; do not trigger ours before this\n\t\t* is complete.\n\t\t*/\n\t\tconst prefix = await (opts?.prefixStack ?? []);\n\t\tconst stack = middleware.reduce(async (acc, m) => {\n\t\t\tconst prev = await acc;\n\t\t\tconst next = await m.init({\n\t\t\t\tclient: this,\n\t\t\t\t...opts?.registerInput\n\t\t\t});\n\t\t\treturn [...prev, next];\n\t\t}, Promise.resolve([]));\n\t\treturn [...prefix, ...await stack];\n\t}\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\tset mode(m) {\n\t\tthis._mode = m;\n\t\tthis.loadModeEnvVars();\n\t}\n\t/**\n\t* Given a response from Inngest, relay the error to the caller.\n\t*/\n\tasync getResponseError(response, rawBody, foundErr = \"Unknown error\") {\n\t\tlet errorMessage = foundErr;\n\t\tif (errorMessage === \"Unknown error\") switch (response.status) {\n\t\t\tcase 401:\n\t\t\t\terrorMessage = \"Event key Not Found\";\n\t\t\t\tbreak;\n\t\t\tcase 400:\n\t\t\t\terrorMessage = \"Cannot process event payload\";\n\t\t\t\tbreak;\n\t\t\tcase 403:\n\t\t\t\terrorMessage = \"Forbidden\";\n\t\t\t\tbreak;\n\t\t\tcase 404:\n\t\t\t\terrorMessage = \"Event key not found\";\n\t\t\t\tbreak;\n\t\t\tcase 406:\n\t\t\t\terrorMessage = `${JSON.stringify(await rawBody)}`;\n\t\t\t\tbreak;\n\t\t\tcase 409:\n\t\t\tcase 412:\n\t\t\t\terrorMessage = \"Event transformation failed\";\n\t\t\t\tbreak;\n\t\t\tcase 413:\n\t\t\t\terrorMessage = \"Event payload too large\";\n\t\t\t\tbreak;\n\t\t\tcase 500:\n\t\t\t\terrorMessage = \"Internal server error\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttry {\n\t\t\t\t\terrorMessage = await response.text();\n\t\t\t\t} catch (_err) {\n\t\t\t\t\terrorMessage = `${JSON.stringify(await rawBody)}`;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn /* @__PURE__ */ new Error(`Inngest API Error: ${response.status} ${errorMessage}`);\n\t}\n\t/**\n\t* Set the event key for this instance of Inngest. This is useful if for some\n\t* reason the key is not available at time of instantiation or present in the\n\t* `INNGEST_EVENT_KEY` environment variable.\n\t*/\n\tsetEventKey(eventKey) {\n\t\tthis.eventKey = eventKey || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.dummyEventKey;\n\t\tthis.sendEventUrl = new URL(`e/${this.eventKey}`, this.eventBaseUrl || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultInngestEventBaseUrl);\n\t}\n\teventKeySet() {\n\t\treturn Boolean(this.eventKey) && this.eventKey !== _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.dummyEventKey;\n\t}\n\t/**\n\t* EXPERIMENTAL: This API is not yet stable and may change in the future\n\t* without a major version bump.\n\t*\n\t* Send a Signal to Inngest.\n\t*/\n\tasync sendSignal({ signal, data, env }) {\n\t\tconst headers = { ...env ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment]: env } : {} };\n\t\treturn this._sendSignal({\n\t\t\tsignal,\n\t\t\tdata,\n\t\t\theaders\n\t\t});\n\t}\n\tasync _sendSignal({ signal, data, headers }) {\n\t\tconst res = await this.inngestApi.sendSignal({\n\t\t\tsignal,\n\t\t\tdata\n\t\t}, {\n\t\t\t...this.headers,\n\t\t\t...headers\n\t\t});\n\t\tif (res.ok) return res.value;\n\t\tthrow new Error(`Failed to send signal: ${res.error?.error || \"Unknown error\"}`);\n\t}\n\tasync updateMetadata({ target, metadata, headers }) {\n\t\tconst res = await this.inngestApi.updateMetadata({\n\t\t\ttarget,\n\t\t\tmetadata\n\t\t}, { headers });\n\t\tif (res.ok) return res.value;\n\t\tthrow new Error(`Failed to update metadata: ${res.error?.error || \"Unknown error\"}`);\n\t}\n\tasync warnMetadata(target, kind, text) {\n\t\tthis.logger.warn(text);\n\t\tif (!this.experimentalMetadataEnabled) return;\n\t\tawait this.updateMetadata({\n\t\t\ttarget,\n\t\t\tmetadata: [{\n\t\t\t\tkind: \"inngest.warnings\",\n\t\t\t\top: \"merge\",\n\t\t\t\tvalues: { [`sdk.${kind}`]: text }\n\t\t\t}]\n\t\t});\n\t}\n\t/**\n\t* Send one or many events to Inngest. Takes an entire payload (including\n\t* name) as each input.\n\t*\n\t* ```ts\n\t* await inngest.send({ name: \"app/user.created\", data: { id: 123 } });\n\t* ```\n\t*\n\t* Returns a promise that will resolve if the event(s) were sent successfully,\n\t* else throws with an error explaining what went wrong.\n\t*\n\t* If you wish to send an event with custom types (i.e. one that hasn't been\n\t* generated), make sure to add it when creating your Inngest instance, like\n\t* so:\n\t*\n\t* ```ts\n\t* const inngest = new Inngest({\n\t*   name: \"My App\",\n\t*   schemas: new EventSchemas().fromRecord<{\n\t*     \"my/event\": {\n\t*       name: \"my/event\";\n\t*       data: { bar: string };\n\t*     };\n\t*   }>(),\n\t* });\n\t* ```\n\t*/\n\tasync send(payload, options) {\n\t\tconst headers = { ...options?.env ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment]: options.env } : {} };\n\t\treturn this._send({\n\t\t\tpayload,\n\t\t\theaders\n\t\t});\n\t}\n\t/**\n\t* Internal method for sending an event, used to allow Inngest internals to\n\t* further customize the request sent to an Inngest Server.\n\t*/\n\tasync _send({ payload, headers }) {\n\t\tconst nowMillis = (/* @__PURE__ */ new Date()).getTime();\n\t\tlet maxAttempts = 5;\n\t\ttry {\n\t\t\tconst entropy = (0,_helpers_crypto_js__WEBPACK_IMPORTED_MODULE_5__.createEntropy)(10);\n\t\t\tconst entropyBase64 = Buffer.from(entropy).toString(\"base64\");\n\t\t\theaders = {\n\t\t\t\t...headers,\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.EventIdSeed]: `${nowMillis},${entropyBase64}`\n\t\t\t};\n\t\t} catch (err) {\n\t\t\tlet message = \"Event-sending retries disabled\";\n\t\t\tif (err instanceof Error) message += `: ${err.message}`;\n\t\t\tconsole.debug(message);\n\t\t\tmaxAttempts = 1;\n\t\t}\n\t\tconst hooks = await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_6__.getHookStack)(this.middleware, \"onSendEvent\", void 0, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\t...prev,\n\t\t\t\t\t...output\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput(prev, output) {\n\t\t\t\treturn { result: {\n\t\t\t\t\t...prev.result,\n\t\t\t\t\t...output?.result\n\t\t\t\t} };\n\t\t\t}\n\t\t});\n\t\tlet payloads = Array.isArray(payload) ? payload : payload ? [payload] : [];\n\t\tconst inputChanges = await hooks.transformInput?.({ payloads: [...payloads] });\n\t\tif (inputChanges?.payloads) payloads = [...inputChanges.payloads];\n\t\tpayloads = payloads.map((p) => {\n\t\t\treturn {\n\t\t\t\t...p,\n\t\t\t\tid: p.id,\n\t\t\t\tts: p.ts || nowMillis,\n\t\t\t\tdata: p.data || {}\n\t\t\t};\n\t\t});\n\t\tconst applyHookToOutput = async (arg) => {\n\t\t\tconst hookOutput = await hooks.transformOutput?.(arg);\n\t\t\treturn {\n\t\t\t\t...arg.result,\n\t\t\t\t...hookOutput?.result\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t* It can be valid for a user to send an empty list of events; if this\n\t\t* happens, show a warning that this may not be intended, but don't throw.\n\t\t*/\n\t\tif (!payloads.length) {\n\t\t\tconsole.warn((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\t\ttype: \"warn\",\n\t\t\t\twhatHappened: \"`inngest.send()` called with no events\",\n\t\t\t\treassurance: \"This is not an error, but you may not have intended to do this.\",\n\t\t\t\tconsequences: \"The returned promise will resolve, but no events have been sent to Inngest.\",\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t\treturn await applyHookToOutput({ result: { ids: [] } });\n\t\t}\n\t\tlet url = this.sendEventUrl.href;\n\t\t/**\n\t\t* If in prod mode and key is not present, fail now.\n\t\t*/\n\t\tif (this.mode.isCloud && !this.eventKeySet()) throw new Error((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\twhatHappened: \"Failed to send event\",\n\t\t\tconsequences: \"Your event or events were not sent to Inngest.\",\n\t\t\twhy: \"We couldn't find an event key to use to send events to Inngest.\",\n\t\t\ttoFixNow: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.fixEventKeyMissingSteps\n\t\t}));\n\t\t/**\n\t\t* If dev mode has been inferred, try to hit the dev server first to see if\n\t\t* it exists. If it does, use it, otherwise fall back to whatever server we\n\t\t* have configured.\n\t\t*\n\t\t* `INNGEST_BASE_URL` is used to set both dev server and prod URLs, so if a\n\t\t* user has set this it means they have already chosen a URL to hit.\n\t\t*/\n\t\tif (this.mode.isDev && this.mode.isInferred && !this.eventBaseUrl) {\n\t\t\tif (await (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_8__.devServerAvailable)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost, this.fetch)) url = (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_8__.devServerUrl)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost, `e/${this.eventKey}`).href;\n\t\t}\n\t\treturn await applyHookToOutput({ result: { ids: (await (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_9__.retryWithBackoff)(async () => {\n\t\t\tlet rawBody;\n\t\t\tlet body;\n\t\t\tconst response = await this.fetch(url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_10__.stringify)(payloads),\n\t\t\t\theaders: {\n\t\t\t\t\t...this.headers,\n\t\t\t\t\t...headers\n\t\t\t\t}\n\t\t\t});\n\t\t\ttry {\n\t\t\t\trawBody = await response.json();\n\t\t\t\tbody = await _types_js__WEBPACK_IMPORTED_MODULE_11__.sendEventResponseSchema.parseAsync(rawBody);\n\t\t\t} catch (_err) {\n\t\t\t\tthrow await this.getResponseError(response, rawBody);\n\t\t\t}\n\t\t\tif (body.status !== 200 || body.error) throw await this.getResponseError(response, rawBody, body.error);\n\t\t\treturn body;\n\t\t}, {\n\t\t\tmaxAttempts,\n\t\t\tbaseDelay: 100\n\t\t})).ids } });\n\t}\n\tcreateFunction = (rawOptions, rawTrigger, handler) => {\n\t\tconst fn = this._createFunction(rawOptions, rawTrigger, handler);\n\t\tthis.localFns.push(fn);\n\t\treturn fn;\n\t};\n\tget funcs() {\n\t\treturn this.localFns;\n\t}\n\t_createFunction = (rawOptions, rawTrigger, handler) => {\n\t\tconst options = this.sanitizeOptions(rawOptions);\n\t\tconst triggers = this.sanitizeTriggers(rawTrigger);\n\t\treturn new _InngestFunction_js__WEBPACK_IMPORTED_MODULE_12__.InngestFunction(this, {\n\t\t\t...options,\n\t\t\ttriggers\n\t\t}, handler);\n\t};\n\t/**\n\t* Runtime-only validation.\n\t*/\n\tsanitizeOptions(options) {\n\t\tif (Object.hasOwn(options, \"fns\")) console.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.logPrefix} InngestFunction: \\`fns\\` option has been deprecated in v3; use \\`middleware\\` instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\tif (typeof options === \"string\") {\n\t\t\tconsole.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.logPrefix} InngestFunction: Creating a function with a string as the first argument has been deprecated in v3; pass an object instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\t\treturn { id: options };\n\t\t}\n\t\treturn options;\n\t}\n\t/**\n\t* Runtime-only validation.\n\t*/\n\tsanitizeTriggers(triggers) {\n\t\tif (typeof triggers === \"string\") {\n\t\t\tconsole.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.logPrefix} InngestFunction: Creating a function with a string as the second argument has been deprecated in v3; pass an object instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\t\treturn [{ event: triggers }];\n\t\t}\n\t\tif (!Array.isArray(triggers)) return [triggers];\n\t\treturn triggers;\n\t}\n};\n/**\n* Default middleware that is included in every client, placed after the user's\n* middleware on the client but before function-level middleware.\n*\n* It is defined here to ensure that comments are included in the generated TS\n* definitions. Without this, we infer the stack of built-in middleware without\n* comments, losing a lot of value.\n*\n* If this is moved, please ensure that using this package in another project\n* can correctly access comments on mutated input and output.\n*\n* This return pattern mimics the output of a `satisfies` suffix; it's used as\n* we support versions of TypeScript prior to the introduction of `satisfies`.\n*/\nconst builtInMiddleware = ((m) => m)([new _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_6__.InngestMiddleware({\n\tname: \"Inngest: Logger\",\n\tinit({ client }) {\n\t\treturn { onFunctionRun(arg) {\n\t\t\tconst { ctx } = arg;\n\t\t\tconst metadata = {\n\t\t\t\trunID: ctx.runId,\n\t\t\t\teventName: ctx.event.name,\n\t\t\t\tfunctionName: arg.fn.name\n\t\t\t};\n\t\t\tlet providedLogger = client[\"logger\"];\n\t\t\ttry {\n\t\t\t\tif (\"child\" in providedLogger) providedLogger = providedLogger.child(metadata);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\"failed to create \\\"childLogger\\\" with error: \", err);\n\t\t\t}\n\t\t\tconst logger = new _middleware_logger_js__WEBPACK_IMPORTED_MODULE_2__.ProxyLogger(providedLogger);\n\t\t\treturn {\n\t\t\t\ttransformInput() {\n\t\t\t\t\treturn { ctx: { logger } };\n\t\t\t\t},\n\t\t\t\tbeforeExecution() {\n\t\t\t\t\tlogger.enable();\n\t\t\t\t},\n\t\t\t\ttransformOutput({ result: { error } }) {\n\t\t\t\t\tif (error) logger.error(error);\n\t\t\t\t},\n\t\t\t\tasync beforeResponse() {\n\t\t\t\t\tawait logger.flush();\n\t\t\t\t}\n\t\t\t};\n\t\t} };\n\t}\n})]);\n(function(_Inngest) {\n\t_Inngest.Tag = \"Inngest.App\";\n})(Inngest || (Inngest = {}));\n\n//#endregion\n\n//# sourceMappingURL=Inngest.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUs7QUFDM0c7QUFDc0I7QUFDSDtBQUN2QjtBQUMrQztBQUN0QjtBQUNaO0FBQ0w7QUFDSDtBQUNaO0FBQ1U7QUFDZ0I7O0FBRXJFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsbUJBQW1CO0FBQ25EO0FBQ0E7QUFDQSxnQ0FBZ0MsY0FBYztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixjQUFjLEdBQUcsMEVBQTBCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sMEJBQTBCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwREFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxzQkFBc0I7QUFDekQ7QUFDQTtBQUNBLG1EQUFtRCxZQUFZO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHdFQUF1QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG1CQUFt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QVU7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlFQUFlO0FBQzVCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx5REFBUyxFQUFFLDJEQUEyRDtBQUMzSDtBQUNBLG1CQUFtQix5REFBUyxFQUFFLG9HQUFvRztBQUNsSSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5REFBUyxFQUFFLHFHQUFxRztBQUNuSSxhQUFhLGlCQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0EsMENBQTBDLG9FQUFpQjtBQUMzRDtBQUNBLFFBQVEsUUFBUTtBQUNoQixXQUFXO0FBQ1gsV0FBVyxNQUFNO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHNCQUFzQiw4REFBVztBQUNqQztBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLHNCQUFzQixVQUFVLFNBQVM7QUFDekM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDLDBCQUEwQjs7QUFFM0I7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3QuanM/YzFmMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZhdWx0RGV2U2VydmVySG9zdCwgZGVmYXVsdElubmdlc3RBcGlCYXNlVXJsLCBkZWZhdWx0SW5uZ2VzdEV2ZW50QmFzZVVybCwgZHVtbXlFdmVudEtleSwgZW52S2V5cywgaGVhZGVyS2V5cywgbG9nUHJlZml4IH0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RzLmpzXCI7XG5pbXBvcnQgeyBzZW5kRXZlbnRSZXNwb25zZVNjaGVtYSB9IGZyb20gXCIuLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgZml4RXZlbnRLZXlNaXNzaW5nU3RlcHMsIHByZXR0eUVycm9yIH0gZnJvbSBcIi4uL2hlbHBlcnMvZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0TWlkZGxld2FyZSwgZ2V0SG9va1N0YWNrIH0gZnJvbSBcIi4vSW5uZ2VzdE1pZGRsZXdhcmUuanNcIjtcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gXCIuLi9oZWxwZXJzL3N0cmluZ3MuanNcIjtcbmltcG9ydCB7IGFsbFByb2Nlc3NFbnYsIGdldEZldGNoLCBnZXRNb2RlLCBpbm5nZXN0SGVhZGVycywgcHJvY2Vzc0VudiB9IGZyb20gXCIuLi9oZWxwZXJzL2Vudi5qc1wiO1xuaW1wb3J0IHsgZGV2U2VydmVyQXZhaWxhYmxlLCBkZXZTZXJ2ZXJVcmwgfSBmcm9tIFwiLi4vaGVscGVycy9kZXZzZXJ2ZXIuanNcIjtcbmltcG9ydCB7IFVuc2NvcGVkTWV0YWRhdGFCdWlsZGVyIH0gZnJvbSBcIi4vSW5uZ2VzdE1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyByZXRyeVdpdGhCYWNrb2ZmIH0gZnJvbSBcIi4uL2hlbHBlcnMvcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IElubmdlc3RGdW5jdGlvbiB9IGZyb20gXCIuL0lubmdlc3RGdW5jdGlvbi5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdEFwaSB9IGZyb20gXCIuLi9hcGkvYXBpLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbnRyb3B5IH0gZnJvbSBcIi4uL2hlbHBlcnMvY3J5cHRvLmpzXCI7XG5pbXBvcnQgeyBEZWZhdWx0TG9nZ2VyLCBQcm94eUxvZ2dlciB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2xvZ2dlci5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvSW5uZ2VzdC50c1xuLyoqXG4qIEEgY2xpZW50IHVzZWQgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgSW5uZ2VzdCBBUEkgYnkgc2VuZGluZyBvciByZWFjdGluZyB0b1xuKiBldmVudHMuXG4qXG4qIFRvIHByb3ZpZGUgZXZlbnQgdHlwaW5nLCBzZWUge0BsaW5rIEV2ZW50U2NoZW1hc30uXG4qXG4qIGBgYHRzXG4qIGNvbnN0IGlubmdlc3QgPSBuZXcgSW5uZ2VzdCh7IGlkOiBcIm15LWFwcFwiIH0pO1xuKlxuKiAvLyBvciB0byBwcm92aWRlIGV2ZW50IHR5cGluZyB0b29cbiogY29uc3QgaW5uZ2VzdCA9IG5ldyBJbm5nZXN0KHtcbiogICBpZDogXCJteS1hcHBcIixcbiogICBzY2hlbWFzOiBuZXcgRXZlbnRTY2hlbWFzKCkuZnJvbVJlY29yZDx7XG4qICAgICBcImFwcC91c2VyLmNyZWF0ZWRcIjoge1xuKiAgICAgICBkYXRhOiB7IHVzZXJJZDogc3RyaW5nIH07XG4qICAgICB9O1xuKiAgIH0+KCksXG4qIH0pO1xuKiBgYGBcbipcbiogQHB1YmxpY1xuKi9cbnZhciBJbm5nZXN0ID0gY2xhc3MgSW5uZ2VzdCB7XG5cdGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcblx0XHRyZXR1cm4gSW5uZ2VzdC5UYWc7XG5cdH1cblx0LyoqXG5cdCogVGhlIElEIG9mIHRoaXMgaW5zdGFuY2UsIG1vc3QgY29tbW9ubHkgYSByZWZlcmVuY2UgdG8gdGhlIGFwcGxpY2F0aW9uIGl0XG5cdCogcmVzaWRlcyBpbi5cblx0KlxuXHQqIFRoZSBJRCBvZiB5b3VyIGNsaWVudCBzaG91bGQgcmVtYWluIHRoZSBzYW1lIGZvciBpdHMgbGlmZXRpbWU7IGlmIHlvdSdkXG5cdCogbGlrZSB0byBjaGFuZ2UgdGhlIG5hbWUgb2YgeW91ciBjbGllbnQgYXMgaXQgYXBwZWFycyBpbiB0aGUgSW5uZ2VzdCBVSSxcblx0KiBjaGFuZ2UgdGhlIGBuYW1lYCBwcm9wZXJ0eSBpbnN0ZWFkLlxuXHQqL1xuXHRpZDtcblx0LyoqXG5cdCogU3RvcmVzIHRoZSBvcHRpb25zIHNvIHdlIGNhbiByZW1lbWJlciBleHBsaWNpdCBzZXR0aW5ncyB0aGUgdXNlciBoYXNcblx0KiBwcm92aWRlZC5cblx0Ki9cblx0b3B0aW9ucztcblx0LyoqXG5cdCogSW5uZ2VzdCBldmVudCBrZXksIHVzZWQgdG8gc2VuZCBldmVudHMgdG8gSW5uZ2VzdCBDbG91ZC5cblx0Ki9cblx0ZXZlbnRLZXkgPSBcIlwiO1xuXHRfYXBpQmFzZVVybDtcblx0X2V2ZW50QmFzZVVybDtcblx0aW5uZ2VzdEFwaTtcblx0LyoqXG5cdCogVGhlIGFic29sdXRlIFVSTCBvZiB0aGUgSW5uZ2VzdCBDbG91ZCBBUEkuXG5cdCovXG5cdHNlbmRFdmVudFVybCA9IG5ldyBVUkwoYGUvJHt0aGlzLmV2ZW50S2V5fWAsIGRlZmF1bHRJbm5nZXN0RXZlbnRCYXNlVXJsKTtcblx0aGVhZGVycztcblx0ZmV0Y2g7XG5cdGxvZ2dlcjtcblx0bG9jYWxGbnMgPSBbXTtcblx0LyoqXG5cdCogQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbWlkZGxld2FyZSBzdGFjayBoYXMgYmVlbiBpbml0aWFsaXplZCBhbmRcblx0KiB0aGUgY2xpZW50IGlzIHJlYWR5IHRvIGJlIHVzZWQuXG5cdCovXG5cdG1pZGRsZXdhcmU7XG5cdC8qKlxuXHQqIFdoZXRoZXIgdGhlIGNsaWVudCBpcyBydW5uaW5nIGluIGEgcHJvZHVjdGlvbiBlbnZpcm9ubWVudC4gVGhpcyBjYW5cblx0KiBzb21ldGltZXMgYmUgYHVuZGVmaW5lZGAgaWYgdGhlIGNsaWVudCBoYXMgZXhwcmVzc2VkIG5vIHByZWZlcmVuY2Ugb3Jcblx0KiBwZXJoYXBzIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgb25seSBhdmFpbGFibGUgYXQgYSBsYXRlciBzdGFnZSBpbiB0aGVcblx0KiBydW50aW1lLCBmb3IgZXhhbXBsZSB3aGVuIHJlY2VpdmluZyBhIHJlcXVlc3QuXG5cdCpcblx0KiBBbiB7QGxpbmsgSW5uZ2VzdENvbW1IYW5kbGVyfSBzaG91bGQgcHJpb3JpdGl6ZSB0aGlzIHZhbHVlIG92ZXIgYWxsIG90aGVyXG5cdCogc2V0dGluZ3MsIGJ1dCBzaG91bGQgc3RpbGwgY2hlY2sgZm9yIHRoZSBwcmVzZW5jZSBvZiBhbiBlbnZpcm9ubWVudFxuXHQqIHZhcmlhYmxlIGlmIGl0IGlzIG5vdCBzZXQuXG5cdCovXG5cdF9tb2RlO1xuXHRzY2hlbWFzO1xuXHRfYXBwVmVyc2lvbjtcblx0LyoqXG5cdCogQGludGVybmFsXG5cdCogRmxhZyBzZXQgYnkgbWV0YWRhdGFNaWRkbGV3YXJlIHRvIGVuYWJsZSBzdGVwLm1ldGFkYXRhKClcblx0Ki9cblx0ZXhwZXJpbWVudGFsTWV0YWRhdGFFbmFibGVkID0gZmFsc2U7XG5cdGdldCBhcGlCYXNlVXJsKCkge1xuXHRcdHJldHVybiB0aGlzLl9hcGlCYXNlVXJsO1xuXHR9XG5cdGdldCBldmVudEJhc2VVcmwoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2V2ZW50QmFzZVVybDtcblx0fVxuXHRnZXQgZW52KCkge1xuXHRcdHJldHVybiB0aGlzLmhlYWRlcnNbaGVhZGVyS2V5cy5FbnZpcm9ubWVudF0gPz8gbnVsbDtcblx0fVxuXHRnZXQgYXBwVmVyc2lvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5fYXBwVmVyc2lvbjtcblx0fVxuXHQvKipcblx0KiBBY2Nlc3MgdGhlIG1ldGFkYXRhIGJ1aWxkZXIgZm9yIHVwZGF0aW5nIHJ1biBhbmQgc3RlcCBtZXRhZGF0YS5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYGBgdHNcblx0KiAvLyBVcGRhdGUgbWV0YWRhdGEgZm9yIHRoZSBjdXJyZW50IHJ1blxuXHQqIGF3YWl0IGlubmdlc3QubWV0YWRhdGEudXBkYXRlKHsgc3RhdHVzOiBcInByb2Nlc3NpbmdcIiB9KTtcblx0KlxuXHQqIC8vIFVwZGF0ZSBtZXRhZGF0YSBmb3IgYSBkaWZmZXJlbnQgcnVuXG5cdCogYXdhaXQgaW5uZ2VzdC5tZXRhZGF0YS5ydW4ob3RoZXJSdW5JZCkudXBkYXRlKHsga2V5OiBcInZhbFwiIH0pO1xuXHQqXG5cdCogYGBgXG5cdCovXG5cdGdldCBtZXRhZGF0YSgpIHtcblx0XHRpZiAoIXRoaXMuZXhwZXJpbWVudGFsTWV0YWRhdGFFbmFibGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJpbm5nZXN0Lm1ldGFkYXRhIGlzIGV4cGVyaW1lbnRhbC4gRW5hYmxlIGl0IGJ5IGFkZGluZyBtZXRhZGF0YU1pZGRsZXdhcmUoKSBmcm9tIFxcXCJpbm5nZXN0L2V4cGVyaW1lbnRhbFxcXCIgdG8geW91ciBjbGllbnQgbWlkZGxld2FyZS5cIik7XG5cdFx0cmV0dXJuIG5ldyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlcih0aGlzKTtcblx0fVxuXHQvKipcblx0KiBBIGNsaWVudCB1c2VkIHRvIGludGVyYWN0IHdpdGggdGhlIElubmdlc3QgQVBJIGJ5IHNlbmRpbmcgb3IgcmVhY3RpbmcgdG9cblx0KiBldmVudHMuXG5cdCpcblx0KiBUbyBwcm92aWRlIGV2ZW50IHR5cGluZywgc2VlIHtAbGluayBFdmVudFNjaGVtYXN9LlxuXHQqXG5cdCogYGBgdHNcblx0KiBjb25zdCBpbm5nZXN0ID0gbmV3IElubmdlc3QoeyBuYW1lOiBcIk15IEFwcFwiIH0pO1xuXHQqXG5cdCogLy8gb3IgdG8gcHJvdmlkZSBldmVudCB0eXBpbmcgdG9vXG5cdCogY29uc3QgaW5uZ2VzdCA9IG5ldyBJbm5nZXN0KHtcblx0KiAgIG5hbWU6IFwiTXkgQXBwXCIsXG5cdCogICBzY2hlbWFzOiBuZXcgRXZlbnRTY2hlbWFzKCkuZnJvbVJlY29yZDx7XG5cdCogICAgIFwiYXBwL3VzZXIuY3JlYXRlZFwiOiB7XG5cdCogICAgICAgZGF0YTogeyB1c2VySWQ6IHN0cmluZyB9O1xuXHQqICAgICB9O1xuXHQqICAgfT4oKSxcblx0KiB9KTtcblx0KiBgYGBcblx0Ki9cblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0Y29uc3QgeyBpZCwgZmV0Y2gsIGxvZ2dlciA9IG5ldyBEZWZhdWx0TG9nZ2VyKCksIG1pZGRsZXdhcmUsIGlzRGV2LCBzY2hlbWFzLCBhcHBWZXJzaW9uIH0gPSB0aGlzLm9wdGlvbnM7XG5cdFx0aWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKFwiQW4gYGlkYCBtdXN0IGJlIHBhc3NlZCB0byBjcmVhdGUgYW4gSW5uZ2VzdCBpbnN0YW5jZS5cIik7XG5cdFx0dGhpcy5pZCA9IGlkO1xuXHRcdHRoaXMuX21vZGUgPSBnZXRNb2RlKHsgZXhwbGljaXRNb2RlOiB0eXBlb2YgaXNEZXYgPT09IFwiYm9vbGVhblwiID8gaXNEZXYgPyBcImRldlwiIDogXCJjbG91ZFwiIDogdm9pZCAwIH0pO1xuXHRcdHRoaXMuZmV0Y2ggPSBnZXRGZXRjaChmZXRjaCk7XG5cdFx0dGhpcy5pbm5nZXN0QXBpID0gbmV3IElubmdlc3RBcGkoe1xuXHRcdFx0YmFzZVVybDogdGhpcy5hcGlCYXNlVXJsLFxuXHRcdFx0c2lnbmluZ0tleTogcHJvY2Vzc0VudihlbnZLZXlzLklubmdlc3RTaWduaW5nS2V5KSB8fCBcIlwiLFxuXHRcdFx0c2lnbmluZ0tleUZhbGxiYWNrOiBwcm9jZXNzRW52KGVudktleXMuSW5uZ2VzdFNpZ25pbmdLZXlGYWxsYmFjayksXG5cdFx0XHRmZXRjaDogdGhpcy5mZXRjaCxcblx0XHRcdG1vZGU6IHRoaXMubW9kZVxuXHRcdH0pO1xuXHRcdHRoaXMuc2NoZW1hcyA9IHNjaGVtYXM7XG5cdFx0dGhpcy5sb2FkTW9kZUVudlZhcnMoKTtcblx0XHR0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcblx0XHR0aGlzLm1pZGRsZXdhcmUgPSB0aGlzLmluaXRpYWxpemVNaWRkbGV3YXJlKFsuLi5idWlsdEluTWlkZGxld2FyZSwgLi4ubWlkZGxld2FyZSB8fCBbXV0pO1xuXHRcdHRoaXMuX2FwcFZlcnNpb24gPSBhcHBWZXJzaW9uO1xuXHR9XG5cdC8qKlxuXHQqIFJldHVybnMgYSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBhcHAgaXMgcmVhZHkgYW5kIGFsbCBtaWRkbGV3YXJlXG5cdCogaGFzIGJlZW4gaW5pdGlhbGl6ZWQuXG5cdCovXG5cdGdldCByZWFkeSgpIHtcblx0XHRyZXR1cm4gdGhpcy5taWRkbGV3YXJlLnRoZW4oKCkgPT4ge30pO1xuXHR9XG5cdC8qKlxuXHQqIFNldCB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciB0aGlzIGNsaWVudC4gVGhpcyBpcyB1c2VmdWwgaWYgeW91IGFyZVxuXHQqIHBhc3NlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXQgcnVudGltZSBpbnN0ZWFkIG9mIGFzIGdsb2JhbHMgYW5kIG5lZWQgdG9cblx0KiB1cGRhdGUgdGhlIGNsaWVudCB3aXRoIHRob3NlIHZhbHVlcyBhcyByZXF1ZXN0cyBjb21lIGluLlxuXHQqL1xuXHRzZXRFbnZWYXJzKGVudiA9IGFsbFByb2Nlc3NFbnYoKSkge1xuXHRcdHRoaXMubW9kZSA9IGdldE1vZGUoe1xuXHRcdFx0ZW52LFxuXHRcdFx0Y2xpZW50OiB0aGlzXG5cdFx0fSk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblx0bG9hZE1vZGVFbnZWYXJzKCkge1xuXHRcdHRoaXMuX2FwaUJhc2VVcmwgPSB0aGlzLm9wdGlvbnMuYmFzZVVybCB8fCB0aGlzLm1vZGVbXCJlbnZcIl1bZW52S2V5cy5Jbm5nZXN0QXBpQmFzZVVybF0gfHwgdGhpcy5tb2RlW1wiZW52XCJdW2VudktleXMuSW5uZ2VzdEJhc2VVcmxdIHx8IHRoaXMubW9kZS5nZXRFeHBsaWNpdFVybChkZWZhdWx0SW5uZ2VzdEFwaUJhc2VVcmwpO1xuXHRcdHRoaXMuX2V2ZW50QmFzZVVybCA9IHRoaXMub3B0aW9ucy5iYXNlVXJsIHx8IHRoaXMubW9kZVtcImVudlwiXVtlbnZLZXlzLklubmdlc3RFdmVudEFwaUJhc2VVcmxdIHx8IHRoaXMubW9kZVtcImVudlwiXVtlbnZLZXlzLklubmdlc3RCYXNlVXJsXSB8fCB0aGlzLm1vZGUuZ2V0RXhwbGljaXRVcmwoZGVmYXVsdElubmdlc3RFdmVudEJhc2VVcmwpO1xuXHRcdHRoaXMuc2V0RXZlbnRLZXkodGhpcy5vcHRpb25zLmV2ZW50S2V5IHx8IHRoaXMubW9kZVtcImVudlwiXVtlbnZLZXlzLklubmdlc3RFdmVudEtleV0gfHwgXCJcIik7XG5cdFx0dGhpcy5oZWFkZXJzID0gaW5uZ2VzdEhlYWRlcnMoe1xuXHRcdFx0aW5uZ2VzdEVudjogdGhpcy5vcHRpb25zLmVudixcblx0XHRcdGVudjogdGhpcy5tb2RlW1wiZW52XCJdXG5cdFx0fSk7XG5cdFx0dGhpcy5pbm5nZXN0QXBpW1wibW9kZVwiXSA9IHRoaXMubW9kZTtcblx0XHR0aGlzLmlubmdlc3RBcGlbXCJhcGlCYXNlVXJsXCJdID0gdGhpcy5fYXBpQmFzZVVybDtcblx0fVxuXHQvKipcblx0KiBJbml0aWFsaXplIGFsbCBwYXNzZWQgbWlkZGxld2FyZSwgcnVubmluZyB0aGUgYHJlZ2lzdGVyYCBmdW5jdGlvbiBvbiBlYWNoXG5cdCogaW4gc2VxdWVuY2UgYW5kIHJldHVybmluZyB0aGUgcmVxdWVzdGVkIGhvb2sgcmVnaXN0cmF0aW9ucy5cblx0Ki9cblx0YXN5bmMgaW5pdGlhbGl6ZU1pZGRsZXdhcmUobWlkZGxld2FyZSA9IFtdLCBvcHRzKSB7XG5cdFx0LyoqXG5cdFx0KiBXYWl0IGZvciB0aGUgcHJlZml4IHN0YWNrIHRvIHJ1biBmaXJzdDsgZG8gbm90IHRyaWdnZXIgb3VycyBiZWZvcmUgdGhpc1xuXHRcdCogaXMgY29tcGxldGUuXG5cdFx0Ki9cblx0XHRjb25zdCBwcmVmaXggPSBhd2FpdCAob3B0cz8ucHJlZml4U3RhY2sgPz8gW10pO1xuXHRcdGNvbnN0IHN0YWNrID0gbWlkZGxld2FyZS5yZWR1Y2UoYXN5bmMgKGFjYywgbSkgPT4ge1xuXHRcdFx0Y29uc3QgcHJldiA9IGF3YWl0IGFjYztcblx0XHRcdGNvbnN0IG5leHQgPSBhd2FpdCBtLmluaXQoe1xuXHRcdFx0XHRjbGllbnQ6IHRoaXMsXG5cdFx0XHRcdC4uLm9wdHM/LnJlZ2lzdGVySW5wdXRcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIFsuLi5wcmV2LCBuZXh0XTtcblx0XHR9LCBQcm9taXNlLnJlc29sdmUoW10pKTtcblx0XHRyZXR1cm4gWy4uLnByZWZpeCwgLi4uYXdhaXQgc3RhY2tdO1xuXHR9XG5cdGdldCBtb2RlKCkge1xuXHRcdHJldHVybiB0aGlzLl9tb2RlO1xuXHR9XG5cdHNldCBtb2RlKG0pIHtcblx0XHR0aGlzLl9tb2RlID0gbTtcblx0XHR0aGlzLmxvYWRNb2RlRW52VmFycygpO1xuXHR9XG5cdC8qKlxuXHQqIEdpdmVuIGEgcmVzcG9uc2UgZnJvbSBJbm5nZXN0LCByZWxheSB0aGUgZXJyb3IgdG8gdGhlIGNhbGxlci5cblx0Ki9cblx0YXN5bmMgZ2V0UmVzcG9uc2VFcnJvcihyZXNwb25zZSwgcmF3Qm9keSwgZm91bmRFcnIgPSBcIlVua25vd24gZXJyb3JcIikge1xuXHRcdGxldCBlcnJvck1lc3NhZ2UgPSBmb3VuZEVycjtcblx0XHRpZiAoZXJyb3JNZXNzYWdlID09PSBcIlVua25vd24gZXJyb3JcIikgc3dpdGNoIChyZXNwb25zZS5zdGF0dXMpIHtcblx0XHRcdGNhc2UgNDAxOlxuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBcIkV2ZW50IGtleSBOb3QgRm91bmRcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDQwMDpcblx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gXCJDYW5ub3QgcHJvY2VzcyBldmVudCBwYXlsb2FkXCI7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA0MDM6XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IFwiRm9yYmlkZGVuXCI7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA0MDQ6XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IFwiRXZlbnQga2V5IG5vdCBmb3VuZFwiO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNDA2OlxuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBgJHtKU09OLnN0cmluZ2lmeShhd2FpdCByYXdCb2R5KX1gO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNDA5OlxuXHRcdFx0Y2FzZSA0MTI6XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IFwiRXZlbnQgdHJhbnNmb3JtYXRpb24gZmFpbGVkXCI7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA0MTM6XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IFwiRXZlbnQgcGF5bG9hZCB0b28gbGFyZ2VcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDUwMDpcblx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIjtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGVycm9yTWVzc2FnZSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblx0XHRcdFx0fSBjYXRjaCAoX2Vycikge1xuXHRcdFx0XHRcdGVycm9yTWVzc2FnZSA9IGAke0pTT04uc3RyaW5naWZ5KGF3YWl0IHJhd0JvZHkpfWA7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHJldHVybiAvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKGBJbm5nZXN0IEFQSSBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7ZXJyb3JNZXNzYWdlfWApO1xuXHR9XG5cdC8qKlxuXHQqIFNldCB0aGUgZXZlbnQga2V5IGZvciB0aGlzIGluc3RhbmNlIG9mIElubmdlc3QuIFRoaXMgaXMgdXNlZnVsIGlmIGZvciBzb21lXG5cdCogcmVhc29uIHRoZSBrZXkgaXMgbm90IGF2YWlsYWJsZSBhdCB0aW1lIG9mIGluc3RhbnRpYXRpb24gb3IgcHJlc2VudCBpbiB0aGVcblx0KiBgSU5OR0VTVF9FVkVOVF9LRVlgIGVudmlyb25tZW50IHZhcmlhYmxlLlxuXHQqL1xuXHRzZXRFdmVudEtleShldmVudEtleSkge1xuXHRcdHRoaXMuZXZlbnRLZXkgPSBldmVudEtleSB8fCBkdW1teUV2ZW50S2V5O1xuXHRcdHRoaXMuc2VuZEV2ZW50VXJsID0gbmV3IFVSTChgZS8ke3RoaXMuZXZlbnRLZXl9YCwgdGhpcy5ldmVudEJhc2VVcmwgfHwgZGVmYXVsdElubmdlc3RFdmVudEJhc2VVcmwpO1xuXHR9XG5cdGV2ZW50S2V5U2V0KCkge1xuXHRcdHJldHVybiBCb29sZWFuKHRoaXMuZXZlbnRLZXkpICYmIHRoaXMuZXZlbnRLZXkgIT09IGR1bW15RXZlbnRLZXk7XG5cdH1cblx0LyoqXG5cdCogRVhQRVJJTUVOVEFMOiBUaGlzIEFQSSBpcyBub3QgeWV0IHN0YWJsZSBhbmQgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlXG5cdCogd2l0aG91dCBhIG1ham9yIHZlcnNpb24gYnVtcC5cblx0KlxuXHQqIFNlbmQgYSBTaWduYWwgdG8gSW5uZ2VzdC5cblx0Ki9cblx0YXN5bmMgc2VuZFNpZ25hbCh7IHNpZ25hbCwgZGF0YSwgZW52IH0pIHtcblx0XHRjb25zdCBoZWFkZXJzID0geyAuLi5lbnYgPyB7IFtoZWFkZXJLZXlzLkVudmlyb25tZW50XTogZW52IH0gOiB7fSB9O1xuXHRcdHJldHVybiB0aGlzLl9zZW5kU2lnbmFsKHtcblx0XHRcdHNpZ25hbCxcblx0XHRcdGRhdGEsXG5cdFx0XHRoZWFkZXJzXG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgX3NlbmRTaWduYWwoeyBzaWduYWwsIGRhdGEsIGhlYWRlcnMgfSkge1xuXHRcdGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaW5uZ2VzdEFwaS5zZW5kU2lnbmFsKHtcblx0XHRcdHNpZ25hbCxcblx0XHRcdGRhdGFcblx0XHR9LCB7XG5cdFx0XHQuLi50aGlzLmhlYWRlcnMsXG5cdFx0XHQuLi5oZWFkZXJzXG5cdFx0fSk7XG5cdFx0aWYgKHJlcy5vaykgcmV0dXJuIHJlcy52YWx1ZTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZW5kIHNpZ25hbDogJHtyZXMuZXJyb3I/LmVycm9yIHx8IFwiVW5rbm93biBlcnJvclwifWApO1xuXHR9XG5cdGFzeW5jIHVwZGF0ZU1ldGFkYXRhKHsgdGFyZ2V0LCBtZXRhZGF0YSwgaGVhZGVycyB9KSB7XG5cdFx0Y29uc3QgcmVzID0gYXdhaXQgdGhpcy5pbm5nZXN0QXBpLnVwZGF0ZU1ldGFkYXRhKHtcblx0XHRcdHRhcmdldCxcblx0XHRcdG1ldGFkYXRhXG5cdFx0fSwgeyBoZWFkZXJzIH0pO1xuXHRcdGlmIChyZXMub2spIHJldHVybiByZXMudmFsdWU7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIG1ldGFkYXRhOiAke3Jlcy5lcnJvcj8uZXJyb3IgfHwgXCJVbmtub3duIGVycm9yXCJ9YCk7XG5cdH1cblx0YXN5bmMgd2Fybk1ldGFkYXRhKHRhcmdldCwga2luZCwgdGV4dCkge1xuXHRcdHRoaXMubG9nZ2VyLndhcm4odGV4dCk7XG5cdFx0aWYgKCF0aGlzLmV4cGVyaW1lbnRhbE1ldGFkYXRhRW5hYmxlZCkgcmV0dXJuO1xuXHRcdGF3YWl0IHRoaXMudXBkYXRlTWV0YWRhdGEoe1xuXHRcdFx0dGFyZ2V0LFxuXHRcdFx0bWV0YWRhdGE6IFt7XG5cdFx0XHRcdGtpbmQ6IFwiaW5uZ2VzdC53YXJuaW5nc1wiLFxuXHRcdFx0XHRvcDogXCJtZXJnZVwiLFxuXHRcdFx0XHR2YWx1ZXM6IHsgW2BzZGsuJHtraW5kfWBdOiB0ZXh0IH1cblx0XHRcdH1dXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogU2VuZCBvbmUgb3IgbWFueSBldmVudHMgdG8gSW5uZ2VzdC4gVGFrZXMgYW4gZW50aXJlIHBheWxvYWQgKGluY2x1ZGluZ1xuXHQqIG5hbWUpIGFzIGVhY2ggaW5wdXQuXG5cdCpcblx0KiBgYGB0c1xuXHQqIGF3YWl0IGlubmdlc3Quc2VuZCh7IG5hbWU6IFwiYXBwL3VzZXIuY3JlYXRlZFwiLCBkYXRhOiB7IGlkOiAxMjMgfSB9KTtcblx0KiBgYGBcblx0KlxuXHQqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIGlmIHRoZSBldmVudChzKSB3ZXJlIHNlbnQgc3VjY2Vzc2Z1bGx5LFxuXHQqIGVsc2UgdGhyb3dzIHdpdGggYW4gZXJyb3IgZXhwbGFpbmluZyB3aGF0IHdlbnQgd3JvbmcuXG5cdCpcblx0KiBJZiB5b3Ugd2lzaCB0byBzZW5kIGFuIGV2ZW50IHdpdGggY3VzdG9tIHR5cGVzIChpLmUuIG9uZSB0aGF0IGhhc24ndCBiZWVuXG5cdCogZ2VuZXJhdGVkKSwgbWFrZSBzdXJlIHRvIGFkZCBpdCB3aGVuIGNyZWF0aW5nIHlvdXIgSW5uZ2VzdCBpbnN0YW5jZSwgbGlrZVxuXHQqIHNvOlxuXHQqXG5cdCogYGBgdHNcblx0KiBjb25zdCBpbm5nZXN0ID0gbmV3IElubmdlc3Qoe1xuXHQqICAgbmFtZTogXCJNeSBBcHBcIixcblx0KiAgIHNjaGVtYXM6IG5ldyBFdmVudFNjaGVtYXMoKS5mcm9tUmVjb3JkPHtcblx0KiAgICAgXCJteS9ldmVudFwiOiB7XG5cdCogICAgICAgbmFtZTogXCJteS9ldmVudFwiO1xuXHQqICAgICAgIGRhdGE6IHsgYmFyOiBzdHJpbmcgfTtcblx0KiAgICAgfTtcblx0KiAgIH0+KCksXG5cdCogfSk7XG5cdCogYGBgXG5cdCovXG5cdGFzeW5jIHNlbmQocGF5bG9hZCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IGhlYWRlcnMgPSB7IC4uLm9wdGlvbnM/LmVudiA/IHsgW2hlYWRlcktleXMuRW52aXJvbm1lbnRdOiBvcHRpb25zLmVudiB9IDoge30gfTtcblx0XHRyZXR1cm4gdGhpcy5fc2VuZCh7XG5cdFx0XHRwYXlsb2FkLFxuXHRcdFx0aGVhZGVyc1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIEludGVybmFsIG1ldGhvZCBmb3Igc2VuZGluZyBhbiBldmVudCwgdXNlZCB0byBhbGxvdyBJbm5nZXN0IGludGVybmFscyB0b1xuXHQqIGZ1cnRoZXIgY3VzdG9taXplIHRoZSByZXF1ZXN0IHNlbnQgdG8gYW4gSW5uZ2VzdCBTZXJ2ZXIuXG5cdCovXG5cdGFzeW5jIF9zZW5kKHsgcGF5bG9hZCwgaGVhZGVycyB9KSB7XG5cdFx0Y29uc3Qgbm93TWlsbGlzID0gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG5cdFx0bGV0IG1heEF0dGVtcHRzID0gNTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZW50cm9weSA9IGNyZWF0ZUVudHJvcHkoMTApO1xuXHRcdFx0Y29uc3QgZW50cm9weUJhc2U2NCA9IEJ1ZmZlci5mcm9tKGVudHJvcHkpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuXHRcdFx0aGVhZGVycyA9IHtcblx0XHRcdFx0Li4uaGVhZGVycyxcblx0XHRcdFx0W2hlYWRlcktleXMuRXZlbnRJZFNlZWRdOiBgJHtub3dNaWxsaXN9LCR7ZW50cm9weUJhc2U2NH1gXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bGV0IG1lc3NhZ2UgPSBcIkV2ZW50LXNlbmRpbmcgcmV0cmllcyBkaXNhYmxlZFwiO1xuXHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSBtZXNzYWdlICs9IGA6ICR7ZXJyLm1lc3NhZ2V9YDtcblx0XHRcdGNvbnNvbGUuZGVidWcobWVzc2FnZSk7XG5cdFx0XHRtYXhBdHRlbXB0cyA9IDE7XG5cdFx0fVxuXHRcdGNvbnN0IGhvb2tzID0gYXdhaXQgZ2V0SG9va1N0YWNrKHRoaXMubWlkZGxld2FyZSwgXCJvblNlbmRFdmVudFwiLCB2b2lkIDAsIHtcblx0XHRcdHRyYW5zZm9ybUlucHV0OiAocHJldiwgb3V0cHV0KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Li4ucHJldixcblx0XHRcdFx0XHQuLi5vdXRwdXRcblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFx0XHR0cmFuc2Zvcm1PdXRwdXQocHJldiwgb3V0cHV0KSB7XG5cdFx0XHRcdHJldHVybiB7IHJlc3VsdDoge1xuXHRcdFx0XHRcdC4uLnByZXYucmVzdWx0LFxuXHRcdFx0XHRcdC4uLm91dHB1dD8ucmVzdWx0XG5cdFx0XHRcdH0gfTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRsZXQgcGF5bG9hZHMgPSBBcnJheS5pc0FycmF5KHBheWxvYWQpID8gcGF5bG9hZCA6IHBheWxvYWQgPyBbcGF5bG9hZF0gOiBbXTtcblx0XHRjb25zdCBpbnB1dENoYW5nZXMgPSBhd2FpdCBob29rcy50cmFuc2Zvcm1JbnB1dD8uKHsgcGF5bG9hZHM6IFsuLi5wYXlsb2Fkc10gfSk7XG5cdFx0aWYgKGlucHV0Q2hhbmdlcz8ucGF5bG9hZHMpIHBheWxvYWRzID0gWy4uLmlucHV0Q2hhbmdlcy5wYXlsb2Fkc107XG5cdFx0cGF5bG9hZHMgPSBwYXlsb2Fkcy5tYXAoKHApID0+IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLnAsXG5cdFx0XHRcdGlkOiBwLmlkLFxuXHRcdFx0XHR0czogcC50cyB8fCBub3dNaWxsaXMsXG5cdFx0XHRcdGRhdGE6IHAuZGF0YSB8fCB7fVxuXHRcdFx0fTtcblx0XHR9KTtcblx0XHRjb25zdCBhcHBseUhvb2tUb091dHB1dCA9IGFzeW5jIChhcmcpID0+IHtcblx0XHRcdGNvbnN0IGhvb2tPdXRwdXQgPSBhd2FpdCBob29rcy50cmFuc2Zvcm1PdXRwdXQ/LihhcmcpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4uYXJnLnJlc3VsdCxcblx0XHRcdFx0Li4uaG9va091dHB1dD8ucmVzdWx0XG5cdFx0XHR9O1xuXHRcdH07XG5cdFx0LyoqXG5cdFx0KiBJdCBjYW4gYmUgdmFsaWQgZm9yIGEgdXNlciB0byBzZW5kIGFuIGVtcHR5IGxpc3Qgb2YgZXZlbnRzOyBpZiB0aGlzXG5cdFx0KiBoYXBwZW5zLCBzaG93IGEgd2FybmluZyB0aGF0IHRoaXMgbWF5IG5vdCBiZSBpbnRlbmRlZCwgYnV0IGRvbid0IHRocm93LlxuXHRcdCovXG5cdFx0aWYgKCFwYXlsb2Fkcy5sZW5ndGgpIHtcblx0XHRcdGNvbnNvbGUud2FybihwcmV0dHlFcnJvcih7XG5cdFx0XHRcdHR5cGU6IFwid2FyblwiLFxuXHRcdFx0XHR3aGF0SGFwcGVuZWQ6IFwiYGlubmdlc3Quc2VuZCgpYCBjYWxsZWQgd2l0aCBubyBldmVudHNcIixcblx0XHRcdFx0cmVhc3N1cmFuY2U6IFwiVGhpcyBpcyBub3QgYW4gZXJyb3IsIGJ1dCB5b3UgbWF5IG5vdCBoYXZlIGludGVuZGVkIHRvIGRvIHRoaXMuXCIsXG5cdFx0XHRcdGNvbnNlcXVlbmNlczogXCJUaGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIHJlc29sdmUsIGJ1dCBubyBldmVudHMgaGF2ZSBiZWVuIHNlbnQgdG8gSW5uZ2VzdC5cIixcblx0XHRcdFx0c3RhY2s6IHRydWVcblx0XHRcdH0pKTtcblx0XHRcdHJldHVybiBhd2FpdCBhcHBseUhvb2tUb091dHB1dCh7IHJlc3VsdDogeyBpZHM6IFtdIH0gfSk7XG5cdFx0fVxuXHRcdGxldCB1cmwgPSB0aGlzLnNlbmRFdmVudFVybC5ocmVmO1xuXHRcdC8qKlxuXHRcdCogSWYgaW4gcHJvZCBtb2RlIGFuZCBrZXkgaXMgbm90IHByZXNlbnQsIGZhaWwgbm93LlxuXHRcdCovXG5cdFx0aWYgKHRoaXMubW9kZS5pc0Nsb3VkICYmICF0aGlzLmV2ZW50S2V5U2V0KCkpIHRocm93IG5ldyBFcnJvcihwcmV0dHlFcnJvcih7XG5cdFx0XHR3aGF0SGFwcGVuZWQ6IFwiRmFpbGVkIHRvIHNlbmQgZXZlbnRcIixcblx0XHRcdGNvbnNlcXVlbmNlczogXCJZb3VyIGV2ZW50IG9yIGV2ZW50cyB3ZXJlIG5vdCBzZW50IHRvIElubmdlc3QuXCIsXG5cdFx0XHR3aHk6IFwiV2UgY291bGRuJ3QgZmluZCBhbiBldmVudCBrZXkgdG8gdXNlIHRvIHNlbmQgZXZlbnRzIHRvIElubmdlc3QuXCIsXG5cdFx0XHR0b0ZpeE5vdzogZml4RXZlbnRLZXlNaXNzaW5nU3RlcHNcblx0XHR9KSk7XG5cdFx0LyoqXG5cdFx0KiBJZiBkZXYgbW9kZSBoYXMgYmVlbiBpbmZlcnJlZCwgdHJ5IHRvIGhpdCB0aGUgZGV2IHNlcnZlciBmaXJzdCB0byBzZWUgaWZcblx0XHQqIGl0IGV4aXN0cy4gSWYgaXQgZG9lcywgdXNlIGl0LCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIHdoYXRldmVyIHNlcnZlciB3ZVxuXHRcdCogaGF2ZSBjb25maWd1cmVkLlxuXHRcdCpcblx0XHQqIGBJTk5HRVNUX0JBU0VfVVJMYCBpcyB1c2VkIHRvIHNldCBib3RoIGRldiBzZXJ2ZXIgYW5kIHByb2QgVVJMcywgc28gaWYgYVxuXHRcdCogdXNlciBoYXMgc2V0IHRoaXMgaXQgbWVhbnMgdGhleSBoYXZlIGFscmVhZHkgY2hvc2VuIGEgVVJMIHRvIGhpdC5cblx0XHQqL1xuXHRcdGlmICh0aGlzLm1vZGUuaXNEZXYgJiYgdGhpcy5tb2RlLmlzSW5mZXJyZWQgJiYgIXRoaXMuZXZlbnRCYXNlVXJsKSB7XG5cdFx0XHRpZiAoYXdhaXQgZGV2U2VydmVyQXZhaWxhYmxlKGRlZmF1bHREZXZTZXJ2ZXJIb3N0LCB0aGlzLmZldGNoKSkgdXJsID0gZGV2U2VydmVyVXJsKGRlZmF1bHREZXZTZXJ2ZXJIb3N0LCBgZS8ke3RoaXMuZXZlbnRLZXl9YCkuaHJlZjtcblx0XHR9XG5cdFx0cmV0dXJuIGF3YWl0IGFwcGx5SG9va1RvT3V0cHV0KHsgcmVzdWx0OiB7IGlkczogKGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuXHRcdFx0bGV0IHJhd0JvZHk7XG5cdFx0XHRsZXQgYm9keTtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaCh1cmwsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHBheWxvYWRzKSxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdC4uLnRoaXMuaGVhZGVycyxcblx0XHRcdFx0XHQuLi5oZWFkZXJzXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cmF3Qm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdFx0Ym9keSA9IGF3YWl0IHNlbmRFdmVudFJlc3BvbnNlU2NoZW1hLnBhcnNlQXN5bmMocmF3Qm9keSk7XG5cdFx0XHR9IGNhdGNoIChfZXJyKSB7XG5cdFx0XHRcdHRocm93IGF3YWl0IHRoaXMuZ2V0UmVzcG9uc2VFcnJvcihyZXNwb25zZSwgcmF3Qm9keSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoYm9keS5zdGF0dXMgIT09IDIwMCB8fCBib2R5LmVycm9yKSB0aHJvdyBhd2FpdCB0aGlzLmdldFJlc3BvbnNlRXJyb3IocmVzcG9uc2UsIHJhd0JvZHksIGJvZHkuZXJyb3IpO1xuXHRcdFx0cmV0dXJuIGJvZHk7XG5cdFx0fSwge1xuXHRcdFx0bWF4QXR0ZW1wdHMsXG5cdFx0XHRiYXNlRGVsYXk6IDEwMFxuXHRcdH0pKS5pZHMgfSB9KTtcblx0fVxuXHRjcmVhdGVGdW5jdGlvbiA9IChyYXdPcHRpb25zLCByYXdUcmlnZ2VyLCBoYW5kbGVyKSA9PiB7XG5cdFx0Y29uc3QgZm4gPSB0aGlzLl9jcmVhdGVGdW5jdGlvbihyYXdPcHRpb25zLCByYXdUcmlnZ2VyLCBoYW5kbGVyKTtcblx0XHR0aGlzLmxvY2FsRm5zLnB1c2goZm4pO1xuXHRcdHJldHVybiBmbjtcblx0fTtcblx0Z2V0IGZ1bmNzKCkge1xuXHRcdHJldHVybiB0aGlzLmxvY2FsRm5zO1xuXHR9XG5cdF9jcmVhdGVGdW5jdGlvbiA9IChyYXdPcHRpb25zLCByYXdUcmlnZ2VyLCBoYW5kbGVyKSA9PiB7XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IHRoaXMuc2FuaXRpemVPcHRpb25zKHJhd09wdGlvbnMpO1xuXHRcdGNvbnN0IHRyaWdnZXJzID0gdGhpcy5zYW5pdGl6ZVRyaWdnZXJzKHJhd1RyaWdnZXIpO1xuXHRcdHJldHVybiBuZXcgSW5uZ2VzdEZ1bmN0aW9uKHRoaXMsIHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHR0cmlnZ2Vyc1xuXHRcdH0sIGhhbmRsZXIpO1xuXHR9O1xuXHQvKipcblx0KiBSdW50aW1lLW9ubHkgdmFsaWRhdGlvbi5cblx0Ki9cblx0c2FuaXRpemVPcHRpb25zKG9wdGlvbnMpIHtcblx0XHRpZiAoT2JqZWN0Lmhhc093bihvcHRpb25zLCBcImZuc1wiKSkgY29uc29sZS53YXJuKGAke2xvZ1ByZWZpeH0gSW5uZ2VzdEZ1bmN0aW9uOiBcXGBmbnNcXGAgb3B0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gdjM7IHVzZSBcXGBtaWRkbGV3YXJlXFxgIGluc3RlYWQuIFNlZSBodHRwczovL3d3dy5pbm5nZXN0LmNvbS9kb2NzL3Nkay9taWdyYXRpb25gKTtcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdGNvbnNvbGUud2FybihgJHtsb2dQcmVmaXh9IElubmdlc3RGdW5jdGlvbjogQ3JlYXRpbmcgYSBmdW5jdGlvbiB3aXRoIGEgc3RyaW5nIGFzIHRoZSBmaXJzdCBhcmd1bWVudCBoYXMgYmVlbiBkZXByZWNhdGVkIGluIHYzOyBwYXNzIGFuIG9iamVjdCBpbnN0ZWFkLiBTZWUgaHR0cHM6Ly93d3cuaW5uZ2VzdC5jb20vZG9jcy9zZGsvbWlncmF0aW9uYCk7XG5cdFx0XHRyZXR1cm4geyBpZDogb3B0aW9ucyB9O1xuXHRcdH1cblx0XHRyZXR1cm4gb3B0aW9ucztcblx0fVxuXHQvKipcblx0KiBSdW50aW1lLW9ubHkgdmFsaWRhdGlvbi5cblx0Ki9cblx0c2FuaXRpemVUcmlnZ2Vycyh0cmlnZ2Vycykge1xuXHRcdGlmICh0eXBlb2YgdHJpZ2dlcnMgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdGNvbnNvbGUud2FybihgJHtsb2dQcmVmaXh9IElubmdlc3RGdW5jdGlvbjogQ3JlYXRpbmcgYSBmdW5jdGlvbiB3aXRoIGEgc3RyaW5nIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiB2MzsgcGFzcyBhbiBvYmplY3QgaW5zdGVhZC4gU2VlIGh0dHBzOi8vd3d3Lmlubmdlc3QuY29tL2RvY3Mvc2RrL21pZ3JhdGlvbmApO1xuXHRcdFx0cmV0dXJuIFt7IGV2ZW50OiB0cmlnZ2VycyB9XTtcblx0XHR9XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KHRyaWdnZXJzKSkgcmV0dXJuIFt0cmlnZ2Vyc107XG5cdFx0cmV0dXJuIHRyaWdnZXJzO1xuXHR9XG59O1xuLyoqXG4qIERlZmF1bHQgbWlkZGxld2FyZSB0aGF0IGlzIGluY2x1ZGVkIGluIGV2ZXJ5IGNsaWVudCwgcGxhY2VkIGFmdGVyIHRoZSB1c2VyJ3NcbiogbWlkZGxld2FyZSBvbiB0aGUgY2xpZW50IGJ1dCBiZWZvcmUgZnVuY3Rpb24tbGV2ZWwgbWlkZGxld2FyZS5cbipcbiogSXQgaXMgZGVmaW5lZCBoZXJlIHRvIGVuc3VyZSB0aGF0IGNvbW1lbnRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgZ2VuZXJhdGVkIFRTXG4qIGRlZmluaXRpb25zLiBXaXRob3V0IHRoaXMsIHdlIGluZmVyIHRoZSBzdGFjayBvZiBidWlsdC1pbiBtaWRkbGV3YXJlIHdpdGhvdXRcbiogY29tbWVudHMsIGxvc2luZyBhIGxvdCBvZiB2YWx1ZS5cbipcbiogSWYgdGhpcyBpcyBtb3ZlZCwgcGxlYXNlIGVuc3VyZSB0aGF0IHVzaW5nIHRoaXMgcGFja2FnZSBpbiBhbm90aGVyIHByb2plY3RcbiogY2FuIGNvcnJlY3RseSBhY2Nlc3MgY29tbWVudHMgb24gbXV0YXRlZCBpbnB1dCBhbmQgb3V0cHV0LlxuKlxuKiBUaGlzIHJldHVybiBwYXR0ZXJuIG1pbWljcyB0aGUgb3V0cHV0IG9mIGEgYHNhdGlzZmllc2Agc3VmZml4OyBpdCdzIHVzZWQgYXNcbiogd2Ugc3VwcG9ydCB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IHByaW9yIHRvIHRoZSBpbnRyb2R1Y3Rpb24gb2YgYHNhdGlzZmllc2AuXG4qL1xuY29uc3QgYnVpbHRJbk1pZGRsZXdhcmUgPSAoKG0pID0+IG0pKFtuZXcgSW5uZ2VzdE1pZGRsZXdhcmUoe1xuXHRuYW1lOiBcIklubmdlc3Q6IExvZ2dlclwiLFxuXHRpbml0KHsgY2xpZW50IH0pIHtcblx0XHRyZXR1cm4geyBvbkZ1bmN0aW9uUnVuKGFyZykge1xuXHRcdFx0Y29uc3QgeyBjdHggfSA9IGFyZztcblx0XHRcdGNvbnN0IG1ldGFkYXRhID0ge1xuXHRcdFx0XHRydW5JRDogY3R4LnJ1bklkLFxuXHRcdFx0XHRldmVudE5hbWU6IGN0eC5ldmVudC5uYW1lLFxuXHRcdFx0XHRmdW5jdGlvbk5hbWU6IGFyZy5mbi5uYW1lXG5cdFx0XHR9O1xuXHRcdFx0bGV0IHByb3ZpZGVkTG9nZ2VyID0gY2xpZW50W1wibG9nZ2VyXCJdO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKFwiY2hpbGRcIiBpbiBwcm92aWRlZExvZ2dlcikgcHJvdmlkZWRMb2dnZXIgPSBwcm92aWRlZExvZ2dlci5jaGlsZChtZXRhZGF0YSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcImZhaWxlZCB0byBjcmVhdGUgXFxcImNoaWxkTG9nZ2VyXFxcIiB3aXRoIGVycm9yOiBcIiwgZXJyKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGxvZ2dlciA9IG5ldyBQcm94eUxvZ2dlcihwcm92aWRlZExvZ2dlcik7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0cmFuc2Zvcm1JbnB1dCgpIHtcblx0XHRcdFx0XHRyZXR1cm4geyBjdHg6IHsgbG9nZ2VyIH0gfTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVmb3JlRXhlY3V0aW9uKCkge1xuXHRcdFx0XHRcdGxvZ2dlci5lbmFibGUoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dHJhbnNmb3JtT3V0cHV0KHsgcmVzdWx0OiB7IGVycm9yIH0gfSkge1xuXHRcdFx0XHRcdGlmIChlcnJvcikgbG9nZ2VyLmVycm9yKGVycm9yKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgYmVmb3JlUmVzcG9uc2UoKSB7XG5cdFx0XHRcdFx0YXdhaXQgbG9nZ2VyLmZsdXNoKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSB9O1xuXHR9XG59KV0pO1xuKGZ1bmN0aW9uKF9Jbm5nZXN0KSB7XG5cdF9Jbm5nZXN0LlRhZyA9IFwiSW5uZ2VzdC5BcHBcIjtcbn0pKElubmdlc3QgfHwgKElubmdlc3QgPSB7fSkpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IElubmdlc3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlubmdlc3QuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/Inngest.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestCommHandler.js":
/*!***************************************************************!*\
  !*** ./node_modules/inngest/components/InngestCommHandler.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestCommHandler: () => (/* binding */ InngestCommHandler)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./execution/InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _helpers_env_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n/* harmony import */ var _helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../helpers/devserver.js */ \"(rsc)/./node_modules/inngest/helpers/devserver.js\");\n/* harmony import */ var _helpers_enum_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../helpers/enum.js */ \"(rsc)/./node_modules/inngest/helpers/enum.js\");\n/* harmony import */ var _helpers_net_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../helpers/net.js */ \"(rsc)/./node_modules/inngest/helpers/net.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _helpers_ServerTiming_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/ServerTiming.js */ \"(rsc)/./node_modules/inngest/helpers/ServerTiming.js\");\n/* harmony import */ var _helpers_stream_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../helpers/stream.js */ \"(rsc)/./node_modules/inngest/helpers/stream.js\");\n/* harmony import */ var _InngestFunction_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./InngestFunction.js */ \"(rsc)/./node_modules/inngest/components/InngestFunction.js\");\n/* harmony import */ var _execution_v1_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./execution/v1.js */ \"(rsc)/./node_modules/inngest/components/execution/v1.js\");\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\");\n/* harmony import */ var ulid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ulid */ \"(rsc)/./node_modules/ulid/dist/index.esm.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/InngestCommHandler.ts\n/**\n* A schema for the response from Inngest when registering.\n*/\nconst registerResSchema = zod_v3__WEBPACK_IMPORTED_MODULE_2__.object({\n\tstatus: zod_v3__WEBPACK_IMPORTED_MODULE_2__.number().default(200),\n\tskipped: zod_v3__WEBPACK_IMPORTED_MODULE_2__.boolean().optional().default(false),\n\tmodified: zod_v3__WEBPACK_IMPORTED_MODULE_2__.boolean().optional().default(false),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_2__.string().default(\"Successfully registered\")\n});\n/**\n* `InngestCommHandler` is a class for handling incoming requests from Inngest (or\n* Inngest's tooling such as the dev server or CLI) and taking appropriate\n* action for any served functions.\n*\n* All handlers (Next.js, RedwoodJS, Remix, Deno Fresh, etc.) are created using\n* this class; the exposed `serve` function will - most commonly - create an\n* instance of `InngestCommHandler` and then return `instance.createHandler()`.\n*\n* See individual parameter details for more information, or see the\n* source code for an existing handler, e.g.\n* {@link https://github.com/inngest/inngest-js/blob/main/src/next.ts}\n*\n* @example\n* ```\n* // my-custom-handler.ts\n* import {\n*   InngestCommHandler,\n*   type ServeHandlerOptions,\n* } from \"./components/InngestCommHandler\";\n*\n* export const serve = (options: ServeHandlerOptions) => {\n*   const handler = new InngestCommHandler({\n*     frameworkName: \"my-custom-handler\",\n*     ...options,\n*     handler: (req: Request) => {\n*       return {\n*         body: () => req.json(),\n*         headers: (key) => req.headers.get(key),\n*         method: () => req.method,\n*         url: () => new URL(req.url, `https://${req.headers.get(\"host\") || \"\"}`),\n*         transformResponse: ({ body, status, headers }) => {\n*           return new Response(body, { status, headers });\n*         },\n*       };\n*     },\n*   });\n*\n*   return handler.createHandler();\n* };\n* ```\n*\n* @public\n*/\nvar InngestCommHandler = class {\n\t/**\n\t* The ID of this serve handler, e.g. `\"my-app\"`. It's recommended that this\n\t* value represents the overarching app/service that this set of functions is\n\t* being served from.\n\t*/\n\tid;\n\t/**\n\t* The handler specified during instantiation of the class.\n\t*/\n\thandler;\n\t/**\n\t* The URL of the Inngest function registration endpoint.\n\t*/\n\tinngestRegisterUrl;\n\t/**\n\t* The name of the framework this handler is designed for. Should be\n\t* lowercase, alphanumeric characters inclusive of `-` and `/`.\n\t*/\n\tframeworkName;\n\t/**\n\t* The signing key used to validate requests from Inngest. This is\n\t* intentionally mutable so that we can pick up the signing key from the\n\t* environment during execution if needed.\n\t*/\n\tsigningKey;\n\t/**\n\t* The same as signingKey, except used as a fallback when auth fails using the\n\t* primary signing key.\n\t*/\n\tsigningKeyFallback;\n\t/**\n\t* A property that can be set to indicate whether we believe we are in\n\t* production mode.\n\t*\n\t* Should be set every time a request is received.\n\t*/\n\t_mode;\n\t/**\n\t* The localized `fetch` implementation used by this handler.\n\t*/\n\tfetch;\n\t/**\n\t* The host used to access the Inngest serve endpoint, e.g.:\n\t*\n\t*     \"https://myapp.com\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom hostname here to ensure that the path is reported\n\t* correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom path, use `servePath`.\n\t*/\n\t_serveHost;\n\t/**\n\t* The path to the Inngest serve endpoint. e.g.:\n\t*\n\t*     \"/some/long/path/to/inngest/endpoint\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom path (excluding the hostname) here to ensure that the\n\t* path is reported correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom hostname, use `serveHost`.\n\t*/\n\t_servePath;\n\t/**\n\t* The minimum level to log from the Inngest serve handler.\n\t*/\n\tlogLevel;\n\tstreaming;\n\t/**\n\t* A private collection of just Inngest functions, as they have been passed\n\t* when instantiating the class.\n\t*/\n\trawFns;\n\tclient;\n\t/**\n\t* A private collection of functions that are being served. This map is used\n\t* to find and register functions when interacting with Inngest Cloud.\n\t*/\n\tfns = {};\n\tenv = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)();\n\tallowExpiredSignatures;\n\t_options;\n\tskipSignatureValidation;\n\tconstructor(options) {\n\t\tthis._options = options;\n\t\t/**\n\t\t* v2 -> v3 migration error.\n\t\t*\n\t\t* If a serve handler is passed a client as the first argument, it'll be\n\t\t* spread in to these options. We should be able to detect this by picking\n\t\t* up a unique property on the object.\n\t\t*/\n\t\tif (Object.hasOwn(options, \"eventKey\")) throw new Error(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.logPrefix} You've passed an Inngest client as the first argument to your serve handler. This is no longer supported in v3; please pass the Inngest client as the \\`client\\` property of an options object instead. See https://www.inngest.com/docs/sdk/migration`);\n\t\tthis.frameworkName = options.frameworkName;\n\t\tthis.client = options.client;\n\t\tif (options.id) console.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.logPrefix} The \\`id\\` serve option is deprecated and will be removed in v4`);\n\t\tthis.id = options.id || this.client.id;\n\t\tthis.handler = options.handler;\n\t\t/**\n\t\t* Provide a hidden option to allow expired signatures to be accepted during\n\t\t* testing.\n\t\t*/\n\t\tthis.allowExpiredSignatures = Boolean(arguments[\"0\"]?.__testingAllowExpiredSignatures);\n\t\tthis.rawFns = options.functions?.filter(Boolean) ?? [];\n\t\tif (this.rawFns.length !== (options.functions ?? []).length) console.warn(`Some functions passed to serve() are undefined and misconfigured.  Please check your imports.`);\n\t\tthis.fns = this.rawFns.reduce((acc, fn) => {\n\t\t\tconst configs = fn[\"getConfig\"]({\n\t\t\t\tbaseUrl: new URL(\"https://example.com\"),\n\t\t\t\tappPrefix: this.id\n\t\t\t});\n\t\t\tconst fns = configs.reduce((acc$1, { id }, index) => {\n\t\t\t\treturn {\n\t\t\t\t\t...acc$1,\n\t\t\t\t\t[id]: {\n\t\t\t\t\t\tfn,\n\t\t\t\t\t\tonFailure: Boolean(index)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}, {});\n\t\t\tconfigs.forEach(({ id }) => {\n\t\t\t\tif (acc[id]) throw new Error(`Duplicate function ID \"${id}\"; please change a function's name or provide an explicit ID to avoid conflicts.`);\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...acc,\n\t\t\t\t...fns\n\t\t\t};\n\t\t}, {});\n\t\tthis.inngestRegisterUrl = new URL(\"/fn/register\", this.apiBaseUrl);\n\t\tthis.signingKey = options.signingKey;\n\t\tthis.signingKeyFallback = options.signingKeyFallback;\n\t\tthis._serveHost = options.serveHost || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServeHost];\n\t\tthis._servePath = options.servePath || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServePath];\n\t\tthis.skipSignatureValidation = options.skipSignatureValidation || false;\n\t\tconst defaultLogLevel = \"info\";\n\t\tthis.logLevel = zod_v3__WEBPACK_IMPORTED_MODULE_2__[\"enum\"](_types_js__WEBPACK_IMPORTED_MODULE_5__.logLevels).default(defaultLogLevel).catch((ctx) => {\n\t\t\tthis.log(\"warn\", `Unknown log level passed: ${String(ctx.input)}; defaulting to ${defaultLogLevel}`);\n\t\t\treturn defaultLogLevel;\n\t\t}).parse(options.logLevel || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestLogLevel]);\n\t\tif (this.logLevel === \"debug\") {\n\t\t\t/**\n\t\t\t* `debug` is an old library; sometimes its runtime detection doesn't work\n\t\t\t* for newer pairings of framework/runtime.\n\t\t\t*\n\t\t\t* One silly symptom of this is that `Debug()` returns an anonymous\n\t\t\t* function with no extra properties instead of a `Debugger` instance if\n\t\t\t* the wrong code is consumed following a bad detection. This results in\n\t\t\t* the following `.enable()` call failing, so we just try carefully to\n\t\t\t* enable it here.\n\t\t\t*/\n\t\t\tif (debug__WEBPACK_IMPORTED_MODULE_0__.enable && typeof debug__WEBPACK_IMPORTED_MODULE_0__.enable === \"function\") debug__WEBPACK_IMPORTED_MODULE_0__.enable(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.debugPrefix}:*`);\n\t\t}\n\t\tconst defaultStreamingOption = false;\n\t\tthis.streaming = zod_v3__WEBPACK_IMPORTED_MODULE_2__.union([zod_v3__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\"allow\", \"force\"]), zod_v3__WEBPACK_IMPORTED_MODULE_2__.literal(false)]).default(defaultStreamingOption).catch((ctx) => {\n\t\t\tthis.log(\"warn\", `Unknown streaming option passed: ${String(ctx.input)}; defaulting to ${String(defaultStreamingOption)}`);\n\t\t\treturn defaultStreamingOption;\n\t\t}).parse(options.streaming || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestStreaming]);\n\t\tthis.fetch = options.fetch ? (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getFetch)(options.fetch) : this.client[\"fetch\"];\n\t}\n\t/**\n\t* Get the API base URL for the Inngest API.\n\t*\n\t* This is a getter to encourage checking the environment for the API base URL\n\t* each time it's accessed, as it may change during execution.\n\t*/\n\tget apiBaseUrl() {\n\t\treturn this._options.baseUrl || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestApiBaseUrl] || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestBaseUrl] || this.client.apiBaseUrl || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultInngestApiBaseUrl;\n\t}\n\t/**\n\t* Get the event API base URL for the Inngest API.\n\t*\n\t* This is a getter to encourage checking the environment for the event API\n\t* base URL each time it's accessed, as it may change during execution.\n\t*/\n\tget eventApiBaseUrl() {\n\t\treturn this._options.baseUrl || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestEventApiBaseUrl] || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestBaseUrl] || this.client.eventBaseUrl || _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultInngestEventBaseUrl;\n\t}\n\t/**\n\t* The host used to access the Inngest serve endpoint, e.g.:\n\t*\n\t*     \"https://myapp.com\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom hostname here to ensure that the path is reported\n\t* correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom path, use `servePath`.\n\t*/\n\tget serveHost() {\n\t\treturn this._serveHost || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServeHost];\n\t}\n\t/**\n\t* The path to the Inngest serve endpoint. e.g.:\n\t*\n\t*     \"/some/long/path/to/inngest/endpoint\"\n\t*\n\t* By default, the library will try to infer this using request details such\n\t* as the \"Host\" header and request path, but sometimes this isn't possible\n\t* (e.g. when running in a more controlled environments such as AWS Lambda or\n\t* when dealing with proxies/redirects).\n\t*\n\t* Provide the custom path (excluding the hostname) here to ensure that the\n\t* path is reported correctly when registering functions with Inngest.\n\t*\n\t* To also provide a custom hostname, use `serveHost`.\n\t*\n\t* This is a getter to encourage checking the environment for the serve path\n\t* each time it's accessed, as it may change during execution.\n\t*/\n\tget servePath() {\n\t\treturn this._servePath || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServePath];\n\t}\n\tget hashedEventKey() {\n\t\tif (!this.client[\"eventKey\"] || this.client[\"eventKey\"] === _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.dummyEventKey) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.hashEventKey)(this.client[\"eventKey\"]);\n\t}\n\tget hashedSigningKey() {\n\t\tif (!this.signingKey) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.hashSigningKey)(this.signingKey);\n\t}\n\tget hashedSigningKeyFallback() {\n\t\tif (!this.signingKeyFallback) return;\n\t\treturn (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.hashSigningKey)(this.signingKeyFallback);\n\t}\n\t/**\n\t* Returns a `boolean` representing whether this handler will stream responses\n\t* or not. Takes into account the user's preference and the platform's\n\t* capabilities.\n\t*/\n\tasync shouldStream(actions) {\n\t\tif (await actions.queryStringWithDefaults(\"testing for probe\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.Probe) !== void 0) return false;\n\t\tif (!actions.transformStreamingResponse) return false;\n\t\tif (this.streaming === \"force\") return true;\n\t\treturn this.streaming === \"allow\" && (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.platformSupportsStreaming)(this.frameworkName, this.env);\n\t}\n\tasync isInngestReq(actions) {\n\t\tconst reqMessage = `checking if this is an Inngest request`;\n\t\tconst [runId, signature] = await Promise.all([actions.headers(reqMessage, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestRunId), actions.headers(reqMessage, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature)]);\n\t\treturn Boolean(runId && typeof signature === \"string\");\n\t}\n\t/**\n\t* Start handling a request, setting up environments, modes, and returning\n\t* some helpers.\n\t*/\n\tasync initRequest(...args) {\n\t\tconst timer = new _helpers_ServerTiming_js__WEBPACK_IMPORTED_MODULE_7__.ServerTiming();\n\t\tconst actions = await this.getActions(timer, ...args);\n\t\tconst [env, expectedServerKind] = await Promise.all([actions.env?.(\"starting to handle request\"), actions.headers(\"checking expected server kind\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestServerKind)]);\n\t\tthis.env = {\n\t\t\t...(0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)(),\n\t\t\t...env\n\t\t};\n\t\tconst headerPromises = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.forwardedHeaders.map(async (header) => {\n\t\t\treturn {\n\t\t\t\theader,\n\t\t\t\tvalue: await actions.headers(`fetching ${header} for forwarding`, header)\n\t\t\t};\n\t\t});\n\t\tconst headersToForwardP = Promise.all(headerPromises).then((fetchedHeaders) => {\n\t\t\treturn fetchedHeaders.reduce((acc, { header, value }) => {\n\t\t\t\tif (value) acc[header] = value;\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t});\n\t\tconst getHeaders = async () => ({\n\t\t\t...(0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.inngestHeaders)({\n\t\t\t\tenv: this.env,\n\t\t\t\tframework: this.frameworkName,\n\t\t\t\tclient: this.client,\n\t\t\t\texpectedServerKind: expectedServerKind || void 0,\n\t\t\t\textras: { \"Server-Timing\": timer.getHeader() }\n\t\t\t}),\n\t\t\t...await headersToForwardP\n\t\t});\n\t\tconst assumedMode = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getMode)({\n\t\t\tenv: this.env,\n\t\t\tclient: this.client\n\t\t});\n\t\tif (assumedMode.isExplicit) this._mode = assumedMode;\n\t\telse {\n\t\t\tconst serveIsProd = await actions.isProduction?.(\"starting to handle request\");\n\t\t\tif (typeof serveIsProd === \"boolean\") this._mode = new _helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.Mode({\n\t\t\t\ttype: serveIsProd ? \"cloud\" : \"dev\",\n\t\t\t\tisExplicit: false\n\t\t\t});\n\t\t\telse this._mode = assumedMode;\n\t\t}\n\t\tthis.upsertKeysFromEnv();\n\t\treturn {\n\t\t\ttimer,\n\t\t\tactions,\n\t\t\tgetHeaders\n\t\t};\n\t}\n\t/**\n\t* `createSyncHandler` should be used to return a type-equivalent version of\n\t* the `handler` specified during instantiation.\n\t*/\n\tcreateSyncHandler() {\n\t\treturn (handler) => {\n\t\t\treturn this.wrapHandler((async (...args) => {\n\t\t\t\tconst reqInit = await this.initRequest(...args);\n\t\t\t\tconst fn = new _InngestFunction_js__WEBPACK_IMPORTED_MODULE_8__.InngestFunction(this.client, {\n\t\t\t\t\tid: this._options.syncOptions?.functionId ?? \"\",\n\t\t\t\t\tretries: this._options.syncOptions?.retries ?? _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaxRetries\n\t\t\t\t}, () => handler(...args));\n\t\t\t\tif (await this.isInngestReq(reqInit.actions)) return this.handleAsyncRequest({\n\t\t\t\t\t...reqInit,\n\t\t\t\t\tforceExecution: true,\n\t\t\t\t\targs,\n\t\t\t\t\tfns: [fn]\n\t\t\t\t});\n\t\t\t\treturn this.handleSyncRequest({\n\t\t\t\t\t...reqInit,\n\t\t\t\t\targs,\n\t\t\t\t\tasyncMode: this._options.syncOptions?.asyncResponse ?? _types_js__WEBPACK_IMPORTED_MODULE_5__.AsyncResponseType.Redirect,\n\t\t\t\t\tfn\n\t\t\t\t});\n\t\t\t}));\n\t\t};\n\t}\n\t/**\n\t* `createHandler` should be used to return a type-equivalent version of the\n\t* `handler` specified during instantiation.\n\t*\n\t* @example\n\t* ```\n\t* // my-custom-handler.ts\n\t* import {\n\t*   InngestCommHandler,\n\t*   type ServeHandlerOptions,\n\t* } from \"./components/InngestCommHandler\";\n\t*\n\t* export const serve = (options: ServeHandlerOptions) => {\n\t*   const handler = new InngestCommHandler({\n\t*     frameworkName: \"my-custom-handler\",\n\t*     ...options,\n\t*     handler: (req: Request) => {\n\t*       return {\n\t*         body: () => req.json(),\n\t*         headers: (key) => req.headers.get(key),\n\t*         method: () => req.method,\n\t*         url: () => new URL(req.url, `https://${req.headers.get(\"host\") || \"\"}`),\n\t*         transformResponse: ({ body, status, headers }) => {\n\t*           return new Response(body, { status, headers });\n\t*         },\n\t*       };\n\t*     },\n\t*   });\n\t*\n\t*   return handler.createHandler();\n\t* };\n\t* ```\n\t*/\n\tcreateHandler() {\n\t\treturn this.wrapHandler((async (...args) => {\n\t\t\treturn this.handleAsyncRequest({\n\t\t\t\t...await this.initRequest(...args),\n\t\t\t\targs\n\t\t\t});\n\t\t}));\n\t}\n\t/**\n\t* Given a set of actions that let us access the incoming request, create a\n\t* `http/run.started` event that repesents a run starting from an HTTP\n\t* request.\n\t*/\n\tasync createHttpEvent(actions, fn) {\n\t\tconst reason = \"creating sync event\";\n\t\tconst contentTypePromise = actions.headers(reason, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.ContentType).then((v) => v ?? \"\");\n\t\tconst ipPromise = actions.headers(reason, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.ForwardedFor).then((v) => {\n\t\t\tif (v) return v;\n\t\t\treturn actions.headers(reason, _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RealIp).then((v$1) => v$1 ?? \"\");\n\t\t});\n\t\tconst methodPromise = actions.method(reason);\n\t\tconst urlPromise = actions.url(reason).then((v) => this.reqUrl(v));\n\t\tconst domainPromise = urlPromise.then((url) => `${url.protocol}//${url.host}`);\n\t\tconst pathPromise = urlPromise.then((url) => url.pathname);\n\t\tconst queryParamsPromise = urlPromise.then((url) => url.searchParams.toString());\n\t\tconst bodyPromise = actions.textBody(reason).then((body$1) => {\n\t\t\treturn typeof body$1 === \"string\" ? body$1 : (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(body$1);\n\t\t});\n\t\tconst [contentType, domain, ip, method, path, queryParams, body] = await Promise.all([\n\t\t\tcontentTypePromise,\n\t\t\tdomainPromise,\n\t\t\tipPromise,\n\t\t\tmethodPromise,\n\t\t\tpathPromise,\n\t\t\tqueryParamsPromise,\n\t\t\tbodyPromise\n\t\t]);\n\t\treturn {\n\t\t\tname: \"http/run.started\",\n\t\t\tdata: {\n\t\t\t\tcontent_type: contentType,\n\t\t\t\tdomain,\n\t\t\t\tip,\n\t\t\t\tmethod,\n\t\t\t\tpath,\n\t\t\t\tquery_params: queryParams,\n\t\t\t\tbody,\n\t\t\t\tfn: fn.id()\n\t\t\t}\n\t\t};\n\t}\n\tasync handleSyncRequest({ timer, actions, fn, asyncMode, args }) {\n\t\tif (!actions.experimentalTransformSyncResponse) throw new Error(\"This platform does not support synchronous Inngest function executions.\");\n\t\tif (await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_9__.getAsyncCtx)()) throw new Error(\"We already seem to be in the context of an Inngest execution, but didn't expect to be. Did you already wrap this handler?\");\n\t\tconst runId = (0,ulid__WEBPACK_IMPORTED_MODULE_1__.ulid)();\n\t\tconst event = await this.createHttpEvent(actions, fn);\n\t\tconst exeVersion = _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__.PREFERRED_EXECUTION_VERSION;\n\t\tconst result = await fn[\"createExecution\"]({\n\t\t\tversion: exeVersion,\n\t\t\tpartialOptions: {\n\t\t\t\tclient: this.client,\n\t\t\t\tdata: {\n\t\t\t\t\trunId,\n\t\t\t\t\tevent,\n\t\t\t\t\tattempt: 0,\n\t\t\t\t\tevents: [event],\n\t\t\t\t\tmaxAttempts: fn.opts.retries ?? _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaxRetries\n\t\t\t\t},\n\t\t\t\trunId,\n\t\t\t\theaders: {},\n\t\t\t\treqArgs: args,\n\t\t\t\tstepCompletionOrder: [],\n\t\t\t\tstepState: {},\n\t\t\t\tdisableImmediateExecution: false,\n\t\t\t\tisFailureHandler: false,\n\t\t\t\ttimer,\n\t\t\t\tcreateResponse: (data) => actions.experimentalTransformSyncResponse(\"creating sync execution\", data).then((res) => ({\n\t\t\t\t\t...res,\n\t\t\t\t\tversion: exeVersion\n\t\t\t\t})),\n\t\t\t\tstepMode: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync\n\t\t\t}\n\t\t}).start();\n\t\tconst resultHandler = {\n\t\t\t\"step-not-found\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'step-not-found' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"steps-found\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'steps-found' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"step-ran\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'step-ran' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"function-rejected\": () => {\n\t\t\t\tthrow new Error(\"We should not get the result 'function-rejected' when checkpointing. This is a bug in the `inngest` SDK\");\n\t\t\t},\n\t\t\t\"function-resolved\": ({ data }) => {\n\t\t\t\treturn data;\n\t\t\t},\n\t\t\t\"change-mode\": async ({ token }) => {\n\t\t\t\tswitch (asyncMode) {\n\t\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.AsyncResponseType.Redirect: return actions.transformResponse(\"creating sync->async redirect response\", {\n\t\t\t\t\t\tstatus: 302,\n\t\t\t\t\t\theaders: { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Location]: await this.client[\"inngestApi\"][\"getTargetUrl\"](`/v1/http/runs/${runId}/output?token=${token}`).then((url) => url.toString()) },\n\t\t\t\t\t\tversion: exeVersion,\n\t\t\t\t\t\tbody: \"\"\n\t\t\t\t\t});\n\t\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.AsyncResponseType.Token: return actions.transformResponse(\"creating sync->async token response\", {\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\theaders: {},\n\t\t\t\t\t\tversion: exeVersion,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\t\t\trun_id: runId,\n\t\t\t\t\t\t\ttoken\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tdefault: break;\n\t\t\t\t}\n\t\t\t\tthrow new Error(\"Not implemented: change-mode\");\n\t\t\t}\n\t\t}[result.type];\n\t\tif (!resultHandler) throw new Error(`No handler for execution result type: ${result.type}. This is a bug in the \\`inngest\\` SDK`);\n\t\treturn resultHandler(result);\n\t}\n\tasync handleAsyncRequest({ timer, actions, args, getHeaders, forceExecution, fns }) {\n\t\tif (forceExecution && !actions.experimentalTransformSyncResponse) throw new Error(\"This platform does not support async executions in Inngest for APIs.\");\n\t\tconst methodP = actions.method(\"starting to handle request\");\n\t\tconst contentLength = await actions.headers(\"checking signature for request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.ContentLength).then((value) => {\n\t\t\tif (!value) return;\n\t\t\treturn Number.parseInt(value, 10);\n\t\t});\n\t\tconst [signature, method, body] = await Promise.all([\n\t\t\tactions.headers(\"checking signature for request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature).then((headerSignature) => {\n\t\t\t\treturn headerSignature ?? void 0;\n\t\t\t}),\n\t\t\tmethodP,\n\t\t\tmethodP.then((method$1) => {\n\t\t\t\tif (method$1 === \"POST\" || method$1 === \"PUT\") {\n\t\t\t\t\tif (!contentLength) return \"\";\n\t\t\t\t\treturn actions.body(`checking body for request signing as method is ${method$1}`);\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t})\n\t\t]);\n\t\tconst signatureValidation = this.validateSignature(signature, body);\n\t\tconst actionRes = timer.wrap(\"action\", () => this.handleAction({\n\t\t\tactions,\n\t\t\ttimer,\n\t\t\tgetHeaders,\n\t\t\treqArgs: args,\n\t\t\tsignatureValidation,\n\t\t\tbody,\n\t\t\tmethod,\n\t\t\tforceExecution: Boolean(forceExecution),\n\t\t\tfns\n\t\t}));\n\t\t/**\n\t\t* Prepares an action response by merging returned data to provide\n\t\t* trailing information such as `Server-Timing` headers.\n\t\t*\n\t\t* It should always prioritize the headers returned by the action, as they\n\t\t* may contain important information such as `Content-Type`.\n\t\t*/\n\t\tconst prepareActionRes = async (res) => {\n\t\t\tconst headers = {\n\t\t\t\t...await getHeaders(),\n\t\t\t\t...res.headers,\n\t\t\t\t...res.version === null ? {} : { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RequestVersion]: (res.version ?? _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__.PREFERRED_EXECUTION_VERSION).toString() }\n\t\t\t};\n\t\t\tlet signature$1;\n\t\t\ttry {\n\t\t\t\tsignature$1 = await signatureValidation.then((result) => {\n\t\t\t\t\tif (!result.success || !result.keyUsed) return;\n\t\t\t\t\treturn this.getResponseSignature(result.keyUsed, res.body);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\treturn {\n\t\t\t\t\t...res,\n\t\t\t\t\theaders,\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(err)),\n\t\t\t\t\tstatus: 500\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (signature$1) headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature] = signature$1;\n\t\t\treturn {\n\t\t\t\t...res,\n\t\t\t\theaders\n\t\t\t};\n\t\t};\n\t\tif (await this.shouldStream(actions)) {\n\t\t\tif (await actions.method(\"starting streaming response\") === \"POST\") {\n\t\t\t\tconst { stream, finalize } = await (0,_helpers_stream_js__WEBPACK_IMPORTED_MODULE_12__.createStream)();\n\t\t\t\t/**\n\t\t\t\t* Errors are handled by `handleAction` here to ensure that an\n\t\t\t\t* appropriate response is always given.\n\t\t\t\t*/\n\t\t\t\tactionRes.then((res) => {\n\t\t\t\t\treturn finalize(prepareActionRes(res));\n\t\t\t\t});\n\t\t\t\treturn timer.wrap(\"res\", async () => {\n\t\t\t\t\treturn actions.transformStreamingResponse?.(\"starting streaming response\", {\n\t\t\t\t\t\tstatus: 201,\n\t\t\t\t\t\theaders: await getHeaders(),\n\t\t\t\t\t\tbody: stream,\n\t\t\t\t\t\tversion: null\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn timer.wrap(\"res\", async () => {\n\t\t\treturn actionRes.then(prepareActionRes).then((actionRes$1) => {\n\t\t\t\treturn actions.transformResponse(\"sending back response\", actionRes$1);\n\t\t\t});\n\t\t});\n\t}\n\tasync getActions(timer, ...args) {\n\t\t/**\n\t\t* Used for testing, allow setting action overrides externally when\n\t\t* calling the handler. Always search the final argument.\n\t\t*/\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst actionOverrides = typeof lastArg === \"object\" && lastArg !== null && \"actionOverrides\" in lastArg && typeof lastArg[\"actionOverrides\"] === \"object\" && lastArg[\"actionOverrides\"] !== null ? lastArg[\"actionOverrides\"] : {};\n\t\t/**\n\t\t* We purposefully `await` the handler, as it could be either sync or\n\t\t* async.\n\t\t*/\n\t\tconst rawActions = {\n\t\t\t...await timer.wrap(\"handler\", () => this.handler(...args)).catch((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.rethrowError)(\"Serve handler failed to run\")),\n\t\t\t...actionOverrides\n\t\t};\n\t\t/**\n\t\t* Mapped promisified handlers from userland `serve()` function mixed in\n\t\t* with some helpers.\n\t\t*/\n\t\tconst actions = {\n\t\t\t...Object.entries(rawActions).reduce((acc, [key, value]) => {\n\t\t\t\tif (typeof value !== \"function\") return acc;\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\t[key]: (reason, ...args$1) => {\n\t\t\t\t\t\tconst errMessage = [`Failed calling \\`${key}\\` from serve handler`, reason].filter(Boolean).join(\" when \");\n\t\t\t\t\t\tconst fn = () => value(...args$1);\n\t\t\t\t\t\treturn (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(fn).catch((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.rethrowError)(errMessage)).catch((err) => {\n\t\t\t\t\t\t\tthis.log(\"error\", err);\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}, {}),\n\t\t\tqueryStringWithDefaults: async (reason, key) => {\n\t\t\t\tconst url = await actions.url(reason);\n\t\t\t\treturn await actions.queryString?.(reason, key, url) || url.searchParams.get(key) || void 0;\n\t\t\t},\n\t\t\t...actionOverrides\n\t\t};\n\t\treturn actions;\n\t}\n\twrapHandler(handler) {\n\t\t/**\n\t\t* Some platforms check (at runtime) the length of the function being used\n\t\t* to handle an endpoint. If this is a variadic function, it will fail that\n\t\t* check.\n\t\t*\n\t\t* Therefore, we expect the arguments accepted to be the same length as the\n\t\t* `handler` function passed internally.\n\t\t*\n\t\t* We also set a name to avoid a common useless name in tracing such as\n\t\t* `\"anonymous\"` or `\"bound function\"`.\n\t\t*\n\t\t* https://github.com/getsentry/sentry-javascript/issues/3284\n\t\t*/\n\t\tObject.defineProperties(handler, {\n\t\t\tname: { value: \"InngestHandler\" },\n\t\t\tlength: { value: this.handler.length }\n\t\t});\n\t\treturn handler;\n\t}\n\tget mode() {\n\t\treturn this._mode;\n\t}\n\tset mode(m) {\n\t\tthis._mode = m;\n\t\tif (m) this.client[\"mode\"] = m;\n\t}\n\t/**\n\t* Given a set of functions to check if an action is available from the\n\t* instance's handler, enact any action that is found.\n\t*\n\t* This method can fetch varying payloads of data, but ultimately is the place\n\t* where _decisions_ are made regarding functionality.\n\t*\n\t* For example, if we find that we should be viewing the UI, this function\n\t* will decide whether the UI should be visible based on the payload it has\n\t* found (e.g. env vars, options, etc).\n\t*/\n\tasync handleAction({ actions, timer, getHeaders, reqArgs, signatureValidation, body: rawBody, method, forceExecution, fns }) {\n\t\tconst isMissingBody = rawBody === void 0;\n\t\tlet body = rawBody;\n\t\ttry {\n\t\t\tlet url = await actions.url(\"starting to handle request\");\n\t\t\tif (method === \"POST\" || forceExecution) {\n\t\t\t\tif (!forceExecution && isMissingBody) {\n\t\t\t\t\tthis.log(\"error\", \"Missing body when executing, possibly due to missing request body middleware\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(/* @__PURE__ */ new Error(\"Missing request body when executing, possibly due to missing request body middleware\"))),\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst validationResult = await signatureValidation;\n\t\t\t\tif (!validationResult.success) return {\n\t\t\t\t\tstatus: 401,\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(validationResult.err)),\n\t\t\t\t\tversion: void 0\n\t\t\t\t};\n\t\t\t\tlet fn;\n\t\t\t\tlet fnId;\n\t\t\t\tlet stepId;\n\t\t\t\tif (forceExecution) {\n\t\t\t\t\tfn = fns?.length && fns[0] ? {\n\t\t\t\t\t\tfn: fns[0],\n\t\t\t\t\t\tonFailure: false\n\t\t\t\t\t} : Object.values(this.fns)[0];\n\t\t\t\t\tfnId = fn?.fn.id();\n\t\t\t\t\tstepId = \"step\";\n\t\t\t\t\tbody = {\n\t\t\t\t\t\tevent: {},\n\t\t\t\t\t\tevents: [],\n\t\t\t\t\t\tsteps: {},\n\t\t\t\t\t\tversion: _execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_10__.PREFERRED_EXECUTION_VERSION,\n\t\t\t\t\t\tsdkDecided: true,\n\t\t\t\t\t\tctx: {\n\t\t\t\t\t\t\tattempt: 0,\n\t\t\t\t\t\t\tdisable_immediate_execution: false,\n\t\t\t\t\t\t\tuse_api: true,\n\t\t\t\t\t\t\tmax_attempts: 3,\n\t\t\t\t\t\t\trun_id: await actions.headers(\"getting run ID for forced execution\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestRunId),\n\t\t\t\t\t\t\tstack: {\n\t\t\t\t\t\t\t\tstack: [],\n\t\t\t\t\t\t\t\tcurrent: 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tconst rawProbe = await actions.queryStringWithDefaults(\"testing for probe\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.Probe);\n\t\t\t\t\tif (rawProbe) {\n\t\t\t\t\t\tconst probe$1 = (0,_helpers_enum_js__WEBPACK_IMPORTED_MODULE_14__.enumFromValue)(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.probe, rawProbe);\n\t\t\t\t\t\tif (!probe$1) return {\n\t\t\t\t\t\t\tstatus: 400,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(/* @__PURE__ */ new Error(`Unknown probe \"${rawProbe}\"`))),\n\t\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.probe.Trust]: () => ({\n\t\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: \"\",\n\t\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t\t}) }[probe$1]();\n\t\t\t\t\t}\n\t\t\t\t\tfnId = await actions.queryStringWithDefaults(\"processing run request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.FnId);\n\t\t\t\t\tif (!fnId) throw new Error(\"No function ID found in async request\");\n\t\t\t\t\tfn = this.fns[fnId];\n\t\t\t\t\tstepId = await actions.queryStringWithDefaults(\"processing run request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.StepId) || null;\n\t\t\t\t}\n\t\t\t\tif (typeof fnId === \"undefined\" || !fn) throw new Error(\"No function ID found in request\");\n\t\t\t\tconst { version: version$1, result } = this.runStep({\n\t\t\t\t\tfunctionId: fnId,\n\t\t\t\t\tdata: body,\n\t\t\t\t\tstepId,\n\t\t\t\t\ttimer,\n\t\t\t\t\treqArgs,\n\t\t\t\t\theaders: await getHeaders(),\n\t\t\t\t\tfn,\n\t\t\t\t\tforceExecution,\n\t\t\t\t\tactions\n\t\t\t\t});\n\t\t\t\tconst stepOutput = await result;\n\t\t\t\t/**\n\t\t\t\t* Functions can return `undefined`, but we'll always convert this to\n\t\t\t\t* `null`, as this is appropriately serializable by JSON.\n\t\t\t\t*/\n\t\t\t\tconst opDataUndefinedToNull = (op) => {\n\t\t\t\t\top.data = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(op.data);\n\t\t\t\t\treturn op;\n\t\t\t\t};\n\t\t\t\tconst handler = {\n\t\t\t\t\t\"function-rejected\": (result$1) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: result$1.retriable ? 500 : 400,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: result$1.retriable ? \"false\" : \"true\",\n\t\t\t\t\t\t\t\t...typeof result$1.retriable === \"string\" ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RetryAfter]: result$1.retriable } : {}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(result$1.error)),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"function-resolved\": (result$1) => {\n\t\t\t\t\t\tif (forceExecution) {\n\t\t\t\t\t\t\tconst runCompleteOp = {\n\t\t\t\t\t\t\t\tid: _execution_v1_js__WEBPACK_IMPORTED_MODULE_16__._internals.hashId(\"complete\"),\n\t\t\t\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.RunComplete,\n\t\t\t\t\t\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(result$1.data)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstatus: 206,\n\t\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(runCompleteOp),\n\t\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.undefinedToNull)(result$1.data)),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"step-not-found\": (result$1) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: \"false\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({ error: `Could not find step \"${result$1.step.displayName || result$1.step.id}\" to run; timed out` }),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"step-ran\": (result$1) => {\n\t\t\t\t\t\tconst step = opDataUndefinedToNull(result$1.step);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 206,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t...typeof result$1.retriable !== \"undefined\" ? {\n\t\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: result$1.retriable ? \"false\" : \"true\",\n\t\t\t\t\t\t\t\t\t...typeof result$1.retriable === \"string\" ? { [_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.RetryAfter]: result$1.retriable } : {}\n\t\t\t\t\t\t\t\t} : {}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)([step]),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"steps-found\": (result$1) => {\n\t\t\t\t\t\tconst steps = result$1.steps.map(opDataUndefinedToNull);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 206,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(steps),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\t\"change-mode\": (result$1) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.NoRetry]: \"true\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({ error: `We wanted to change mode to \"${result$1.to}\", but this is not supported within the InngestCommHandler. This is a bug in the Inngest SDK.` }),\n\t\t\t\t\t\t\tversion: version$1\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}[stepOutput.type];\n\t\t\t\ttry {\n\t\t\t\t\treturn await handler(stepOutput);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.log(\"error\", \"Error handling execution result\", err);\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst env = (await getHeaders())[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Environment] ?? null;\n\t\t\tif (method === \"GET\") return {\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(await this.introspectionBody({\n\t\t\t\t\tactions,\n\t\t\t\t\tenv,\n\t\t\t\t\tsignatureValidation,\n\t\t\t\t\turl\n\t\t\t\t})),\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tversion: void 0\n\t\t\t};\n\t\t\tif (method === \"PUT\") {\n\t\t\t\tconst [deployId, inBandSyncRequested] = await Promise.all([actions.queryStringWithDefaults(\"processing deployment request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.DeployId).then((deployId$1) => {\n\t\t\t\t\treturn deployId$1 === \"undefined\" ? void 0 : deployId$1;\n\t\t\t\t}), Promise.resolve((0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.parseAsBoolean)(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestAllowInBandSync])).then((allowInBandSync) => {\n\t\t\t\t\tif (allowInBandSync !== void 0 && !allowInBandSync) return _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.OutOfBand;\n\t\t\t\t\treturn actions.headers(\"processing deployment request\", _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind);\n\t\t\t\t}).then((kind) => {\n\t\t\t\t\treturn kind === _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.InBand;\n\t\t\t\t})]);\n\t\t\t\tif (inBandSyncRequested) {\n\t\t\t\t\tif (isMissingBody) {\n\t\t\t\t\t\tthis.log(\"error\", \"Missing body when syncing, possibly due to missing request body middleware\");\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(/* @__PURE__ */ new Error(\"Missing request body when syncing, possibly due to missing request body middleware\"))),\n\t\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (!(await signatureValidation).success) return {\n\t\t\t\t\t\tstatus: 401,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({ code: \"sig_verification_failed\" }),\n\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t\tconst res = _types_js__WEBPACK_IMPORTED_MODULE_5__.inBandSyncRequestBodySchema.safeParse(body);\n\t\t\t\t\tif (!res.success) return {\n\t\t\t\t\t\tstatus: 400,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\t\t\tcode: \"invalid_request\",\n\t\t\t\t\t\t\tmessage: res.error.message\n\t\t\t\t\t\t}),\n\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t\turl = this.reqUrl(new URL(res.data.url));\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(await this.inBandRegisterBody({\n\t\t\t\t\t\t\tactions,\n\t\t\t\t\t\t\tdeployId,\n\t\t\t\t\t\t\tenv,\n\t\t\t\t\t\t\tsignatureValidation,\n\t\t\t\t\t\t\turl\n\t\t\t\t\t\t})),\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind]: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.InBand\n\t\t\t\t\t\t},\n\t\t\t\t\t\tversion: void 0\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst { status, message, modified } = await this.register(this.reqUrl(url), deployId, getHeaders);\n\t\t\t\treturn {\n\t\t\t\t\tstatus,\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tmodified\n\t\t\t\t\t}),\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind]: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.OutOfBand\n\t\t\t\t\t},\n\t\t\t\t\tversion: void 0\n\t\t\t\t};\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)({\n\t\t\t\t\ttype: \"internal\",\n\t\t\t\t\t...(0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_11__.serializeError)(err)\n\t\t\t\t}),\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\tversion: void 0\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tstatus: 405,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tmessage: \"No action found; request was likely not POST, PUT, or GET\",\n\t\t\t\tmode: this._mode\n\t\t\t}),\n\t\t\theaders: {},\n\t\t\tversion: void 0\n\t\t};\n\t}\n\trunStep({ actions, functionId, stepId, data, timer, reqArgs, headers, fn, forceExecution }) {\n\t\tif (!fn) throw new Error(`Could not find function with ID \"${functionId}\"`);\n\t\tconst immediateFnData = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.parseFnData)(data);\n\t\tlet { version: version$1, sdkDecided } = immediateFnData;\n\t\tif (version$1 === _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V1 && sdkDecided && fn.fn[\"shouldOptimizeParallelism\"]?.()) version$1 = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V2;\n\t\tconst result = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(async () => {\n\t\t\tconst anyFnData = await (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_15__.fetchAllFnData)({\n\t\t\t\tdata: immediateFnData,\n\t\t\t\tapi: this.client[\"inngestApi\"],\n\t\t\t\tversion: version$1\n\t\t\t});\n\t\t\tif (!anyFnData.ok) throw new Error(anyFnData.error);\n\t\t\tconst createResponse = forceExecution && actions.experimentalTransformSyncResponse ? (data$1) => actions.experimentalTransformSyncResponse(\"created sync->async response\", data$1).then((res) => ({\n\t\t\t\t...res,\n\t\t\t\tversion: version$1\n\t\t\t})) : void 0;\n\t\t\tconst executionOptions = await ((s) => s)({\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V0]: ({ event, events, steps, ctx, version: version$2 }) => {\n\t\t\t\t\tconst stepState = Object.entries(steps ?? {}).reduce((acc, [id, data$1]) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t[id]: {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tdata: data$1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}, {});\n\t\t\t\t\treturn {\n\t\t\t\t\t\tversion: version$2,\n\t\t\t\t\t\tpartialOptions: {\n\t\t\t\t\t\t\tclient: this.client,\n\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\tstepMode: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevents,\n\t\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\t\tattempt: ctx?.attempt ?? 0\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstepState,\n\t\t\t\t\t\t\trequestedRunStep: stepId === \"step\" ? void 0 : stepId || void 0,\n\t\t\t\t\t\t\ttimer,\n\t\t\t\t\t\t\tisFailureHandler: fn.onFailure,\n\t\t\t\t\t\t\tstepCompletionOrder: ctx?.stack?.stack ?? [],\n\t\t\t\t\t\t\treqArgs,\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tcreateResponse\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V1]: ({ event, events, steps, ctx, version: version$2 }) => {\n\t\t\t\t\tconst stepState = Object.entries(steps ?? {}).reduce((acc, [id, result$1]) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t[id]: result$1.type === \"data\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tdata: result$1.data\n\t\t\t\t\t\t\t} : result$1.type === \"input\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tinput: result$1.input\n\t\t\t\t\t\t\t} : {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\terror: result$1.error\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst requestedRunStep = stepId === \"step\" ? void 0 : stepId || void 0;\n\t\t\t\t\tconst checkpointingConfig = fn.fn[\"shouldAsyncCheckpoint\"](requestedRunStep, ctx?.fn_id, Boolean(ctx?.disable_immediate_execution));\n\t\t\t\t\treturn {\n\t\t\t\t\t\tversion: version$2,\n\t\t\t\t\t\tpartialOptions: {\n\t\t\t\t\t\t\tclient: this.client,\n\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\tstepMode: checkpointingConfig ? _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing : _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\t\t\t\t\tcheckpointingConfig,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevents,\n\t\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\t\tattempt: ctx?.attempt ?? 0,\n\t\t\t\t\t\t\t\tmaxAttempts: ctx?.max_attempts\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tinternalFnId: ctx?.fn_id,\n\t\t\t\t\t\t\tqueueItemId: ctx?.qi_id,\n\t\t\t\t\t\t\tstepState,\n\t\t\t\t\t\t\trequestedRunStep,\n\t\t\t\t\t\t\ttimer,\n\t\t\t\t\t\t\tisFailureHandler: fn.onFailure,\n\t\t\t\t\t\t\tdisableImmediateExecution: ctx?.disable_immediate_execution,\n\t\t\t\t\t\t\tstepCompletionOrder: ctx?.stack?.stack ?? [],\n\t\t\t\t\t\t\treqArgs,\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tcreateResponse\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V2]: ({ event, events, steps, ctx, version: version$2 }) => {\n\t\t\t\t\tconst stepState = Object.entries(steps ?? {}).reduce((acc, [id, result$1]) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t[id]: result$1.type === \"data\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tdata: result$1.data\n\t\t\t\t\t\t\t} : result$1.type === \"input\" ? {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tinput: result$1.input\n\t\t\t\t\t\t\t} : {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\terror: result$1.error\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}, {});\n\t\t\t\t\tconst requestedRunStep = stepId === \"step\" ? void 0 : stepId || void 0;\n\t\t\t\t\tconst checkpointingConfig = fn.fn[\"shouldAsyncCheckpoint\"](requestedRunStep, ctx?.fn_id, Boolean(ctx?.disable_immediate_execution));\n\t\t\t\t\treturn {\n\t\t\t\t\t\tversion: version$2,\n\t\t\t\t\t\tpartialOptions: {\n\t\t\t\t\t\t\tclient: this.client,\n\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\tstepMode: checkpointingConfig ? _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing : _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\t\t\t\t\tcheckpointingConfig,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t\tevents,\n\t\t\t\t\t\t\t\trunId: ctx?.run_id || \"\",\n\t\t\t\t\t\t\t\tattempt: ctx?.attempt ?? 0,\n\t\t\t\t\t\t\t\tmaxAttempts: ctx?.max_attempts\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tinternalFnId: ctx?.fn_id,\n\t\t\t\t\t\t\tqueueItemId: ctx?.qi_id,\n\t\t\t\t\t\t\tstepState,\n\t\t\t\t\t\t\trequestedRunStep,\n\t\t\t\t\t\t\ttimer,\n\t\t\t\t\t\t\tisFailureHandler: fn.onFailure,\n\t\t\t\t\t\t\tdisableImmediateExecution: ctx?.disable_immediate_execution,\n\t\t\t\t\t\t\tstepCompletionOrder: ctx?.stack?.stack ?? [],\n\t\t\t\t\t\t\treqArgs,\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tcreateResponse\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t})[version$1](anyFnData.value);\n\t\t\treturn fn.fn[\"createExecution\"](executionOptions).start();\n\t\t});\n\t\treturn {\n\t\t\tversion: version$1,\n\t\t\tresult\n\t\t};\n\t}\n\tconfigs(url) {\n\t\tconst configs = Object.values(this.rawFns).reduce((acc, fn) => [...acc, ...fn[\"getConfig\"]({\n\t\t\tbaseUrl: url,\n\t\t\tappPrefix: this.id\n\t\t})], []);\n\t\tfor (const config of configs) {\n\t\t\tconst check = _types_js__WEBPACK_IMPORTED_MODULE_5__.functionConfigSchema.safeParse(config);\n\t\t\tif (!check.success) {\n\t\t\t\tconst errors = check.error.errors.map((err) => err.message).join(\"; \");\n\t\t\t\tthis.log(\"warn\", `Config invalid for function \"${config.id}\" : ${errors}`);\n\t\t\t}\n\t\t}\n\t\treturn configs;\n\t}\n\t/**\n\t* Return an Inngest serve endpoint URL given a potential `path` and `host`.\n\t*\n\t* Will automatically use the `serveHost` and `servePath` if they have been\n\t* set when registering.\n\t*/\n\treqUrl(url) {\n\t\tlet ret = new URL(url);\n\t\tconst serveHost = this.serveHost || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServeHost];\n\t\tconst servePath = this.servePath || this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestServePath];\n\t\tif (servePath) ret.pathname = servePath;\n\t\tif (serveHost) ret = new URL(ret.pathname + ret.search, serveHost);\n\t\treturn ret;\n\t}\n\tregisterBody({ url, deployId }) {\n\t\treturn {\n\t\t\turl: url.href,\n\t\t\tdeployType: \"ping\",\n\t\t\tframework: this.frameworkName,\n\t\t\tappName: this.id,\n\t\t\tfunctions: this.configs(url),\n\t\t\tsdk: `js:v${_version_js__WEBPACK_IMPORTED_MODULE_17__.version}`,\n\t\t\tv: \"0.1\",\n\t\t\tdeployId: deployId || void 0,\n\t\t\tcapabilities: {\n\t\t\t\ttrust_probe: \"v1\",\n\t\t\t\tconnect: \"v1\"\n\t\t\t},\n\t\t\tappVersion: this.client.appVersion\n\t\t};\n\t}\n\tasync inBandRegisterBody({ actions, deployId, env, signatureValidation, url }) {\n\t\tconst registerBody = this.registerBody({\n\t\t\tdeployId,\n\t\t\turl\n\t\t});\n\t\tconst introspectionBody = await this.introspectionBody({\n\t\t\tactions,\n\t\t\tenv,\n\t\t\tsignatureValidation,\n\t\t\turl\n\t\t});\n\t\tconst body = {\n\t\t\tapp_id: this.id,\n\t\t\tappVersion: this.client.appVersion,\n\t\t\tcapabilities: registerBody.capabilities,\n\t\t\tenv,\n\t\t\tframework: registerBody.framework,\n\t\t\tfunctions: registerBody.functions,\n\t\t\tinspection: introspectionBody,\n\t\t\tplatform: (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.getPlatformName)({\n\t\t\t\t...(0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.allProcessEnv)(),\n\t\t\t\t...this.env\n\t\t\t}),\n\t\t\tsdk_author: \"inngest\",\n\t\t\tsdk_language: \"\",\n\t\t\tsdk_version: \"\",\n\t\t\tsdk: registerBody.sdk,\n\t\t\turl: registerBody.url\n\t\t};\n\t\tif (\"authentication_succeeded\" in introspectionBody && introspectionBody.authentication_succeeded) {\n\t\t\tbody.sdk_language = introspectionBody.sdk_language;\n\t\t\tbody.sdk_version = introspectionBody.sdk_version;\n\t\t}\n\t\treturn body;\n\t}\n\tasync introspectionBody({ actions, env, signatureValidation, url }) {\n\t\tconst registerBody = this.registerBody({\n\t\t\turl: this.reqUrl(url),\n\t\t\tdeployId: null\n\t\t});\n\t\tif (!this._mode) throw new Error(\"No mode set; cannot introspect without mode\");\n\t\tlet introspection = {\n\t\t\textra: { is_mode_explicit: this._mode.isExplicit },\n\t\t\thas_event_key: this.client[\"eventKeySet\"](),\n\t\t\thas_signing_key: Boolean(this.signingKey),\n\t\t\tfunction_count: registerBody.functions.length,\n\t\t\tmode: this._mode.type,\n\t\t\tschema_version: \"2024-05-24\"\n\t\t};\n\t\tif (this._mode.type === \"cloud\") try {\n\t\t\tif (!(await signatureValidation).success) throw new Error(\"Signature validation failed\");\n\t\t\tintrospection = {\n\t\t\t\t...introspection,\n\t\t\t\tauthentication_succeeded: true,\n\t\t\t\tapi_origin: this.apiBaseUrl,\n\t\t\t\tapp_id: this.id,\n\t\t\t\tcapabilities: {\n\t\t\t\t\ttrust_probe: \"v1\",\n\t\t\t\t\tconnect: \"v1\"\n\t\t\t\t},\n\t\t\t\tenv,\n\t\t\t\tevent_api_origin: this.eventApiBaseUrl,\n\t\t\t\tevent_key_hash: this.hashedEventKey ?? null,\n\t\t\t\textra: {\n\t\t\t\t\t...introspection.extra,\n\t\t\t\t\tis_streaming: await this.shouldStream(actions)\n\t\t\t\t},\n\t\t\t\tframework: this.frameworkName,\n\t\t\t\tsdk_language: \"js\",\n\t\t\t\tsdk_version: _version_js__WEBPACK_IMPORTED_MODULE_17__.version,\n\t\t\t\tserve_origin: this.serveHost ?? null,\n\t\t\t\tserve_path: this.servePath ?? null,\n\t\t\t\tsigning_key_fallback_hash: this.hashedSigningKeyFallback ?? null,\n\t\t\t\tsigning_key_hash: this.hashedSigningKey ?? null\n\t\t\t};\n\t\t} catch {\n\t\t\tintrospection = { ...introspection };\n\t\t}\n\t\treturn introspection;\n\t}\n\tasync register(url, deployId, getHeaders) {\n\t\tconst body = this.registerBody({\n\t\t\turl,\n\t\t\tdeployId\n\t\t});\n\t\tlet res;\n\t\tlet registerURL = new URL(this.inngestRegisterUrl.href);\n\t\tif (this._mode && this._mode.isInferred && this._mode.isDev) {\n\t\t\tconst host = (0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_3__.devServerHost)(this.env);\n\t\t\tif (await (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__.devServerAvailable)(host, this.fetch)) registerURL = (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__.devServerUrl)(host, \"/fn/register\");\n\t\t} else if (this._mode?.explicitDevUrl) registerURL = (0,_helpers_devserver_js__WEBPACK_IMPORTED_MODULE_18__.devServerUrl)(this._mode.explicitDevUrl.href, \"/fn/register\");\n\t\tif (deployId) registerURL.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.queryKeys.DeployId, deployId);\n\t\ttry {\n\t\t\tres = await (0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_19__.fetchWithAuthFallback)({\n\t\t\t\tauthToken: this.hashedSigningKey,\n\t\t\t\tauthTokenFallback: this.hashedSigningKeyFallback,\n\t\t\t\tfetch: this.fetch,\n\t\t\t\turl: registerURL.href,\n\t\t\t\toptions: {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tbody: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_6__.stringify)(body),\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t...await getHeaders(),\n\t\t\t\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.InngestSyncKind]: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.syncKind.OutOfBand\n\t\t\t\t\t},\n\t\t\t\t\tredirect: \"follow\"\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tthis.log(\"error\", err);\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tmessage: `Failed to register${err instanceof Error ? `; ${err.message}` : \"\"}`,\n\t\t\t\tmodified: false\n\t\t\t};\n\t\t}\n\t\tconst raw = await res.text();\n\t\tlet data = {};\n\t\ttry {\n\t\t\tdata = JSON.parse(raw);\n\t\t} catch (err) {\n\t\t\tthis.log(\"warn\", \"Couldn't unpack register response:\", err);\n\t\t\tlet message = \"Failed to register\";\n\t\t\tif (err instanceof Error) message += `; ${err.message}`;\n\t\t\tmessage += `; status code: ${res.status}`;\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tmessage,\n\t\t\t\tmodified: false\n\t\t\t};\n\t\t}\n\t\tlet status;\n\t\tlet error;\n\t\tlet skipped;\n\t\tlet modified;\n\t\ttry {\n\t\t\t({status, error, skipped, modified} = registerResSchema.parse(data));\n\t\t} catch (err) {\n\t\t\tthis.log(\"warn\", \"Invalid register response schema:\", err);\n\t\t\tlet message = \"Failed to register\";\n\t\t\tif (err instanceof Error) message += `; ${err.message}`;\n\t\t\tmessage += `; status code: ${res.status}`;\n\t\t\treturn {\n\t\t\t\tstatus: 500,\n\t\t\t\tmessage,\n\t\t\t\tmodified: false\n\t\t\t};\n\t\t}\n\t\tif (!skipped) this.log(\"debug\", \"registered inngest functions:\", res.status, res.statusText, data);\n\t\treturn {\n\t\t\tstatus,\n\t\t\tmessage: error,\n\t\t\tmodified\n\t\t};\n\t}\n\t/**\n\t* Given an environment, upsert any missing keys. This is useful in\n\t* situations where environment variables are passed directly to handlers or\n\t* are otherwise difficult to access during initialization.\n\t*/\n\tupsertKeysFromEnv() {\n\t\tif (this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKey]) {\n\t\t\tif (!this.signingKey) this.signingKey = String(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKey]);\n\t\t\tthis.client[\"inngestApi\"].setSigningKey(this.signingKey);\n\t\t}\n\t\tif (this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKeyFallback]) {\n\t\t\tif (!this.signingKeyFallback) this.signingKeyFallback = String(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKeyFallback]);\n\t\t\tthis.client[\"inngestApi\"].setSigningKeyFallback(this.signingKeyFallback);\n\t\t}\n\t\tif (!this.client[\"eventKeySet\"]() && this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestEventKey]) this.client.setEventKey(String(this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestEventKey]));\n\t\tif (this.env[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestDevServerUrl]) this.log(\"warn\", `Use of ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestDevServerUrl} has been deprecated in v3; please use ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestBaseUrl} instead. See https://www.inngest.com/docs/sdk/migration`);\n\t}\n\t/**\n\t* Validate the signature of a request and return the signing key used to\n\t* validate it.\n\t*/\n\tasync validateSignature(sig, body) {\n\t\ttry {\n\t\t\tif (this.skipSignatureValidation) return {\n\t\t\t\tsuccess: true,\n\t\t\t\tkeyUsed: \"\"\n\t\t\t};\n\t\t\tif (this._mode && !this._mode.isCloud) return {\n\t\t\t\tsuccess: true,\n\t\t\t\tkeyUsed: \"\"\n\t\t\t};\n\t\t\tif (!this.signingKey) throw new Error(`No signing key found in client options or ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.envKeys.InngestSigningKey} env var. Find your keys at https://app.inngest.com/secrets`);\n\t\t\tif (!sig) throw new Error(`No ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature} provided`);\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tkeyUsed: new RequestSignature(sig).verifySignature({\n\t\t\t\t\tbody,\n\t\t\t\t\tallowExpiredSignatures: this.allowExpiredSignatures,\n\t\t\t\t\tsigningKey: this.signingKey,\n\t\t\t\t\tsigningKeyFallback: this.signingKeyFallback\n\t\t\t\t})\n\t\t\t};\n\t\t} catch (err) {\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\terr\n\t\t\t};\n\t\t}\n\t}\n\tgetResponseSignature(key, body) {\n\t\tconst now = Date.now();\n\t\treturn `t=${now}&s=${(0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_19__.signDataWithKey)(body, key, now.toString())}`;\n\t}\n\t/**\n\t* Log to stdout/stderr if the log level is set to include the given level.\n\t* The default log level is `\"info\"`.\n\t*\n\t* This is an abstraction over `console.log` and will try to use the correct\n\t* method for the given log level.  For example, `log(\"error\", \"foo\")` will\n\t* call `console.error(\"foo\")`.\n\t*/\n\tlog(level, ...args) {\n\t\tconst logLevels$1 = [\n\t\t\t\"debug\",\n\t\t\t\"info\",\n\t\t\t\"warn\",\n\t\t\t\"error\",\n\t\t\t\"fatal\",\n\t\t\t\"silent\"\n\t\t];\n\t\tconst logLevelSetting = logLevels$1.indexOf(this.logLevel);\n\t\tif (logLevels$1.indexOf(level) >= logLevelSetting) {\n\t\t\tlet logger = console.log;\n\t\t\tif (Object.hasOwn(console, level)) logger = console[level];\n\t\t\tlogger(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.logPrefix} ${level} -`, ...args);\n\t\t}\n\t}\n};\nvar RequestSignature = class {\n\ttimestamp;\n\tsignature;\n\tconstructor(sig) {\n\t\tconst params = new URLSearchParams(sig);\n\t\tthis.timestamp = params.get(\"t\") || \"\";\n\t\tthis.signature = params.get(\"s\") || \"\";\n\t\tif (!this.timestamp || !this.signature) throw new Error(`Invalid ${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.Signature} provided`);\n\t}\n\thasExpired(allowExpiredSignatures) {\n\t\tif (allowExpiredSignatures) return false;\n\t\treturn Date.now() - (/* @__PURE__ */ new Date(Number.parseInt(this.timestamp) * 1e3)).valueOf() > 1e3 * 60 * 5;\n\t}\n\t#verifySignature({ body, signingKey, allowExpiredSignatures }) {\n\t\tif (this.hasExpired(allowExpiredSignatures)) throw new Error(\"Signature has expired\");\n\t\tif ((0,_helpers_net_js__WEBPACK_IMPORTED_MODULE_19__.signDataWithKey)(body, signingKey, this.timestamp) !== this.signature) throw new Error(\"Invalid signature\");\n\t}\n\tverifySignature({ body, signingKey, signingKeyFallback, allowExpiredSignatures }) {\n\t\ttry {\n\t\t\tthis.#verifySignature({\n\t\t\t\tbody,\n\t\t\t\tsigningKey,\n\t\t\t\tallowExpiredSignatures\n\t\t\t});\n\t\t\treturn signingKey;\n\t\t} catch (err) {\n\t\t\tif (!signingKeyFallback) throw err;\n\t\t\tthis.#verifySignature({\n\t\t\t\tbody,\n\t\t\t\tsigningKey: signingKeyFallback,\n\t\t\t\tallowExpiredSignatures\n\t\t\t});\n\t\t\treturn signingKeyFallback;\n\t\t}\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestCommHandler.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RDb21tSGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDVDtBQUNtTTtBQUN2RztBQUN0RDtBQUNWO0FBQ21CO0FBQ1A7QUFDc0Y7QUFDM0Y7QUFDeEI7QUFDd0I7QUFDckI7QUFDSTtBQUNOO0FBQ0c7QUFDUjtBQUNyQjtBQUNFO0FBQ0Q7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBDQUFRO0FBQ2xDLFNBQVMsMENBQVE7QUFDakIsVUFBVSwyQ0FBUztBQUNuQixXQUFXLDJDQUFTO0FBQ3BCLFFBQVEsMENBQVE7QUFDaEIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCw4QkFBOEI7QUFDL0UsZ0NBQWdDLHVCQUF1QjtBQUN2RCx3Q0FBd0MsaUJBQWlCO0FBQ3pELFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDhEQUFhO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCx5REFBUyxFQUFFLGdIQUFnSDtBQUN4TDtBQUNBO0FBQ0Esa0NBQWtDLHlEQUFTLEVBQUU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osd0NBQXdDLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixzQkFBc0IsSUFBSTtBQUMxQiwyREFBMkQsR0FBRyxHQUFHO0FBQ2pFLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx1REFBTztBQUN6RCxrREFBa0QsdURBQU87QUFDekQ7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBTSxDQUFDLGdEQUFTO0FBQ2xDLGlEQUFpRCxvQkFBb0IsZ0JBQWdCLGdCQUFnQjtBQUNyRztBQUNBLEdBQUcscUNBQXFDLHVEQUFPO0FBQy9DO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8seUNBQVksV0FBVyx5Q0FBWSxpQkFBaUIseUNBQVksSUFBSSwyREFBVyxDQUFDO0FBQ3ZGO0FBQ0E7QUFDQSxtQkFBbUIseUNBQU8sRUFBRSwyQ0FBTSxzQkFBc0IsMkNBQVM7QUFDakUsd0RBQXdELG9CQUFvQixnQkFBZ0IsK0JBQStCO0FBQzNIO0FBQ0EsR0FBRyxzQ0FBc0MsdURBQU87QUFDaEQsK0JBQStCLHlEQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsdURBQU8sZ0NBQWdDLHVEQUFPLDhDQUE4Qyx3RUFBd0I7QUFDL0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx1REFBTyxxQ0FBcUMsdURBQU8sZ0RBQWdELDBFQUEwQjtBQUN4SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHVEQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsdURBQU87QUFDNUM7QUFDQTtBQUNBLDhEQUE4RCw2REFBYTtBQUMzRSxTQUFTLGlFQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbUVBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtRUFBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx5REFBUztBQUMxRTtBQUNBO0FBQ0EsdUNBQXVDLDBFQUF5QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsMERBQVUsNENBQTRDLDBEQUFVO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtFQUFZO0FBQ2hDO0FBQ0EscUpBQXFKLDBEQUFVO0FBQy9KO0FBQ0EsTUFBTSw4REFBYTtBQUNuQjtBQUNBO0FBQ0EseUJBQXlCLGdFQUFnQjtBQUN6QztBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3Q0FBd0MsZUFBZTtBQUN2RDtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1IsR0FBRztBQUNIO0FBQ0EsTUFBTSwrREFBYztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0gsc0JBQXNCLHdEQUFPO0FBQzdCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGlEQUFJO0FBQzlEO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBZTtBQUNsQztBQUNBLG9EQUFvRCxpRUFBaUI7QUFDckUsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHdEQUFpQjtBQUM3RTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDhCQUE4QjtBQUNoRixpQ0FBaUMsdUJBQXVCO0FBQ3hELHlDQUF5QyxpQkFBaUI7QUFDMUQsWUFBWTtBQUNaO0FBQ0EsUUFBUTtBQUNSLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCwwREFBVTtBQUMvRCw0Q0FBNEMsMERBQVU7QUFDdEQ7QUFDQSxrQ0FBa0MsMERBQVU7QUFDNUMsR0FBRztBQUNIO0FBQ0E7QUFDQSxvREFBb0QsYUFBYSxJQUFJLFNBQVM7QUFDOUU7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDhEQUFTO0FBQ3pELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFDQUFxQztBQUNoRTtBQUNBLFlBQVksOERBQVc7QUFDdkIsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0EscUJBQXFCLHdGQUEyQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsaUVBQWlCO0FBQ3RELEtBQUs7QUFDTDtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxjQUFjLCtDQUFRO0FBQ3RCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSiwyQkFBMkIsTUFBTTtBQUNqQztBQUNBLElBQUk7QUFDSiwyQkFBMkIsT0FBTztBQUNsQztBQUNBLFVBQVUsd0RBQWlCO0FBQzNCO0FBQ0EsaUJBQWlCLENBQUMsMERBQVUsNkVBQTZFLE1BQU0sZ0JBQWdCLE1BQU0sa0NBQWtDO0FBQ3ZLO0FBQ0E7QUFDQSxNQUFNO0FBQ04sVUFBVSx3REFBaUI7QUFDM0I7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxZQUFZLDhEQUFTO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILCtFQUErRSxZQUFZO0FBQzNGO0FBQ0E7QUFDQSw0QkFBNEIsdURBQXVEO0FBQ25GO0FBQ0E7QUFDQSxnRkFBZ0YsMERBQVU7QUFDMUY7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFEQUFxRCwwREFBVTtBQUMvRDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxTQUFTO0FBQ3BGO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsSUFBSSxDQUFDLDBEQUFVLGtDQUFrQyx3RkFBMkI7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxXQUFXLDhEQUFTLENBQUMsbUVBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBEQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUIsUUFBUSxpRUFBWTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxpRUFBWTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsSUFBSTtBQUNsRDtBQUNBLGFBQWEsbUVBQVksV0FBVyxpRUFBWTtBQUNoRDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQyxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0dBQXNHO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQ0FBb0M7QUFDckQsWUFBWSw4REFBUyxDQUFDLG1FQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvQ0FBb0M7QUFDcEQsV0FBVyw4REFBUyxDQUFDLG1FQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2YsZUFBZSx3RkFBMkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLDBEQUFVO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixpRkFBaUYseURBQVM7QUFDMUY7QUFDQSxzQkFBc0IsZ0VBQWEsQ0FBQyxxREFBSztBQUN6QztBQUNBO0FBQ0Esa0JBQWtCLG9DQUFvQztBQUN0RCxhQUFhLDhEQUFTLENBQUMsbUVBQWMsNkNBQTZDLFNBQVM7QUFDM0Y7QUFDQTtBQUNBLGVBQWUsQ0FBQyxxREFBSztBQUNyQjtBQUNBLGtCQUFrQixvQ0FBb0M7QUFDdEQ7QUFDQTtBQUNBLE9BQU8sR0FBRztBQUNWO0FBQ0EsNEVBQTRFLHlEQUFTO0FBQ3JGO0FBQ0E7QUFDQSw4RUFBOEUseURBQVM7QUFDdkY7QUFDQTtBQUNBLFlBQVksNkJBQTZCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVFQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFVO0FBQ25CLHNEQUFzRCxDQUFDLDBEQUFVLG1DQUFtQztBQUNwRyxRQUFRO0FBQ1IsYUFBYSw4REFBUyxDQUFDLHVFQUFlO0FBQ3RDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsWUFBWSx5REFBVTtBQUN0QixZQUFZLGlEQUFVO0FBQ3RCLGNBQWMsdUVBQWU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RCxjQUFjLDhEQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0NBQW9DO0FBQ3RELGFBQWEsOERBQVMsQ0FBQyx1RUFBZTtBQUN0QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFVO0FBQ25CLFFBQVE7QUFDUixhQUFhLDhEQUFTLEdBQUcsK0JBQStCLDhDQUE4QyxVQUFVLFlBQVk7QUFDNUg7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMERBQVU7QUFDcEIsdURBQXVELENBQUMsMERBQVUsbUNBQW1DO0FBQ3JHLFVBQVU7QUFDVixRQUFRO0FBQ1IsYUFBYSw4REFBUztBQUN0QjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9DQUFvQztBQUN0RCxhQUFhLDhEQUFTO0FBQ3RCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQVU7QUFDbkIsUUFBUTtBQUNSLGFBQWEsOERBQVMsR0FBRyx1Q0FBdUMsWUFBWSxnR0FBZ0c7QUFDNUs7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMERBQVU7QUFDOUM7QUFDQTtBQUNBLFVBQVUsOERBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZUFBZSxvQ0FBb0M7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsZ0lBQWdJLHlEQUFTO0FBQ3pJO0FBQ0EsS0FBSyxtQkFBbUIsK0RBQWMsVUFBVSx1REFBTztBQUN2RCxnRUFBZ0Usd0RBQVE7QUFDeEUsNkRBQTZELDBEQUFVO0FBQ3ZFLEtBQUs7QUFDTCxxQkFBcUIsd0RBQVE7QUFDN0IsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0NBQW9DO0FBQ3RELGFBQWEsOERBQVMsQ0FBQyxtRUFBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBUyxHQUFHLGlDQUFpQztBQUN6RCxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUIsa0VBQTJCO0FBQzVDO0FBQ0E7QUFDQSxZQUFZLDhEQUFTO0FBQ3JCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsaUJBQWlCLG9DQUFvQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxRQUFRLDBEQUFVLG1CQUFtQix3REFBUTtBQUM3QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTtBQUNBLFdBQVcsOERBQVM7QUFDcEI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTywwREFBVSxtQkFBbUIsd0RBQVE7QUFDNUMsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsVUFBVSw4REFBUztBQUNuQjtBQUNBLFFBQVEsbUVBQWM7QUFDdEIsS0FBSztBQUNMLGVBQWUsb0NBQW9DO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLElBQUk7QUFDSixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnRkFBZ0Y7QUFDM0YsK0RBQStELFdBQVc7QUFDMUUsMEJBQTBCLG1FQUFXO0FBQ3JDLFFBQVEsaUNBQWlDO0FBQ3pDLG9CQUFvQixnRUFBZ0IseUVBQXlFLGdFQUFnQjtBQUM3SCxpQkFBaUIsbUVBQVk7QUFDN0IsMkJBQTJCLHNFQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEtBQUssZ0VBQWdCLFNBQVMsK0NBQStDO0FBQzdFLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBSTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0NBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLLGdFQUFnQixTQUFTLCtDQUErQztBQUM3RSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxJQUFJO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsK0NBQVEsc0JBQXNCLCtDQUFRO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUssZ0VBQWdCLFNBQVMsK0NBQStDO0FBQzdFLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQUk7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywrQ0FBUSxzQkFBc0IsK0NBQVE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsMkRBQW9CO0FBQ3JDO0FBQ0Esd0VBQXdFO0FBQ3hFLHFEQUFxRCxVQUFVLE1BQU0sT0FBTztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsdURBQU87QUFDdEQsK0NBQStDLHVEQUFPO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBTyxDQUFDO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFrRDtBQUM5RTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnRUFBZTtBQUM1QixPQUFPLDhEQUFhO0FBQ3BCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3Q0FBd0M7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGlEQUFpRDtBQUNqRDtBQUNBLFlBQVkseUNBQXlDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUJBQWlCLGlEQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw4REFBYTtBQUM3QixhQUFhLDBFQUFrQixrQ0FBa0Msb0VBQVk7QUFDN0UsSUFBSSxtREFBbUQsb0VBQVk7QUFDbkUsNkNBQTZDLHlEQUFTO0FBQ3REO0FBQ0EsZUFBZSx1RUFBcUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBUztBQUNwQjtBQUNBO0FBQ0EsT0FBTywwREFBVSxtQkFBbUIsd0RBQVE7QUFDNUMsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywwQkFBMEIsRUFBRSxZQUFZLE9BQU87QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLDJDQUEyQyxFQUFFLFlBQVk7QUFDekQsaUJBQWlCLGVBQWUsV0FBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxrQ0FBa0M7QUFDdkMsSUFBSTtBQUNKO0FBQ0E7QUFDQSwyQ0FBMkMsRUFBRSxZQUFZO0FBQ3pELGlCQUFpQixlQUFlLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVEQUFPO0FBQ3RCLDJEQUEyRCx1REFBTztBQUNsRTtBQUNBO0FBQ0EsZUFBZSx1REFBTztBQUN0QiwyRUFBMkUsdURBQU87QUFDbEY7QUFDQTtBQUNBLGdEQUFnRCx1REFBTywyREFBMkQsdURBQU87QUFDekgsZUFBZSx1REFBTyxrREFBa0QsdURBQU8sc0JBQXNCLDJCQUEyQixhQUFhLHVEQUFPLGlCQUFpQjtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0YsdURBQU8sb0JBQW9CO0FBQ2pILG1DQUFtQywwREFBVSxZQUFZO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLElBQUksS0FBSyxpRUFBZSw0QkFBNEI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlEQUFTLEVBQUUsRUFBRSxPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLDBEQUFVLFlBQVk7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBMEM7QUFDOUQ7QUFDQSxNQUFNLGlFQUFlO0FBQ3JCO0FBQ0EsbUJBQW1CLDhEQUE4RDtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RDb21tSGFuZGxlci5qcz8yMjc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFzeW5jQ3R4IH0gZnJvbSBcIi4vZXhlY3V0aW9uL2Fscy5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi92ZXJzaW9uLmpzXCI7XG5pbXBvcnQgeyBFeGVjdXRpb25WZXJzaW9uLCBkZWJ1Z1ByZWZpeCwgZGVmYXVsdElubmdlc3RBcGlCYXNlVXJsLCBkZWZhdWx0SW5uZ2VzdEV2ZW50QmFzZVVybCwgZGVmYXVsdE1heFJldHJpZXMsIGR1bW15RXZlbnRLZXksIGVudktleXMsIGZvcndhcmRlZEhlYWRlcnMsIGhlYWRlcktleXMsIGxvZ1ByZWZpeCwgcHJvYmUsIHF1ZXJ5S2V5cywgc3luY0tpbmQgfSBmcm9tIFwiLi4vaGVscGVycy9jb25zdHMuanNcIjtcbmltcG9ydCB7IEFzeW5jUmVzcG9uc2VUeXBlLCBTdGVwTW9kZSwgU3RlcE9wQ29kZSwgZnVuY3Rpb25Db25maWdTY2hlbWEsIGluQmFuZFN5bmNSZXF1ZXN0Qm9keVNjaGVtYSwgbG9nTGV2ZWxzIH0gZnJvbSBcIi4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT04gfSBmcm9tIFwiLi9leGVjdXRpb24vSW5uZ2VzdEV4ZWN1dGlvbi5qc1wiO1xuaW1wb3J0IHsgcmV0aHJvd0Vycm9yLCBzZXJpYWxpemVFcnJvciB9IGZyb20gXCIuLi9oZWxwZXJzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgZmV0Y2hBbGxGbkRhdGEsIHBhcnNlRm5EYXRhLCB1bmRlZmluZWRUb051bGwgfSBmcm9tIFwiLi4vaGVscGVycy9mdW5jdGlvbnMuanNcIjtcbmltcG9ydCB7IGhhc2hFdmVudEtleSwgaGFzaFNpZ25pbmdLZXksIHN0cmluZ2lmeSB9IGZyb20gXCIuLi9oZWxwZXJzL3N0cmluZ3MuanNcIjtcbmltcG9ydCB7IE1vZGUsIGFsbFByb2Nlc3NFbnYsIGRldlNlcnZlckhvc3QsIGdldEZldGNoLCBnZXRNb2RlLCBnZXRQbGF0Zm9ybU5hbWUsIGlubmdlc3RIZWFkZXJzLCBwYXJzZUFzQm9vbGVhbiwgcGxhdGZvcm1TdXBwb3J0c1N0cmVhbWluZyB9IGZyb20gXCIuLi9oZWxwZXJzL2Vudi5qc1wiO1xuaW1wb3J0IHsgZGV2U2VydmVyQXZhaWxhYmxlLCBkZXZTZXJ2ZXJVcmwgfSBmcm9tIFwiLi4vaGVscGVycy9kZXZzZXJ2ZXIuanNcIjtcbmltcG9ydCB7IGVudW1Gcm9tVmFsdWUgfSBmcm9tIFwiLi4vaGVscGVycy9lbnVtLmpzXCI7XG5pbXBvcnQgeyBmZXRjaFdpdGhBdXRoRmFsbGJhY2ssIHNpZ25EYXRhV2l0aEtleSB9IGZyb20gXCIuLi9oZWxwZXJzL25ldC5qc1wiO1xuaW1wb3J0IHsgcnVuQXNQcm9taXNlIH0gZnJvbSBcIi4uL2hlbHBlcnMvcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IFNlcnZlclRpbWluZyB9IGZyb20gXCIuLi9oZWxwZXJzL1NlcnZlclRpbWluZy5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlU3RyZWFtIH0gZnJvbSBcIi4uL2hlbHBlcnMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0RnVuY3Rpb24gfSBmcm9tIFwiLi9Jbm5nZXN0RnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IF9pbnRlcm5hbHMgfSBmcm9tIFwiLi9leGVjdXRpb24vdjEuanNcIjtcbmltcG9ydCBEZWJ1ZyBmcm9tIFwiZGVidWdcIjtcbmltcG9ydCB7IHVsaWQgfSBmcm9tIFwidWxpZFwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL0lubmdlc3RDb21tSGFuZGxlci50c1xuLyoqXG4qIEEgc2NoZW1hIGZvciB0aGUgcmVzcG9uc2UgZnJvbSBJbm5nZXN0IHdoZW4gcmVnaXN0ZXJpbmcuXG4qL1xuY29uc3QgcmVnaXN0ZXJSZXNTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHN0YXR1czogei5udW1iZXIoKS5kZWZhdWx0KDIwMCksXG5cdHNraXBwZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCkuZGVmYXVsdChmYWxzZSksXG5cdG1vZGlmaWVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLmRlZmF1bHQoZmFsc2UpLFxuXHRlcnJvcjogei5zdHJpbmcoKS5kZWZhdWx0KFwiU3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWRcIilcbn0pO1xuLyoqXG4qIGBJbm5nZXN0Q29tbUhhbmRsZXJgIGlzIGEgY2xhc3MgZm9yIGhhbmRsaW5nIGluY29taW5nIHJlcXVlc3RzIGZyb20gSW5uZ2VzdCAob3JcbiogSW5uZ2VzdCdzIHRvb2xpbmcgc3VjaCBhcyB0aGUgZGV2IHNlcnZlciBvciBDTEkpIGFuZCB0YWtpbmcgYXBwcm9wcmlhdGVcbiogYWN0aW9uIGZvciBhbnkgc2VydmVkIGZ1bmN0aW9ucy5cbipcbiogQWxsIGhhbmRsZXJzIChOZXh0LmpzLCBSZWR3b29kSlMsIFJlbWl4LCBEZW5vIEZyZXNoLCBldGMuKSBhcmUgY3JlYXRlZCB1c2luZ1xuKiB0aGlzIGNsYXNzOyB0aGUgZXhwb3NlZCBgc2VydmVgIGZ1bmN0aW9uIHdpbGwgLSBtb3N0IGNvbW1vbmx5IC0gY3JlYXRlIGFuXG4qIGluc3RhbmNlIG9mIGBJbm5nZXN0Q29tbUhhbmRsZXJgIGFuZCB0aGVuIHJldHVybiBgaW5zdGFuY2UuY3JlYXRlSGFuZGxlcigpYC5cbipcbiogU2VlIGluZGl2aWR1YWwgcGFyYW1ldGVyIGRldGFpbHMgZm9yIG1vcmUgaW5mb3JtYXRpb24sIG9yIHNlZSB0aGVcbiogc291cmNlIGNvZGUgZm9yIGFuIGV4aXN0aW5nIGhhbmRsZXIsIGUuZy5cbioge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbm5nZXN0L2lubmdlc3QtanMvYmxvYi9tYWluL3NyYy9uZXh0LnRzfVxuKlxuKiBAZXhhbXBsZVxuKiBgYGBcbiogLy8gbXktY3VzdG9tLWhhbmRsZXIudHNcbiogaW1wb3J0IHtcbiogICBJbm5nZXN0Q29tbUhhbmRsZXIsXG4qICAgdHlwZSBTZXJ2ZUhhbmRsZXJPcHRpb25zLFxuKiB9IGZyb20gXCIuL2NvbXBvbmVudHMvSW5uZ2VzdENvbW1IYW5kbGVyXCI7XG4qXG4qIGV4cG9ydCBjb25zdCBzZXJ2ZSA9IChvcHRpb25zOiBTZXJ2ZUhhbmRsZXJPcHRpb25zKSA9PiB7XG4qICAgY29uc3QgaGFuZGxlciA9IG5ldyBJbm5nZXN0Q29tbUhhbmRsZXIoe1xuKiAgICAgZnJhbWV3b3JrTmFtZTogXCJteS1jdXN0b20taGFuZGxlclwiLFxuKiAgICAgLi4ub3B0aW9ucyxcbiogICAgIGhhbmRsZXI6IChyZXE6IFJlcXVlc3QpID0+IHtcbiogICAgICAgcmV0dXJuIHtcbiogICAgICAgICBib2R5OiAoKSA9PiByZXEuanNvbigpLFxuKiAgICAgICAgIGhlYWRlcnM6IChrZXkpID0+IHJlcS5oZWFkZXJzLmdldChrZXkpLFxuKiAgICAgICAgIG1ldGhvZDogKCkgPT4gcmVxLm1ldGhvZCxcbiogICAgICAgICB1cmw6ICgpID0+IG5ldyBVUkwocmVxLnVybCwgYGh0dHBzOi8vJHtyZXEuaGVhZGVycy5nZXQoXCJob3N0XCIpIHx8IFwiXCJ9YCksXG4qICAgICAgICAgdHJhbnNmb3JtUmVzcG9uc2U6ICh7IGJvZHksIHN0YXR1cywgaGVhZGVycyB9KSA9PiB7XG4qICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKGJvZHksIHsgc3RhdHVzLCBoZWFkZXJzIH0pO1xuKiAgICAgICAgIH0sXG4qICAgICAgIH07XG4qICAgICB9LFxuKiAgIH0pO1xuKlxuKiAgIHJldHVybiBoYW5kbGVyLmNyZWF0ZUhhbmRsZXIoKTtcbiogfTtcbiogYGBgXG4qXG4qIEBwdWJsaWNcbiovXG52YXIgSW5uZ2VzdENvbW1IYW5kbGVyID0gY2xhc3Mge1xuXHQvKipcblx0KiBUaGUgSUQgb2YgdGhpcyBzZXJ2ZSBoYW5kbGVyLCBlLmcuIGBcIm15LWFwcFwiYC4gSXQncyByZWNvbW1lbmRlZCB0aGF0IHRoaXNcblx0KiB2YWx1ZSByZXByZXNlbnRzIHRoZSBvdmVyYXJjaGluZyBhcHAvc2VydmljZSB0aGF0IHRoaXMgc2V0IG9mIGZ1bmN0aW9ucyBpc1xuXHQqIGJlaW5nIHNlcnZlZCBmcm9tLlxuXHQqL1xuXHRpZDtcblx0LyoqXG5cdCogVGhlIGhhbmRsZXIgc3BlY2lmaWVkIGR1cmluZyBpbnN0YW50aWF0aW9uIG9mIHRoZSBjbGFzcy5cblx0Ki9cblx0aGFuZGxlcjtcblx0LyoqXG5cdCogVGhlIFVSTCBvZiB0aGUgSW5uZ2VzdCBmdW5jdGlvbiByZWdpc3RyYXRpb24gZW5kcG9pbnQuXG5cdCovXG5cdGlubmdlc3RSZWdpc3RlclVybDtcblx0LyoqXG5cdCogVGhlIG5hbWUgb2YgdGhlIGZyYW1ld29yayB0aGlzIGhhbmRsZXIgaXMgZGVzaWduZWQgZm9yLiBTaG91bGQgYmVcblx0KiBsb3dlcmNhc2UsIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGluY2x1c2l2ZSBvZiBgLWAgYW5kIGAvYC5cblx0Ki9cblx0ZnJhbWV3b3JrTmFtZTtcblx0LyoqXG5cdCogVGhlIHNpZ25pbmcga2V5IHVzZWQgdG8gdmFsaWRhdGUgcmVxdWVzdHMgZnJvbSBJbm5nZXN0LiBUaGlzIGlzXG5cdCogaW50ZW50aW9uYWxseSBtdXRhYmxlIHNvIHRoYXQgd2UgY2FuIHBpY2sgdXAgdGhlIHNpZ25pbmcga2V5IGZyb20gdGhlXG5cdCogZW52aXJvbm1lbnQgZHVyaW5nIGV4ZWN1dGlvbiBpZiBuZWVkZWQuXG5cdCovXG5cdHNpZ25pbmdLZXk7XG5cdC8qKlxuXHQqIFRoZSBzYW1lIGFzIHNpZ25pbmdLZXksIGV4Y2VwdCB1c2VkIGFzIGEgZmFsbGJhY2sgd2hlbiBhdXRoIGZhaWxzIHVzaW5nIHRoZVxuXHQqIHByaW1hcnkgc2lnbmluZyBrZXkuXG5cdCovXG5cdHNpZ25pbmdLZXlGYWxsYmFjaztcblx0LyoqXG5cdCogQSBwcm9wZXJ0eSB0aGF0IGNhbiBiZSBzZXQgdG8gaW5kaWNhdGUgd2hldGhlciB3ZSBiZWxpZXZlIHdlIGFyZSBpblxuXHQqIHByb2R1Y3Rpb24gbW9kZS5cblx0KlxuXHQqIFNob3VsZCBiZSBzZXQgZXZlcnkgdGltZSBhIHJlcXVlc3QgaXMgcmVjZWl2ZWQuXG5cdCovXG5cdF9tb2RlO1xuXHQvKipcblx0KiBUaGUgbG9jYWxpemVkIGBmZXRjaGAgaW1wbGVtZW50YXRpb24gdXNlZCBieSB0aGlzIGhhbmRsZXIuXG5cdCovXG5cdGZldGNoO1xuXHQvKipcblx0KiBUaGUgaG9zdCB1c2VkIHRvIGFjY2VzcyB0aGUgSW5uZ2VzdCBzZXJ2ZSBlbmRwb2ludCwgZS5nLjpcblx0KlxuXHQqICAgICBcImh0dHBzOi8vbXlhcHAuY29tXCJcblx0KlxuXHQqIEJ5IGRlZmF1bHQsIHRoZSBsaWJyYXJ5IHdpbGwgdHJ5IHRvIGluZmVyIHRoaXMgdXNpbmcgcmVxdWVzdCBkZXRhaWxzIHN1Y2hcblx0KiBhcyB0aGUgXCJIb3N0XCIgaGVhZGVyIGFuZCByZXF1ZXN0IHBhdGgsIGJ1dCBzb21ldGltZXMgdGhpcyBpc24ndCBwb3NzaWJsZVxuXHQqIChlLmcuIHdoZW4gcnVubmluZyBpbiBhIG1vcmUgY29udHJvbGxlZCBlbnZpcm9ubWVudHMgc3VjaCBhcyBBV1MgTGFtYmRhIG9yXG5cdCogd2hlbiBkZWFsaW5nIHdpdGggcHJveGllcy9yZWRpcmVjdHMpLlxuXHQqXG5cdCogUHJvdmlkZSB0aGUgY3VzdG9tIGhvc3RuYW1lIGhlcmUgdG8gZW5zdXJlIHRoYXQgdGhlIHBhdGggaXMgcmVwb3J0ZWRcblx0KiBjb3JyZWN0bHkgd2hlbiByZWdpc3RlcmluZyBmdW5jdGlvbnMgd2l0aCBJbm5nZXN0LlxuXHQqXG5cdCogVG8gYWxzbyBwcm92aWRlIGEgY3VzdG9tIHBhdGgsIHVzZSBgc2VydmVQYXRoYC5cblx0Ki9cblx0X3NlcnZlSG9zdDtcblx0LyoqXG5cdCogVGhlIHBhdGggdG8gdGhlIElubmdlc3Qgc2VydmUgZW5kcG9pbnQuIGUuZy46XG5cdCpcblx0KiAgICAgXCIvc29tZS9sb25nL3BhdGgvdG8vaW5uZ2VzdC9lbmRwb2ludFwiXG5cdCpcblx0KiBCeSBkZWZhdWx0LCB0aGUgbGlicmFyeSB3aWxsIHRyeSB0byBpbmZlciB0aGlzIHVzaW5nIHJlcXVlc3QgZGV0YWlscyBzdWNoXG5cdCogYXMgdGhlIFwiSG9zdFwiIGhlYWRlciBhbmQgcmVxdWVzdCBwYXRoLCBidXQgc29tZXRpbWVzIHRoaXMgaXNuJ3QgcG9zc2libGVcblx0KiAoZS5nLiB3aGVuIHJ1bm5pbmcgaW4gYSBtb3JlIGNvbnRyb2xsZWQgZW52aXJvbm1lbnRzIHN1Y2ggYXMgQVdTIExhbWJkYSBvclxuXHQqIHdoZW4gZGVhbGluZyB3aXRoIHByb3hpZXMvcmVkaXJlY3RzKS5cblx0KlxuXHQqIFByb3ZpZGUgdGhlIGN1c3RvbSBwYXRoIChleGNsdWRpbmcgdGhlIGhvc3RuYW1lKSBoZXJlIHRvIGVuc3VyZSB0aGF0IHRoZVxuXHQqIHBhdGggaXMgcmVwb3J0ZWQgY29ycmVjdGx5IHdoZW4gcmVnaXN0ZXJpbmcgZnVuY3Rpb25zIHdpdGggSW5uZ2VzdC5cblx0KlxuXHQqIFRvIGFsc28gcHJvdmlkZSBhIGN1c3RvbSBob3N0bmFtZSwgdXNlIGBzZXJ2ZUhvc3RgLlxuXHQqL1xuXHRfc2VydmVQYXRoO1xuXHQvKipcblx0KiBUaGUgbWluaW11bSBsZXZlbCB0byBsb2cgZnJvbSB0aGUgSW5uZ2VzdCBzZXJ2ZSBoYW5kbGVyLlxuXHQqL1xuXHRsb2dMZXZlbDtcblx0c3RyZWFtaW5nO1xuXHQvKipcblx0KiBBIHByaXZhdGUgY29sbGVjdGlvbiBvZiBqdXN0IElubmdlc3QgZnVuY3Rpb25zLCBhcyB0aGV5IGhhdmUgYmVlbiBwYXNzZWRcblx0KiB3aGVuIGluc3RhbnRpYXRpbmcgdGhlIGNsYXNzLlxuXHQqL1xuXHRyYXdGbnM7XG5cdGNsaWVudDtcblx0LyoqXG5cdCogQSBwcml2YXRlIGNvbGxlY3Rpb24gb2YgZnVuY3Rpb25zIHRoYXQgYXJlIGJlaW5nIHNlcnZlZC4gVGhpcyBtYXAgaXMgdXNlZFxuXHQqIHRvIGZpbmQgYW5kIHJlZ2lzdGVyIGZ1bmN0aW9ucyB3aGVuIGludGVyYWN0aW5nIHdpdGggSW5uZ2VzdCBDbG91ZC5cblx0Ki9cblx0Zm5zID0ge307XG5cdGVudiA9IGFsbFByb2Nlc3NFbnYoKTtcblx0YWxsb3dFeHBpcmVkU2lnbmF0dXJlcztcblx0X29wdGlvbnM7XG5cdHNraXBTaWduYXR1cmVWYWxpZGF0aW9uO1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0dGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0LyoqXG5cdFx0KiB2MiAtPiB2MyBtaWdyYXRpb24gZXJyb3IuXG5cdFx0KlxuXHRcdCogSWYgYSBzZXJ2ZSBoYW5kbGVyIGlzIHBhc3NlZCBhIGNsaWVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIGl0J2xsIGJlXG5cdFx0KiBzcHJlYWQgaW4gdG8gdGhlc2Ugb3B0aW9ucy4gV2Ugc2hvdWxkIGJlIGFibGUgdG8gZGV0ZWN0IHRoaXMgYnkgcGlja2luZ1xuXHRcdCogdXAgYSB1bmlxdWUgcHJvcGVydHkgb24gdGhlIG9iamVjdC5cblx0XHQqL1xuXHRcdGlmIChPYmplY3QuaGFzT3duKG9wdGlvbnMsIFwiZXZlbnRLZXlcIikpIHRocm93IG5ldyBFcnJvcihgJHtsb2dQcmVmaXh9IFlvdSd2ZSBwYXNzZWQgYW4gSW5uZ2VzdCBjbGllbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHlvdXIgc2VydmUgaGFuZGxlci4gVGhpcyBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGluIHYzOyBwbGVhc2UgcGFzcyB0aGUgSW5uZ2VzdCBjbGllbnQgYXMgdGhlIFxcYGNsaWVudFxcYCBwcm9wZXJ0eSBvZiBhbiBvcHRpb25zIG9iamVjdCBpbnN0ZWFkLiBTZWUgaHR0cHM6Ly93d3cuaW5uZ2VzdC5jb20vZG9jcy9zZGsvbWlncmF0aW9uYCk7XG5cdFx0dGhpcy5mcmFtZXdvcmtOYW1lID0gb3B0aW9ucy5mcmFtZXdvcmtOYW1lO1xuXHRcdHRoaXMuY2xpZW50ID0gb3B0aW9ucy5jbGllbnQ7XG5cdFx0aWYgKG9wdGlvbnMuaWQpIGNvbnNvbGUud2FybihgJHtsb2dQcmVmaXh9IFRoZSBcXGBpZFxcYCBzZXJ2ZSBvcHRpb24gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHY0YCk7XG5cdFx0dGhpcy5pZCA9IG9wdGlvbnMuaWQgfHwgdGhpcy5jbGllbnQuaWQ7XG5cdFx0dGhpcy5oYW5kbGVyID0gb3B0aW9ucy5oYW5kbGVyO1xuXHRcdC8qKlxuXHRcdCogUHJvdmlkZSBhIGhpZGRlbiBvcHRpb24gdG8gYWxsb3cgZXhwaXJlZCBzaWduYXR1cmVzIHRvIGJlIGFjY2VwdGVkIGR1cmluZ1xuXHRcdCogdGVzdGluZy5cblx0XHQqL1xuXHRcdHRoaXMuYWxsb3dFeHBpcmVkU2lnbmF0dXJlcyA9IEJvb2xlYW4oYXJndW1lbnRzW1wiMFwiXT8uX190ZXN0aW5nQWxsb3dFeHBpcmVkU2lnbmF0dXJlcyk7XG5cdFx0dGhpcy5yYXdGbnMgPSBvcHRpb25zLmZ1bmN0aW9ucz8uZmlsdGVyKEJvb2xlYW4pID8/IFtdO1xuXHRcdGlmICh0aGlzLnJhd0Zucy5sZW5ndGggIT09IChvcHRpb25zLmZ1bmN0aW9ucyA/PyBbXSkubGVuZ3RoKSBjb25zb2xlLndhcm4oYFNvbWUgZnVuY3Rpb25zIHBhc3NlZCB0byBzZXJ2ZSgpIGFyZSB1bmRlZmluZWQgYW5kIG1pc2NvbmZpZ3VyZWQuICBQbGVhc2UgY2hlY2sgeW91ciBpbXBvcnRzLmApO1xuXHRcdHRoaXMuZm5zID0gdGhpcy5yYXdGbnMucmVkdWNlKChhY2MsIGZuKSA9PiB7XG5cdFx0XHRjb25zdCBjb25maWdzID0gZm5bXCJnZXRDb25maWdcIl0oe1xuXHRcdFx0XHRiYXNlVXJsOiBuZXcgVVJMKFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiKSxcblx0XHRcdFx0YXBwUHJlZml4OiB0aGlzLmlkXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGZucyA9IGNvbmZpZ3MucmVkdWNlKChhY2MkMSwgeyBpZCB9LCBpbmRleCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdC4uLmFjYyQxLFxuXHRcdFx0XHRcdFtpZF06IHtcblx0XHRcdFx0XHRcdGZuLFxuXHRcdFx0XHRcdFx0b25GYWlsdXJlOiBCb29sZWFuKGluZGV4KVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH0sIHt9KTtcblx0XHRcdGNvbmZpZ3MuZm9yRWFjaCgoeyBpZCB9KSA9PiB7XG5cdFx0XHRcdGlmIChhY2NbaWRdKSB0aHJvdyBuZXcgRXJyb3IoYER1cGxpY2F0ZSBmdW5jdGlvbiBJRCBcIiR7aWR9XCI7IHBsZWFzZSBjaGFuZ2UgYSBmdW5jdGlvbidzIG5hbWUgb3IgcHJvdmlkZSBhbiBleHBsaWNpdCBJRCB0byBhdm9pZCBjb25mbGljdHMuYCk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLmFjYyxcblx0XHRcdFx0Li4uZm5zXG5cdFx0XHR9O1xuXHRcdH0sIHt9KTtcblx0XHR0aGlzLmlubmdlc3RSZWdpc3RlclVybCA9IG5ldyBVUkwoXCIvZm4vcmVnaXN0ZXJcIiwgdGhpcy5hcGlCYXNlVXJsKTtcblx0XHR0aGlzLnNpZ25pbmdLZXkgPSBvcHRpb25zLnNpZ25pbmdLZXk7XG5cdFx0dGhpcy5zaWduaW5nS2V5RmFsbGJhY2sgPSBvcHRpb25zLnNpZ25pbmdLZXlGYWxsYmFjaztcblx0XHR0aGlzLl9zZXJ2ZUhvc3QgPSBvcHRpb25zLnNlcnZlSG9zdCB8fCB0aGlzLmVudltlbnZLZXlzLklubmdlc3RTZXJ2ZUhvc3RdO1xuXHRcdHRoaXMuX3NlcnZlUGF0aCA9IG9wdGlvbnMuc2VydmVQYXRoIHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdFNlcnZlUGF0aF07XG5cdFx0dGhpcy5za2lwU2lnbmF0dXJlVmFsaWRhdGlvbiA9IG9wdGlvbnMuc2tpcFNpZ25hdHVyZVZhbGlkYXRpb24gfHwgZmFsc2U7XG5cdFx0Y29uc3QgZGVmYXVsdExvZ0xldmVsID0gXCJpbmZvXCI7XG5cdFx0dGhpcy5sb2dMZXZlbCA9IHouZW51bShsb2dMZXZlbHMpLmRlZmF1bHQoZGVmYXVsdExvZ0xldmVsKS5jYXRjaCgoY3R4KSA9PiB7XG5cdFx0XHR0aGlzLmxvZyhcIndhcm5cIiwgYFVua25vd24gbG9nIGxldmVsIHBhc3NlZDogJHtTdHJpbmcoY3R4LmlucHV0KX07IGRlZmF1bHRpbmcgdG8gJHtkZWZhdWx0TG9nTGV2ZWx9YCk7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdExvZ0xldmVsO1xuXHRcdH0pLnBhcnNlKG9wdGlvbnMubG9nTGV2ZWwgfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0TG9nTGV2ZWxdKTtcblx0XHRpZiAodGhpcy5sb2dMZXZlbCA9PT0gXCJkZWJ1Z1wiKSB7XG5cdFx0XHQvKipcblx0XHRcdCogYGRlYnVnYCBpcyBhbiBvbGQgbGlicmFyeTsgc29tZXRpbWVzIGl0cyBydW50aW1lIGRldGVjdGlvbiBkb2Vzbid0IHdvcmtcblx0XHRcdCogZm9yIG5ld2VyIHBhaXJpbmdzIG9mIGZyYW1ld29yay9ydW50aW1lLlxuXHRcdFx0KlxuXHRcdFx0KiBPbmUgc2lsbHkgc3ltcHRvbSBvZiB0aGlzIGlzIHRoYXQgYERlYnVnKClgIHJldHVybnMgYW4gYW5vbnltb3VzXG5cdFx0XHQqIGZ1bmN0aW9uIHdpdGggbm8gZXh0cmEgcHJvcGVydGllcyBpbnN0ZWFkIG9mIGEgYERlYnVnZ2VyYCBpbnN0YW5jZSBpZlxuXHRcdFx0KiB0aGUgd3JvbmcgY29kZSBpcyBjb25zdW1lZCBmb2xsb3dpbmcgYSBiYWQgZGV0ZWN0aW9uLiBUaGlzIHJlc3VsdHMgaW5cblx0XHRcdCogdGhlIGZvbGxvd2luZyBgLmVuYWJsZSgpYCBjYWxsIGZhaWxpbmcsIHNvIHdlIGp1c3QgdHJ5IGNhcmVmdWxseSB0b1xuXHRcdFx0KiBlbmFibGUgaXQgaGVyZS5cblx0XHRcdCovXG5cdFx0XHRpZiAoRGVidWcuZW5hYmxlICYmIHR5cGVvZiBEZWJ1Zy5lbmFibGUgPT09IFwiZnVuY3Rpb25cIikgRGVidWcuZW5hYmxlKGAke2RlYnVnUHJlZml4fToqYCk7XG5cdFx0fVxuXHRcdGNvbnN0IGRlZmF1bHRTdHJlYW1pbmdPcHRpb24gPSBmYWxzZTtcblx0XHR0aGlzLnN0cmVhbWluZyA9IHoudW5pb24oW3ouZW51bShbXCJhbGxvd1wiLCBcImZvcmNlXCJdKSwgei5saXRlcmFsKGZhbHNlKV0pLmRlZmF1bHQoZGVmYXVsdFN0cmVhbWluZ09wdGlvbikuY2F0Y2goKGN0eCkgPT4ge1xuXHRcdFx0dGhpcy5sb2coXCJ3YXJuXCIsIGBVbmtub3duIHN0cmVhbWluZyBvcHRpb24gcGFzc2VkOiAke1N0cmluZyhjdHguaW5wdXQpfTsgZGVmYXVsdGluZyB0byAke1N0cmluZyhkZWZhdWx0U3RyZWFtaW5nT3B0aW9uKX1gKTtcblx0XHRcdHJldHVybiBkZWZhdWx0U3RyZWFtaW5nT3B0aW9uO1xuXHRcdH0pLnBhcnNlKG9wdGlvbnMuc3RyZWFtaW5nIHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdFN0cmVhbWluZ10pO1xuXHRcdHRoaXMuZmV0Y2ggPSBvcHRpb25zLmZldGNoID8gZ2V0RmV0Y2gob3B0aW9ucy5mZXRjaCkgOiB0aGlzLmNsaWVudFtcImZldGNoXCJdO1xuXHR9XG5cdC8qKlxuXHQqIEdldCB0aGUgQVBJIGJhc2UgVVJMIGZvciB0aGUgSW5uZ2VzdCBBUEkuXG5cdCpcblx0KiBUaGlzIGlzIGEgZ2V0dGVyIHRvIGVuY291cmFnZSBjaGVja2luZyB0aGUgZW52aXJvbm1lbnQgZm9yIHRoZSBBUEkgYmFzZSBVUkxcblx0KiBlYWNoIHRpbWUgaXQncyBhY2Nlc3NlZCwgYXMgaXQgbWF5IGNoYW5nZSBkdXJpbmcgZXhlY3V0aW9uLlxuXHQqL1xuXHRnZXQgYXBpQmFzZVVybCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fb3B0aW9ucy5iYXNlVXJsIHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdEFwaUJhc2VVcmxdIHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdEJhc2VVcmxdIHx8IHRoaXMuY2xpZW50LmFwaUJhc2VVcmwgfHwgZGVmYXVsdElubmdlc3RBcGlCYXNlVXJsO1xuXHR9XG5cdC8qKlxuXHQqIEdldCB0aGUgZXZlbnQgQVBJIGJhc2UgVVJMIGZvciB0aGUgSW5uZ2VzdCBBUEkuXG5cdCpcblx0KiBUaGlzIGlzIGEgZ2V0dGVyIHRvIGVuY291cmFnZSBjaGVja2luZyB0aGUgZW52aXJvbm1lbnQgZm9yIHRoZSBldmVudCBBUElcblx0KiBiYXNlIFVSTCBlYWNoIHRpbWUgaXQncyBhY2Nlc3NlZCwgYXMgaXQgbWF5IGNoYW5nZSBkdXJpbmcgZXhlY3V0aW9uLlxuXHQqL1xuXHRnZXQgZXZlbnRBcGlCYXNlVXJsKCkge1xuXHRcdHJldHVybiB0aGlzLl9vcHRpb25zLmJhc2VVcmwgfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0RXZlbnRBcGlCYXNlVXJsXSB8fCB0aGlzLmVudltlbnZLZXlzLklubmdlc3RCYXNlVXJsXSB8fCB0aGlzLmNsaWVudC5ldmVudEJhc2VVcmwgfHwgZGVmYXVsdElubmdlc3RFdmVudEJhc2VVcmw7XG5cdH1cblx0LyoqXG5cdCogVGhlIGhvc3QgdXNlZCB0byBhY2Nlc3MgdGhlIElubmdlc3Qgc2VydmUgZW5kcG9pbnQsIGUuZy46XG5cdCpcblx0KiAgICAgXCJodHRwczovL215YXBwLmNvbVwiXG5cdCpcblx0KiBCeSBkZWZhdWx0LCB0aGUgbGlicmFyeSB3aWxsIHRyeSB0byBpbmZlciB0aGlzIHVzaW5nIHJlcXVlc3QgZGV0YWlscyBzdWNoXG5cdCogYXMgdGhlIFwiSG9zdFwiIGhlYWRlciBhbmQgcmVxdWVzdCBwYXRoLCBidXQgc29tZXRpbWVzIHRoaXMgaXNuJ3QgcG9zc2libGVcblx0KiAoZS5nLiB3aGVuIHJ1bm5pbmcgaW4gYSBtb3JlIGNvbnRyb2xsZWQgZW52aXJvbm1lbnRzIHN1Y2ggYXMgQVdTIExhbWJkYSBvclxuXHQqIHdoZW4gZGVhbGluZyB3aXRoIHByb3hpZXMvcmVkaXJlY3RzKS5cblx0KlxuXHQqIFByb3ZpZGUgdGhlIGN1c3RvbSBob3N0bmFtZSBoZXJlIHRvIGVuc3VyZSB0aGF0IHRoZSBwYXRoIGlzIHJlcG9ydGVkXG5cdCogY29ycmVjdGx5IHdoZW4gcmVnaXN0ZXJpbmcgZnVuY3Rpb25zIHdpdGggSW5uZ2VzdC5cblx0KlxuXHQqIFRvIGFsc28gcHJvdmlkZSBhIGN1c3RvbSBwYXRoLCB1c2UgYHNlcnZlUGF0aGAuXG5cdCovXG5cdGdldCBzZXJ2ZUhvc3QoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3NlcnZlSG9zdCB8fCB0aGlzLmVudltlbnZLZXlzLklubmdlc3RTZXJ2ZUhvc3RdO1xuXHR9XG5cdC8qKlxuXHQqIFRoZSBwYXRoIHRvIHRoZSBJbm5nZXN0IHNlcnZlIGVuZHBvaW50LiBlLmcuOlxuXHQqXG5cdCogICAgIFwiL3NvbWUvbG9uZy9wYXRoL3RvL2lubmdlc3QvZW5kcG9pbnRcIlxuXHQqXG5cdCogQnkgZGVmYXVsdCwgdGhlIGxpYnJhcnkgd2lsbCB0cnkgdG8gaW5mZXIgdGhpcyB1c2luZyByZXF1ZXN0IGRldGFpbHMgc3VjaFxuXHQqIGFzIHRoZSBcIkhvc3RcIiBoZWFkZXIgYW5kIHJlcXVlc3QgcGF0aCwgYnV0IHNvbWV0aW1lcyB0aGlzIGlzbid0IHBvc3NpYmxlXG5cdCogKGUuZy4gd2hlbiBydW5uaW5nIGluIGEgbW9yZSBjb250cm9sbGVkIGVudmlyb25tZW50cyBzdWNoIGFzIEFXUyBMYW1iZGEgb3Jcblx0KiB3aGVuIGRlYWxpbmcgd2l0aCBwcm94aWVzL3JlZGlyZWN0cykuXG5cdCpcblx0KiBQcm92aWRlIHRoZSBjdXN0b20gcGF0aCAoZXhjbHVkaW5nIHRoZSBob3N0bmFtZSkgaGVyZSB0byBlbnN1cmUgdGhhdCB0aGVcblx0KiBwYXRoIGlzIHJlcG9ydGVkIGNvcnJlY3RseSB3aGVuIHJlZ2lzdGVyaW5nIGZ1bmN0aW9ucyB3aXRoIElubmdlc3QuXG5cdCpcblx0KiBUbyBhbHNvIHByb3ZpZGUgYSBjdXN0b20gaG9zdG5hbWUsIHVzZSBgc2VydmVIb3N0YC5cblx0KlxuXHQqIFRoaXMgaXMgYSBnZXR0ZXIgdG8gZW5jb3VyYWdlIGNoZWNraW5nIHRoZSBlbnZpcm9ubWVudCBmb3IgdGhlIHNlcnZlIHBhdGhcblx0KiBlYWNoIHRpbWUgaXQncyBhY2Nlc3NlZCwgYXMgaXQgbWF5IGNoYW5nZSBkdXJpbmcgZXhlY3V0aW9uLlxuXHQqL1xuXHRnZXQgc2VydmVQYXRoKCkge1xuXHRcdHJldHVybiB0aGlzLl9zZXJ2ZVBhdGggfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2VydmVQYXRoXTtcblx0fVxuXHRnZXQgaGFzaGVkRXZlbnRLZXkoKSB7XG5cdFx0aWYgKCF0aGlzLmNsaWVudFtcImV2ZW50S2V5XCJdIHx8IHRoaXMuY2xpZW50W1wiZXZlbnRLZXlcIl0gPT09IGR1bW15RXZlbnRLZXkpIHJldHVybjtcblx0XHRyZXR1cm4gaGFzaEV2ZW50S2V5KHRoaXMuY2xpZW50W1wiZXZlbnRLZXlcIl0pO1xuXHR9XG5cdGdldCBoYXNoZWRTaWduaW5nS2V5KCkge1xuXHRcdGlmICghdGhpcy5zaWduaW5nS2V5KSByZXR1cm47XG5cdFx0cmV0dXJuIGhhc2hTaWduaW5nS2V5KHRoaXMuc2lnbmluZ0tleSk7XG5cdH1cblx0Z2V0IGhhc2hlZFNpZ25pbmdLZXlGYWxsYmFjaygpIHtcblx0XHRpZiAoIXRoaXMuc2lnbmluZ0tleUZhbGxiYWNrKSByZXR1cm47XG5cdFx0cmV0dXJuIGhhc2hTaWduaW5nS2V5KHRoaXMuc2lnbmluZ0tleUZhbGxiYWNrKTtcblx0fVxuXHQvKipcblx0KiBSZXR1cm5zIGEgYGJvb2xlYW5gIHJlcHJlc2VudGluZyB3aGV0aGVyIHRoaXMgaGFuZGxlciB3aWxsIHN0cmVhbSByZXNwb25zZXNcblx0KiBvciBub3QuIFRha2VzIGludG8gYWNjb3VudCB0aGUgdXNlcidzIHByZWZlcmVuY2UgYW5kIHRoZSBwbGF0Zm9ybSdzXG5cdCogY2FwYWJpbGl0aWVzLlxuXHQqL1xuXHRhc3luYyBzaG91bGRTdHJlYW0oYWN0aW9ucykge1xuXHRcdGlmIChhd2FpdCBhY3Rpb25zLnF1ZXJ5U3RyaW5nV2l0aERlZmF1bHRzKFwidGVzdGluZyBmb3IgcHJvYmVcIiwgcXVlcnlLZXlzLlByb2JlKSAhPT0gdm9pZCAwKSByZXR1cm4gZmFsc2U7XG5cdFx0aWYgKCFhY3Rpb25zLnRyYW5zZm9ybVN0cmVhbWluZ1Jlc3BvbnNlKSByZXR1cm4gZmFsc2U7XG5cdFx0aWYgKHRoaXMuc3RyZWFtaW5nID09PSBcImZvcmNlXCIpIHJldHVybiB0cnVlO1xuXHRcdHJldHVybiB0aGlzLnN0cmVhbWluZyA9PT0gXCJhbGxvd1wiICYmIHBsYXRmb3JtU3VwcG9ydHNTdHJlYW1pbmcodGhpcy5mcmFtZXdvcmtOYW1lLCB0aGlzLmVudik7XG5cdH1cblx0YXN5bmMgaXNJbm5nZXN0UmVxKGFjdGlvbnMpIHtcblx0XHRjb25zdCByZXFNZXNzYWdlID0gYGNoZWNraW5nIGlmIHRoaXMgaXMgYW4gSW5uZ2VzdCByZXF1ZXN0YDtcblx0XHRjb25zdCBbcnVuSWQsIHNpZ25hdHVyZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbYWN0aW9ucy5oZWFkZXJzKHJlcU1lc3NhZ2UsIGhlYWRlcktleXMuSW5uZ2VzdFJ1bklkKSwgYWN0aW9ucy5oZWFkZXJzKHJlcU1lc3NhZ2UsIGhlYWRlcktleXMuU2lnbmF0dXJlKV0pO1xuXHRcdHJldHVybiBCb29sZWFuKHJ1bklkICYmIHR5cGVvZiBzaWduYXR1cmUgPT09IFwic3RyaW5nXCIpO1xuXHR9XG5cdC8qKlxuXHQqIFN0YXJ0IGhhbmRsaW5nIGEgcmVxdWVzdCwgc2V0dGluZyB1cCBlbnZpcm9ubWVudHMsIG1vZGVzLCBhbmQgcmV0dXJuaW5nXG5cdCogc29tZSBoZWxwZXJzLlxuXHQqL1xuXHRhc3luYyBpbml0UmVxdWVzdCguLi5hcmdzKSB7XG5cdFx0Y29uc3QgdGltZXIgPSBuZXcgU2VydmVyVGltaW5nKCk7XG5cdFx0Y29uc3QgYWN0aW9ucyA9IGF3YWl0IHRoaXMuZ2V0QWN0aW9ucyh0aW1lciwgLi4uYXJncyk7XG5cdFx0Y29uc3QgW2VudiwgZXhwZWN0ZWRTZXJ2ZXJLaW5kXSA9IGF3YWl0IFByb21pc2UuYWxsKFthY3Rpb25zLmVudj8uKFwic3RhcnRpbmcgdG8gaGFuZGxlIHJlcXVlc3RcIiksIGFjdGlvbnMuaGVhZGVycyhcImNoZWNraW5nIGV4cGVjdGVkIHNlcnZlciBraW5kXCIsIGhlYWRlcktleXMuSW5uZ2VzdFNlcnZlcktpbmQpXSk7XG5cdFx0dGhpcy5lbnYgPSB7XG5cdFx0XHQuLi5hbGxQcm9jZXNzRW52KCksXG5cdFx0XHQuLi5lbnZcblx0XHR9O1xuXHRcdGNvbnN0IGhlYWRlclByb21pc2VzID0gZm9yd2FyZGVkSGVhZGVycy5tYXAoYXN5bmMgKGhlYWRlcikgPT4ge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aGVhZGVyLFxuXHRcdFx0XHR2YWx1ZTogYXdhaXQgYWN0aW9ucy5oZWFkZXJzKGBmZXRjaGluZyAke2hlYWRlcn0gZm9yIGZvcndhcmRpbmdgLCBoZWFkZXIpXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdGNvbnN0IGhlYWRlcnNUb0ZvcndhcmRQID0gUHJvbWlzZS5hbGwoaGVhZGVyUHJvbWlzZXMpLnRoZW4oKGZldGNoZWRIZWFkZXJzKSA9PiB7XG5cdFx0XHRyZXR1cm4gZmV0Y2hlZEhlYWRlcnMucmVkdWNlKChhY2MsIHsgaGVhZGVyLCB2YWx1ZSB9KSA9PiB7XG5cdFx0XHRcdGlmICh2YWx1ZSkgYWNjW2hlYWRlcl0gPSB2YWx1ZTtcblx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdH0sIHt9KTtcblx0XHR9KTtcblx0XHRjb25zdCBnZXRIZWFkZXJzID0gYXN5bmMgKCkgPT4gKHtcblx0XHRcdC4uLmlubmdlc3RIZWFkZXJzKHtcblx0XHRcdFx0ZW52OiB0aGlzLmVudixcblx0XHRcdFx0ZnJhbWV3b3JrOiB0aGlzLmZyYW1ld29ya05hbWUsXG5cdFx0XHRcdGNsaWVudDogdGhpcy5jbGllbnQsXG5cdFx0XHRcdGV4cGVjdGVkU2VydmVyS2luZDogZXhwZWN0ZWRTZXJ2ZXJLaW5kIHx8IHZvaWQgMCxcblx0XHRcdFx0ZXh0cmFzOiB7IFwiU2VydmVyLVRpbWluZ1wiOiB0aW1lci5nZXRIZWFkZXIoKSB9XG5cdFx0XHR9KSxcblx0XHRcdC4uLmF3YWl0IGhlYWRlcnNUb0ZvcndhcmRQXG5cdFx0fSk7XG5cdFx0Y29uc3QgYXNzdW1lZE1vZGUgPSBnZXRNb2RlKHtcblx0XHRcdGVudjogdGhpcy5lbnYsXG5cdFx0XHRjbGllbnQ6IHRoaXMuY2xpZW50XG5cdFx0fSk7XG5cdFx0aWYgKGFzc3VtZWRNb2RlLmlzRXhwbGljaXQpIHRoaXMuX21vZGUgPSBhc3N1bWVkTW9kZTtcblx0XHRlbHNlIHtcblx0XHRcdGNvbnN0IHNlcnZlSXNQcm9kID0gYXdhaXQgYWN0aW9ucy5pc1Byb2R1Y3Rpb24/LihcInN0YXJ0aW5nIHRvIGhhbmRsZSByZXF1ZXN0XCIpO1xuXHRcdFx0aWYgKHR5cGVvZiBzZXJ2ZUlzUHJvZCA9PT0gXCJib29sZWFuXCIpIHRoaXMuX21vZGUgPSBuZXcgTW9kZSh7XG5cdFx0XHRcdHR5cGU6IHNlcnZlSXNQcm9kID8gXCJjbG91ZFwiIDogXCJkZXZcIixcblx0XHRcdFx0aXNFeHBsaWNpdDogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdFx0ZWxzZSB0aGlzLl9tb2RlID0gYXNzdW1lZE1vZGU7XG5cdFx0fVxuXHRcdHRoaXMudXBzZXJ0S2V5c0Zyb21FbnYoKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dGltZXIsXG5cdFx0XHRhY3Rpb25zLFxuXHRcdFx0Z2V0SGVhZGVyc1xuXHRcdH07XG5cdH1cblx0LyoqXG5cdCogYGNyZWF0ZVN5bmNIYW5kbGVyYCBzaG91bGQgYmUgdXNlZCB0byByZXR1cm4gYSB0eXBlLWVxdWl2YWxlbnQgdmVyc2lvbiBvZlxuXHQqIHRoZSBgaGFuZGxlcmAgc3BlY2lmaWVkIGR1cmluZyBpbnN0YW50aWF0aW9uLlxuXHQqL1xuXHRjcmVhdGVTeW5jSGFuZGxlcigpIHtcblx0XHRyZXR1cm4gKGhhbmRsZXIpID0+IHtcblx0XHRcdHJldHVybiB0aGlzLndyYXBIYW5kbGVyKChhc3luYyAoLi4uYXJncykgPT4ge1xuXHRcdFx0XHRjb25zdCByZXFJbml0ID0gYXdhaXQgdGhpcy5pbml0UmVxdWVzdCguLi5hcmdzKTtcblx0XHRcdFx0Y29uc3QgZm4gPSBuZXcgSW5uZ2VzdEZ1bmN0aW9uKHRoaXMuY2xpZW50LCB7XG5cdFx0XHRcdFx0aWQ6IHRoaXMuX29wdGlvbnMuc3luY09wdGlvbnM/LmZ1bmN0aW9uSWQgPz8gXCJcIixcblx0XHRcdFx0XHRyZXRyaWVzOiB0aGlzLl9vcHRpb25zLnN5bmNPcHRpb25zPy5yZXRyaWVzID8/IGRlZmF1bHRNYXhSZXRyaWVzXG5cdFx0XHRcdH0sICgpID0+IGhhbmRsZXIoLi4uYXJncykpO1xuXHRcdFx0XHRpZiAoYXdhaXQgdGhpcy5pc0lubmdlc3RSZXEocmVxSW5pdC5hY3Rpb25zKSkgcmV0dXJuIHRoaXMuaGFuZGxlQXN5bmNSZXF1ZXN0KHtcblx0XHRcdFx0XHQuLi5yZXFJbml0LFxuXHRcdFx0XHRcdGZvcmNlRXhlY3V0aW9uOiB0cnVlLFxuXHRcdFx0XHRcdGFyZ3MsXG5cdFx0XHRcdFx0Zm5zOiBbZm5dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5oYW5kbGVTeW5jUmVxdWVzdCh7XG5cdFx0XHRcdFx0Li4ucmVxSW5pdCxcblx0XHRcdFx0XHRhcmdzLFxuXHRcdFx0XHRcdGFzeW5jTW9kZTogdGhpcy5fb3B0aW9ucy5zeW5jT3B0aW9ucz8uYXN5bmNSZXNwb25zZSA/PyBBc3luY1Jlc3BvbnNlVHlwZS5SZWRpcmVjdCxcblx0XHRcdFx0XHRmblxuXHRcdFx0XHR9KTtcblx0XHRcdH0pKTtcblx0XHR9O1xuXHR9XG5cdC8qKlxuXHQqIGBjcmVhdGVIYW5kbGVyYCBzaG91bGQgYmUgdXNlZCB0byByZXR1cm4gYSB0eXBlLWVxdWl2YWxlbnQgdmVyc2lvbiBvZiB0aGVcblx0KiBgaGFuZGxlcmAgc3BlY2lmaWVkIGR1cmluZyBpbnN0YW50aWF0aW9uLlxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBgYGBcblx0KiAvLyBteS1jdXN0b20taGFuZGxlci50c1xuXHQqIGltcG9ydCB7XG5cdCogICBJbm5nZXN0Q29tbUhhbmRsZXIsXG5cdCogICB0eXBlIFNlcnZlSGFuZGxlck9wdGlvbnMsXG5cdCogfSBmcm9tIFwiLi9jb21wb25lbnRzL0lubmdlc3RDb21tSGFuZGxlclwiO1xuXHQqXG5cdCogZXhwb3J0IGNvbnN0IHNlcnZlID0gKG9wdGlvbnM6IFNlcnZlSGFuZGxlck9wdGlvbnMpID0+IHtcblx0KiAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgSW5uZ2VzdENvbW1IYW5kbGVyKHtcblx0KiAgICAgZnJhbWV3b3JrTmFtZTogXCJteS1jdXN0b20taGFuZGxlclwiLFxuXHQqICAgICAuLi5vcHRpb25zLFxuXHQqICAgICBoYW5kbGVyOiAocmVxOiBSZXF1ZXN0KSA9PiB7XG5cdCogICAgICAgcmV0dXJuIHtcblx0KiAgICAgICAgIGJvZHk6ICgpID0+IHJlcS5qc29uKCksXG5cdCogICAgICAgICBoZWFkZXJzOiAoa2V5KSA9PiByZXEuaGVhZGVycy5nZXQoa2V5KSxcblx0KiAgICAgICAgIG1ldGhvZDogKCkgPT4gcmVxLm1ldGhvZCxcblx0KiAgICAgICAgIHVybDogKCkgPT4gbmV3IFVSTChyZXEudXJsLCBgaHR0cHM6Ly8ke3JlcS5oZWFkZXJzLmdldChcImhvc3RcIikgfHwgXCJcIn1gKSxcblx0KiAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiAoeyBib2R5LCBzdGF0dXMsIGhlYWRlcnMgfSkgPT4ge1xuXHQqICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKGJvZHksIHsgc3RhdHVzLCBoZWFkZXJzIH0pO1xuXHQqICAgICAgICAgfSxcblx0KiAgICAgICB9O1xuXHQqICAgICB9LFxuXHQqICAgfSk7XG5cdCpcblx0KiAgIHJldHVybiBoYW5kbGVyLmNyZWF0ZUhhbmRsZXIoKTtcblx0KiB9O1xuXHQqIGBgYFxuXHQqL1xuXHRjcmVhdGVIYW5kbGVyKCkge1xuXHRcdHJldHVybiB0aGlzLndyYXBIYW5kbGVyKChhc3luYyAoLi4uYXJncykgPT4ge1xuXHRcdFx0cmV0dXJuIHRoaXMuaGFuZGxlQXN5bmNSZXF1ZXN0KHtcblx0XHRcdFx0Li4uYXdhaXQgdGhpcy5pbml0UmVxdWVzdCguLi5hcmdzKSxcblx0XHRcdFx0YXJnc1xuXHRcdFx0fSk7XG5cdFx0fSkpO1xuXHR9XG5cdC8qKlxuXHQqIEdpdmVuIGEgc2V0IG9mIGFjdGlvbnMgdGhhdCBsZXQgdXMgYWNjZXNzIHRoZSBpbmNvbWluZyByZXF1ZXN0LCBjcmVhdGUgYVxuXHQqIGBodHRwL3J1bi5zdGFydGVkYCBldmVudCB0aGF0IHJlcGVzZW50cyBhIHJ1biBzdGFydGluZyBmcm9tIGFuIEhUVFBcblx0KiByZXF1ZXN0LlxuXHQqL1xuXHRhc3luYyBjcmVhdGVIdHRwRXZlbnQoYWN0aW9ucywgZm4pIHtcblx0XHRjb25zdCByZWFzb24gPSBcImNyZWF0aW5nIHN5bmMgZXZlbnRcIjtcblx0XHRjb25zdCBjb250ZW50VHlwZVByb21pc2UgPSBhY3Rpb25zLmhlYWRlcnMocmVhc29uLCBoZWFkZXJLZXlzLkNvbnRlbnRUeXBlKS50aGVuKCh2KSA9PiB2ID8/IFwiXCIpO1xuXHRcdGNvbnN0IGlwUHJvbWlzZSA9IGFjdGlvbnMuaGVhZGVycyhyZWFzb24sIGhlYWRlcktleXMuRm9yd2FyZGVkRm9yKS50aGVuKCh2KSA9PiB7XG5cdFx0XHRpZiAodikgcmV0dXJuIHY7XG5cdFx0XHRyZXR1cm4gYWN0aW9ucy5oZWFkZXJzKHJlYXNvbiwgaGVhZGVyS2V5cy5SZWFsSXApLnRoZW4oKHYkMSkgPT4gdiQxID8/IFwiXCIpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IG1ldGhvZFByb21pc2UgPSBhY3Rpb25zLm1ldGhvZChyZWFzb24pO1xuXHRcdGNvbnN0IHVybFByb21pc2UgPSBhY3Rpb25zLnVybChyZWFzb24pLnRoZW4oKHYpID0+IHRoaXMucmVxVXJsKHYpKTtcblx0XHRjb25zdCBkb21haW5Qcm9taXNlID0gdXJsUHJvbWlzZS50aGVuKCh1cmwpID0+IGAke3VybC5wcm90b2NvbH0vLyR7dXJsLmhvc3R9YCk7XG5cdFx0Y29uc3QgcGF0aFByb21pc2UgPSB1cmxQcm9taXNlLnRoZW4oKHVybCkgPT4gdXJsLnBhdGhuYW1lKTtcblx0XHRjb25zdCBxdWVyeVBhcmFtc1Byb21pc2UgPSB1cmxQcm9taXNlLnRoZW4oKHVybCkgPT4gdXJsLnNlYXJjaFBhcmFtcy50b1N0cmluZygpKTtcblx0XHRjb25zdCBib2R5UHJvbWlzZSA9IGFjdGlvbnMudGV4dEJvZHkocmVhc29uKS50aGVuKChib2R5JDEpID0+IHtcblx0XHRcdHJldHVybiB0eXBlb2YgYm9keSQxID09PSBcInN0cmluZ1wiID8gYm9keSQxIDogc3RyaW5naWZ5KGJvZHkkMSk7XG5cdFx0fSk7XG5cdFx0Y29uc3QgW2NvbnRlbnRUeXBlLCBkb21haW4sIGlwLCBtZXRob2QsIHBhdGgsIHF1ZXJ5UGFyYW1zLCBib2R5XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcblx0XHRcdGNvbnRlbnRUeXBlUHJvbWlzZSxcblx0XHRcdGRvbWFpblByb21pc2UsXG5cdFx0XHRpcFByb21pc2UsXG5cdFx0XHRtZXRob2RQcm9taXNlLFxuXHRcdFx0cGF0aFByb21pc2UsXG5cdFx0XHRxdWVyeVBhcmFtc1Byb21pc2UsXG5cdFx0XHRib2R5UHJvbWlzZVxuXHRcdF0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBcImh0dHAvcnVuLnN0YXJ0ZWRcIixcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0Y29udGVudF90eXBlOiBjb250ZW50VHlwZSxcblx0XHRcdFx0ZG9tYWluLFxuXHRcdFx0XHRpcCxcblx0XHRcdFx0bWV0aG9kLFxuXHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRxdWVyeV9wYXJhbXM6IHF1ZXJ5UGFyYW1zLFxuXHRcdFx0XHRib2R5LFxuXHRcdFx0XHRmbjogZm4uaWQoKVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0YXN5bmMgaGFuZGxlU3luY1JlcXVlc3QoeyB0aW1lciwgYWN0aW9ucywgZm4sIGFzeW5jTW9kZSwgYXJncyB9KSB7XG5cdFx0aWYgKCFhY3Rpb25zLmV4cGVyaW1lbnRhbFRyYW5zZm9ybVN5bmNSZXNwb25zZSkgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBwbGF0Zm9ybSBkb2VzIG5vdCBzdXBwb3J0IHN5bmNocm9ub3VzIElubmdlc3QgZnVuY3Rpb24gZXhlY3V0aW9ucy5cIik7XG5cdFx0aWYgKGF3YWl0IGdldEFzeW5jQ3R4KCkpIHRocm93IG5ldyBFcnJvcihcIldlIGFscmVhZHkgc2VlbSB0byBiZSBpbiB0aGUgY29udGV4dCBvZiBhbiBJbm5nZXN0IGV4ZWN1dGlvbiwgYnV0IGRpZG4ndCBleHBlY3QgdG8gYmUuIERpZCB5b3UgYWxyZWFkeSB3cmFwIHRoaXMgaGFuZGxlcj9cIik7XG5cdFx0Y29uc3QgcnVuSWQgPSB1bGlkKCk7XG5cdFx0Y29uc3QgZXZlbnQgPSBhd2FpdCB0aGlzLmNyZWF0ZUh0dHBFdmVudChhY3Rpb25zLCBmbik7XG5cdFx0Y29uc3QgZXhlVmVyc2lvbiA9IFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTjtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBmbltcImNyZWF0ZUV4ZWN1dGlvblwiXSh7XG5cdFx0XHR2ZXJzaW9uOiBleGVWZXJzaW9uLFxuXHRcdFx0cGFydGlhbE9wdGlvbnM6IHtcblx0XHRcdFx0Y2xpZW50OiB0aGlzLmNsaWVudCxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdHJ1bklkLFxuXHRcdFx0XHRcdGV2ZW50LFxuXHRcdFx0XHRcdGF0dGVtcHQ6IDAsXG5cdFx0XHRcdFx0ZXZlbnRzOiBbZXZlbnRdLFxuXHRcdFx0XHRcdG1heEF0dGVtcHRzOiBmbi5vcHRzLnJldHJpZXMgPz8gZGVmYXVsdE1heFJldHJpZXNcblx0XHRcdFx0fSxcblx0XHRcdFx0cnVuSWQsXG5cdFx0XHRcdGhlYWRlcnM6IHt9LFxuXHRcdFx0XHRyZXFBcmdzOiBhcmdzLFxuXHRcdFx0XHRzdGVwQ29tcGxldGlvbk9yZGVyOiBbXSxcblx0XHRcdFx0c3RlcFN0YXRlOiB7fSxcblx0XHRcdFx0ZGlzYWJsZUltbWVkaWF0ZUV4ZWN1dGlvbjogZmFsc2UsXG5cdFx0XHRcdGlzRmFpbHVyZUhhbmRsZXI6IGZhbHNlLFxuXHRcdFx0XHR0aW1lcixcblx0XHRcdFx0Y3JlYXRlUmVzcG9uc2U6IChkYXRhKSA9PiBhY3Rpb25zLmV4cGVyaW1lbnRhbFRyYW5zZm9ybVN5bmNSZXNwb25zZShcImNyZWF0aW5nIHN5bmMgZXhlY3V0aW9uXCIsIGRhdGEpLnRoZW4oKHJlcykgPT4gKHtcblx0XHRcdFx0XHQuLi5yZXMsXG5cdFx0XHRcdFx0dmVyc2lvbjogZXhlVmVyc2lvblxuXHRcdFx0XHR9KSksXG5cdFx0XHRcdHN0ZXBNb2RlOiBTdGVwTW9kZS5TeW5jXG5cdFx0XHR9XG5cdFx0fSkuc3RhcnQoKTtcblx0XHRjb25zdCByZXN1bHRIYW5kbGVyID0ge1xuXHRcdFx0XCJzdGVwLW5vdC1mb3VuZFwiOiAoKSA9PiB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIldlIHNob3VsZCBub3QgZ2V0IHRoZSByZXN1bHQgJ3N0ZXAtbm90LWZvdW5kJyB3aGVuIGNoZWNrcG9pbnRpbmcuIFRoaXMgaXMgYSBidWcgaW4gdGhlIGBpbm5nZXN0YCBTREtcIik7XG5cdFx0XHR9LFxuXHRcdFx0XCJzdGVwcy1mb3VuZFwiOiAoKSA9PiB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIldlIHNob3VsZCBub3QgZ2V0IHRoZSByZXN1bHQgJ3N0ZXBzLWZvdW5kJyB3aGVuIGNoZWNrcG9pbnRpbmcuIFRoaXMgaXMgYSBidWcgaW4gdGhlIGBpbm5nZXN0YCBTREtcIik7XG5cdFx0XHR9LFxuXHRcdFx0XCJzdGVwLXJhblwiOiAoKSA9PiB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIldlIHNob3VsZCBub3QgZ2V0IHRoZSByZXN1bHQgJ3N0ZXAtcmFuJyB3aGVuIGNoZWNrcG9pbnRpbmcuIFRoaXMgaXMgYSBidWcgaW4gdGhlIGBpbm5nZXN0YCBTREtcIik7XG5cdFx0XHR9LFxuXHRcdFx0XCJmdW5jdGlvbi1yZWplY3RlZFwiOiAoKSA9PiB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIldlIHNob3VsZCBub3QgZ2V0IHRoZSByZXN1bHQgJ2Z1bmN0aW9uLXJlamVjdGVkJyB3aGVuIGNoZWNrcG9pbnRpbmcuIFRoaXMgaXMgYSBidWcgaW4gdGhlIGBpbm5nZXN0YCBTREtcIik7XG5cdFx0XHR9LFxuXHRcdFx0XCJmdW5jdGlvbi1yZXNvbHZlZFwiOiAoeyBkYXRhIH0pID0+IHtcblx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHR9LFxuXHRcdFx0XCJjaGFuZ2UtbW9kZVwiOiBhc3luYyAoeyB0b2tlbiB9KSA9PiB7XG5cdFx0XHRcdHN3aXRjaCAoYXN5bmNNb2RlKSB7XG5cdFx0XHRcdFx0Y2FzZSBBc3luY1Jlc3BvbnNlVHlwZS5SZWRpcmVjdDogcmV0dXJuIGFjdGlvbnMudHJhbnNmb3JtUmVzcG9uc2UoXCJjcmVhdGluZyBzeW5jLT5hc3luYyByZWRpcmVjdCByZXNwb25zZVwiLCB7XG5cdFx0XHRcdFx0XHRzdGF0dXM6IDMwMixcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHsgW2hlYWRlcktleXMuTG9jYXRpb25dOiBhd2FpdCB0aGlzLmNsaWVudFtcImlubmdlc3RBcGlcIl1bXCJnZXRUYXJnZXRVcmxcIl0oYC92MS9odHRwL3J1bnMvJHtydW5JZH0vb3V0cHV0P3Rva2VuPSR7dG9rZW59YCkudGhlbigodXJsKSA9PiB1cmwudG9TdHJpbmcoKSkgfSxcblx0XHRcdFx0XHRcdHZlcnNpb246IGV4ZVZlcnNpb24sXG5cdFx0XHRcdFx0XHRib2R5OiBcIlwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y2FzZSBBc3luY1Jlc3BvbnNlVHlwZS5Ub2tlbjogcmV0dXJuIGFjdGlvbnMudHJhbnNmb3JtUmVzcG9uc2UoXCJjcmVhdGluZyBzeW5jLT5hc3luYyB0b2tlbiByZXNwb25zZVwiLCB7XG5cdFx0XHRcdFx0XHRzdGF0dXM6IDIwMCxcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHt9LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogZXhlVmVyc2lvbixcblx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHRcdHJ1bl9pZDogcnVuSWQsXG5cdFx0XHRcdFx0XHRcdHRva2VuXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZDogY2hhbmdlLW1vZGVcIik7XG5cdFx0XHR9XG5cdFx0fVtyZXN1bHQudHlwZV07XG5cdFx0aWYgKCFyZXN1bHRIYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoYE5vIGhhbmRsZXIgZm9yIGV4ZWN1dGlvbiByZXN1bHQgdHlwZTogJHtyZXN1bHQudHlwZX0uIFRoaXMgaXMgYSBidWcgaW4gdGhlIFxcYGlubmdlc3RcXGAgU0RLYCk7XG5cdFx0cmV0dXJuIHJlc3VsdEhhbmRsZXIocmVzdWx0KTtcblx0fVxuXHRhc3luYyBoYW5kbGVBc3luY1JlcXVlc3QoeyB0aW1lciwgYWN0aW9ucywgYXJncywgZ2V0SGVhZGVycywgZm9yY2VFeGVjdXRpb24sIGZucyB9KSB7XG5cdFx0aWYgKGZvcmNlRXhlY3V0aW9uICYmICFhY3Rpb25zLmV4cGVyaW1lbnRhbFRyYW5zZm9ybVN5bmNSZXNwb25zZSkgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBwbGF0Zm9ybSBkb2VzIG5vdCBzdXBwb3J0IGFzeW5jIGV4ZWN1dGlvbnMgaW4gSW5uZ2VzdCBmb3IgQVBJcy5cIik7XG5cdFx0Y29uc3QgbWV0aG9kUCA9IGFjdGlvbnMubWV0aG9kKFwic3RhcnRpbmcgdG8gaGFuZGxlIHJlcXVlc3RcIik7XG5cdFx0Y29uc3QgY29udGVudExlbmd0aCA9IGF3YWl0IGFjdGlvbnMuaGVhZGVycyhcImNoZWNraW5nIHNpZ25hdHVyZSBmb3IgcmVxdWVzdFwiLCBoZWFkZXJLZXlzLkNvbnRlbnRMZW5ndGgpLnRoZW4oKHZhbHVlKSA9PiB7XG5cdFx0XHRpZiAoIXZhbHVlKSByZXR1cm47XG5cdFx0XHRyZXR1cm4gTnVtYmVyLnBhcnNlSW50KHZhbHVlLCAxMCk7XG5cdFx0fSk7XG5cdFx0Y29uc3QgW3NpZ25hdHVyZSwgbWV0aG9kLCBib2R5XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcblx0XHRcdGFjdGlvbnMuaGVhZGVycyhcImNoZWNraW5nIHNpZ25hdHVyZSBmb3IgcmVxdWVzdFwiLCBoZWFkZXJLZXlzLlNpZ25hdHVyZSkudGhlbigoaGVhZGVyU2lnbmF0dXJlKSA9PiB7XG5cdFx0XHRcdHJldHVybiBoZWFkZXJTaWduYXR1cmUgPz8gdm9pZCAwO1xuXHRcdFx0fSksXG5cdFx0XHRtZXRob2RQLFxuXHRcdFx0bWV0aG9kUC50aGVuKChtZXRob2QkMSkgPT4ge1xuXHRcdFx0XHRpZiAobWV0aG9kJDEgPT09IFwiUE9TVFwiIHx8IG1ldGhvZCQxID09PSBcIlBVVFwiKSB7XG5cdFx0XHRcdFx0aWYgKCFjb250ZW50TGVuZ3RoKSByZXR1cm4gXCJcIjtcblx0XHRcdFx0XHRyZXR1cm4gYWN0aW9ucy5ib2R5KGBjaGVja2luZyBib2R5IGZvciByZXF1ZXN0IHNpZ25pbmcgYXMgbWV0aG9kIGlzICR7bWV0aG9kJDF9YCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0XHR9KVxuXHRcdF0pO1xuXHRcdGNvbnN0IHNpZ25hdHVyZVZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlU2lnbmF0dXJlKHNpZ25hdHVyZSwgYm9keSk7XG5cdFx0Y29uc3QgYWN0aW9uUmVzID0gdGltZXIud3JhcChcImFjdGlvblwiLCAoKSA9PiB0aGlzLmhhbmRsZUFjdGlvbih7XG5cdFx0XHRhY3Rpb25zLFxuXHRcdFx0dGltZXIsXG5cdFx0XHRnZXRIZWFkZXJzLFxuXHRcdFx0cmVxQXJnczogYXJncyxcblx0XHRcdHNpZ25hdHVyZVZhbGlkYXRpb24sXG5cdFx0XHRib2R5LFxuXHRcdFx0bWV0aG9kLFxuXHRcdFx0Zm9yY2VFeGVjdXRpb246IEJvb2xlYW4oZm9yY2VFeGVjdXRpb24pLFxuXHRcdFx0Zm5zXG5cdFx0fSkpO1xuXHRcdC8qKlxuXHRcdCogUHJlcGFyZXMgYW4gYWN0aW9uIHJlc3BvbnNlIGJ5IG1lcmdpbmcgcmV0dXJuZWQgZGF0YSB0byBwcm92aWRlXG5cdFx0KiB0cmFpbGluZyBpbmZvcm1hdGlvbiBzdWNoIGFzIGBTZXJ2ZXItVGltaW5nYCBoZWFkZXJzLlxuXHRcdCpcblx0XHQqIEl0IHNob3VsZCBhbHdheXMgcHJpb3JpdGl6ZSB0aGUgaGVhZGVycyByZXR1cm5lZCBieSB0aGUgYWN0aW9uLCBhcyB0aGV5XG5cdFx0KiBtYXkgY29udGFpbiBpbXBvcnRhbnQgaW5mb3JtYXRpb24gc3VjaCBhcyBgQ29udGVudC1UeXBlYC5cblx0XHQqL1xuXHRcdGNvbnN0IHByZXBhcmVBY3Rpb25SZXMgPSBhc3luYyAocmVzKSA9PiB7XG5cdFx0XHRjb25zdCBoZWFkZXJzID0ge1xuXHRcdFx0XHQuLi5hd2FpdCBnZXRIZWFkZXJzKCksXG5cdFx0XHRcdC4uLnJlcy5oZWFkZXJzLFxuXHRcdFx0XHQuLi5yZXMudmVyc2lvbiA9PT0gbnVsbCA/IHt9IDogeyBbaGVhZGVyS2V5cy5SZXF1ZXN0VmVyc2lvbl06IChyZXMudmVyc2lvbiA/PyBQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT04pLnRvU3RyaW5nKCkgfVxuXHRcdFx0fTtcblx0XHRcdGxldCBzaWduYXR1cmUkMTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHNpZ25hdHVyZSQxID0gYXdhaXQgc2lnbmF0dXJlVmFsaWRhdGlvbi50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdFx0XHRpZiAoIXJlc3VsdC5zdWNjZXNzIHx8ICFyZXN1bHQua2V5VXNlZCkgcmV0dXJuO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmdldFJlc3BvbnNlU2lnbmF0dXJlKHJlc3VsdC5rZXlVc2VkLCByZXMuYm9keSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Li4ucmVzLFxuXHRcdFx0XHRcdGhlYWRlcnMsXG5cdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHNlcmlhbGl6ZUVycm9yKGVycikpLFxuXHRcdFx0XHRcdHN0YXR1czogNTAwXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRpZiAoc2lnbmF0dXJlJDEpIGhlYWRlcnNbaGVhZGVyS2V5cy5TaWduYXR1cmVdID0gc2lnbmF0dXJlJDE7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5yZXMsXG5cdFx0XHRcdGhlYWRlcnNcblx0XHRcdH07XG5cdFx0fTtcblx0XHRpZiAoYXdhaXQgdGhpcy5zaG91bGRTdHJlYW0oYWN0aW9ucykpIHtcblx0XHRcdGlmIChhd2FpdCBhY3Rpb25zLm1ldGhvZChcInN0YXJ0aW5nIHN0cmVhbWluZyByZXNwb25zZVwiKSA9PT0gXCJQT1NUXCIpIHtcblx0XHRcdFx0Y29uc3QgeyBzdHJlYW0sIGZpbmFsaXplIH0gPSBhd2FpdCBjcmVhdGVTdHJlYW0oKTtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogRXJyb3JzIGFyZSBoYW5kbGVkIGJ5IGBoYW5kbGVBY3Rpb25gIGhlcmUgdG8gZW5zdXJlIHRoYXQgYW5cblx0XHRcdFx0KiBhcHByb3ByaWF0ZSByZXNwb25zZSBpcyBhbHdheXMgZ2l2ZW4uXG5cdFx0XHRcdCovXG5cdFx0XHRcdGFjdGlvblJlcy50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gZmluYWxpemUocHJlcGFyZUFjdGlvblJlcyhyZXMpKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiB0aW1lci53cmFwKFwicmVzXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gYWN0aW9ucy50cmFuc2Zvcm1TdHJlYW1pbmdSZXNwb25zZT8uKFwic3RhcnRpbmcgc3RyZWFtaW5nIHJlc3BvbnNlXCIsIHtcblx0XHRcdFx0XHRcdHN0YXR1czogMjAxLFxuXHRcdFx0XHRcdFx0aGVhZGVyczogYXdhaXQgZ2V0SGVhZGVycygpLFxuXHRcdFx0XHRcdFx0Ym9keTogc3RyZWFtLFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogbnVsbFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRpbWVyLndyYXAoXCJyZXNcIiwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0cmV0dXJuIGFjdGlvblJlcy50aGVuKHByZXBhcmVBY3Rpb25SZXMpLnRoZW4oKGFjdGlvblJlcyQxKSA9PiB7XG5cdFx0XHRcdHJldHVybiBhY3Rpb25zLnRyYW5zZm9ybVJlc3BvbnNlKFwic2VuZGluZyBiYWNrIHJlc3BvbnNlXCIsIGFjdGlvblJlcyQxKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGdldEFjdGlvbnModGltZXIsIC4uLmFyZ3MpIHtcblx0XHQvKipcblx0XHQqIFVzZWQgZm9yIHRlc3RpbmcsIGFsbG93IHNldHRpbmcgYWN0aW9uIG92ZXJyaWRlcyBleHRlcm5hbGx5IHdoZW5cblx0XHQqIGNhbGxpbmcgdGhlIGhhbmRsZXIuIEFsd2F5cyBzZWFyY2ggdGhlIGZpbmFsIGFyZ3VtZW50LlxuXHRcdCovXG5cdFx0Y29uc3QgbGFzdEFyZyA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcblx0XHRjb25zdCBhY3Rpb25PdmVycmlkZXMgPSB0eXBlb2YgbGFzdEFyZyA9PT0gXCJvYmplY3RcIiAmJiBsYXN0QXJnICE9PSBudWxsICYmIFwiYWN0aW9uT3ZlcnJpZGVzXCIgaW4gbGFzdEFyZyAmJiB0eXBlb2YgbGFzdEFyZ1tcImFjdGlvbk92ZXJyaWRlc1wiXSA9PT0gXCJvYmplY3RcIiAmJiBsYXN0QXJnW1wiYWN0aW9uT3ZlcnJpZGVzXCJdICE9PSBudWxsID8gbGFzdEFyZ1tcImFjdGlvbk92ZXJyaWRlc1wiXSA6IHt9O1xuXHRcdC8qKlxuXHRcdCogV2UgcHVycG9zZWZ1bGx5IGBhd2FpdGAgdGhlIGhhbmRsZXIsIGFzIGl0IGNvdWxkIGJlIGVpdGhlciBzeW5jIG9yXG5cdFx0KiBhc3luYy5cblx0XHQqL1xuXHRcdGNvbnN0IHJhd0FjdGlvbnMgPSB7XG5cdFx0XHQuLi5hd2FpdCB0aW1lci53cmFwKFwiaGFuZGxlclwiLCAoKSA9PiB0aGlzLmhhbmRsZXIoLi4uYXJncykpLmNhdGNoKHJldGhyb3dFcnJvcihcIlNlcnZlIGhhbmRsZXIgZmFpbGVkIHRvIHJ1blwiKSksXG5cdFx0XHQuLi5hY3Rpb25PdmVycmlkZXNcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCogTWFwcGVkIHByb21pc2lmaWVkIGhhbmRsZXJzIGZyb20gdXNlcmxhbmQgYHNlcnZlKClgIGZ1bmN0aW9uIG1peGVkIGluXG5cdFx0KiB3aXRoIHNvbWUgaGVscGVycy5cblx0XHQqL1xuXHRcdGNvbnN0IGFjdGlvbnMgPSB7XG5cdFx0XHQuLi5PYmplY3QuZW50cmllcyhyYXdBY3Rpb25zKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0XHRcdGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGFjYztcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHQuLi5hY2MsXG5cdFx0XHRcdFx0W2tleV06IChyZWFzb24sIC4uLmFyZ3MkMSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgZXJyTWVzc2FnZSA9IFtgRmFpbGVkIGNhbGxpbmcgXFxgJHtrZXl9XFxgIGZyb20gc2VydmUgaGFuZGxlcmAsIHJlYXNvbl0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgd2hlbiBcIik7XG5cdFx0XHRcdFx0XHRjb25zdCBmbiA9ICgpID0+IHZhbHVlKC4uLmFyZ3MkMSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcnVuQXNQcm9taXNlKGZuKS5jYXRjaChyZXRocm93RXJyb3IoZXJyTWVzc2FnZSkpLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5sb2coXCJlcnJvclwiLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9LCB7fSksXG5cdFx0XHRxdWVyeVN0cmluZ1dpdGhEZWZhdWx0czogYXN5bmMgKHJlYXNvbiwga2V5KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHVybCA9IGF3YWl0IGFjdGlvbnMudXJsKHJlYXNvbik7XG5cdFx0XHRcdHJldHVybiBhd2FpdCBhY3Rpb25zLnF1ZXJ5U3RyaW5nPy4ocmVhc29uLCBrZXksIHVybCkgfHwgdXJsLnNlYXJjaFBhcmFtcy5nZXQoa2V5KSB8fCB2b2lkIDA7XG5cdFx0XHR9LFxuXHRcdFx0Li4uYWN0aW9uT3ZlcnJpZGVzXG5cdFx0fTtcblx0XHRyZXR1cm4gYWN0aW9ucztcblx0fVxuXHR3cmFwSGFuZGxlcihoYW5kbGVyKSB7XG5cdFx0LyoqXG5cdFx0KiBTb21lIHBsYXRmb3JtcyBjaGVjayAoYXQgcnVudGltZSkgdGhlIGxlbmd0aCBvZiB0aGUgZnVuY3Rpb24gYmVpbmcgdXNlZFxuXHRcdCogdG8gaGFuZGxlIGFuIGVuZHBvaW50LiBJZiB0aGlzIGlzIGEgdmFyaWFkaWMgZnVuY3Rpb24sIGl0IHdpbGwgZmFpbCB0aGF0XG5cdFx0KiBjaGVjay5cblx0XHQqXG5cdFx0KiBUaGVyZWZvcmUsIHdlIGV4cGVjdCB0aGUgYXJndW1lbnRzIGFjY2VwdGVkIHRvIGJlIHRoZSBzYW1lIGxlbmd0aCBhcyB0aGVcblx0XHQqIGBoYW5kbGVyYCBmdW5jdGlvbiBwYXNzZWQgaW50ZXJuYWxseS5cblx0XHQqXG5cdFx0KiBXZSBhbHNvIHNldCBhIG5hbWUgdG8gYXZvaWQgYSBjb21tb24gdXNlbGVzcyBuYW1lIGluIHRyYWNpbmcgc3VjaCBhc1xuXHRcdCogYFwiYW5vbnltb3VzXCJgIG9yIGBcImJvdW5kIGZ1bmN0aW9uXCJgLlxuXHRcdCpcblx0XHQqIGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQvaXNzdWVzLzMyODRcblx0XHQqL1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGhhbmRsZXIsIHtcblx0XHRcdG5hbWU6IHsgdmFsdWU6IFwiSW5uZ2VzdEhhbmRsZXJcIiB9LFxuXHRcdFx0bGVuZ3RoOiB7IHZhbHVlOiB0aGlzLmhhbmRsZXIubGVuZ3RoIH1cblx0XHR9KTtcblx0XHRyZXR1cm4gaGFuZGxlcjtcblx0fVxuXHRnZXQgbW9kZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fbW9kZTtcblx0fVxuXHRzZXQgbW9kZShtKSB7XG5cdFx0dGhpcy5fbW9kZSA9IG07XG5cdFx0aWYgKG0pIHRoaXMuY2xpZW50W1wibW9kZVwiXSA9IG07XG5cdH1cblx0LyoqXG5cdCogR2l2ZW4gYSBzZXQgb2YgZnVuY3Rpb25zIHRvIGNoZWNrIGlmIGFuIGFjdGlvbiBpcyBhdmFpbGFibGUgZnJvbSB0aGVcblx0KiBpbnN0YW5jZSdzIGhhbmRsZXIsIGVuYWN0IGFueSBhY3Rpb24gdGhhdCBpcyBmb3VuZC5cblx0KlxuXHQqIFRoaXMgbWV0aG9kIGNhbiBmZXRjaCB2YXJ5aW5nIHBheWxvYWRzIG9mIGRhdGEsIGJ1dCB1bHRpbWF0ZWx5IGlzIHRoZSBwbGFjZVxuXHQqIHdoZXJlIF9kZWNpc2lvbnNfIGFyZSBtYWRlIHJlZ2FyZGluZyBmdW5jdGlvbmFsaXR5LlxuXHQqXG5cdCogRm9yIGV4YW1wbGUsIGlmIHdlIGZpbmQgdGhhdCB3ZSBzaG91bGQgYmUgdmlld2luZyB0aGUgVUksIHRoaXMgZnVuY3Rpb25cblx0KiB3aWxsIGRlY2lkZSB3aGV0aGVyIHRoZSBVSSBzaG91bGQgYmUgdmlzaWJsZSBiYXNlZCBvbiB0aGUgcGF5bG9hZCBpdCBoYXNcblx0KiBmb3VuZCAoZS5nLiBlbnYgdmFycywgb3B0aW9ucywgZXRjKS5cblx0Ki9cblx0YXN5bmMgaGFuZGxlQWN0aW9uKHsgYWN0aW9ucywgdGltZXIsIGdldEhlYWRlcnMsIHJlcUFyZ3MsIHNpZ25hdHVyZVZhbGlkYXRpb24sIGJvZHk6IHJhd0JvZHksIG1ldGhvZCwgZm9yY2VFeGVjdXRpb24sIGZucyB9KSB7XG5cdFx0Y29uc3QgaXNNaXNzaW5nQm9keSA9IHJhd0JvZHkgPT09IHZvaWQgMDtcblx0XHRsZXQgYm9keSA9IHJhd0JvZHk7XG5cdFx0dHJ5IHtcblx0XHRcdGxldCB1cmwgPSBhd2FpdCBhY3Rpb25zLnVybChcInN0YXJ0aW5nIHRvIGhhbmRsZSByZXF1ZXN0XCIpO1xuXHRcdFx0aWYgKG1ldGhvZCA9PT0gXCJQT1NUXCIgfHwgZm9yY2VFeGVjdXRpb24pIHtcblx0XHRcdFx0aWYgKCFmb3JjZUV4ZWN1dGlvbiAmJiBpc01pc3NpbmdCb2R5KSB7XG5cdFx0XHRcdFx0dGhpcy5sb2coXCJlcnJvclwiLCBcIk1pc3NpbmcgYm9keSB3aGVuIGV4ZWN1dGluZywgcG9zc2libHkgZHVlIHRvIG1pc3NpbmcgcmVxdWVzdCBib2R5IG1pZGRsZXdhcmVcIik7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdHN0YXR1czogNTAwLFxuXHRcdFx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHNlcmlhbGl6ZUVycm9yKC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJlcXVlc3QgYm9keSB3aGVuIGV4ZWN1dGluZywgcG9zc2libHkgZHVlIHRvIG1pc3NpbmcgcmVxdWVzdCBib2R5IG1pZGRsZXdhcmVcIikpKSxcblx0XHRcdFx0XHRcdHZlcnNpb246IHZvaWQgMFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25hdHVyZVZhbGlkYXRpb247XG5cdFx0XHRcdGlmICghdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSByZXR1cm4ge1xuXHRcdFx0XHRcdHN0YXR1czogNDAxLFxuXHRcdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoc2VyaWFsaXplRXJyb3IodmFsaWRhdGlvblJlc3VsdC5lcnIpKSxcblx0XHRcdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHRcdFx0fTtcblx0XHRcdFx0bGV0IGZuO1xuXHRcdFx0XHRsZXQgZm5JZDtcblx0XHRcdFx0bGV0IHN0ZXBJZDtcblx0XHRcdFx0aWYgKGZvcmNlRXhlY3V0aW9uKSB7XG5cdFx0XHRcdFx0Zm4gPSBmbnM/Lmxlbmd0aCAmJiBmbnNbMF0gPyB7XG5cdFx0XHRcdFx0XHRmbjogZm5zWzBdLFxuXHRcdFx0XHRcdFx0b25GYWlsdXJlOiBmYWxzZVxuXHRcdFx0XHRcdH0gOiBPYmplY3QudmFsdWVzKHRoaXMuZm5zKVswXTtcblx0XHRcdFx0XHRmbklkID0gZm4/LmZuLmlkKCk7XG5cdFx0XHRcdFx0c3RlcElkID0gXCJzdGVwXCI7XG5cdFx0XHRcdFx0Ym9keSA9IHtcblx0XHRcdFx0XHRcdGV2ZW50OiB7fSxcblx0XHRcdFx0XHRcdGV2ZW50czogW10sXG5cdFx0XHRcdFx0XHRzdGVwczoge30sXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiBQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT04sXG5cdFx0XHRcdFx0XHRzZGtEZWNpZGVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0Y3R4OiB7XG5cdFx0XHRcdFx0XHRcdGF0dGVtcHQ6IDAsXG5cdFx0XHRcdFx0XHRcdGRpc2FibGVfaW1tZWRpYXRlX2V4ZWN1dGlvbjogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdHVzZV9hcGk6IHRydWUsXG5cdFx0XHRcdFx0XHRcdG1heF9hdHRlbXB0czogMyxcblx0XHRcdFx0XHRcdFx0cnVuX2lkOiBhd2FpdCBhY3Rpb25zLmhlYWRlcnMoXCJnZXR0aW5nIHJ1biBJRCBmb3IgZm9yY2VkIGV4ZWN1dGlvblwiLCBoZWFkZXJLZXlzLklubmdlc3RSdW5JZCksXG5cdFx0XHRcdFx0XHRcdHN0YWNrOiB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhY2s6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQ6IDBcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgcmF3UHJvYmUgPSBhd2FpdCBhY3Rpb25zLnF1ZXJ5U3RyaW5nV2l0aERlZmF1bHRzKFwidGVzdGluZyBmb3IgcHJvYmVcIiwgcXVlcnlLZXlzLlByb2JlKTtcblx0XHRcdFx0XHRpZiAocmF3UHJvYmUpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHByb2JlJDEgPSBlbnVtRnJvbVZhbHVlKHByb2JlLCByYXdQcm9iZSk7XG5cdFx0XHRcdFx0XHRpZiAoIXByb2JlJDEpIHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHN0YXR1czogNDAwLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShzZXJpYWxpemVFcnJvcigvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKGBVbmtub3duIHByb2JlIFwiJHtyYXdQcm9iZX1cImApKSksXG5cdFx0XHRcdFx0XHRcdHZlcnNpb246IHZvaWQgMFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHJldHVybiB7IFtwcm9iZS5UcnVzdF06ICgpID0+ICh7XG5cdFx0XHRcdFx0XHRcdHN0YXR1czogMjAwLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHRcdGJvZHk6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdHZlcnNpb246IHZvaWQgMFxuXHRcdFx0XHRcdFx0fSkgfVtwcm9iZSQxXSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmbklkID0gYXdhaXQgYWN0aW9ucy5xdWVyeVN0cmluZ1dpdGhEZWZhdWx0cyhcInByb2Nlc3NpbmcgcnVuIHJlcXVlc3RcIiwgcXVlcnlLZXlzLkZuSWQpO1xuXHRcdFx0XHRcdGlmICghZm5JZCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gZnVuY3Rpb24gSUQgZm91bmQgaW4gYXN5bmMgcmVxdWVzdFwiKTtcblx0XHRcdFx0XHRmbiA9IHRoaXMuZm5zW2ZuSWRdO1xuXHRcdFx0XHRcdHN0ZXBJZCA9IGF3YWl0IGFjdGlvbnMucXVlcnlTdHJpbmdXaXRoRGVmYXVsdHMoXCJwcm9jZXNzaW5nIHJ1biByZXF1ZXN0XCIsIHF1ZXJ5S2V5cy5TdGVwSWQpIHx8IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHR5cGVvZiBmbklkID09PSBcInVuZGVmaW5lZFwiIHx8ICFmbikgdGhyb3cgbmV3IEVycm9yKFwiTm8gZnVuY3Rpb24gSUQgZm91bmQgaW4gcmVxdWVzdFwiKTtcblx0XHRcdFx0Y29uc3QgeyB2ZXJzaW9uOiB2ZXJzaW9uJDEsIHJlc3VsdCB9ID0gdGhpcy5ydW5TdGVwKHtcblx0XHRcdFx0XHRmdW5jdGlvbklkOiBmbklkLFxuXHRcdFx0XHRcdGRhdGE6IGJvZHksXG5cdFx0XHRcdFx0c3RlcElkLFxuXHRcdFx0XHRcdHRpbWVyLFxuXHRcdFx0XHRcdHJlcUFyZ3MsXG5cdFx0XHRcdFx0aGVhZGVyczogYXdhaXQgZ2V0SGVhZGVycygpLFxuXHRcdFx0XHRcdGZuLFxuXHRcdFx0XHRcdGZvcmNlRXhlY3V0aW9uLFxuXHRcdFx0XHRcdGFjdGlvbnNcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHN0ZXBPdXRwdXQgPSBhd2FpdCByZXN1bHQ7XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQqIEZ1bmN0aW9ucyBjYW4gcmV0dXJuIGB1bmRlZmluZWRgLCBidXQgd2UnbGwgYWx3YXlzIGNvbnZlcnQgdGhpcyB0b1xuXHRcdFx0XHQqIGBudWxsYCwgYXMgdGhpcyBpcyBhcHByb3ByaWF0ZWx5IHNlcmlhbGl6YWJsZSBieSBKU09OLlxuXHRcdFx0XHQqL1xuXHRcdFx0XHRjb25zdCBvcERhdGFVbmRlZmluZWRUb051bGwgPSAob3ApID0+IHtcblx0XHRcdFx0XHRvcC5kYXRhID0gdW5kZWZpbmVkVG9OdWxsKG9wLmRhdGEpO1xuXHRcdFx0XHRcdHJldHVybiBvcDtcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgaGFuZGxlciA9IHtcblx0XHRcdFx0XHRcImZ1bmN0aW9uLXJlamVjdGVkXCI6IChyZXN1bHQkMSkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQkMS5yZXRyaWFibGUgPyA1MDAgOiA0MDAsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHRcdFx0XHRbaGVhZGVyS2V5cy5Ob1JldHJ5XTogcmVzdWx0JDEucmV0cmlhYmxlID8gXCJmYWxzZVwiIDogXCJ0cnVlXCIsXG5cdFx0XHRcdFx0XHRcdFx0Li4udHlwZW9mIHJlc3VsdCQxLnJldHJpYWJsZSA9PT0gXCJzdHJpbmdcIiA/IHsgW2hlYWRlcktleXMuUmV0cnlBZnRlcl06IHJlc3VsdCQxLnJldHJpYWJsZSB9IDoge31cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHVuZGVmaW5lZFRvTnVsbChyZXN1bHQkMS5lcnJvcikpLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcImZ1bmN0aW9uLXJlc29sdmVkXCI6IChyZXN1bHQkMSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGZvcmNlRXhlY3V0aW9uKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJ1bkNvbXBsZXRlT3AgPSB7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IF9pbnRlcm5hbHMuaGFzaElkKFwiY29tcGxldGVcIiksXG5cdFx0XHRcdFx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuUnVuQ29tcGxldGUsXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YTogdW5kZWZpbmVkVG9OdWxsKHJlc3VsdCQxLmRhdGEpXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdHVzOiAyMDYsXG5cdFx0XHRcdFx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShydW5Db21wbGV0ZU9wKSxcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDFcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHN0YXR1czogMjAwLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeSh1bmRlZmluZWRUb051bGwocmVzdWx0JDEuZGF0YSkpLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcInN0ZXAtbm90LWZvdW5kXCI6IChyZXN1bHQkMSkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHRcdFx0XHRbaGVhZGVyS2V5cy5Ob1JldHJ5XTogXCJmYWxzZVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeSh7IGVycm9yOiBgQ291bGQgbm90IGZpbmQgc3RlcCBcIiR7cmVzdWx0JDEuc3RlcC5kaXNwbGF5TmFtZSB8fCByZXN1bHQkMS5zdGVwLmlkfVwiIHRvIHJ1bjsgdGltZWQgb3V0YCB9KSxcblx0XHRcdFx0XHRcdFx0dmVyc2lvbjogdmVyc2lvbiQxXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XCJzdGVwLXJhblwiOiAocmVzdWx0JDEpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IHN0ZXAgPSBvcERhdGFVbmRlZmluZWRUb051bGwocmVzdWx0JDEuc3RlcCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IDIwNixcblx0XHRcdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcdFx0XHRcdC4uLnR5cGVvZiByZXN1bHQkMS5yZXRyaWFibGUgIT09IFwidW5kZWZpbmVkXCIgPyB7XG5cdFx0XHRcdFx0XHRcdFx0XHRbaGVhZGVyS2V5cy5Ob1JldHJ5XTogcmVzdWx0JDEucmV0cmlhYmxlID8gXCJmYWxzZVwiIDogXCJ0cnVlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHQuLi50eXBlb2YgcmVzdWx0JDEucmV0cmlhYmxlID09PSBcInN0cmluZ1wiID8geyBbaGVhZGVyS2V5cy5SZXRyeUFmdGVyXTogcmVzdWx0JDEucmV0cmlhYmxlIH0gOiB7fVxuXHRcdFx0XHRcdFx0XHRcdH0gOiB7fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoW3N0ZXBdKSxcblx0XHRcdFx0XHRcdFx0dmVyc2lvbjogdmVyc2lvbiQxXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XCJzdGVwcy1mb3VuZFwiOiAocmVzdWx0JDEpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IHN0ZXBzID0gcmVzdWx0JDEuc3RlcHMubWFwKG9wRGF0YVVuZGVmaW5lZFRvTnVsbCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IDIwNixcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoc3RlcHMpLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcImNoYW5nZS1tb2RlXCI6IChyZXN1bHQkMSkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHRcdFx0XHRbaGVhZGVyS2V5cy5Ob1JldHJ5XTogXCJ0cnVlXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHsgZXJyb3I6IGBXZSB3YW50ZWQgdG8gY2hhbmdlIG1vZGUgdG8gXCIke3Jlc3VsdCQxLnRvfVwiLCBidXQgdGhpcyBpcyBub3Qgc3VwcG9ydGVkIHdpdGhpbiB0aGUgSW5uZ2VzdENvbW1IYW5kbGVyLiBUaGlzIGlzIGEgYnVnIGluIHRoZSBJbm5nZXN0IFNESy5gIH0pLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9W3N0ZXBPdXRwdXQudHlwZV07XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IGhhbmRsZXIoc3RlcE91dHB1dCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHRoaXMubG9nKFwiZXJyb3JcIiwgXCJFcnJvciBoYW5kbGluZyBleGVjdXRpb24gcmVzdWx0XCIsIGVycik7XG5cdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBlbnYgPSAoYXdhaXQgZ2V0SGVhZGVycygpKVtoZWFkZXJLZXlzLkVudmlyb25tZW50XSA/PyBudWxsO1xuXHRcdFx0aWYgKG1ldGhvZCA9PT0gXCJHRVRcIikgcmV0dXJuIHtcblx0XHRcdFx0c3RhdHVzOiAyMDAsXG5cdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShhd2FpdCB0aGlzLmludHJvc3BlY3Rpb25Cb2R5KHtcblx0XHRcdFx0XHRhY3Rpb25zLFxuXHRcdFx0XHRcdGVudixcblx0XHRcdFx0XHRzaWduYXR1cmVWYWxpZGF0aW9uLFxuXHRcdFx0XHRcdHVybFxuXHRcdFx0XHR9KSksXG5cdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHR9O1xuXHRcdFx0aWYgKG1ldGhvZCA9PT0gXCJQVVRcIikge1xuXHRcdFx0XHRjb25zdCBbZGVwbG95SWQsIGluQmFuZFN5bmNSZXF1ZXN0ZWRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2FjdGlvbnMucXVlcnlTdHJpbmdXaXRoRGVmYXVsdHMoXCJwcm9jZXNzaW5nIGRlcGxveW1lbnQgcmVxdWVzdFwiLCBxdWVyeUtleXMuRGVwbG95SWQpLnRoZW4oKGRlcGxveUlkJDEpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gZGVwbG95SWQkMSA9PT0gXCJ1bmRlZmluZWRcIiA/IHZvaWQgMCA6IGRlcGxveUlkJDE7XG5cdFx0XHRcdH0pLCBQcm9taXNlLnJlc29sdmUocGFyc2VBc0Jvb2xlYW4odGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0QWxsb3dJbkJhbmRTeW5jXSkpLnRoZW4oKGFsbG93SW5CYW5kU3luYykgPT4ge1xuXHRcdFx0XHRcdGlmIChhbGxvd0luQmFuZFN5bmMgIT09IHZvaWQgMCAmJiAhYWxsb3dJbkJhbmRTeW5jKSByZXR1cm4gc3luY0tpbmQuT3V0T2ZCYW5kO1xuXHRcdFx0XHRcdHJldHVybiBhY3Rpb25zLmhlYWRlcnMoXCJwcm9jZXNzaW5nIGRlcGxveW1lbnQgcmVxdWVzdFwiLCBoZWFkZXJLZXlzLklubmdlc3RTeW5jS2luZCk7XG5cdFx0XHRcdH0pLnRoZW4oKGtpbmQpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4ga2luZCA9PT0gc3luY0tpbmQuSW5CYW5kO1xuXHRcdFx0XHR9KV0pO1xuXHRcdFx0XHRpZiAoaW5CYW5kU3luY1JlcXVlc3RlZCkge1xuXHRcdFx0XHRcdGlmIChpc01pc3NpbmdCb2R5KSB7XG5cdFx0XHRcdFx0XHR0aGlzLmxvZyhcImVycm9yXCIsIFwiTWlzc2luZyBib2R5IHdoZW4gc3luY2luZywgcG9zc2libHkgZHVlIHRvIG1pc3NpbmcgcmVxdWVzdCBib2R5IG1pZGRsZXdhcmVcIik7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IDUwMCxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoc2VyaWFsaXplRXJyb3IoLyogQF9fUFVSRV9fICovIG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWVzdCBib2R5IHdoZW4gc3luY2luZywgcG9zc2libHkgZHVlIHRvIG1pc3NpbmcgcmVxdWVzdCBib2R5IG1pZGRsZXdhcmVcIikpKSxcblx0XHRcdFx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIShhd2FpdCBzaWduYXR1cmVWYWxpZGF0aW9uKS5zdWNjZXNzKSByZXR1cm4ge1xuXHRcdFx0XHRcdFx0c3RhdHVzOiA0MDEsXG5cdFx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoeyBjb2RlOiBcInNpZ192ZXJpZmljYXRpb25fZmFpbGVkXCIgfSksXG5cdFx0XHRcdFx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGluQmFuZFN5bmNSZXF1ZXN0Qm9keVNjaGVtYS5zYWZlUGFyc2UoYm9keSk7XG5cdFx0XHRcdFx0aWYgKCFyZXMuc3VjY2VzcykgcmV0dXJuIHtcblx0XHRcdFx0XHRcdHN0YXR1czogNDAwLFxuXHRcdFx0XHRcdFx0Ym9keTogc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRcdFx0Y29kZTogXCJpbnZhbGlkX3JlcXVlc3RcIixcblx0XHRcdFx0XHRcdFx0bWVzc2FnZTogcmVzLmVycm9yLm1lc3NhZ2Vcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR1cmwgPSB0aGlzLnJlcVVybChuZXcgVVJMKHJlcy5kYXRhLnVybCkpO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRzdGF0dXM6IDIwMCxcblx0XHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShhd2FpdCB0aGlzLmluQmFuZFJlZ2lzdGVyQm9keSh7XG5cdFx0XHRcdFx0XHRcdGFjdGlvbnMsXG5cdFx0XHRcdFx0XHRcdGRlcGxveUlkLFxuXHRcdFx0XHRcdFx0XHRlbnYsXG5cdFx0XHRcdFx0XHRcdHNpZ25hdHVyZVZhbGlkYXRpb24sXG5cdFx0XHRcdFx0XHRcdHVybFxuXHRcdFx0XHRcdFx0fSkpLFxuXHRcdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHRcdFx0W2hlYWRlcktleXMuSW5uZ2VzdFN5bmNLaW5kXTogc3luY0tpbmQuSW5CYW5kXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB7IHN0YXR1cywgbWVzc2FnZSwgbW9kaWZpZWQgfSA9IGF3YWl0IHRoaXMucmVnaXN0ZXIodGhpcy5yZXFVcmwodXJsKSwgZGVwbG95SWQsIGdldEhlYWRlcnMpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHN0YXR1cyxcblx0XHRcdFx0XHRib2R5OiBzdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0bWVzc2FnZSxcblx0XHRcdFx0XHRcdG1vZGlmaWVkXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XHRcdFx0XHRbaGVhZGVyS2V5cy5Jbm5nZXN0U3luY0tpbmRdOiBzeW5jS2luZC5PdXRPZkJhbmRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHZlcnNpb246IHZvaWQgMFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRcdGJvZHk6IHN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0dHlwZTogXCJpbnRlcm5hbFwiLFxuXHRcdFx0XHRcdC4uLnNlcmlhbGl6ZUVycm9yKGVycilcblx0XHRcdFx0fSksXG5cdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdFx0dmVyc2lvbjogdm9pZCAwXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RhdHVzOiA0MDUsXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTm8gYWN0aW9uIGZvdW5kOyByZXF1ZXN0IHdhcyBsaWtlbHkgbm90IFBPU1QsIFBVVCwgb3IgR0VUXCIsXG5cdFx0XHRcdG1vZGU6IHRoaXMuX21vZGVcblx0XHRcdH0pLFxuXHRcdFx0aGVhZGVyczoge30sXG5cdFx0XHR2ZXJzaW9uOiB2b2lkIDBcblx0XHR9O1xuXHR9XG5cdHJ1blN0ZXAoeyBhY3Rpb25zLCBmdW5jdGlvbklkLCBzdGVwSWQsIGRhdGEsIHRpbWVyLCByZXFBcmdzLCBoZWFkZXJzLCBmbiwgZm9yY2VFeGVjdXRpb24gfSkge1xuXHRcdGlmICghZm4pIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgZnVuY3Rpb24gd2l0aCBJRCBcIiR7ZnVuY3Rpb25JZH1cImApO1xuXHRcdGNvbnN0IGltbWVkaWF0ZUZuRGF0YSA9IHBhcnNlRm5EYXRhKGRhdGEpO1xuXHRcdGxldCB7IHZlcnNpb246IHZlcnNpb24kMSwgc2RrRGVjaWRlZCB9ID0gaW1tZWRpYXRlRm5EYXRhO1xuXHRcdGlmICh2ZXJzaW9uJDEgPT09IEV4ZWN1dGlvblZlcnNpb24uVjEgJiYgc2RrRGVjaWRlZCAmJiBmbi5mbltcInNob3VsZE9wdGltaXplUGFyYWxsZWxpc21cIl0/LigpKSB2ZXJzaW9uJDEgPSBFeGVjdXRpb25WZXJzaW9uLlYyO1xuXHRcdGNvbnN0IHJlc3VsdCA9IHJ1bkFzUHJvbWlzZShhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBhbnlGbkRhdGEgPSBhd2FpdCBmZXRjaEFsbEZuRGF0YSh7XG5cdFx0XHRcdGRhdGE6IGltbWVkaWF0ZUZuRGF0YSxcblx0XHRcdFx0YXBpOiB0aGlzLmNsaWVudFtcImlubmdlc3RBcGlcIl0sXG5cdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIWFueUZuRGF0YS5vaykgdGhyb3cgbmV3IEVycm9yKGFueUZuRGF0YS5lcnJvcik7XG5cdFx0XHRjb25zdCBjcmVhdGVSZXNwb25zZSA9IGZvcmNlRXhlY3V0aW9uICYmIGFjdGlvbnMuZXhwZXJpbWVudGFsVHJhbnNmb3JtU3luY1Jlc3BvbnNlID8gKGRhdGEkMSkgPT4gYWN0aW9ucy5leHBlcmltZW50YWxUcmFuc2Zvcm1TeW5jUmVzcG9uc2UoXCJjcmVhdGVkIHN5bmMtPmFzeW5jIHJlc3BvbnNlXCIsIGRhdGEkMSkudGhlbigocmVzKSA9PiAoe1xuXHRcdFx0XHQuLi5yZXMsXG5cdFx0XHRcdHZlcnNpb246IHZlcnNpb24kMVxuXHRcdFx0fSkpIDogdm9pZCAwO1xuXHRcdFx0Y29uc3QgZXhlY3V0aW9uT3B0aW9ucyA9IGF3YWl0ICgocykgPT4gcykoe1xuXHRcdFx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMF06ICh7IGV2ZW50LCBldmVudHMsIHN0ZXBzLCBjdHgsIHZlcnNpb246IHZlcnNpb24kMiB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qgc3RlcFN0YXRlID0gT2JqZWN0LmVudHJpZXMoc3RlcHMgPz8ge30pLnJlZHVjZSgoYWNjLCBbaWQsIGRhdGEkMV0pID0+IHtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdC4uLmFjYyxcblx0XHRcdFx0XHRcdFx0W2lkXToge1xuXHRcdFx0XHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdFx0XHRcdGRhdGE6IGRhdGEkMVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0sIHt9KTtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dmVyc2lvbjogdmVyc2lvbiQyLFxuXHRcdFx0XHRcdFx0cGFydGlhbE9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdFx0Y2xpZW50OiB0aGlzLmNsaWVudCxcblx0XHRcdFx0XHRcdFx0cnVuSWQ6IGN0eD8ucnVuX2lkIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRcdHN0ZXBNb2RlOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdGV2ZW50LFxuXHRcdFx0XHRcdFx0XHRcdGV2ZW50cyxcblx0XHRcdFx0XHRcdFx0XHRydW5JZDogY3R4Py5ydW5faWQgfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0XHRhdHRlbXB0OiBjdHg/LmF0dGVtcHQgPz8gMFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRzdGVwU3RhdGUsXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RlZFJ1blN0ZXA6IHN0ZXBJZCA9PT0gXCJzdGVwXCIgPyB2b2lkIDAgOiBzdGVwSWQgfHwgdm9pZCAwLFxuXHRcdFx0XHRcdFx0XHR0aW1lcixcblx0XHRcdFx0XHRcdFx0aXNGYWlsdXJlSGFuZGxlcjogZm4ub25GYWlsdXJlLFxuXHRcdFx0XHRcdFx0XHRzdGVwQ29tcGxldGlvbk9yZGVyOiBjdHg/LnN0YWNrPy5zdGFjayA/PyBbXSxcblx0XHRcdFx0XHRcdFx0cmVxQXJncyxcblx0XHRcdFx0XHRcdFx0aGVhZGVycyxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlUmVzcG9uc2Vcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMV06ICh7IGV2ZW50LCBldmVudHMsIHN0ZXBzLCBjdHgsIHZlcnNpb246IHZlcnNpb24kMiB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qgc3RlcFN0YXRlID0gT2JqZWN0LmVudHJpZXMoc3RlcHMgPz8ge30pLnJlZHVjZSgoYWNjLCBbaWQsIHJlc3VsdCQxXSkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0Li4uYWNjLFxuXHRcdFx0XHRcdFx0XHRbaWRdOiByZXN1bHQkMS50eXBlID09PSBcImRhdGFcIiA/IHtcblx0XHRcdFx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiByZXN1bHQkMS5kYXRhXG5cdFx0XHRcdFx0XHRcdH0gOiByZXN1bHQkMS50eXBlID09PSBcImlucHV0XCIgPyB7XG5cdFx0XHRcdFx0XHRcdFx0aWQsXG5cdFx0XHRcdFx0XHRcdFx0aW5wdXQ6IHJlc3VsdCQxLmlucHV0XG5cdFx0XHRcdFx0XHRcdH0gOiB7XG5cdFx0XHRcdFx0XHRcdFx0aWQsXG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IHJlc3VsdCQxLmVycm9yXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSwge30pO1xuXHRcdFx0XHRcdGNvbnN0IHJlcXVlc3RlZFJ1blN0ZXAgPSBzdGVwSWQgPT09IFwic3RlcFwiID8gdm9pZCAwIDogc3RlcElkIHx8IHZvaWQgMDtcblx0XHRcdFx0XHRjb25zdCBjaGVja3BvaW50aW5nQ29uZmlnID0gZm4uZm5bXCJzaG91bGRBc3luY0NoZWNrcG9pbnRcIl0ocmVxdWVzdGVkUnVuU3RlcCwgY3R4Py5mbl9pZCwgQm9vbGVhbihjdHg/LmRpc2FibGVfaW1tZWRpYXRlX2V4ZWN1dGlvbikpO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDIsXG5cdFx0XHRcdFx0XHRwYXJ0aWFsT3B0aW9uczoge1xuXHRcdFx0XHRcdFx0XHRjbGllbnQ6IHRoaXMuY2xpZW50LFxuXHRcdFx0XHRcdFx0XHRydW5JZDogY3R4Py5ydW5faWQgfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0c3RlcE1vZGU6IGNoZWNrcG9pbnRpbmdDb25maWcgPyBTdGVwTW9kZS5Bc3luY0NoZWNrcG9pbnRpbmcgOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0XHRcdFx0Y2hlY2twb2ludGluZ0NvbmZpZyxcblx0XHRcdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdGV2ZW50LFxuXHRcdFx0XHRcdFx0XHRcdGV2ZW50cyxcblx0XHRcdFx0XHRcdFx0XHRydW5JZDogY3R4Py5ydW5faWQgfHwgXCJcIixcblx0XHRcdFx0XHRcdFx0XHRhdHRlbXB0OiBjdHg/LmF0dGVtcHQgPz8gMCxcblx0XHRcdFx0XHRcdFx0XHRtYXhBdHRlbXB0czogY3R4Py5tYXhfYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0aW50ZXJuYWxGbklkOiBjdHg/LmZuX2lkLFxuXHRcdFx0XHRcdFx0XHRxdWV1ZUl0ZW1JZDogY3R4Py5xaV9pZCxcblx0XHRcdFx0XHRcdFx0c3RlcFN0YXRlLFxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0ZWRSdW5TdGVwLFxuXHRcdFx0XHRcdFx0XHR0aW1lcixcblx0XHRcdFx0XHRcdFx0aXNGYWlsdXJlSGFuZGxlcjogZm4ub25GYWlsdXJlLFxuXHRcdFx0XHRcdFx0XHRkaXNhYmxlSW1tZWRpYXRlRXhlY3V0aW9uOiBjdHg/LmRpc2FibGVfaW1tZWRpYXRlX2V4ZWN1dGlvbixcblx0XHRcdFx0XHRcdFx0c3RlcENvbXBsZXRpb25PcmRlcjogY3R4Py5zdGFjaz8uc3RhY2sgPz8gW10sXG5cdFx0XHRcdFx0XHRcdHJlcUFyZ3MsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcnMsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZVJlc3BvbnNlXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSxcblx0XHRcdFx0W0V4ZWN1dGlvblZlcnNpb24uVjJdOiAoeyBldmVudCwgZXZlbnRzLCBzdGVwcywgY3R4LCB2ZXJzaW9uOiB2ZXJzaW9uJDIgfSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHN0ZXBTdGF0ZSA9IE9iamVjdC5lbnRyaWVzKHN0ZXBzID8/IHt9KS5yZWR1Y2UoKGFjYywgW2lkLCByZXN1bHQkMV0pID0+IHtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdC4uLmFjYyxcblx0XHRcdFx0XHRcdFx0W2lkXTogcmVzdWx0JDEudHlwZSA9PT0gXCJkYXRhXCIgPyB7XG5cdFx0XHRcdFx0XHRcdFx0aWQsXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YTogcmVzdWx0JDEuZGF0YVxuXHRcdFx0XHRcdFx0XHR9IDogcmVzdWx0JDEudHlwZSA9PT0gXCJpbnB1dFwiID8ge1xuXHRcdFx0XHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdFx0XHRcdGlucHV0OiByZXN1bHQkMS5pbnB1dFxuXHRcdFx0XHRcdFx0XHR9IDoge1xuXHRcdFx0XHRcdFx0XHRcdGlkLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiByZXN1bHQkMS5lcnJvclxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0sIHt9KTtcblx0XHRcdFx0XHRjb25zdCByZXF1ZXN0ZWRSdW5TdGVwID0gc3RlcElkID09PSBcInN0ZXBcIiA/IHZvaWQgMCA6IHN0ZXBJZCB8fCB2b2lkIDA7XG5cdFx0XHRcdFx0Y29uc3QgY2hlY2twb2ludGluZ0NvbmZpZyA9IGZuLmZuW1wic2hvdWxkQXN5bmNDaGVja3BvaW50XCJdKHJlcXVlc3RlZFJ1blN0ZXAsIGN0eD8uZm5faWQsIEJvb2xlYW4oY3R4Py5kaXNhYmxlX2ltbWVkaWF0ZV9leGVjdXRpb24pKTtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dmVyc2lvbjogdmVyc2lvbiQyLFxuXHRcdFx0XHRcdFx0cGFydGlhbE9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdFx0Y2xpZW50OiB0aGlzLmNsaWVudCxcblx0XHRcdFx0XHRcdFx0cnVuSWQ6IGN0eD8ucnVuX2lkIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRcdHN0ZXBNb2RlOiBjaGVja3BvaW50aW5nQ29uZmlnID8gU3RlcE1vZGUuQXN5bmNDaGVja3BvaW50aW5nIDogU3RlcE1vZGUuQXN5bmMsXG5cdFx0XHRcdFx0XHRcdGNoZWNrcG9pbnRpbmdDb25maWcsXG5cdFx0XHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdFx0XHRldmVudCxcblx0XHRcdFx0XHRcdFx0XHRldmVudHMsXG5cdFx0XHRcdFx0XHRcdFx0cnVuSWQ6IGN0eD8ucnVuX2lkIHx8IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0YXR0ZW1wdDogY3R4Py5hdHRlbXB0ID8/IDAsXG5cdFx0XHRcdFx0XHRcdFx0bWF4QXR0ZW1wdHM6IGN0eD8ubWF4X2F0dGVtcHRzXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGludGVybmFsRm5JZDogY3R4Py5mbl9pZCxcblx0XHRcdFx0XHRcdFx0cXVldWVJdGVtSWQ6IGN0eD8ucWlfaWQsXG5cdFx0XHRcdFx0XHRcdHN0ZXBTdGF0ZSxcblx0XHRcdFx0XHRcdFx0cmVxdWVzdGVkUnVuU3RlcCxcblx0XHRcdFx0XHRcdFx0dGltZXIsXG5cdFx0XHRcdFx0XHRcdGlzRmFpbHVyZUhhbmRsZXI6IGZuLm9uRmFpbHVyZSxcblx0XHRcdFx0XHRcdFx0ZGlzYWJsZUltbWVkaWF0ZUV4ZWN1dGlvbjogY3R4Py5kaXNhYmxlX2ltbWVkaWF0ZV9leGVjdXRpb24sXG5cdFx0XHRcdFx0XHRcdHN0ZXBDb21wbGV0aW9uT3JkZXI6IGN0eD8uc3RhY2s/LnN0YWNrID8/IFtdLFxuXHRcdFx0XHRcdFx0XHRyZXFBcmdzLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVSZXNwb25zZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH0pW3ZlcnNpb24kMV0oYW55Rm5EYXRhLnZhbHVlKTtcblx0XHRcdHJldHVybiBmbi5mbltcImNyZWF0ZUV4ZWN1dGlvblwiXShleGVjdXRpb25PcHRpb25zKS5zdGFydCgpO1xuXHRcdH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHR2ZXJzaW9uOiB2ZXJzaW9uJDEsXG5cdFx0XHRyZXN1bHRcblx0XHR9O1xuXHR9XG5cdGNvbmZpZ3ModXJsKSB7XG5cdFx0Y29uc3QgY29uZmlncyA9IE9iamVjdC52YWx1ZXModGhpcy5yYXdGbnMpLnJlZHVjZSgoYWNjLCBmbikgPT4gWy4uLmFjYywgLi4uZm5bXCJnZXRDb25maWdcIl0oe1xuXHRcdFx0YmFzZVVybDogdXJsLFxuXHRcdFx0YXBwUHJlZml4OiB0aGlzLmlkXG5cdFx0fSldLCBbXSk7XG5cdFx0Zm9yIChjb25zdCBjb25maWcgb2YgY29uZmlncykge1xuXHRcdFx0Y29uc3QgY2hlY2sgPSBmdW5jdGlvbkNvbmZpZ1NjaGVtYS5zYWZlUGFyc2UoY29uZmlnKTtcblx0XHRcdGlmICghY2hlY2suc3VjY2Vzcykge1xuXHRcdFx0XHRjb25zdCBlcnJvcnMgPSBjaGVjay5lcnJvci5lcnJvcnMubWFwKChlcnIpID0+IGVyci5tZXNzYWdlKS5qb2luKFwiOyBcIik7XG5cdFx0XHRcdHRoaXMubG9nKFwid2FyblwiLCBgQ29uZmlnIGludmFsaWQgZm9yIGZ1bmN0aW9uIFwiJHtjb25maWcuaWR9XCIgOiAke2Vycm9yc31gKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNvbmZpZ3M7XG5cdH1cblx0LyoqXG5cdCogUmV0dXJuIGFuIElubmdlc3Qgc2VydmUgZW5kcG9pbnQgVVJMIGdpdmVuIGEgcG90ZW50aWFsIGBwYXRoYCBhbmQgYGhvc3RgLlxuXHQqXG5cdCogV2lsbCBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgYHNlcnZlSG9zdGAgYW5kIGBzZXJ2ZVBhdGhgIGlmIHRoZXkgaGF2ZSBiZWVuXG5cdCogc2V0IHdoZW4gcmVnaXN0ZXJpbmcuXG5cdCovXG5cdHJlcVVybCh1cmwpIHtcblx0XHRsZXQgcmV0ID0gbmV3IFVSTCh1cmwpO1xuXHRcdGNvbnN0IHNlcnZlSG9zdCA9IHRoaXMuc2VydmVIb3N0IHx8IHRoaXMuZW52W2VudktleXMuSW5uZ2VzdFNlcnZlSG9zdF07XG5cdFx0Y29uc3Qgc2VydmVQYXRoID0gdGhpcy5zZXJ2ZVBhdGggfHwgdGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2VydmVQYXRoXTtcblx0XHRpZiAoc2VydmVQYXRoKSByZXQucGF0aG5hbWUgPSBzZXJ2ZVBhdGg7XG5cdFx0aWYgKHNlcnZlSG9zdCkgcmV0ID0gbmV3IFVSTChyZXQucGF0aG5hbWUgKyByZXQuc2VhcmNoLCBzZXJ2ZUhvc3QpO1xuXHRcdHJldHVybiByZXQ7XG5cdH1cblx0cmVnaXN0ZXJCb2R5KHsgdXJsLCBkZXBsb3lJZCB9KSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVybDogdXJsLmhyZWYsXG5cdFx0XHRkZXBsb3lUeXBlOiBcInBpbmdcIixcblx0XHRcdGZyYW1ld29yazogdGhpcy5mcmFtZXdvcmtOYW1lLFxuXHRcdFx0YXBwTmFtZTogdGhpcy5pZCxcblx0XHRcdGZ1bmN0aW9uczogdGhpcy5jb25maWdzKHVybCksXG5cdFx0XHRzZGs6IGBqczp2JHt2ZXJzaW9ufWAsXG5cdFx0XHR2OiBcIjAuMVwiLFxuXHRcdFx0ZGVwbG95SWQ6IGRlcGxveUlkIHx8IHZvaWQgMCxcblx0XHRcdGNhcGFiaWxpdGllczoge1xuXHRcdFx0XHR0cnVzdF9wcm9iZTogXCJ2MVwiLFxuXHRcdFx0XHRjb25uZWN0OiBcInYxXCJcblx0XHRcdH0sXG5cdFx0XHRhcHBWZXJzaW9uOiB0aGlzLmNsaWVudC5hcHBWZXJzaW9uXG5cdFx0fTtcblx0fVxuXHRhc3luYyBpbkJhbmRSZWdpc3RlckJvZHkoeyBhY3Rpb25zLCBkZXBsb3lJZCwgZW52LCBzaWduYXR1cmVWYWxpZGF0aW9uLCB1cmwgfSkge1xuXHRcdGNvbnN0IHJlZ2lzdGVyQm9keSA9IHRoaXMucmVnaXN0ZXJCb2R5KHtcblx0XHRcdGRlcGxveUlkLFxuXHRcdFx0dXJsXG5cdFx0fSk7XG5cdFx0Y29uc3QgaW50cm9zcGVjdGlvbkJvZHkgPSBhd2FpdCB0aGlzLmludHJvc3BlY3Rpb25Cb2R5KHtcblx0XHRcdGFjdGlvbnMsXG5cdFx0XHRlbnYsXG5cdFx0XHRzaWduYXR1cmVWYWxpZGF0aW9uLFxuXHRcdFx0dXJsXG5cdFx0fSk7XG5cdFx0Y29uc3QgYm9keSA9IHtcblx0XHRcdGFwcF9pZDogdGhpcy5pZCxcblx0XHRcdGFwcFZlcnNpb246IHRoaXMuY2xpZW50LmFwcFZlcnNpb24sXG5cdFx0XHRjYXBhYmlsaXRpZXM6IHJlZ2lzdGVyQm9keS5jYXBhYmlsaXRpZXMsXG5cdFx0XHRlbnYsXG5cdFx0XHRmcmFtZXdvcms6IHJlZ2lzdGVyQm9keS5mcmFtZXdvcmssXG5cdFx0XHRmdW5jdGlvbnM6IHJlZ2lzdGVyQm9keS5mdW5jdGlvbnMsXG5cdFx0XHRpbnNwZWN0aW9uOiBpbnRyb3NwZWN0aW9uQm9keSxcblx0XHRcdHBsYXRmb3JtOiBnZXRQbGF0Zm9ybU5hbWUoe1xuXHRcdFx0XHQuLi5hbGxQcm9jZXNzRW52KCksXG5cdFx0XHRcdC4uLnRoaXMuZW52XG5cdFx0XHR9KSxcblx0XHRcdHNka19hdXRob3I6IFwiaW5uZ2VzdFwiLFxuXHRcdFx0c2RrX2xhbmd1YWdlOiBcIlwiLFxuXHRcdFx0c2RrX3ZlcnNpb246IFwiXCIsXG5cdFx0XHRzZGs6IHJlZ2lzdGVyQm9keS5zZGssXG5cdFx0XHR1cmw6IHJlZ2lzdGVyQm9keS51cmxcblx0XHR9O1xuXHRcdGlmIChcImF1dGhlbnRpY2F0aW9uX3N1Y2NlZWRlZFwiIGluIGludHJvc3BlY3Rpb25Cb2R5ICYmIGludHJvc3BlY3Rpb25Cb2R5LmF1dGhlbnRpY2F0aW9uX3N1Y2NlZWRlZCkge1xuXHRcdFx0Ym9keS5zZGtfbGFuZ3VhZ2UgPSBpbnRyb3NwZWN0aW9uQm9keS5zZGtfbGFuZ3VhZ2U7XG5cdFx0XHRib2R5LnNka192ZXJzaW9uID0gaW50cm9zcGVjdGlvbkJvZHkuc2RrX3ZlcnNpb247XG5cdFx0fVxuXHRcdHJldHVybiBib2R5O1xuXHR9XG5cdGFzeW5jIGludHJvc3BlY3Rpb25Cb2R5KHsgYWN0aW9ucywgZW52LCBzaWduYXR1cmVWYWxpZGF0aW9uLCB1cmwgfSkge1xuXHRcdGNvbnN0IHJlZ2lzdGVyQm9keSA9IHRoaXMucmVnaXN0ZXJCb2R5KHtcblx0XHRcdHVybDogdGhpcy5yZXFVcmwodXJsKSxcblx0XHRcdGRlcGxveUlkOiBudWxsXG5cdFx0fSk7XG5cdFx0aWYgKCF0aGlzLl9tb2RlKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBtb2RlIHNldDsgY2Fubm90IGludHJvc3BlY3Qgd2l0aG91dCBtb2RlXCIpO1xuXHRcdGxldCBpbnRyb3NwZWN0aW9uID0ge1xuXHRcdFx0ZXh0cmE6IHsgaXNfbW9kZV9leHBsaWNpdDogdGhpcy5fbW9kZS5pc0V4cGxpY2l0IH0sXG5cdFx0XHRoYXNfZXZlbnRfa2V5OiB0aGlzLmNsaWVudFtcImV2ZW50S2V5U2V0XCJdKCksXG5cdFx0XHRoYXNfc2lnbmluZ19rZXk6IEJvb2xlYW4odGhpcy5zaWduaW5nS2V5KSxcblx0XHRcdGZ1bmN0aW9uX2NvdW50OiByZWdpc3RlckJvZHkuZnVuY3Rpb25zLmxlbmd0aCxcblx0XHRcdG1vZGU6IHRoaXMuX21vZGUudHlwZSxcblx0XHRcdHNjaGVtYV92ZXJzaW9uOiBcIjIwMjQtMDUtMjRcIlxuXHRcdH07XG5cdFx0aWYgKHRoaXMuX21vZGUudHlwZSA9PT0gXCJjbG91ZFwiKSB0cnkge1xuXHRcdFx0aWYgKCEoYXdhaXQgc2lnbmF0dXJlVmFsaWRhdGlvbikuc3VjY2VzcykgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIHZhbGlkYXRpb24gZmFpbGVkXCIpO1xuXHRcdFx0aW50cm9zcGVjdGlvbiA9IHtcblx0XHRcdFx0Li4uaW50cm9zcGVjdGlvbixcblx0XHRcdFx0YXV0aGVudGljYXRpb25fc3VjY2VlZGVkOiB0cnVlLFxuXHRcdFx0XHRhcGlfb3JpZ2luOiB0aGlzLmFwaUJhc2VVcmwsXG5cdFx0XHRcdGFwcF9pZDogdGhpcy5pZCxcblx0XHRcdFx0Y2FwYWJpbGl0aWVzOiB7XG5cdFx0XHRcdFx0dHJ1c3RfcHJvYmU6IFwidjFcIixcblx0XHRcdFx0XHRjb25uZWN0OiBcInYxXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0ZW52LFxuXHRcdFx0XHRldmVudF9hcGlfb3JpZ2luOiB0aGlzLmV2ZW50QXBpQmFzZVVybCxcblx0XHRcdFx0ZXZlbnRfa2V5X2hhc2g6IHRoaXMuaGFzaGVkRXZlbnRLZXkgPz8gbnVsbCxcblx0XHRcdFx0ZXh0cmE6IHtcblx0XHRcdFx0XHQuLi5pbnRyb3NwZWN0aW9uLmV4dHJhLFxuXHRcdFx0XHRcdGlzX3N0cmVhbWluZzogYXdhaXQgdGhpcy5zaG91bGRTdHJlYW0oYWN0aW9ucylcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnJhbWV3b3JrOiB0aGlzLmZyYW1ld29ya05hbWUsXG5cdFx0XHRcdHNka19sYW5ndWFnZTogXCJqc1wiLFxuXHRcdFx0XHRzZGtfdmVyc2lvbjogdmVyc2lvbixcblx0XHRcdFx0c2VydmVfb3JpZ2luOiB0aGlzLnNlcnZlSG9zdCA/PyBudWxsLFxuXHRcdFx0XHRzZXJ2ZV9wYXRoOiB0aGlzLnNlcnZlUGF0aCA/PyBudWxsLFxuXHRcdFx0XHRzaWduaW5nX2tleV9mYWxsYmFja19oYXNoOiB0aGlzLmhhc2hlZFNpZ25pbmdLZXlGYWxsYmFjayA/PyBudWxsLFxuXHRcdFx0XHRzaWduaW5nX2tleV9oYXNoOiB0aGlzLmhhc2hlZFNpZ25pbmdLZXkgPz8gbnVsbFxuXHRcdFx0fTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdGludHJvc3BlY3Rpb24gPSB7IC4uLmludHJvc3BlY3Rpb24gfTtcblx0XHR9XG5cdFx0cmV0dXJuIGludHJvc3BlY3Rpb247XG5cdH1cblx0YXN5bmMgcmVnaXN0ZXIodXJsLCBkZXBsb3lJZCwgZ2V0SGVhZGVycykge1xuXHRcdGNvbnN0IGJvZHkgPSB0aGlzLnJlZ2lzdGVyQm9keSh7XG5cdFx0XHR1cmwsXG5cdFx0XHRkZXBsb3lJZFxuXHRcdH0pO1xuXHRcdGxldCByZXM7XG5cdFx0bGV0IHJlZ2lzdGVyVVJMID0gbmV3IFVSTCh0aGlzLmlubmdlc3RSZWdpc3RlclVybC5ocmVmKTtcblx0XHRpZiAodGhpcy5fbW9kZSAmJiB0aGlzLl9tb2RlLmlzSW5mZXJyZWQgJiYgdGhpcy5fbW9kZS5pc0Rldikge1xuXHRcdFx0Y29uc3QgaG9zdCA9IGRldlNlcnZlckhvc3QodGhpcy5lbnYpO1xuXHRcdFx0aWYgKGF3YWl0IGRldlNlcnZlckF2YWlsYWJsZShob3N0LCB0aGlzLmZldGNoKSkgcmVnaXN0ZXJVUkwgPSBkZXZTZXJ2ZXJVcmwoaG9zdCwgXCIvZm4vcmVnaXN0ZXJcIik7XG5cdFx0fSBlbHNlIGlmICh0aGlzLl9tb2RlPy5leHBsaWNpdERldlVybCkgcmVnaXN0ZXJVUkwgPSBkZXZTZXJ2ZXJVcmwodGhpcy5fbW9kZS5leHBsaWNpdERldlVybC5ocmVmLCBcIi9mbi9yZWdpc3RlclwiKTtcblx0XHRpZiAoZGVwbG95SWQpIHJlZ2lzdGVyVVJMLnNlYXJjaFBhcmFtcy5zZXQocXVlcnlLZXlzLkRlcGxveUlkLCBkZXBsb3lJZCk7XG5cdFx0dHJ5IHtcblx0XHRcdHJlcyA9IGF3YWl0IGZldGNoV2l0aEF1dGhGYWxsYmFjayh7XG5cdFx0XHRcdGF1dGhUb2tlbjogdGhpcy5oYXNoZWRTaWduaW5nS2V5LFxuXHRcdFx0XHRhdXRoVG9rZW5GYWxsYmFjazogdGhpcy5oYXNoZWRTaWduaW5nS2V5RmFsbGJhY2ssXG5cdFx0XHRcdGZldGNoOiB0aGlzLmZldGNoLFxuXHRcdFx0XHR1cmw6IHJlZ2lzdGVyVVJMLmhyZWYsXG5cdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRcdGJvZHk6IHN0cmluZ2lmeShib2R5KSxcblx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHQuLi5hd2FpdCBnZXRIZWFkZXJzKCksXG5cdFx0XHRcdFx0XHRbaGVhZGVyS2V5cy5Jbm5nZXN0U3luY0tpbmRdOiBzeW5jS2luZC5PdXRPZkJhbmRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlZGlyZWN0OiBcImZvbGxvd1wiXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dGhpcy5sb2coXCJlcnJvclwiLCBlcnIpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c3RhdHVzOiA1MDAsXG5cdFx0XHRcdG1lc3NhZ2U6IGBGYWlsZWQgdG8gcmVnaXN0ZXIke2VyciBpbnN0YW5jZW9mIEVycm9yID8gYDsgJHtlcnIubWVzc2FnZX1gIDogXCJcIn1gLFxuXHRcdFx0XHRtb2RpZmllZDogZmFsc2Vcblx0XHRcdH07XG5cdFx0fVxuXHRcdGNvbnN0IHJhdyA9IGF3YWl0IHJlcy50ZXh0KCk7XG5cdFx0bGV0IGRhdGEgPSB7fTtcblx0XHR0cnkge1xuXHRcdFx0ZGF0YSA9IEpTT04ucGFyc2UocmF3KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHRoaXMubG9nKFwid2FyblwiLCBcIkNvdWxkbid0IHVucGFjayByZWdpc3RlciByZXNwb25zZTpcIiwgZXJyKTtcblx0XHRcdGxldCBtZXNzYWdlID0gXCJGYWlsZWQgdG8gcmVnaXN0ZXJcIjtcblx0XHRcdGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgbWVzc2FnZSArPSBgOyAke2Vyci5tZXNzYWdlfWA7XG5cdFx0XHRtZXNzYWdlICs9IGA7IHN0YXR1cyBjb2RlOiAke3Jlcy5zdGF0dXN9YDtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN0YXR1czogNTAwLFxuXHRcdFx0XHRtZXNzYWdlLFxuXHRcdFx0XHRtb2RpZmllZDogZmFsc2Vcblx0XHRcdH07XG5cdFx0fVxuXHRcdGxldCBzdGF0dXM7XG5cdFx0bGV0IGVycm9yO1xuXHRcdGxldCBza2lwcGVkO1xuXHRcdGxldCBtb2RpZmllZDtcblx0XHR0cnkge1xuXHRcdFx0KHtzdGF0dXMsIGVycm9yLCBza2lwcGVkLCBtb2RpZmllZH0gPSByZWdpc3RlclJlc1NjaGVtYS5wYXJzZShkYXRhKSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLmxvZyhcIndhcm5cIiwgXCJJbnZhbGlkIHJlZ2lzdGVyIHJlc3BvbnNlIHNjaGVtYTpcIiwgZXJyKTtcblx0XHRcdGxldCBtZXNzYWdlID0gXCJGYWlsZWQgdG8gcmVnaXN0ZXJcIjtcblx0XHRcdGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgbWVzc2FnZSArPSBgOyAke2Vyci5tZXNzYWdlfWA7XG5cdFx0XHRtZXNzYWdlICs9IGA7IHN0YXR1cyBjb2RlOiAke3Jlcy5zdGF0dXN9YDtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN0YXR1czogNTAwLFxuXHRcdFx0XHRtZXNzYWdlLFxuXHRcdFx0XHRtb2RpZmllZDogZmFsc2Vcblx0XHRcdH07XG5cdFx0fVxuXHRcdGlmICghc2tpcHBlZCkgdGhpcy5sb2coXCJkZWJ1Z1wiLCBcInJlZ2lzdGVyZWQgaW5uZ2VzdCBmdW5jdGlvbnM6XCIsIHJlcy5zdGF0dXMsIHJlcy5zdGF0dXNUZXh0LCBkYXRhKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RhdHVzLFxuXHRcdFx0bWVzc2FnZTogZXJyb3IsXG5cdFx0XHRtb2RpZmllZFxuXHRcdH07XG5cdH1cblx0LyoqXG5cdCogR2l2ZW4gYW4gZW52aXJvbm1lbnQsIHVwc2VydCBhbnkgbWlzc2luZyBrZXlzLiBUaGlzIGlzIHVzZWZ1bCBpblxuXHQqIHNpdHVhdGlvbnMgd2hlcmUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBwYXNzZWQgZGlyZWN0bHkgdG8gaGFuZGxlcnMgb3Jcblx0KiBhcmUgb3RoZXJ3aXNlIGRpZmZpY3VsdCB0byBhY2Nlc3MgZHVyaW5nIGluaXRpYWxpemF0aW9uLlxuXHQqL1xuXHR1cHNlcnRLZXlzRnJvbUVudigpIHtcblx0XHRpZiAodGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2lnbmluZ0tleV0pIHtcblx0XHRcdGlmICghdGhpcy5zaWduaW5nS2V5KSB0aGlzLnNpZ25pbmdLZXkgPSBTdHJpbmcodGhpcy5lbnZbZW52S2V5cy5Jbm5nZXN0U2lnbmluZ0tleV0pO1xuXHRcdFx0dGhpcy5jbGllbnRbXCJpbm5nZXN0QXBpXCJdLnNldFNpZ25pbmdLZXkodGhpcy5zaWduaW5nS2V5KTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuZW52W2VudktleXMuSW5uZ2VzdFNpZ25pbmdLZXlGYWxsYmFja10pIHtcblx0XHRcdGlmICghdGhpcy5zaWduaW5nS2V5RmFsbGJhY2spIHRoaXMuc2lnbmluZ0tleUZhbGxiYWNrID0gU3RyaW5nKHRoaXMuZW52W2VudktleXMuSW5uZ2VzdFNpZ25pbmdLZXlGYWxsYmFja10pO1xuXHRcdFx0dGhpcy5jbGllbnRbXCJpbm5nZXN0QXBpXCJdLnNldFNpZ25pbmdLZXlGYWxsYmFjayh0aGlzLnNpZ25pbmdLZXlGYWxsYmFjayk7XG5cdFx0fVxuXHRcdGlmICghdGhpcy5jbGllbnRbXCJldmVudEtleVNldFwiXSgpICYmIHRoaXMuZW52W2VudktleXMuSW5uZ2VzdEV2ZW50S2V5XSkgdGhpcy5jbGllbnQuc2V0RXZlbnRLZXkoU3RyaW5nKHRoaXMuZW52W2VudktleXMuSW5uZ2VzdEV2ZW50S2V5XSkpO1xuXHRcdGlmICh0aGlzLmVudltlbnZLZXlzLklubmdlc3REZXZTZXJ2ZXJVcmxdKSB0aGlzLmxvZyhcIndhcm5cIiwgYFVzZSBvZiAke2VudktleXMuSW5uZ2VzdERldlNlcnZlclVybH0gaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiB2MzsgcGxlYXNlIHVzZSAke2VudktleXMuSW5uZ2VzdEJhc2VVcmx9IGluc3RlYWQuIFNlZSBodHRwczovL3d3dy5pbm5nZXN0LmNvbS9kb2NzL3Nkay9taWdyYXRpb25gKTtcblx0fVxuXHQvKipcblx0KiBWYWxpZGF0ZSB0aGUgc2lnbmF0dXJlIG9mIGEgcmVxdWVzdCBhbmQgcmV0dXJuIHRoZSBzaWduaW5nIGtleSB1c2VkIHRvXG5cdCogdmFsaWRhdGUgaXQuXG5cdCovXG5cdGFzeW5jIHZhbGlkYXRlU2lnbmF0dXJlKHNpZywgYm9keSkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodGhpcy5za2lwU2lnbmF0dXJlVmFsaWRhdGlvbikgcmV0dXJuIHtcblx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0a2V5VXNlZDogXCJcIlxuXHRcdFx0fTtcblx0XHRcdGlmICh0aGlzLl9tb2RlICYmICF0aGlzLl9tb2RlLmlzQ2xvdWQpIHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IHRydWUsXG5cdFx0XHRcdGtleVVzZWQ6IFwiXCJcblx0XHRcdH07XG5cdFx0XHRpZiAoIXRoaXMuc2lnbmluZ0tleSkgdGhyb3cgbmV3IEVycm9yKGBObyBzaWduaW5nIGtleSBmb3VuZCBpbiBjbGllbnQgb3B0aW9ucyBvciAke2VudktleXMuSW5uZ2VzdFNpZ25pbmdLZXl9IGVudiB2YXIuIEZpbmQgeW91ciBrZXlzIGF0IGh0dHBzOi8vYXBwLmlubmdlc3QuY29tL3NlY3JldHNgKTtcblx0XHRcdGlmICghc2lnKSB0aHJvdyBuZXcgRXJyb3IoYE5vICR7aGVhZGVyS2V5cy5TaWduYXR1cmV9IHByb3ZpZGVkYCk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0XHRrZXlVc2VkOiBuZXcgUmVxdWVzdFNpZ25hdHVyZShzaWcpLnZlcmlmeVNpZ25hdHVyZSh7XG5cdFx0XHRcdFx0Ym9keSxcblx0XHRcdFx0XHRhbGxvd0V4cGlyZWRTaWduYXR1cmVzOiB0aGlzLmFsbG93RXhwaXJlZFNpZ25hdHVyZXMsXG5cdFx0XHRcdFx0c2lnbmluZ0tleTogdGhpcy5zaWduaW5nS2V5LFxuXHRcdFx0XHRcdHNpZ25pbmdLZXlGYWxsYmFjazogdGhpcy5zaWduaW5nS2V5RmFsbGJhY2tcblx0XHRcdFx0fSlcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0ZXJyXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRnZXRSZXNwb25zZVNpZ25hdHVyZShrZXksIGJvZHkpIHtcblx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdHJldHVybiBgdD0ke25vd30mcz0ke3NpZ25EYXRhV2l0aEtleShib2R5LCBrZXksIG5vdy50b1N0cmluZygpKX1gO1xuXHR9XG5cdC8qKlxuXHQqIExvZyB0byBzdGRvdXQvc3RkZXJyIGlmIHRoZSBsb2cgbGV2ZWwgaXMgc2V0IHRvIGluY2x1ZGUgdGhlIGdpdmVuIGxldmVsLlxuXHQqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbCBpcyBgXCJpbmZvXCJgLlxuXHQqXG5cdCogVGhpcyBpcyBhbiBhYnN0cmFjdGlvbiBvdmVyIGBjb25zb2xlLmxvZ2AgYW5kIHdpbGwgdHJ5IHRvIHVzZSB0aGUgY29ycmVjdFxuXHQqIG1ldGhvZCBmb3IgdGhlIGdpdmVuIGxvZyBsZXZlbC4gIEZvciBleGFtcGxlLCBgbG9nKFwiZXJyb3JcIiwgXCJmb29cIilgIHdpbGxcblx0KiBjYWxsIGBjb25zb2xlLmVycm9yKFwiZm9vXCIpYC5cblx0Ki9cblx0bG9nKGxldmVsLCAuLi5hcmdzKSB7XG5cdFx0Y29uc3QgbG9nTGV2ZWxzJDEgPSBbXG5cdFx0XHRcImRlYnVnXCIsXG5cdFx0XHRcImluZm9cIixcblx0XHRcdFwid2FyblwiLFxuXHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XCJmYXRhbFwiLFxuXHRcdFx0XCJzaWxlbnRcIlxuXHRcdF07XG5cdFx0Y29uc3QgbG9nTGV2ZWxTZXR0aW5nID0gbG9nTGV2ZWxzJDEuaW5kZXhPZih0aGlzLmxvZ0xldmVsKTtcblx0XHRpZiAobG9nTGV2ZWxzJDEuaW5kZXhPZihsZXZlbCkgPj0gbG9nTGV2ZWxTZXR0aW5nKSB7XG5cdFx0XHRsZXQgbG9nZ2VyID0gY29uc29sZS5sb2c7XG5cdFx0XHRpZiAoT2JqZWN0Lmhhc093bihjb25zb2xlLCBsZXZlbCkpIGxvZ2dlciA9IGNvbnNvbGVbbGV2ZWxdO1xuXHRcdFx0bG9nZ2VyKGAke2xvZ1ByZWZpeH0gJHtsZXZlbH0gLWAsIC4uLmFyZ3MpO1xuXHRcdH1cblx0fVxufTtcbnZhciBSZXF1ZXN0U2lnbmF0dXJlID0gY2xhc3Mge1xuXHR0aW1lc3RhbXA7XG5cdHNpZ25hdHVyZTtcblx0Y29uc3RydWN0b3Ioc2lnKSB7XG5cdFx0Y29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhzaWcpO1xuXHRcdHRoaXMudGltZXN0YW1wID0gcGFyYW1zLmdldChcInRcIikgfHwgXCJcIjtcblx0XHR0aGlzLnNpZ25hdHVyZSA9IHBhcmFtcy5nZXQoXCJzXCIpIHx8IFwiXCI7XG5cdFx0aWYgKCF0aGlzLnRpbWVzdGFtcCB8fCAhdGhpcy5zaWduYXR1cmUpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCAke2hlYWRlcktleXMuU2lnbmF0dXJlfSBwcm92aWRlZGApO1xuXHR9XG5cdGhhc0V4cGlyZWQoYWxsb3dFeHBpcmVkU2lnbmF0dXJlcykge1xuXHRcdGlmIChhbGxvd0V4cGlyZWRTaWduYXR1cmVzKSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIERhdGUubm93KCkgLSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKE51bWJlci5wYXJzZUludCh0aGlzLnRpbWVzdGFtcCkgKiAxZTMpKS52YWx1ZU9mKCkgPiAxZTMgKiA2MCAqIDU7XG5cdH1cblx0I3ZlcmlmeVNpZ25hdHVyZSh7IGJvZHksIHNpZ25pbmdLZXksIGFsbG93RXhwaXJlZFNpZ25hdHVyZXMgfSkge1xuXHRcdGlmICh0aGlzLmhhc0V4cGlyZWQoYWxsb3dFeHBpcmVkU2lnbmF0dXJlcykpIHRocm93IG5ldyBFcnJvcihcIlNpZ25hdHVyZSBoYXMgZXhwaXJlZFwiKTtcblx0XHRpZiAoc2lnbkRhdGFXaXRoS2V5KGJvZHksIHNpZ25pbmdLZXksIHRoaXMudGltZXN0YW1wKSAhPT0gdGhpcy5zaWduYXR1cmUpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2lnbmF0dXJlXCIpO1xuXHR9XG5cdHZlcmlmeVNpZ25hdHVyZSh7IGJvZHksIHNpZ25pbmdLZXksIHNpZ25pbmdLZXlGYWxsYmFjaywgYWxsb3dFeHBpcmVkU2lnbmF0dXJlcyB9KSB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuI3ZlcmlmeVNpZ25hdHVyZSh7XG5cdFx0XHRcdGJvZHksXG5cdFx0XHRcdHNpZ25pbmdLZXksXG5cdFx0XHRcdGFsbG93RXhwaXJlZFNpZ25hdHVyZXNcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHNpZ25pbmdLZXk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRpZiAoIXNpZ25pbmdLZXlGYWxsYmFjaykgdGhyb3cgZXJyO1xuXHRcdFx0dGhpcy4jdmVyaWZ5U2lnbmF0dXJlKHtcblx0XHRcdFx0Ym9keSxcblx0XHRcdFx0c2lnbmluZ0tleTogc2lnbmluZ0tleUZhbGxiYWNrLFxuXHRcdFx0XHRhbGxvd0V4cGlyZWRTaWduYXR1cmVzXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBzaWduaW5nS2V5RmFsbGJhY2s7XG5cdFx0fVxuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IElubmdlc3RDb21tSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdENvbW1IYW5kbGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestCommHandler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestFunction.js":
/*!************************************************************!*\
  !*** ./node_modules/inngest/components/InngestFunction.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestFunction: () => (/* binding */ InngestFunction)\n/* harmony export */ });\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _execution_v0_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./execution/v0.js */ \"(rsc)/./node_modules/inngest/components/execution/v0.js\");\n/* harmony import */ var _execution_v2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./execution/v2.js */ \"(rsc)/./node_modules/inngest/components/execution/v2.js\");\n/* harmony import */ var _execution_v1_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./execution/v1.js */ \"(rsc)/./node_modules/inngest/components/execution/v1.js\");\n\n\n\n\n\n\n//#region src/components/InngestFunction.ts\n/**\n* A stateless Inngest function, wrapping up function configuration and any\n* in-memory steps to run when triggered.\n*\n* This function can be \"registered\" to create a handler that Inngest can\n* trigger remotely.\n*\n* @public\n*/\nvar InngestFunction = class InngestFunction {\n\tstatic stepId = \"step\";\n\tstatic failureSuffix = \"-failure\";\n\tget [Symbol.toStringTag]() {\n\t\treturn InngestFunction.Tag;\n\t}\n\topts;\n\tfn;\n\tonFailureFn;\n\tclient;\n\tmiddleware;\n\t/**\n\t* A stateless Inngest function, wrapping up function configuration and any\n\t* in-memory steps to run when triggered.\n\t*\n\t* This function can be \"registered\" to create a handler that Inngest can\n\t* trigger remotely.\n\t*/\n\tconstructor(client, opts, fn) {\n\t\tthis.client = client;\n\t\tthis.opts = opts;\n\t\tthis.fn = fn;\n\t\tthis.onFailureFn = this.opts.onFailure;\n\t\tthis.middleware = this.client[\"initializeMiddleware\"](this.opts.middleware, {\n\t\t\tregisterInput: { fn: this },\n\t\t\tprefixStack: this.client[\"middleware\"]\n\t\t});\n\t}\n\t/**\n\t* The generated or given ID for this function.\n\t*/\n\tid(prefix) {\n\t\treturn [prefix, this.opts.id].filter(Boolean).join(\"-\");\n\t}\n\t/**\n\t* The generated or given ID for this function, prefixed with the app ID. This\n\t* is used for routing invokes and identifying the function across apps.\n\t*/\n\tget absoluteId() {\n\t\treturn this.id(this.client.id);\n\t}\n\t/**\n\t* The name of this function as it will appear in the Inngest Cloud UI.\n\t*/\n\tget name() {\n\t\treturn this.opts.name || this.id();\n\t}\n\t/**\n\t* The description of this function.\n\t*/\n\tget description() {\n\t\treturn this.opts.description;\n\t}\n\t/**\n\t* Retrieve the Inngest config for this function.\n\t*/\n\tgetConfig({ baseUrl, appPrefix, isConnect }) {\n\t\tconst fnId = this.id(appPrefix);\n\t\tconst stepUrl = new URL(baseUrl.href);\n\t\tstepUrl.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.queryKeys.FnId, fnId);\n\t\tstepUrl.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.queryKeys.StepId, InngestFunction.stepId);\n\t\tconst { retries: attempts, cancelOn, idempotency, batchEvents, rateLimit, throttle, concurrency, debounce, timeouts, priority, singleton } = this.opts;\n\t\t/**\n\t\t* Convert retries into the format required when defining function\n\t\t* configuration.\n\t\t*/\n\t\tconst retries = typeof attempts === \"undefined\" ? void 0 : { attempts };\n\t\tconst fn = {\n\t\t\tid: fnId,\n\t\t\tname: this.name,\n\t\t\ttriggers: (this.opts.triggers ?? []).map((trigger) => {\n\t\t\t\tif (\"event\" in trigger) return {\n\t\t\t\t\tevent: trigger.event,\n\t\t\t\t\texpression: trigger.if\n\t\t\t\t};\n\t\t\t\treturn { cron: trigger.cron };\n\t\t\t}),\n\t\t\tsteps: { [InngestFunction.stepId]: {\n\t\t\t\tid: InngestFunction.stepId,\n\t\t\t\tname: InngestFunction.stepId,\n\t\t\t\truntime: {\n\t\t\t\t\ttype: isConnect ? \"ws\" : \"http\",\n\t\t\t\t\turl: stepUrl.href\n\t\t\t\t},\n\t\t\t\tretries\n\t\t\t} },\n\t\t\tidempotency,\n\t\t\tbatchEvents,\n\t\t\trateLimit,\n\t\t\tthrottle,\n\t\t\tconcurrency,\n\t\t\tdebounce,\n\t\t\tpriority,\n\t\t\ttimeouts,\n\t\t\tsingleton\n\t\t};\n\t\tif (cancelOn) fn.cancel = cancelOn.map(({ event, timeout, if: ifStr, match }) => {\n\t\t\tconst ret = { event };\n\t\t\tif (timeout) ret.timeout = (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_1__.timeStr)(timeout);\n\t\t\tif (match) ret.if = `event.${match} == async.${match}`;\n\t\t\telse if (ifStr) ret.if = ifStr;\n\t\t\treturn ret;\n\t\t}, []);\n\t\tconst config = [fn];\n\t\tif (this.onFailureFn) {\n\t\t\tconst id = `${fn.id}${InngestFunction.failureSuffix}`;\n\t\t\tconst name = `${fn.name ?? fn.id} (failure)`;\n\t\t\tconst failureStepUrl = new URL(stepUrl.href);\n\t\t\tfailureStepUrl.searchParams.set(_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.queryKeys.FnId, id);\n\t\t\tconfig.push({\n\t\t\t\tid,\n\t\t\t\tname,\n\t\t\t\ttriggers: [{\n\t\t\t\t\tevent: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.internalEvents.FunctionFailed,\n\t\t\t\t\texpression: `event.data.function_id == '${fnId}'`\n\t\t\t\t}],\n\t\t\t\tsteps: { [InngestFunction.stepId]: {\n\t\t\t\t\tid: InngestFunction.stepId,\n\t\t\t\t\tname: InngestFunction.stepId,\n\t\t\t\t\truntime: {\n\t\t\t\t\t\ttype: \"http\",\n\t\t\t\t\t\turl: failureStepUrl.href\n\t\t\t\t\t},\n\t\t\t\t\tretries: { attempts: 1 }\n\t\t\t\t} }\n\t\t\t});\n\t\t}\n\t\treturn config;\n\t}\n\tcreateExecution(opts) {\n\t\tconst options = {\n\t\t\tfn: this,\n\t\t\t...opts.partialOptions\n\t\t};\n\t\treturn {\n\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionVersion.V2]: () => (0,_execution_v2_js__WEBPACK_IMPORTED_MODULE_2__.createV2InngestExecution)(options),\n\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionVersion.V1]: () => (0,_execution_v1_js__WEBPACK_IMPORTED_MODULE_3__.createV1InngestExecution)(options),\n\t\t\t[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionVersion.V0]: () => (0,_execution_v0_js__WEBPACK_IMPORTED_MODULE_4__.createV0InngestExecution)(options)\n\t\t}[opts.version]();\n\t}\n\tshouldOptimizeParallelism() {\n\t\treturn this.opts.optimizeParallelism ?? this.client[\"options\"].optimizeParallelism ?? false;\n\t}\n\tshouldAsyncCheckpoint(requestedRunStep, internalFnId, disableImmediateExecution) {\n\t\tif (requestedRunStep || !internalFnId || disableImmediateExecution) return;\n\t\treturn this.opts.checkpointing ?? this.client[\"options\"].checkpointing ?? this.opts.experimentalCheckpointing ?? this.client[\"options\"].experimentalCheckpointing;\n\t}\n};\n(function(_InngestFunction) {\n\t_InngestFunction.Tag = \"Inngest.Function\";\n})(InngestFunction || (InngestFunction = {}));\n\n//#endregion\n\n//# sourceMappingURL=InngestFunction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RGdW5jdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBbUY7QUFDbkM7QUFDYTtBQUNBO0FBQ0E7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0JBQStCO0FBQzVDO0FBQ0E7QUFDQSwyQkFBMkIseURBQVM7QUFDcEMsMkJBQTJCLHlEQUFTO0FBQ3BDLFVBQVUsbUlBQW1JO0FBQzdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsSUFBSTtBQUNKLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGtDQUFrQztBQUM5RSxpQkFBaUI7QUFDakIsOEJBQThCLDREQUFPO0FBQ3JDLGdDQUFnQyxPQUFPLFdBQVcsTUFBTTtBQUN4RDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTSxFQUFFLDhCQUE4QjtBQUN2RCxtQkFBbUIsa0JBQWtCO0FBQ3JDO0FBQ0EsbUNBQW1DLHlEQUFTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBYztBQUMxQiwrQ0FBK0MsS0FBSztBQUNwRCxLQUFLO0FBQ0wsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZ0JBQWdCO0FBQ2hCO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0VBQWdCLFlBQVksMEVBQXdCO0FBQ3hELElBQUksZ0VBQWdCLFlBQVksMEVBQXdCO0FBQ3hELElBQUksZ0VBQWdCLFlBQVksMEVBQXdCO0FBQ3hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEM7O0FBRTNDO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9Jbm5nZXN0RnVuY3Rpb24uanM/ODM2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeGVjdXRpb25WZXJzaW9uLCBpbnRlcm5hbEV2ZW50cywgcXVlcnlLZXlzIH0gZnJvbSBcIi4uL2hlbHBlcnMvY29uc3RzLmpzXCI7XG5pbXBvcnQgeyB0aW1lU3RyIH0gZnJvbSBcIi4uL2hlbHBlcnMvc3RyaW5ncy5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlVjBJbm5nZXN0RXhlY3V0aW9uIH0gZnJvbSBcIi4vZXhlY3V0aW9uL3YwLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVWMklubmdlc3RFeGVjdXRpb24gfSBmcm9tIFwiLi9leGVjdXRpb24vdjIuanNcIjtcbmltcG9ydCB7IGNyZWF0ZVYxSW5uZ2VzdEV4ZWN1dGlvbiB9IGZyb20gXCIuL2V4ZWN1dGlvbi92MS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvSW5uZ2VzdEZ1bmN0aW9uLnRzXG4vKipcbiogQSBzdGF0ZWxlc3MgSW5uZ2VzdCBmdW5jdGlvbiwgd3JhcHBpbmcgdXAgZnVuY3Rpb24gY29uZmlndXJhdGlvbiBhbmQgYW55XG4qIGluLW1lbW9yeSBzdGVwcyB0byBydW4gd2hlbiB0cmlnZ2VyZWQuXG4qXG4qIFRoaXMgZnVuY3Rpb24gY2FuIGJlIFwicmVnaXN0ZXJlZFwiIHRvIGNyZWF0ZSBhIGhhbmRsZXIgdGhhdCBJbm5nZXN0IGNhblxuKiB0cmlnZ2VyIHJlbW90ZWx5LlxuKlxuKiBAcHVibGljXG4qL1xudmFyIElubmdlc3RGdW5jdGlvbiA9IGNsYXNzIElubmdlc3RGdW5jdGlvbiB7XG5cdHN0YXRpYyBzdGVwSWQgPSBcInN0ZXBcIjtcblx0c3RhdGljIGZhaWx1cmVTdWZmaXggPSBcIi1mYWlsdXJlXCI7XG5cdGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcblx0XHRyZXR1cm4gSW5uZ2VzdEZ1bmN0aW9uLlRhZztcblx0fVxuXHRvcHRzO1xuXHRmbjtcblx0b25GYWlsdXJlRm47XG5cdGNsaWVudDtcblx0bWlkZGxld2FyZTtcblx0LyoqXG5cdCogQSBzdGF0ZWxlc3MgSW5uZ2VzdCBmdW5jdGlvbiwgd3JhcHBpbmcgdXAgZnVuY3Rpb24gY29uZmlndXJhdGlvbiBhbmQgYW55XG5cdCogaW4tbWVtb3J5IHN0ZXBzIHRvIHJ1biB3aGVuIHRyaWdnZXJlZC5cblx0KlxuXHQqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIFwicmVnaXN0ZXJlZFwiIHRvIGNyZWF0ZSBhIGhhbmRsZXIgdGhhdCBJbm5nZXN0IGNhblxuXHQqIHRyaWdnZXIgcmVtb3RlbHkuXG5cdCovXG5cdGNvbnN0cnVjdG9yKGNsaWVudCwgb3B0cywgZm4pIHtcblx0XHR0aGlzLmNsaWVudCA9IGNsaWVudDtcblx0XHR0aGlzLm9wdHMgPSBvcHRzO1xuXHRcdHRoaXMuZm4gPSBmbjtcblx0XHR0aGlzLm9uRmFpbHVyZUZuID0gdGhpcy5vcHRzLm9uRmFpbHVyZTtcblx0XHR0aGlzLm1pZGRsZXdhcmUgPSB0aGlzLmNsaWVudFtcImluaXRpYWxpemVNaWRkbGV3YXJlXCJdKHRoaXMub3B0cy5taWRkbGV3YXJlLCB7XG5cdFx0XHRyZWdpc3RlcklucHV0OiB7IGZuOiB0aGlzIH0sXG5cdFx0XHRwcmVmaXhTdGFjazogdGhpcy5jbGllbnRbXCJtaWRkbGV3YXJlXCJdXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCogVGhlIGdlbmVyYXRlZCBvciBnaXZlbiBJRCBmb3IgdGhpcyBmdW5jdGlvbi5cblx0Ki9cblx0aWQocHJlZml4KSB7XG5cdFx0cmV0dXJuIFtwcmVmaXgsIHRoaXMub3B0cy5pZF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCItXCIpO1xuXHR9XG5cdC8qKlxuXHQqIFRoZSBnZW5lcmF0ZWQgb3IgZ2l2ZW4gSUQgZm9yIHRoaXMgZnVuY3Rpb24sIHByZWZpeGVkIHdpdGggdGhlIGFwcCBJRC4gVGhpc1xuXHQqIGlzIHVzZWQgZm9yIHJvdXRpbmcgaW52b2tlcyBhbmQgaWRlbnRpZnlpbmcgdGhlIGZ1bmN0aW9uIGFjcm9zcyBhcHBzLlxuXHQqL1xuXHRnZXQgYWJzb2x1dGVJZCgpIHtcblx0XHRyZXR1cm4gdGhpcy5pZCh0aGlzLmNsaWVudC5pZCk7XG5cdH1cblx0LyoqXG5cdCogVGhlIG5hbWUgb2YgdGhpcyBmdW5jdGlvbiBhcyBpdCB3aWxsIGFwcGVhciBpbiB0aGUgSW5uZ2VzdCBDbG91ZCBVSS5cblx0Ki9cblx0Z2V0IG5hbWUoKSB7XG5cdFx0cmV0dXJuIHRoaXMub3B0cy5uYW1lIHx8IHRoaXMuaWQoKTtcblx0fVxuXHQvKipcblx0KiBUaGUgZGVzY3JpcHRpb24gb2YgdGhpcyBmdW5jdGlvbi5cblx0Ki9cblx0Z2V0IGRlc2NyaXB0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm9wdHMuZGVzY3JpcHRpb247XG5cdH1cblx0LyoqXG5cdCogUmV0cmlldmUgdGhlIElubmdlc3QgY29uZmlnIGZvciB0aGlzIGZ1bmN0aW9uLlxuXHQqL1xuXHRnZXRDb25maWcoeyBiYXNlVXJsLCBhcHBQcmVmaXgsIGlzQ29ubmVjdCB9KSB7XG5cdFx0Y29uc3QgZm5JZCA9IHRoaXMuaWQoYXBwUHJlZml4KTtcblx0XHRjb25zdCBzdGVwVXJsID0gbmV3IFVSTChiYXNlVXJsLmhyZWYpO1xuXHRcdHN0ZXBVcmwuc2VhcmNoUGFyYW1zLnNldChxdWVyeUtleXMuRm5JZCwgZm5JZCk7XG5cdFx0c3RlcFVybC5zZWFyY2hQYXJhbXMuc2V0KHF1ZXJ5S2V5cy5TdGVwSWQsIElubmdlc3RGdW5jdGlvbi5zdGVwSWQpO1xuXHRcdGNvbnN0IHsgcmV0cmllczogYXR0ZW1wdHMsIGNhbmNlbE9uLCBpZGVtcG90ZW5jeSwgYmF0Y2hFdmVudHMsIHJhdGVMaW1pdCwgdGhyb3R0bGUsIGNvbmN1cnJlbmN5LCBkZWJvdW5jZSwgdGltZW91dHMsIHByaW9yaXR5LCBzaW5nbGV0b24gfSA9IHRoaXMub3B0cztcblx0XHQvKipcblx0XHQqIENvbnZlcnQgcmV0cmllcyBpbnRvIHRoZSBmb3JtYXQgcmVxdWlyZWQgd2hlbiBkZWZpbmluZyBmdW5jdGlvblxuXHRcdCogY29uZmlndXJhdGlvbi5cblx0XHQqL1xuXHRcdGNvbnN0IHJldHJpZXMgPSB0eXBlb2YgYXR0ZW1wdHMgPT09IFwidW5kZWZpbmVkXCIgPyB2b2lkIDAgOiB7IGF0dGVtcHRzIH07XG5cdFx0Y29uc3QgZm4gPSB7XG5cdFx0XHRpZDogZm5JZCxcblx0XHRcdG5hbWU6IHRoaXMubmFtZSxcblx0XHRcdHRyaWdnZXJzOiAodGhpcy5vcHRzLnRyaWdnZXJzID8/IFtdKS5tYXAoKHRyaWdnZXIpID0+IHtcblx0XHRcdFx0aWYgKFwiZXZlbnRcIiBpbiB0cmlnZ2VyKSByZXR1cm4ge1xuXHRcdFx0XHRcdGV2ZW50OiB0cmlnZ2VyLmV2ZW50LFxuXHRcdFx0XHRcdGV4cHJlc3Npb246IHRyaWdnZXIuaWZcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIHsgY3JvbjogdHJpZ2dlci5jcm9uIH07XG5cdFx0XHR9KSxcblx0XHRcdHN0ZXBzOiB7IFtJbm5nZXN0RnVuY3Rpb24uc3RlcElkXToge1xuXHRcdFx0XHRpZDogSW5uZ2VzdEZ1bmN0aW9uLnN0ZXBJZCxcblx0XHRcdFx0bmFtZTogSW5uZ2VzdEZ1bmN0aW9uLnN0ZXBJZCxcblx0XHRcdFx0cnVudGltZToge1xuXHRcdFx0XHRcdHR5cGU6IGlzQ29ubmVjdCA/IFwid3NcIiA6IFwiaHR0cFwiLFxuXHRcdFx0XHRcdHVybDogc3RlcFVybC5ocmVmXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJldHJpZXNcblx0XHRcdH0gfSxcblx0XHRcdGlkZW1wb3RlbmN5LFxuXHRcdFx0YmF0Y2hFdmVudHMsXG5cdFx0XHRyYXRlTGltaXQsXG5cdFx0XHR0aHJvdHRsZSxcblx0XHRcdGNvbmN1cnJlbmN5LFxuXHRcdFx0ZGVib3VuY2UsXG5cdFx0XHRwcmlvcml0eSxcblx0XHRcdHRpbWVvdXRzLFxuXHRcdFx0c2luZ2xldG9uXG5cdFx0fTtcblx0XHRpZiAoY2FuY2VsT24pIGZuLmNhbmNlbCA9IGNhbmNlbE9uLm1hcCgoeyBldmVudCwgdGltZW91dCwgaWY6IGlmU3RyLCBtYXRjaCB9KSA9PiB7XG5cdFx0XHRjb25zdCByZXQgPSB7IGV2ZW50IH07XG5cdFx0XHRpZiAodGltZW91dCkgcmV0LnRpbWVvdXQgPSB0aW1lU3RyKHRpbWVvdXQpO1xuXHRcdFx0aWYgKG1hdGNoKSByZXQuaWYgPSBgZXZlbnQuJHttYXRjaH0gPT0gYXN5bmMuJHttYXRjaH1gO1xuXHRcdFx0ZWxzZSBpZiAoaWZTdHIpIHJldC5pZiA9IGlmU3RyO1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LCBbXSk7XG5cdFx0Y29uc3QgY29uZmlnID0gW2ZuXTtcblx0XHRpZiAodGhpcy5vbkZhaWx1cmVGbikge1xuXHRcdFx0Y29uc3QgaWQgPSBgJHtmbi5pZH0ke0lubmdlc3RGdW5jdGlvbi5mYWlsdXJlU3VmZml4fWA7XG5cdFx0XHRjb25zdCBuYW1lID0gYCR7Zm4ubmFtZSA/PyBmbi5pZH0gKGZhaWx1cmUpYDtcblx0XHRcdGNvbnN0IGZhaWx1cmVTdGVwVXJsID0gbmV3IFVSTChzdGVwVXJsLmhyZWYpO1xuXHRcdFx0ZmFpbHVyZVN0ZXBVcmwuc2VhcmNoUGFyYW1zLnNldChxdWVyeUtleXMuRm5JZCwgaWQpO1xuXHRcdFx0Y29uZmlnLnB1c2goe1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0bmFtZSxcblx0XHRcdFx0dHJpZ2dlcnM6IFt7XG5cdFx0XHRcdFx0ZXZlbnQ6IGludGVybmFsRXZlbnRzLkZ1bmN0aW9uRmFpbGVkLFxuXHRcdFx0XHRcdGV4cHJlc3Npb246IGBldmVudC5kYXRhLmZ1bmN0aW9uX2lkID09ICcke2ZuSWR9J2Bcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHN0ZXBzOiB7IFtJbm5nZXN0RnVuY3Rpb24uc3RlcElkXToge1xuXHRcdFx0XHRcdGlkOiBJbm5nZXN0RnVuY3Rpb24uc3RlcElkLFxuXHRcdFx0XHRcdG5hbWU6IElubmdlc3RGdW5jdGlvbi5zdGVwSWQsXG5cdFx0XHRcdFx0cnVudGltZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJodHRwXCIsXG5cdFx0XHRcdFx0XHR1cmw6IGZhaWx1cmVTdGVwVXJsLmhyZWZcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJldHJpZXM6IHsgYXR0ZW1wdHM6IDEgfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gY29uZmlnO1xuXHR9XG5cdGNyZWF0ZUV4ZWN1dGlvbihvcHRzKSB7XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRcdGZuOiB0aGlzLFxuXHRcdFx0Li4ub3B0cy5wYXJ0aWFsT3B0aW9uc1xuXHRcdH07XG5cdFx0cmV0dXJuIHtcblx0XHRcdFtFeGVjdXRpb25WZXJzaW9uLlYyXTogKCkgPT4gY3JlYXRlVjJJbm5nZXN0RXhlY3V0aW9uKG9wdGlvbnMpLFxuXHRcdFx0W0V4ZWN1dGlvblZlcnNpb24uVjFdOiAoKSA9PiBjcmVhdGVWMUlubmdlc3RFeGVjdXRpb24ob3B0aW9ucyksXG5cdFx0XHRbRXhlY3V0aW9uVmVyc2lvbi5WMF06ICgpID0+IGNyZWF0ZVYwSW5uZ2VzdEV4ZWN1dGlvbihvcHRpb25zKVxuXHRcdH1bb3B0cy52ZXJzaW9uXSgpO1xuXHR9XG5cdHNob3VsZE9wdGltaXplUGFyYWxsZWxpc20oKSB7XG5cdFx0cmV0dXJuIHRoaXMub3B0cy5vcHRpbWl6ZVBhcmFsbGVsaXNtID8/IHRoaXMuY2xpZW50W1wib3B0aW9uc1wiXS5vcHRpbWl6ZVBhcmFsbGVsaXNtID8/IGZhbHNlO1xuXHR9XG5cdHNob3VsZEFzeW5jQ2hlY2twb2ludChyZXF1ZXN0ZWRSdW5TdGVwLCBpbnRlcm5hbEZuSWQsIGRpc2FibGVJbW1lZGlhdGVFeGVjdXRpb24pIHtcblx0XHRpZiAocmVxdWVzdGVkUnVuU3RlcCB8fCAhaW50ZXJuYWxGbklkIHx8IGRpc2FibGVJbW1lZGlhdGVFeGVjdXRpb24pIHJldHVybjtcblx0XHRyZXR1cm4gdGhpcy5vcHRzLmNoZWNrcG9pbnRpbmcgPz8gdGhpcy5jbGllbnRbXCJvcHRpb25zXCJdLmNoZWNrcG9pbnRpbmcgPz8gdGhpcy5vcHRzLmV4cGVyaW1lbnRhbENoZWNrcG9pbnRpbmcgPz8gdGhpcy5jbGllbnRbXCJvcHRpb25zXCJdLmV4cGVyaW1lbnRhbENoZWNrcG9pbnRpbmc7XG5cdH1cbn07XG4oZnVuY3Rpb24oX0lubmdlc3RGdW5jdGlvbikge1xuXHRfSW5uZ2VzdEZ1bmN0aW9uLlRhZyA9IFwiSW5uZ2VzdC5GdW5jdGlvblwiO1xufSkoSW5uZ2VzdEZ1bmN0aW9uIHx8IChJbm5nZXN0RnVuY3Rpb24gPSB7fSkpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IElubmdlc3RGdW5jdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdEZ1bmN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestFunction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestFunctionReference.js":
/*!*********************************************************************!*\
  !*** ./node_modules/inngest/components/InngestFunctionReference.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestFunctionReference: () => (/* binding */ InngestFunctionReference),\n/* harmony export */   referenceFunction: () => (/* binding */ referenceFunction)\n/* harmony export */ });\n//#region src/components/InngestFunctionReference.ts\n/**\n* A reference to an `InngestFunction` that can be used to represent both local\n* and remote functions without pulling in the full function definition (i.e.\n* dependencies).\n*\n* These references can be invoked in the same manner as a regular\n* `InngestFunction`.\n*\n* To create a reference function, use the {@link referenceFunction} helper.\n*\n* @public\n*/\nvar InngestFunctionReference = class InngestFunctionReference {\n\tget [Symbol.toStringTag]() {\n\t\treturn InngestFunctionReference.Tag;\n\t}\n\tconstructor(opts) {\n\t\tthis.opts = opts;\n\t}\n};\n/**\n* Create a reference to an `InngestFunction` that can be used to represent both\n* local and remote functions without pulling in the full function definition\n* (i.e. dependencies).\n*\n* These references can be invoked in the same manner as a regular\n* `InngestFunction`.\n*\n* @public\n*/\nconst referenceFunction = ({ functionId, appId }) => {\n\treturn new InngestFunctionReference({\n\t\tfunctionId,\n\t\tappId\n\t});\n};\n(function(_InngestFunctionReference) {\n\t_InngestFunctionReference.Tag = \"Inngest.FunctionReference\";\n})(InngestFunctionReference || (InngestFunctionReference = {}));\n\n//#endregion\n\n//# sourceMappingURL=InngestFunctionReference.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RGdW5jdGlvblJlZmVyZW5jZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx5QkFBeUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1CQUFtQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0REFBNEQ7O0FBRTdEO0FBQ3VEO0FBQ3ZEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9Jbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UuanM/ZmZlYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlLnRzXG4vKipcbiogQSByZWZlcmVuY2UgdG8gYW4gYElubmdlc3RGdW5jdGlvbmAgdGhhdCBjYW4gYmUgdXNlZCB0byByZXByZXNlbnQgYm90aCBsb2NhbFxuKiBhbmQgcmVtb3RlIGZ1bmN0aW9ucyB3aXRob3V0IHB1bGxpbmcgaW4gdGhlIGZ1bGwgZnVuY3Rpb24gZGVmaW5pdGlvbiAoaS5lLlxuKiBkZXBlbmRlbmNpZXMpLlxuKlxuKiBUaGVzZSByZWZlcmVuY2VzIGNhbiBiZSBpbnZva2VkIGluIHRoZSBzYW1lIG1hbm5lciBhcyBhIHJlZ3VsYXJcbiogYElubmdlc3RGdW5jdGlvbmAuXG4qXG4qIFRvIGNyZWF0ZSBhIHJlZmVyZW5jZSBmdW5jdGlvbiwgdXNlIHRoZSB7QGxpbmsgcmVmZXJlbmNlRnVuY3Rpb259IGhlbHBlci5cbipcbiogQHB1YmxpY1xuKi9cbnZhciBJbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UgPSBjbGFzcyBJbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2Uge1xuXHRnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG5cdFx0cmV0dXJuIElubmdlc3RGdW5jdGlvblJlZmVyZW5jZS5UYWc7XG5cdH1cblx0Y29uc3RydWN0b3Iob3B0cykge1xuXHRcdHRoaXMub3B0cyA9IG9wdHM7XG5cdH1cbn07XG4vKipcbiogQ3JlYXRlIGEgcmVmZXJlbmNlIHRvIGFuIGBJbm5nZXN0RnVuY3Rpb25gIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVwcmVzZW50IGJvdGhcbiogbG9jYWwgYW5kIHJlbW90ZSBmdW5jdGlvbnMgd2l0aG91dCBwdWxsaW5nIGluIHRoZSBmdWxsIGZ1bmN0aW9uIGRlZmluaXRpb25cbiogKGkuZS4gZGVwZW5kZW5jaWVzKS5cbipcbiogVGhlc2UgcmVmZXJlbmNlcyBjYW4gYmUgaW52b2tlZCBpbiB0aGUgc2FtZSBtYW5uZXIgYXMgYSByZWd1bGFyXG4qIGBJbm5nZXN0RnVuY3Rpb25gLlxuKlxuKiBAcHVibGljXG4qL1xuY29uc3QgcmVmZXJlbmNlRnVuY3Rpb24gPSAoeyBmdW5jdGlvbklkLCBhcHBJZCB9KSA9PiB7XG5cdHJldHVybiBuZXcgSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlKHtcblx0XHRmdW5jdGlvbklkLFxuXHRcdGFwcElkXG5cdH0pO1xufTtcbihmdW5jdGlvbihfSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlKSB7XG5cdF9Jbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UuVGFnID0gXCJJbm5nZXN0LkZ1bmN0aW9uUmVmZXJlbmNlXCI7XG59KShJbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UgfHwgKElubmdlc3RGdW5jdGlvblJlZmVyZW5jZSA9IHt9KSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlLCByZWZlcmVuY2VGdW5jdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdEZ1bmN0aW9uUmVmZXJlbmNlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestFunctionReference.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestMetadata.js":
/*!************************************************************!*\
  !*** ./node_modules/inngest/components/InngestMetadata.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UnscopedMetadataBuilder: () => (/* binding */ UnscopedMetadataBuilder),\n/* harmony export */   metadataMiddleware: () => (/* binding */ metadataMiddleware),\n/* harmony export */   metadataSymbol: () => (/* binding */ metadataSymbol)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n\n\n\n//#region src/components/InngestMetadata.ts\n/**\n* Configures and sends metadata updates.\n*\n* It sends metadata updates via step opcodes if the metadata is\n* configured to be attached to the current run/step/step attempt\n* and `update` is called inside of `step.run`.\n*\n* Otherwise it sends updates via the Inngest API.\n*/\nvar UnscopedMetadataBuilder = class UnscopedMetadataBuilder {\n\tconstructor(client, config = {}) {\n\t\tthis.client = client;\n\t\tthis.config = config;\n\t}\n\trun(id) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\trunId: id ?? null\n\t\t});\n\t}\n\tstep(id, index) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\tstepId: id ?? null,\n\t\t\tstepIndex: index ?? 0\n\t\t});\n\t}\n\tattempt(attempt) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\tattempt: attempt ?? null\n\t\t});\n\t}\n\tspan(id) {\n\t\treturn new UnscopedMetadataBuilder(this.client, {\n\t\t\t...this.config,\n\t\t\tspanId: id\n\t\t});\n\t}\n\tasync update(values, kind = \"default\") {\n\t\tawait performOp(this.client, this.config, values, `userland.${kind}`, \"merge\");\n\t}\n\ttoJSON() {\n\t\treturn this.config;\n\t}\n};\n/**\n* Creates a `MetadataTarget` based on the current execution context and the `BuilderConfig` created using\n* `MetadataBuilder`.\n*/\nfunction buildTarget(config, ctx) {\n\tconst ctxExecution = ctx?.execution;\n\tconst ctxRunId = ctxExecution?.ctx?.runId;\n\tconst ctxStepId = ctxExecution?.executingStep?.id;\n\tconst ctxAttempt = ctxExecution?.ctx?.attempt;\n\tconst targetRunId = config.runId ?? ctxRunId;\n\tif (!targetRunId) throw new Error(\"No run context available\");\n\tconst isSameRunAsCtx = ctxRunId !== void 0 && targetRunId === ctxRunId;\n\tconst stepCtxReason = !ctxExecution ? \"no function execution context is available\" : !ctxExecution.executingStep ? \"you are not inside a step.run() callback\" : \"you are targeting a different run\";\n\tif (config.attempt === null && (!isSameRunAsCtx || !ctxExecution?.executingStep)) throw new Error(`attempt() was called without a value, but ${stepCtxReason}`);\n\tif (config.stepId === null && (!isSameRunAsCtx || !ctxExecution?.executingStep)) throw new Error(`step() was called without a value, but ${stepCtxReason}`);\n\tif (config.spanId !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: config.stepId ?? ctxStepId,\n\t\tstep_index: config.stepIndex,\n\t\tstep_attempt: config.attempt ?? ctxAttempt,\n\t\tspan_id: config.spanId\n\t};\n\telse if (config.attempt !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: config.stepId ?? ctxStepId,\n\t\tstep_index: config.stepIndex,\n\t\tstep_attempt: config.attempt ?? ctxAttempt\n\t};\n\telse if (config.stepId !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: config.stepId ?? ctxStepId,\n\t\tstep_index: config.stepIndex\n\t};\n\telse if (config.runId !== void 0) return { run_id: targetRunId };\n\telse if (ctxStepId && ctxAttempt !== void 0) return {\n\t\trun_id: targetRunId,\n\t\tstep_id: ctxStepId,\n\t\tstep_attempt: ctxAttempt\n\t};\n\telse return { run_id: targetRunId };\n}\n/**\n* Creates a metadata array payload for API calls.\n*/\nfunction createMetadataPayload(kind, op, metadata) {\n\treturn [{\n\t\tkind,\n\t\top,\n\t\tvalues: metadata\n\t}];\n}\n/**\n* Sends metadata update via REST API to a specific target.\n*/\nasync function sendMetadataViaAPI(client, target, kind, op, metadata, headers) {\n\tconst metadataArray = createMetadataPayload(kind, op, metadata);\n\tawait client[\"updateMetadata\"]({\n\t\ttarget,\n\t\tmetadata: metadataArray,\n\t\theaders\n\t});\n}\nfunction getBatchScope(config) {\n\tif (config.spanId !== void 0) return \"extended_trace\";\n\tif (config.attempt !== void 0) return \"step_attempt\";\n\tif (config.stepId !== void 0) return \"step\";\n\tif (config.runId !== void 0) return \"run\";\n\treturn \"step_attempt\";\n}\nasync function performOp(client, config, values, kind, op) {\n\tconst ctx = await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_0__.getAsyncCtx)();\n\tconst target = buildTarget(config, ctx);\n\tconst isInsideRun = !!ctx?.execution;\n\tconst isInsideStep = !!ctx?.execution?.executingStep;\n\tif (isInsideRun && !isInsideStep) console.warn(\"inngest: metadata.update() called outside of a step. This metadata may be lost on retries. Wrap the call in step.run() for durable metadata.\");\n\tconst runId = config.runId ?? ctx?.execution?.ctx?.runId;\n\tconst stepId = config.stepId ?? ctx?.execution?.executingStep?.id;\n\tconst attempt = config.attempt ?? ctx?.execution?.ctx?.attempt;\n\tif (runId === ctx?.execution?.ctx?.runId && stepId === ctx?.execution?.executingStep?.id && attempt === ctx?.execution?.ctx?.attempt && !config.spanId) {\n\t\tconst executingStep = ctx?.execution?.executingStep;\n\t\tconst execInstance = ctx?.execution?.instance;\n\t\tconst scope = getBatchScope(config);\n\t\tif (executingStep?.id && execInstance && execInstance.addMetadata(executingStep.id, kind, scope, op, values)) return;\n\t}\n\tawait sendMetadataViaAPI(client, target, kind, op, values, (ctx?.execution?.instance)?.options?.headers ?? void 0);\n}\nconst metadataSymbol = Symbol.for(\"inngest.step.metadata\");\n/**\n* Middleware that enables the experimental step.metadata() feature.\n*\n* @example\n* ```ts\n* import { metadataMiddleware } from \"inngest/experimental\";\n*\n* const inngest = new Inngest({\n*   id: \"my-app\",\n*   middleware: [metadataMiddleware()],\n* });\n* ```\n*/\nconst metadataMiddleware = () => {\n\treturn new _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.InngestMiddleware({\n\t\tname: \"Inngest: Experimental Metadata\",\n\t\tinit({ client }) {\n\t\t\tclient[\"experimentalMetadataEnabled\"] = true;\n\t\t\treturn { onFunctionRun() {\n\t\t\t\treturn { transformInput(input) {\n\t\t\t\t\treturn { ctx: { step: {\n\t\t\t\t\t\t...input.ctx.step,\n\t\t\t\t\t\tmetadata: input.ctx.step[metadataSymbol]\n\t\t\t\t\t} } };\n\t\t\t\t} };\n\t\t\t} };\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestMetadata.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RNZXRhZGF0YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRDtBQUNVOztBQUUzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdFQUFnRSxLQUFLO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdKQUFnSixjQUFjO0FBQzlKLDRJQUE0SSxjQUFjO0FBQzFKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsOERBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvRUFBaUI7QUFDN0I7QUFDQSxTQUFTLFFBQVE7QUFDakI7QUFDQSxZQUFZO0FBQ1osYUFBYTtBQUNiLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDdUU7QUFDdkUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RNZXRhZGF0YS5qcz80ODVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFzeW5jQ3R4IH0gZnJvbSBcIi4vZXhlY3V0aW9uL2Fscy5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdE1pZGRsZXdhcmUgfSBmcm9tIFwiLi9Jbm5nZXN0TWlkZGxld2FyZS5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvSW5uZ2VzdE1ldGFkYXRhLnRzXG4vKipcbiogQ29uZmlndXJlcyBhbmQgc2VuZHMgbWV0YWRhdGEgdXBkYXRlcy5cbipcbiogSXQgc2VuZHMgbWV0YWRhdGEgdXBkYXRlcyB2aWEgc3RlcCBvcGNvZGVzIGlmIHRoZSBtZXRhZGF0YSBpc1xuKiBjb25maWd1cmVkIHRvIGJlIGF0dGFjaGVkIHRvIHRoZSBjdXJyZW50IHJ1bi9zdGVwL3N0ZXAgYXR0ZW1wdFxuKiBhbmQgYHVwZGF0ZWAgaXMgY2FsbGVkIGluc2lkZSBvZiBgc3RlcC5ydW5gLlxuKlxuKiBPdGhlcndpc2UgaXQgc2VuZHMgdXBkYXRlcyB2aWEgdGhlIElubmdlc3QgQVBJLlxuKi9cbnZhciBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlciA9IGNsYXNzIFVuc2NvcGVkTWV0YWRhdGFCdWlsZGVyIHtcblx0Y29uc3RydWN0b3IoY2xpZW50LCBjb25maWcgPSB7fSkge1xuXHRcdHRoaXMuY2xpZW50ID0gY2xpZW50O1xuXHRcdHRoaXMuY29uZmlnID0gY29uZmlnO1xuXHR9XG5cdHJ1bihpZCkge1xuXHRcdHJldHVybiBuZXcgVW5zY29wZWRNZXRhZGF0YUJ1aWxkZXIodGhpcy5jbGllbnQsIHtcblx0XHRcdC4uLnRoaXMuY29uZmlnLFxuXHRcdFx0cnVuSWQ6IGlkID8/IG51bGxcblx0XHR9KTtcblx0fVxuXHRzdGVwKGlkLCBpbmRleCkge1xuXHRcdHJldHVybiBuZXcgVW5zY29wZWRNZXRhZGF0YUJ1aWxkZXIodGhpcy5jbGllbnQsIHtcblx0XHRcdC4uLnRoaXMuY29uZmlnLFxuXHRcdFx0c3RlcElkOiBpZCA/PyBudWxsLFxuXHRcdFx0c3RlcEluZGV4OiBpbmRleCA/PyAwXG5cdFx0fSk7XG5cdH1cblx0YXR0ZW1wdChhdHRlbXB0KSB7XG5cdFx0cmV0dXJuIG5ldyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlcih0aGlzLmNsaWVudCwge1xuXHRcdFx0Li4udGhpcy5jb25maWcsXG5cdFx0XHRhdHRlbXB0OiBhdHRlbXB0ID8/IG51bGxcblx0XHR9KTtcblx0fVxuXHRzcGFuKGlkKSB7XG5cdFx0cmV0dXJuIG5ldyBVbnNjb3BlZE1ldGFkYXRhQnVpbGRlcih0aGlzLmNsaWVudCwge1xuXHRcdFx0Li4udGhpcy5jb25maWcsXG5cdFx0XHRzcGFuSWQ6IGlkXG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgdXBkYXRlKHZhbHVlcywga2luZCA9IFwiZGVmYXVsdFwiKSB7XG5cdFx0YXdhaXQgcGVyZm9ybU9wKHRoaXMuY2xpZW50LCB0aGlzLmNvbmZpZywgdmFsdWVzLCBgdXNlcmxhbmQuJHtraW5kfWAsIFwibWVyZ2VcIik7XG5cdH1cblx0dG9KU09OKCkge1xuXHRcdHJldHVybiB0aGlzLmNvbmZpZztcblx0fVxufTtcbi8qKlxuKiBDcmVhdGVzIGEgYE1ldGFkYXRhVGFyZ2V0YCBiYXNlZCBvbiB0aGUgY3VycmVudCBleGVjdXRpb24gY29udGV4dCBhbmQgdGhlIGBCdWlsZGVyQ29uZmlnYCBjcmVhdGVkIHVzaW5nXG4qIGBNZXRhZGF0YUJ1aWxkZXJgLlxuKi9cbmZ1bmN0aW9uIGJ1aWxkVGFyZ2V0KGNvbmZpZywgY3R4KSB7XG5cdGNvbnN0IGN0eEV4ZWN1dGlvbiA9IGN0eD8uZXhlY3V0aW9uO1xuXHRjb25zdCBjdHhSdW5JZCA9IGN0eEV4ZWN1dGlvbj8uY3R4Py5ydW5JZDtcblx0Y29uc3QgY3R4U3RlcElkID0gY3R4RXhlY3V0aW9uPy5leGVjdXRpbmdTdGVwPy5pZDtcblx0Y29uc3QgY3R4QXR0ZW1wdCA9IGN0eEV4ZWN1dGlvbj8uY3R4Py5hdHRlbXB0O1xuXHRjb25zdCB0YXJnZXRSdW5JZCA9IGNvbmZpZy5ydW5JZCA/PyBjdHhSdW5JZDtcblx0aWYgKCF0YXJnZXRSdW5JZCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gcnVuIGNvbnRleHQgYXZhaWxhYmxlXCIpO1xuXHRjb25zdCBpc1NhbWVSdW5Bc0N0eCA9IGN0eFJ1bklkICE9PSB2b2lkIDAgJiYgdGFyZ2V0UnVuSWQgPT09IGN0eFJ1bklkO1xuXHRjb25zdCBzdGVwQ3R4UmVhc29uID0gIWN0eEV4ZWN1dGlvbiA/IFwibm8gZnVuY3Rpb24gZXhlY3V0aW9uIGNvbnRleHQgaXMgYXZhaWxhYmxlXCIgOiAhY3R4RXhlY3V0aW9uLmV4ZWN1dGluZ1N0ZXAgPyBcInlvdSBhcmUgbm90IGluc2lkZSBhIHN0ZXAucnVuKCkgY2FsbGJhY2tcIiA6IFwieW91IGFyZSB0YXJnZXRpbmcgYSBkaWZmZXJlbnQgcnVuXCI7XG5cdGlmIChjb25maWcuYXR0ZW1wdCA9PT0gbnVsbCAmJiAoIWlzU2FtZVJ1bkFzQ3R4IHx8ICFjdHhFeGVjdXRpb24/LmV4ZWN1dGluZ1N0ZXApKSB0aHJvdyBuZXcgRXJyb3IoYGF0dGVtcHQoKSB3YXMgY2FsbGVkIHdpdGhvdXQgYSB2YWx1ZSwgYnV0ICR7c3RlcEN0eFJlYXNvbn1gKTtcblx0aWYgKGNvbmZpZy5zdGVwSWQgPT09IG51bGwgJiYgKCFpc1NhbWVSdW5Bc0N0eCB8fCAhY3R4RXhlY3V0aW9uPy5leGVjdXRpbmdTdGVwKSkgdGhyb3cgbmV3IEVycm9yKGBzdGVwKCkgd2FzIGNhbGxlZCB3aXRob3V0IGEgdmFsdWUsIGJ1dCAke3N0ZXBDdHhSZWFzb259YCk7XG5cdGlmIChjb25maWcuc3BhbklkICE9PSB2b2lkIDApIHJldHVybiB7XG5cdFx0cnVuX2lkOiB0YXJnZXRSdW5JZCxcblx0XHRzdGVwX2lkOiBjb25maWcuc3RlcElkID8/IGN0eFN0ZXBJZCxcblx0XHRzdGVwX2luZGV4OiBjb25maWcuc3RlcEluZGV4LFxuXHRcdHN0ZXBfYXR0ZW1wdDogY29uZmlnLmF0dGVtcHQgPz8gY3R4QXR0ZW1wdCxcblx0XHRzcGFuX2lkOiBjb25maWcuc3BhbklkXG5cdH07XG5cdGVsc2UgaWYgKGNvbmZpZy5hdHRlbXB0ICE9PSB2b2lkIDApIHJldHVybiB7XG5cdFx0cnVuX2lkOiB0YXJnZXRSdW5JZCxcblx0XHRzdGVwX2lkOiBjb25maWcuc3RlcElkID8/IGN0eFN0ZXBJZCxcblx0XHRzdGVwX2luZGV4OiBjb25maWcuc3RlcEluZGV4LFxuXHRcdHN0ZXBfYXR0ZW1wdDogY29uZmlnLmF0dGVtcHQgPz8gY3R4QXR0ZW1wdFxuXHR9O1xuXHRlbHNlIGlmIChjb25maWcuc3RlcElkICE9PSB2b2lkIDApIHJldHVybiB7XG5cdFx0cnVuX2lkOiB0YXJnZXRSdW5JZCxcblx0XHRzdGVwX2lkOiBjb25maWcuc3RlcElkID8/IGN0eFN0ZXBJZCxcblx0XHRzdGVwX2luZGV4OiBjb25maWcuc3RlcEluZGV4XG5cdH07XG5cdGVsc2UgaWYgKGNvbmZpZy5ydW5JZCAhPT0gdm9pZCAwKSByZXR1cm4geyBydW5faWQ6IHRhcmdldFJ1bklkIH07XG5cdGVsc2UgaWYgKGN0eFN0ZXBJZCAmJiBjdHhBdHRlbXB0ICE9PSB2b2lkIDApIHJldHVybiB7XG5cdFx0cnVuX2lkOiB0YXJnZXRSdW5JZCxcblx0XHRzdGVwX2lkOiBjdHhTdGVwSWQsXG5cdFx0c3RlcF9hdHRlbXB0OiBjdHhBdHRlbXB0XG5cdH07XG5cdGVsc2UgcmV0dXJuIHsgcnVuX2lkOiB0YXJnZXRSdW5JZCB9O1xufVxuLyoqXG4qIENyZWF0ZXMgYSBtZXRhZGF0YSBhcnJheSBwYXlsb2FkIGZvciBBUEkgY2FsbHMuXG4qL1xuZnVuY3Rpb24gY3JlYXRlTWV0YWRhdGFQYXlsb2FkKGtpbmQsIG9wLCBtZXRhZGF0YSkge1xuXHRyZXR1cm4gW3tcblx0XHRraW5kLFxuXHRcdG9wLFxuXHRcdHZhbHVlczogbWV0YWRhdGFcblx0fV07XG59XG4vKipcbiogU2VuZHMgbWV0YWRhdGEgdXBkYXRlIHZpYSBSRVNUIEFQSSB0byBhIHNwZWNpZmljIHRhcmdldC5cbiovXG5hc3luYyBmdW5jdGlvbiBzZW5kTWV0YWRhdGFWaWFBUEkoY2xpZW50LCB0YXJnZXQsIGtpbmQsIG9wLCBtZXRhZGF0YSwgaGVhZGVycykge1xuXHRjb25zdCBtZXRhZGF0YUFycmF5ID0gY3JlYXRlTWV0YWRhdGFQYXlsb2FkKGtpbmQsIG9wLCBtZXRhZGF0YSk7XG5cdGF3YWl0IGNsaWVudFtcInVwZGF0ZU1ldGFkYXRhXCJdKHtcblx0XHR0YXJnZXQsXG5cdFx0bWV0YWRhdGE6IG1ldGFkYXRhQXJyYXksXG5cdFx0aGVhZGVyc1xuXHR9KTtcbn1cbmZ1bmN0aW9uIGdldEJhdGNoU2NvcGUoY29uZmlnKSB7XG5cdGlmIChjb25maWcuc3BhbklkICE9PSB2b2lkIDApIHJldHVybiBcImV4dGVuZGVkX3RyYWNlXCI7XG5cdGlmIChjb25maWcuYXR0ZW1wdCAhPT0gdm9pZCAwKSByZXR1cm4gXCJzdGVwX2F0dGVtcHRcIjtcblx0aWYgKGNvbmZpZy5zdGVwSWQgIT09IHZvaWQgMCkgcmV0dXJuIFwic3RlcFwiO1xuXHRpZiAoY29uZmlnLnJ1bklkICE9PSB2b2lkIDApIHJldHVybiBcInJ1blwiO1xuXHRyZXR1cm4gXCJzdGVwX2F0dGVtcHRcIjtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1PcChjbGllbnQsIGNvbmZpZywgdmFsdWVzLCBraW5kLCBvcCkge1xuXHRjb25zdCBjdHggPSBhd2FpdCBnZXRBc3luY0N0eCgpO1xuXHRjb25zdCB0YXJnZXQgPSBidWlsZFRhcmdldChjb25maWcsIGN0eCk7XG5cdGNvbnN0IGlzSW5zaWRlUnVuID0gISFjdHg/LmV4ZWN1dGlvbjtcblx0Y29uc3QgaXNJbnNpZGVTdGVwID0gISFjdHg/LmV4ZWN1dGlvbj8uZXhlY3V0aW5nU3RlcDtcblx0aWYgKGlzSW5zaWRlUnVuICYmICFpc0luc2lkZVN0ZXApIGNvbnNvbGUud2FybihcImlubmdlc3Q6IG1ldGFkYXRhLnVwZGF0ZSgpIGNhbGxlZCBvdXRzaWRlIG9mIGEgc3RlcC4gVGhpcyBtZXRhZGF0YSBtYXkgYmUgbG9zdCBvbiByZXRyaWVzLiBXcmFwIHRoZSBjYWxsIGluIHN0ZXAucnVuKCkgZm9yIGR1cmFibGUgbWV0YWRhdGEuXCIpO1xuXHRjb25zdCBydW5JZCA9IGNvbmZpZy5ydW5JZCA/PyBjdHg/LmV4ZWN1dGlvbj8uY3R4Py5ydW5JZDtcblx0Y29uc3Qgc3RlcElkID0gY29uZmlnLnN0ZXBJZCA/PyBjdHg/LmV4ZWN1dGlvbj8uZXhlY3V0aW5nU3RlcD8uaWQ7XG5cdGNvbnN0IGF0dGVtcHQgPSBjb25maWcuYXR0ZW1wdCA/PyBjdHg/LmV4ZWN1dGlvbj8uY3R4Py5hdHRlbXB0O1xuXHRpZiAocnVuSWQgPT09IGN0eD8uZXhlY3V0aW9uPy5jdHg/LnJ1bklkICYmIHN0ZXBJZCA9PT0gY3R4Py5leGVjdXRpb24/LmV4ZWN1dGluZ1N0ZXA/LmlkICYmIGF0dGVtcHQgPT09IGN0eD8uZXhlY3V0aW9uPy5jdHg/LmF0dGVtcHQgJiYgIWNvbmZpZy5zcGFuSWQpIHtcblx0XHRjb25zdCBleGVjdXRpbmdTdGVwID0gY3R4Py5leGVjdXRpb24/LmV4ZWN1dGluZ1N0ZXA7XG5cdFx0Y29uc3QgZXhlY0luc3RhbmNlID0gY3R4Py5leGVjdXRpb24/Lmluc3RhbmNlO1xuXHRcdGNvbnN0IHNjb3BlID0gZ2V0QmF0Y2hTY29wZShjb25maWcpO1xuXHRcdGlmIChleGVjdXRpbmdTdGVwPy5pZCAmJiBleGVjSW5zdGFuY2UgJiYgZXhlY0luc3RhbmNlLmFkZE1ldGFkYXRhKGV4ZWN1dGluZ1N0ZXAuaWQsIGtpbmQsIHNjb3BlLCBvcCwgdmFsdWVzKSkgcmV0dXJuO1xuXHR9XG5cdGF3YWl0IHNlbmRNZXRhZGF0YVZpYUFQSShjbGllbnQsIHRhcmdldCwga2luZCwgb3AsIHZhbHVlcywgKGN0eD8uZXhlY3V0aW9uPy5pbnN0YW5jZSk/Lm9wdGlvbnM/LmhlYWRlcnMgPz8gdm9pZCAwKTtcbn1cbmNvbnN0IG1ldGFkYXRhU3ltYm9sID0gU3ltYm9sLmZvcihcImlubmdlc3Quc3RlcC5tZXRhZGF0YVwiKTtcbi8qKlxuKiBNaWRkbGV3YXJlIHRoYXQgZW5hYmxlcyB0aGUgZXhwZXJpbWVudGFsIHN0ZXAubWV0YWRhdGEoKSBmZWF0dXJlLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBtZXRhZGF0YU1pZGRsZXdhcmUgfSBmcm9tIFwiaW5uZ2VzdC9leHBlcmltZW50YWxcIjtcbipcbiogY29uc3QgaW5uZ2VzdCA9IG5ldyBJbm5nZXN0KHtcbiogICBpZDogXCJteS1hcHBcIixcbiogICBtaWRkbGV3YXJlOiBbbWV0YWRhdGFNaWRkbGV3YXJlKCldLFxuKiB9KTtcbiogYGBgXG4qL1xuY29uc3QgbWV0YWRhdGFNaWRkbGV3YXJlID0gKCkgPT4ge1xuXHRyZXR1cm4gbmV3IElubmdlc3RNaWRkbGV3YXJlKHtcblx0XHRuYW1lOiBcIklubmdlc3Q6IEV4cGVyaW1lbnRhbCBNZXRhZGF0YVwiLFxuXHRcdGluaXQoeyBjbGllbnQgfSkge1xuXHRcdFx0Y2xpZW50W1wiZXhwZXJpbWVudGFsTWV0YWRhdGFFbmFibGVkXCJdID0gdHJ1ZTtcblx0XHRcdHJldHVybiB7IG9uRnVuY3Rpb25SdW4oKSB7XG5cdFx0XHRcdHJldHVybiB7IHRyYW5zZm9ybUlucHV0KGlucHV0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHsgY3R4OiB7IHN0ZXA6IHtcblx0XHRcdFx0XHRcdC4uLmlucHV0LmN0eC5zdGVwLFxuXHRcdFx0XHRcdFx0bWV0YWRhdGE6IGlucHV0LmN0eC5zdGVwW21ldGFkYXRhU3ltYm9sXVxuXHRcdFx0XHRcdH0gfSB9O1xuXHRcdFx0XHR9IH07XG5cdFx0XHR9IH07XG5cdFx0fVxuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgVW5zY29wZWRNZXRhZGF0YUJ1aWxkZXIsIG1ldGFkYXRhTWlkZGxld2FyZSwgbWV0YWRhdGFTeW1ib2wgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlubmdlc3RNZXRhZGF0YS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestMetadata.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestMiddleware.js":
/*!**************************************************************!*\
  !*** ./node_modules/inngest/components/InngestMiddleware.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestMiddleware: () => (/* binding */ InngestMiddleware),\n/* harmony export */   getHookStack: () => (/* binding */ getHookStack)\n/* harmony export */ });\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n\n\n//#region src/components/InngestMiddleware.ts\n/**\n* A middleware that can be registered with Inngest to hook into various\n* lifecycles of the SDK and affect input and output of Inngest functionality.\n*\n* See {@link https://innge.st/middleware}\n*\n* @example\n*\n* ```ts\n* export const inngest = new Inngest({\n*   middleware: [\n*     new InngestMiddleware({\n*       name: \"My Middleware\",\n*       init: () => {\n*         // ...\n*       }\n*     })\n*   ]\n* });\n* ```\n*\n* @public\n*/\nvar InngestMiddleware = class InngestMiddleware {\n\tget [Symbol.toStringTag]() {\n\t\treturn InngestMiddleware.Tag;\n\t}\n\t/**\n\t* The name of this middleware. Used primarily for debugging and logging\n\t* purposes.\n\t*/\n\tname;\n\t/**\n\t* This function is used to initialize your middleware and register any hooks\n\t* you want to use. It will be called once when the SDK is initialized, and\n\t* should be used to store any state you want to use in other parts of your\n\t* middleware.\n\t*\n\t* It can be synchronous or asynchronous, in which case the client will wait\n\t* for it to resolve before continuing to initialize the next middleware.\n\t*\n\t* Multiple clients could be used in the same application with differing\n\t* middleware, so do not store state in global variables or assume that your\n\t* middleware will only be used once.\n\t*\n\t* Must return an object detailing the hooks you want to register.\n\t*/\n\tinit;\n\tconstructor({ name, init }) {\n\t\tthis.name = name;\n\t\tthis.init = init;\n\t}\n};\n(function(_InngestMiddleware) {\n\t_InngestMiddleware.Tag = \"Inngest.Middleware\";\n})(InngestMiddleware || (InngestMiddleware = {}));\n/**\n* Given some middleware and an entrypoint, runs the initializer for the given\n* `key` and returns functions that will pass arguments through a stack of each\n* given hook in a middleware's lifecycle.\n*\n* Lets the middleware initialize before starting.\n*/\nconst getHookStack = async (middleware, key, arg, transforms) => {\n\tconst hookDirs = hookDirections[key];\n\tif (!hookDirs) throw new Error(`No hook directions found for key \"${String(key)}\". This is likely a bug in the Inngest SDK.`);\n\tconst hooksRegistered = await (await middleware).reduce((acc, mw) => {\n\t\tconst fn = mw[key];\n\t\tif (fn) return [...acc, fn];\n\t\treturn acc;\n\t}, []).reduce(async (acc, fn) => {\n\t\treturn [...await acc, await fn(arg)];\n\t}, Promise.resolve([]));\n\tconst ret = {};\n\tfor (const hook of hooksRegistered) {\n\t\tconst hookKeys = Object.keys(hook);\n\t\tfor (const key$1 of hookKeys) {\n\t\t\tlet fns = [hook[key$1]];\n\t\t\tconst existingWaterfall = ret[key$1];\n\t\t\tif (existingWaterfall) if (hookDirs[key$1] === \"forward\") fns = [existingWaterfall, hook[key$1]];\n\t\t\telse fns = [hook[key$1], existingWaterfall];\n\t\t\tconst transform = transforms[key$1];\n\t\t\tret[key$1] = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_0__.waterfall)(fns, transform);\n\t\t}\n\t}\n\tfor (const k of Object.keys(ret)) {\n\t\tconst key$1 = k;\n\t\tret[key$1] = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_0__.cacheFn)(ret[key$1]);\n\t}\n\treturn ret;\n};\n/**\n* The direction of each hook that exists in the middleware lifecycle.\n* This is used to determine whether hooks found in a stack run forwards or\n* backwards, creating onion-like behaviour.\n*/\nconst hookDirections = {\n\tonFunctionRun: {\n\t\ttransformInput: \"forward\",\n\t\tbeforeMemoization: \"forward\",\n\t\tafterMemoization: \"backward\",\n\t\tbeforeExecution: \"forward\",\n\t\tafterExecution: \"backward\",\n\t\ttransformOutput: \"backward\",\n\t\tbeforeResponse: \"forward\",\n\t\tfinished: \"forward\"\n\t},\n\tonSendEvent: {\n\t\ttransformInput: \"forward\",\n\t\ttransformOutput: \"backward\"\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestMiddleware.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RNaWRkbGV3YXJlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2RDs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLFlBQVk7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvSW5uZ2VzdE1pZGRsZXdhcmUuanM/MjEyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYWNoZUZuLCB3YXRlcmZhbGwgfSBmcm9tIFwiLi4vaGVscGVycy9mdW5jdGlvbnMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL0lubmdlc3RNaWRkbGV3YXJlLnRzXG4vKipcbiogQSBtaWRkbGV3YXJlIHRoYXQgY2FuIGJlIHJlZ2lzdGVyZWQgd2l0aCBJbm5nZXN0IHRvIGhvb2sgaW50byB2YXJpb3VzXG4qIGxpZmVjeWNsZXMgb2YgdGhlIFNESyBhbmQgYWZmZWN0IGlucHV0IGFuZCBvdXRwdXQgb2YgSW5uZ2VzdCBmdW5jdGlvbmFsaXR5LlxuKlxuKiBTZWUge0BsaW5rIGh0dHBzOi8vaW5uZ2Uuc3QvbWlkZGxld2FyZX1cbipcbiogQGV4YW1wbGVcbipcbiogYGBgdHNcbiogZXhwb3J0IGNvbnN0IGlubmdlc3QgPSBuZXcgSW5uZ2VzdCh7XG4qICAgbWlkZGxld2FyZTogW1xuKiAgICAgbmV3IElubmdlc3RNaWRkbGV3YXJlKHtcbiogICAgICAgbmFtZTogXCJNeSBNaWRkbGV3YXJlXCIsXG4qICAgICAgIGluaXQ6ICgpID0+IHtcbiogICAgICAgICAvLyAuLi5cbiogICAgICAgfVxuKiAgICAgfSlcbiogICBdXG4qIH0pO1xuKiBgYGBcbipcbiogQHB1YmxpY1xuKi9cbnZhciBJbm5nZXN0TWlkZGxld2FyZSA9IGNsYXNzIElubmdlc3RNaWRkbGV3YXJlIHtcblx0Z2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuXHRcdHJldHVybiBJbm5nZXN0TWlkZGxld2FyZS5UYWc7XG5cdH1cblx0LyoqXG5cdCogVGhlIG5hbWUgb2YgdGhpcyBtaWRkbGV3YXJlLiBVc2VkIHByaW1hcmlseSBmb3IgZGVidWdnaW5nIGFuZCBsb2dnaW5nXG5cdCogcHVycG9zZXMuXG5cdCovXG5cdG5hbWU7XG5cdC8qKlxuXHQqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBpbml0aWFsaXplIHlvdXIgbWlkZGxld2FyZSBhbmQgcmVnaXN0ZXIgYW55IGhvb2tzXG5cdCogeW91IHdhbnQgdG8gdXNlLiBJdCB3aWxsIGJlIGNhbGxlZCBvbmNlIHdoZW4gdGhlIFNESyBpcyBpbml0aWFsaXplZCwgYW5kXG5cdCogc2hvdWxkIGJlIHVzZWQgdG8gc3RvcmUgYW55IHN0YXRlIHlvdSB3YW50IHRvIHVzZSBpbiBvdGhlciBwYXJ0cyBvZiB5b3VyXG5cdCogbWlkZGxld2FyZS5cblx0KlxuXHQqIEl0IGNhbiBiZSBzeW5jaHJvbm91cyBvciBhc3luY2hyb25vdXMsIGluIHdoaWNoIGNhc2UgdGhlIGNsaWVudCB3aWxsIHdhaXRcblx0KiBmb3IgaXQgdG8gcmVzb2x2ZSBiZWZvcmUgY29udGludWluZyB0byBpbml0aWFsaXplIHRoZSBuZXh0IG1pZGRsZXdhcmUuXG5cdCpcblx0KiBNdWx0aXBsZSBjbGllbnRzIGNvdWxkIGJlIHVzZWQgaW4gdGhlIHNhbWUgYXBwbGljYXRpb24gd2l0aCBkaWZmZXJpbmdcblx0KiBtaWRkbGV3YXJlLCBzbyBkbyBub3Qgc3RvcmUgc3RhdGUgaW4gZ2xvYmFsIHZhcmlhYmxlcyBvciBhc3N1bWUgdGhhdCB5b3VyXG5cdCogbWlkZGxld2FyZSB3aWxsIG9ubHkgYmUgdXNlZCBvbmNlLlxuXHQqXG5cdCogTXVzdCByZXR1cm4gYW4gb2JqZWN0IGRldGFpbGluZyB0aGUgaG9va3MgeW91IHdhbnQgdG8gcmVnaXN0ZXIuXG5cdCovXG5cdGluaXQ7XG5cdGNvbnN0cnVjdG9yKHsgbmFtZSwgaW5pdCB9KSB7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLmluaXQgPSBpbml0O1xuXHR9XG59O1xuKGZ1bmN0aW9uKF9Jbm5nZXN0TWlkZGxld2FyZSkge1xuXHRfSW5uZ2VzdE1pZGRsZXdhcmUuVGFnID0gXCJJbm5nZXN0Lk1pZGRsZXdhcmVcIjtcbn0pKElubmdlc3RNaWRkbGV3YXJlIHx8IChJbm5nZXN0TWlkZGxld2FyZSA9IHt9KSk7XG4vKipcbiogR2l2ZW4gc29tZSBtaWRkbGV3YXJlIGFuZCBhbiBlbnRyeXBvaW50LCBydW5zIHRoZSBpbml0aWFsaXplciBmb3IgdGhlIGdpdmVuXG4qIGBrZXlgIGFuZCByZXR1cm5zIGZ1bmN0aW9ucyB0aGF0IHdpbGwgcGFzcyBhcmd1bWVudHMgdGhyb3VnaCBhIHN0YWNrIG9mIGVhY2hcbiogZ2l2ZW4gaG9vayBpbiBhIG1pZGRsZXdhcmUncyBsaWZlY3ljbGUuXG4qXG4qIExldHMgdGhlIG1pZGRsZXdhcmUgaW5pdGlhbGl6ZSBiZWZvcmUgc3RhcnRpbmcuXG4qL1xuY29uc3QgZ2V0SG9va1N0YWNrID0gYXN5bmMgKG1pZGRsZXdhcmUsIGtleSwgYXJnLCB0cmFuc2Zvcm1zKSA9PiB7XG5cdGNvbnN0IGhvb2tEaXJzID0gaG9va0RpcmVjdGlvbnNba2V5XTtcblx0aWYgKCFob29rRGlycykgdGhyb3cgbmV3IEVycm9yKGBObyBob29rIGRpcmVjdGlvbnMgZm91bmQgZm9yIGtleSBcIiR7U3RyaW5nKGtleSl9XCIuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIHRoZSBJbm5nZXN0IFNESy5gKTtcblx0Y29uc3QgaG9va3NSZWdpc3RlcmVkID0gYXdhaXQgKGF3YWl0IG1pZGRsZXdhcmUpLnJlZHVjZSgoYWNjLCBtdykgPT4ge1xuXHRcdGNvbnN0IGZuID0gbXdba2V5XTtcblx0XHRpZiAoZm4pIHJldHVybiBbLi4uYWNjLCBmbl07XG5cdFx0cmV0dXJuIGFjYztcblx0fSwgW10pLnJlZHVjZShhc3luYyAoYWNjLCBmbikgPT4ge1xuXHRcdHJldHVybiBbLi4uYXdhaXQgYWNjLCBhd2FpdCBmbihhcmcpXTtcblx0fSwgUHJvbWlzZS5yZXNvbHZlKFtdKSk7XG5cdGNvbnN0IHJldCA9IHt9O1xuXHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3NSZWdpc3RlcmVkKSB7XG5cdFx0Y29uc3QgaG9va0tleXMgPSBPYmplY3Qua2V5cyhob29rKTtcblx0XHRmb3IgKGNvbnN0IGtleSQxIG9mIGhvb2tLZXlzKSB7XG5cdFx0XHRsZXQgZm5zID0gW2hvb2tba2V5JDFdXTtcblx0XHRcdGNvbnN0IGV4aXN0aW5nV2F0ZXJmYWxsID0gcmV0W2tleSQxXTtcblx0XHRcdGlmIChleGlzdGluZ1dhdGVyZmFsbCkgaWYgKGhvb2tEaXJzW2tleSQxXSA9PT0gXCJmb3J3YXJkXCIpIGZucyA9IFtleGlzdGluZ1dhdGVyZmFsbCwgaG9va1trZXkkMV1dO1xuXHRcdFx0ZWxzZSBmbnMgPSBbaG9va1trZXkkMV0sIGV4aXN0aW5nV2F0ZXJmYWxsXTtcblx0XHRcdGNvbnN0IHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNba2V5JDFdO1xuXHRcdFx0cmV0W2tleSQxXSA9IHdhdGVyZmFsbChmbnMsIHRyYW5zZm9ybSk7XG5cdFx0fVxuXHR9XG5cdGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyhyZXQpKSB7XG5cdFx0Y29uc3Qga2V5JDEgPSBrO1xuXHRcdHJldFtrZXkkMV0gPSBjYWNoZUZuKHJldFtrZXkkMV0pO1xuXHR9XG5cdHJldHVybiByZXQ7XG59O1xuLyoqXG4qIFRoZSBkaXJlY3Rpb24gb2YgZWFjaCBob29rIHRoYXQgZXhpc3RzIGluIHRoZSBtaWRkbGV3YXJlIGxpZmVjeWNsZS5cbiogVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSB3aGV0aGVyIGhvb2tzIGZvdW5kIGluIGEgc3RhY2sgcnVuIGZvcndhcmRzIG9yXG4qIGJhY2t3YXJkcywgY3JlYXRpbmcgb25pb24tbGlrZSBiZWhhdmlvdXIuXG4qL1xuY29uc3QgaG9va0RpcmVjdGlvbnMgPSB7XG5cdG9uRnVuY3Rpb25SdW46IHtcblx0XHR0cmFuc2Zvcm1JbnB1dDogXCJmb3J3YXJkXCIsXG5cdFx0YmVmb3JlTWVtb2l6YXRpb246IFwiZm9yd2FyZFwiLFxuXHRcdGFmdGVyTWVtb2l6YXRpb246IFwiYmFja3dhcmRcIixcblx0XHRiZWZvcmVFeGVjdXRpb246IFwiZm9yd2FyZFwiLFxuXHRcdGFmdGVyRXhlY3V0aW9uOiBcImJhY2t3YXJkXCIsXG5cdFx0dHJhbnNmb3JtT3V0cHV0OiBcImJhY2t3YXJkXCIsXG5cdFx0YmVmb3JlUmVzcG9uc2U6IFwiZm9yd2FyZFwiLFxuXHRcdGZpbmlzaGVkOiBcImZvcndhcmRcIlxuXHR9LFxuXHRvblNlbmRFdmVudDoge1xuXHRcdHRyYW5zZm9ybUlucHV0OiBcImZvcndhcmRcIixcblx0XHR0cmFuc2Zvcm1PdXRwdXQ6IFwiYmFja3dhcmRcIlxuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IElubmdlc3RNaWRkbGV3YXJlLCBnZXRIb29rU3RhY2sgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlubmdlc3RNaWRkbGV3YXJlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestMiddleware.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/InngestStepTools.js":
/*!*************************************************************!*\
  !*** ./node_modules/inngest/components/InngestStepTools.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STEP_INDEXING_SUFFIX: () => (/* binding */ STEP_INDEXING_SUFFIX),\n/* harmony export */   createStepTools: () => (/* binding */ createStepTools),\n/* harmony export */   gatewaySymbol: () => (/* binding */ gatewaySymbol),\n/* harmony export */   getStepOptions: () => (/* binding */ getStepOptions),\n/* harmony export */   invokePayloadSchema: () => (/* binding */ invokePayloadSchema),\n/* harmony export */   step: () => (/* binding */ step)\n/* harmony export */ });\n/* harmony import */ var _execution_als_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./execution/als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n/* harmony import */ var _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InngestMetadata.js */ \"(rsc)/./node_modules/inngest/components/InngestMetadata.js\");\n/* harmony import */ var _helpers_temporal_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/temporal.js */ \"(rsc)/./node_modules/inngest/helpers/temporal.js\");\n/* harmony import */ var _Fetch_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Fetch.js */ \"(rsc)/./node_modules/inngest/components/Fetch.js\");\n/* harmony import */ var _InngestFunction_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./InngestFunction.js */ \"(rsc)/./node_modules/inngest/components/InngestFunction.js\");\n/* harmony import */ var _InngestFunctionReference_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./InngestFunctionReference.js */ \"(rsc)/./node_modules/inngest/components/InngestFunctionReference.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _inngest_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @inngest/ai */ \"(rsc)/./node_modules/@inngest/ai/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/InngestStepTools.ts\nconst getStepOptions = (options) => {\n\tif (typeof options === \"string\") return { id: options };\n\treturn options;\n};\n/**\n* Suffix used to namespace steps that are automatically indexed.\n*/\nconst STEP_INDEXING_SUFFIX = \":\";\n/**\n* Create a new set of step function tools ready to be used in a step function.\n* This function should be run and a fresh set of tools provided every time a\n* function is run.\n*\n* An op stack (function state) is passed in as well as some mutable properties\n* that the tools can use to submit a new op.\n*/\nconst createStepTools = (client, execution, stepHandler) => {\n\t/**\n\t* A local helper used to create tools that can be used to submit an op.\n\t*\n\t* When using this function, a generic type should be provided which is the\n\t* function signature exposed to the user.\n\t*/\n\tconst createTool = (matchOp, opts) => {\n\t\treturn (async (...args) => {\n\t\t\treturn stepHandler({\n\t\t\t\targs,\n\t\t\t\tmatchOp,\n\t\t\t\topts\n\t\t\t});\n\t\t});\n\t};\n\t/**\n\t* Create a new step run tool that can be used to run a step function using\n\t* `step.run()` as a shim.\n\t*/\n\tconst createStepRun = (type) => {\n\t\treturn createTool(({ id, name }, _fn, ...input) => {\n\t\t\tconst opts = {\n\t\t\t\t...input.length ? { input } : {},\n\t\t\t\t...type ? { type } : {}\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Sync,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.StepPlanned,\n\t\t\t\tname: id,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\t...Object.keys(opts).length ? { opts } : {},\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}, { fn: (_, fn, ...input) => fn(...input) });\n\t};\n\t/**\n\t* Creates a metadata builder wrapper for step.metadata(\"id\").\n\t* Uses MetadataBuilder for config accumulation, but wraps .update() in tools.run() for memoization.\n\t*/\n\tconst createStepMetadataWrapper = (memoizationId, builder) => {\n\t\tif (!client[\"experimentalMetadataEnabled\"]) throw new Error(\"step.metadata() is experimental. Enable it by adding metadataMiddleware() from \\\"inngest/experimental\\\" to your client middleware.\");\n\t\tconst withBuilder = (next) => createStepMetadataWrapper(memoizationId, next);\n\t\tif (!builder) builder = new _InngestMetadata_js__WEBPACK_IMPORTED_MODULE_2__.UnscopedMetadataBuilder(client).run();\n\t\treturn {\n\t\t\trun: (runId) => withBuilder(builder.run(runId)),\n\t\t\tstep: (stepId, index) => withBuilder(builder.step(stepId, index)),\n\t\t\tattempt: (attemptIndex) => withBuilder(builder.attempt(attemptIndex)),\n\t\t\tspan: (spanId) => withBuilder(builder.span(spanId)),\n\t\t\tupdate: async (values, kind = \"default\") => {\n\t\t\t\tawait tools.run(memoizationId, async () => {\n\t\t\t\t\tawait builder.update(values, kind);\n\t\t\t\t});\n\t\t\t},\n\t\t\tdo: async (fn) => {\n\t\t\t\tawait tools.run(memoizationId, async () => {\n\t\t\t\t\tawait fn(builder);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\t/**\n\t* Define the set of tools the user has access to for their step functions.\n\t*\n\t* Each key is the function name and is expected to run `createTool` and pass\n\t* a generic type for that function as it will appear in the user's code.\n\t*/\n\tconst tools = {\n\t\tsendEvent: createTool(({ id, name }) => {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Sync,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.StepPlanned,\n\t\t\t\tname: \"sendEvent\",\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts: { type: \"step.sendEvent\" },\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}, { fn: (_idOrOptions, payload) => {\n\t\t\treturn client[\"_send\"]({\n\t\t\t\tpayload,\n\t\t\t\theaders: execution[\"options\"][\"headers\"]\n\t\t\t});\n\t\t} }),\n\t\twaitForSignal: createTool(({ id, name }, opts) => {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.WaitForSignal,\n\t\t\t\tname: opts.signal,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts: {\n\t\t\t\t\tsignal: opts.signal,\n\t\t\t\t\ttimeout: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)(opts.timeout),\n\t\t\t\t\tconflict: opts.onConflict\n\t\t\t\t},\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\tsendSignal: createTool(({ id, name }, opts) => {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Sync,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.StepPlanned,\n\t\t\t\tname: \"sendSignal\",\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts: {\n\t\t\t\t\ttype: \"step.sendSignal\",\n\t\t\t\t\tsignal: opts.signal\n\t\t\t\t},\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}, { fn: (_idOrOptions, opts) => {\n\t\t\treturn client[\"_sendSignal\"]({\n\t\t\t\tsignal: opts.signal,\n\t\t\t\tdata: opts.data,\n\t\t\t\theaders: execution[\"options\"][\"headers\"]\n\t\t\t});\n\t\t} }),\n\t\twaitForEvent: createTool(({ id, name }, opts) => {\n\t\t\tconst matchOpts = { timeout: (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)(typeof opts === \"string\" ? opts : opts.timeout) };\n\t\t\tif (typeof opts !== \"string\") {\n\t\t\t\tif (opts?.match) matchOpts.if = `event.${opts.match} == async.${opts.match}`;\n\t\t\t\telse if (opts?.if) matchOpts.if = opts.if;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.WaitForEvent,\n\t\t\t\tname: opts.event,\n\t\t\t\topts: matchOpts,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\trun: createStepRun(),\n\t\tai: {\n\t\t\tinfer: createTool(({ id, name }, options) => {\n\t\t\t\tconst { model, body, ...rest } = options;\n\t\t\t\tconst modelCopy = { ...model };\n\t\t\t\toptions.model.onCall?.(modelCopy, options.body);\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.AiGateway,\n\t\t\t\t\tdisplayName: name ?? id,\n\t\t\t\t\topts: {\n\t\t\t\t\t\ttype: \"step.ai.infer\",\n\t\t\t\t\t\turl: modelCopy.url,\n\t\t\t\t\t\theaders: modelCopy.headers,\n\t\t\t\t\t\tauth_key: modelCopy.authKey,\n\t\t\t\t\t\tformat: modelCopy.format,\n\t\t\t\t\t\tbody,\n\t\t\t\t\t\t...rest\n\t\t\t\t\t},\n\t\t\t\t\tuserland: { id }\n\t\t\t\t};\n\t\t\t}),\n\t\t\twrap: createStepRun(\"step.ai.wrap\"),\n\t\t\tmodels: { ..._inngest_ai__WEBPACK_IMPORTED_MODULE_0__.models }\n\t\t},\n\t\tsleep: createTool(({ id, name }, time) => {\n\t\t\t/**\n\t\t\t* The presence of this operation in the returned stack indicates that the\n\t\t\t* sleep is over and we should continue execution.\n\t\t\t*/\n\t\t\tconst msTimeStr = (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)((0,_helpers_temporal_js__WEBPACK_IMPORTED_MODULE_4__.isTemporalDuration)(time) ? time.total({ unit: \"milliseconds\" }) : time);\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.Sleep,\n\t\t\t\tname: msTimeStr,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\tsleepUntil: createTool(({ id, name }, time) => {\n\t\t\ttry {\n\t\t\t\tconst iso = (0,_helpers_temporal_js__WEBPACK_IMPORTED_MODULE_4__.getISOString)(time);\n\t\t\t\t/**\n\t\t\t\t* The presence of this operation in the returned stack indicates that the\n\t\t\t\t* sleep is over and we should continue execution.\n\t\t\t\t*/\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.Sleep,\n\t\t\t\t\tname: iso,\n\t\t\t\t\tdisplayName: name ?? id,\n\t\t\t\t\tuserland: { id }\n\t\t\t\t};\n\t\t\t} catch (err) {\n\t\t\t\t/**\n\t\t\t\t* If we're here, it's because the date is invalid. We'll throw a custom\n\t\t\t\t* error here to standardise this response.\n\t\t\t\t*/\n\t\t\t\tconsole.warn(\"Invalid `Date`, date string, `Temporal.Instant`, or `Temporal.ZonedDateTime` passed to sleepUntil;\", err);\n\t\t\t\tthrow new Error(`Invalid \\`Date\\`, date string, \\`Temporal.Instant\\`, or \\`Temporal.ZonedDateTime\\` passed to sleepUntil: ${time}`);\n\t\t\t}\n\t\t}),\n\t\tinvoke: createTool(({ id, name }, invokeOpts) => {\n\t\t\tconst optsSchema = invokePayloadSchema.extend({ timeout: zod_v3__WEBPACK_IMPORTED_MODULE_5__.union([\n\t\t\t\tzod_v3__WEBPACK_IMPORTED_MODULE_5__.number(),\n\t\t\t\tzod_v3__WEBPACK_IMPORTED_MODULE_5__.string(),\n\t\t\t\tzod_v3__WEBPACK_IMPORTED_MODULE_5__.date()\n\t\t\t]).optional() });\n\t\t\tconst parsedFnOpts = optsSchema.extend({\n\t\t\t\t_type: zod_v3__WEBPACK_IMPORTED_MODULE_5__.literal(\"fullId\").optional().default(\"fullId\"),\n\t\t\t\tfunction: zod_v3__WEBPACK_IMPORTED_MODULE_5__.string().min(1)\n\t\t\t}).or(optsSchema.extend({\n\t\t\t\t_type: zod_v3__WEBPACK_IMPORTED_MODULE_5__.literal(\"fnInstance\").optional().default(\"fnInstance\"),\n\t\t\t\tfunction: zod_v3__WEBPACK_IMPORTED_MODULE_5__[\"instanceof\"](_InngestFunction_js__WEBPACK_IMPORTED_MODULE_6__.InngestFunction)\n\t\t\t})).or(optsSchema.extend({\n\t\t\t\t_type: zod_v3__WEBPACK_IMPORTED_MODULE_5__.literal(\"refInstance\").optional().default(\"refInstance\"),\n\t\t\t\tfunction: zod_v3__WEBPACK_IMPORTED_MODULE_5__[\"instanceof\"](_InngestFunctionReference_js__WEBPACK_IMPORTED_MODULE_7__.InngestFunctionReference)\n\t\t\t})).safeParse(invokeOpts);\n\t\t\tif (!parsedFnOpts.success) throw new Error(`Invalid invocation options passed to invoke; must include either a function or functionId.`);\n\t\t\tconst { _type, function: fn, data, user, v, timeout } = parsedFnOpts.data;\n\t\t\tconst opts = {\n\t\t\t\tpayload: {\n\t\t\t\t\tdata,\n\t\t\t\t\tuser,\n\t\t\t\t\tv\n\t\t\t\t},\n\t\t\t\tfunction_id: \"\",\n\t\t\t\ttimeout: typeof timeout === \"undefined\" ? void 0 : (0,_helpers_strings_js__WEBPACK_IMPORTED_MODULE_3__.timeStr)(timeout)\n\t\t\t};\n\t\t\tswitch (_type) {\n\t\t\t\tcase \"fnInstance\":\n\t\t\t\t\topts.function_id = fn.id(fn[\"client\"].id);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fullId\":\n\t\t\t\t\tconsole.warn(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_8__.logPrefix} Invoking function with \\`function: string\\` is deprecated and will be removed in v4.0.0; use an imported function or \\`referenceFunction()\\` instead. See https://innge.st/ts-referencing-functions`);\n\t\t\t\t\topts.function_id = fn;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"refInstance\":\n\t\t\t\t\topts.function_id = [fn.opts.appId || client.id, fn.opts.functionId].filter(Boolean).join(\"-\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.InvokeFunction,\n\t\t\t\tdisplayName: name ?? id,\n\t\t\t\topts,\n\t\t\t\tuserland: { id }\n\t\t\t};\n\t\t}),\n\t\tfetch: _Fetch_js__WEBPACK_IMPORTED_MODULE_9__.fetch\n\t};\n\ttools[_InngestMetadata_js__WEBPACK_IMPORTED_MODULE_2__.metadataSymbol] = (memoizationId) => createStepMetadataWrapper(memoizationId);\n\ttools[gatewaySymbol] = createTool(({ id, name }, input, init) => {\n\t\tconst url = input instanceof Request ? input.url : input.toString();\n\t\tconst headers = {};\n\t\tif (input instanceof Request) input.headers.forEach((value, key) => {\n\t\t\theaders[key] = value;\n\t\t});\n\t\telse if (init?.headers) new Headers(init.headers).forEach((value, key) => {\n\t\t\theaders[key] = value;\n\t\t});\n\t\treturn {\n\t\t\tid,\n\t\t\tmode: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepMode.Async,\n\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_1__.StepOpCode.Gateway,\n\t\t\tdisplayName: name ?? id,\n\t\t\topts: {\n\t\t\t\turl,\n\t\t\t\tmethod: init?.method ?? \"GET\",\n\t\t\t\theaders,\n\t\t\t\tbody: init?.body\n\t\t\t},\n\t\t\tuserland: { id }\n\t\t};\n\t});\n\treturn tools;\n};\nconst gatewaySymbol = Symbol.for(\"inngest.step.gateway\");\n/**\n* A generic set of step tools that can be used without typing information about\n* the client used to create them.\n*\n* These tools use AsyncLocalStorage to track the context in which they are\n* used, and will throw an error if used outside of an Inngest context.\n*\n* The intention of these high-level tools is to allow usage of Inngest step\n* tools within API endpoints, though they can still be used within regular\n* Inngest functions as well.\n*/\nconst step = {\n\tfetch: null,\n\tai: {\n\t\tinfer: (...args) => getDeferredStepTooling().then((tools) => tools.ai.infer(...args)),\n\t\twrap: (...args) => getDeferredStepTooling().then((tools) => tools.ai.wrap(...args)),\n\t\tmodels: { ..._inngest_ai__WEBPACK_IMPORTED_MODULE_0__.models }\n\t},\n\tinvoke: (...args) => getDeferredStepTooling().then((tools) => tools.invoke(...args)),\n\trun: (...args) => getDeferredStepTooling().then((tools) => tools.run(...args)),\n\tsendEvent: (...args) => getDeferredStepTooling().then((tools) => tools.sendEvent(...args)),\n\tsendSignal: (...args) => getDeferredStepTooling().then((tools) => tools.sendSignal(...args)),\n\tsleep: (...args) => getDeferredStepTooling().then((tools) => tools.sleep(...args)),\n\tsleepUntil: (...args) => getDeferredStepTooling().then((tools) => tools.sleepUntil(...args)),\n\twaitForEvent: (...args) => getDeferredStepTooling().then((tools) => tools.waitForEvent(...args)),\n\twaitForSignal: (...args) => getDeferredStepTooling().then((tools) => tools.waitForSignal(...args))\n};\n/**\n* An internal function used to retrieve or create step tooling for the current\n* execution context.\n*\n* Note that this requires an existing context to create the step tooling;\n* something must declare the Inngest execution context before this can be used.\n*/\nconst getDeferredStepTooling = async () => {\n\tconst ctx = await (0,_execution_als_js__WEBPACK_IMPORTED_MODULE_10__.getAsyncCtx)();\n\tif (!ctx) throw new Error(\"`step` tools can only be used within Inngest function executions; no context was found\");\n\tif (!ctx.app) throw new Error(\"`step` tools can only be used within Inngest function executions; no Inngest client was found in the execution context\");\n\tif (!ctx.execution) throw new Error(\"`step` tools can only be used within Inngest function executions; no execution context was found\");\n\treturn ctx.execution.ctx.step;\n};\n/**\n* The event payload portion of the options for `step.invoke()`. This does not\n* include non-payload options like `timeout` or the function to invoke.\n*/\nconst invokePayloadSchema = zod_v3__WEBPACK_IMPORTED_MODULE_5__.object({\n\tdata: zod_v3__WEBPACK_IMPORTED_MODULE_5__.record(zod_v3__WEBPACK_IMPORTED_MODULE_5__.any()).optional(),\n\tuser: zod_v3__WEBPACK_IMPORTED_MODULE_5__.record(zod_v3__WEBPACK_IMPORTED_MODULE_5__.any()).optional(),\n\tv: zod_v3__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n});\n\n//#endregion\n\n//# sourceMappingURL=InngestStepTools.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL0lubmdlc3RTdGVwVG9vbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDQTtBQUNFO0FBQ0g7QUFDK0I7QUFDTDtBQUN2QztBQUNvQjtBQUNrQjtBQUM5QztBQUNVOztBQUVyQztBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFVBQVU7QUFDakM7QUFDQSx3QkFBd0IsUUFBUSxJQUFJO0FBQ3BDLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0NBQVE7QUFDbEIsUUFBUSxpREFBVTtBQUNsQjtBQUNBO0FBQ0Esb0NBQW9DLE9BQU8sSUFBSTtBQUMvQyxnQkFBZ0I7QUFDaEI7QUFDQSxHQUFHLElBQUksdUNBQXVDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsd0VBQXVCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixVQUFVO0FBQ3JDO0FBQ0E7QUFDQSxVQUFVLCtDQUFRO0FBQ2xCLFFBQVEsaURBQVU7QUFDbEI7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDLGdCQUFnQjtBQUNoQjtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZUFBZTtBQUNmO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxHQUFHLCtDQUFNO0FBQ3JCLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtEQUFXO0FBQzlCLDhGQUE4RjtBQUM5RixrR0FBa0c7QUFDbEcsd0dBQXdHO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwQ0FBUTtBQUNwQyxPQUFPLDBDQUFRLENBQUMsdUNBQUs7QUFDckIsT0FBTywwQ0FBUSxDQUFDLHVDQUFLO0FBQ3JCLElBQUksMENBQVE7QUFDWixDQUFDOztBQUVEO0FBQzJHO0FBQzNHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9Jbm5nZXN0U3RlcFRvb2xzLmpzPzRiZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXN5bmNDdHggfSBmcm9tIFwiLi9leGVjdXRpb24vYWxzLmpzXCI7XG5pbXBvcnQgeyBsb2dQcmVmaXggfSBmcm9tIFwiLi4vaGVscGVycy9jb25zdHMuanNcIjtcbmltcG9ydCB7IFN0ZXBNb2RlLCBTdGVwT3BDb2RlIH0gZnJvbSBcIi4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyB0aW1lU3RyIH0gZnJvbSBcIi4uL2hlbHBlcnMvc3RyaW5ncy5qc1wiO1xuaW1wb3J0IHsgVW5zY29wZWRNZXRhZGF0YUJ1aWxkZXIsIG1ldGFkYXRhU3ltYm9sIH0gZnJvbSBcIi4vSW5uZ2VzdE1ldGFkYXRhLmpzXCI7XG5pbXBvcnQgeyBnZXRJU09TdHJpbmcsIGlzVGVtcG9yYWxEdXJhdGlvbiB9IGZyb20gXCIuLi9oZWxwZXJzL3RlbXBvcmFsLmpzXCI7XG5pbXBvcnQgeyBmZXRjaCB9IGZyb20gXCIuL0ZldGNoLmpzXCI7XG5pbXBvcnQgeyBJbm5nZXN0RnVuY3Rpb24gfSBmcm9tIFwiLi9Jbm5nZXN0RnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IElubmdlc3RGdW5jdGlvblJlZmVyZW5jZSB9IGZyb20gXCIuL0lubmdlc3RGdW5jdGlvblJlZmVyZW5jZS5qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcbmltcG9ydCB7IG1vZGVscyB9IGZyb20gXCJAaW5uZ2VzdC9haVwiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvSW5uZ2VzdFN0ZXBUb29scy50c1xuY29uc3QgZ2V0U3RlcE9wdGlvbnMgPSAob3B0aW9ucykgPT4ge1xuXHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHJldHVybiB7IGlkOiBvcHRpb25zIH07XG5cdHJldHVybiBvcHRpb25zO1xufTtcbi8qKlxuKiBTdWZmaXggdXNlZCB0byBuYW1lc3BhY2Ugc3RlcHMgdGhhdCBhcmUgYXV0b21hdGljYWxseSBpbmRleGVkLlxuKi9cbmNvbnN0IFNURVBfSU5ERVhJTkdfU1VGRklYID0gXCI6XCI7XG4vKipcbiogQ3JlYXRlIGEgbmV3IHNldCBvZiBzdGVwIGZ1bmN0aW9uIHRvb2xzIHJlYWR5IHRvIGJlIHVzZWQgaW4gYSBzdGVwIGZ1bmN0aW9uLlxuKiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBydW4gYW5kIGEgZnJlc2ggc2V0IG9mIHRvb2xzIHByb3ZpZGVkIGV2ZXJ5IHRpbWUgYVxuKiBmdW5jdGlvbiBpcyBydW4uXG4qXG4qIEFuIG9wIHN0YWNrIChmdW5jdGlvbiBzdGF0ZSkgaXMgcGFzc2VkIGluIGFzIHdlbGwgYXMgc29tZSBtdXRhYmxlIHByb3BlcnRpZXNcbiogdGhhdCB0aGUgdG9vbHMgY2FuIHVzZSB0byBzdWJtaXQgYSBuZXcgb3AuXG4qL1xuY29uc3QgY3JlYXRlU3RlcFRvb2xzID0gKGNsaWVudCwgZXhlY3V0aW9uLCBzdGVwSGFuZGxlcikgPT4ge1xuXHQvKipcblx0KiBBIGxvY2FsIGhlbHBlciB1c2VkIHRvIGNyZWF0ZSB0b29scyB0aGF0IGNhbiBiZSB1c2VkIHRvIHN1Ym1pdCBhbiBvcC5cblx0KlxuXHQqIFdoZW4gdXNpbmcgdGhpcyBmdW5jdGlvbiwgYSBnZW5lcmljIHR5cGUgc2hvdWxkIGJlIHByb3ZpZGVkIHdoaWNoIGlzIHRoZVxuXHQqIGZ1bmN0aW9uIHNpZ25hdHVyZSBleHBvc2VkIHRvIHRoZSB1c2VyLlxuXHQqL1xuXHRjb25zdCBjcmVhdGVUb29sID0gKG1hdGNoT3AsIG9wdHMpID0+IHtcblx0XHRyZXR1cm4gKGFzeW5jICguLi5hcmdzKSA9PiB7XG5cdFx0XHRyZXR1cm4gc3RlcEhhbmRsZXIoe1xuXHRcdFx0XHRhcmdzLFxuXHRcdFx0XHRtYXRjaE9wLFxuXHRcdFx0XHRvcHRzXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblx0LyoqXG5cdCogQ3JlYXRlIGEgbmV3IHN0ZXAgcnVuIHRvb2wgdGhhdCBjYW4gYmUgdXNlZCB0byBydW4gYSBzdGVwIGZ1bmN0aW9uIHVzaW5nXG5cdCogYHN0ZXAucnVuKClgIGFzIGEgc2hpbS5cblx0Ki9cblx0Y29uc3QgY3JlYXRlU3RlcFJ1biA9ICh0eXBlKSA9PiB7XG5cdFx0cmV0dXJuIGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSwgX2ZuLCAuLi5pbnB1dCkgPT4ge1xuXHRcdFx0Y29uc3Qgb3B0cyA9IHtcblx0XHRcdFx0Li4uaW5wdXQubGVuZ3RoID8geyBpbnB1dCB9IDoge30sXG5cdFx0XHRcdC4uLnR5cGUgPyB7IHR5cGUgfSA6IHt9XG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQsXG5cdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLlN5bmMsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBQbGFubmVkLFxuXHRcdFx0XHRuYW1lOiBpZCxcblx0XHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRcdC4uLk9iamVjdC5rZXlzKG9wdHMpLmxlbmd0aCA/IHsgb3B0cyB9IDoge30sXG5cdFx0XHRcdHVzZXJsYW5kOiB7IGlkIH1cblx0XHRcdH07XG5cdFx0fSwgeyBmbjogKF8sIGZuLCAuLi5pbnB1dCkgPT4gZm4oLi4uaW5wdXQpIH0pO1xuXHR9O1xuXHQvKipcblx0KiBDcmVhdGVzIGEgbWV0YWRhdGEgYnVpbGRlciB3cmFwcGVyIGZvciBzdGVwLm1ldGFkYXRhKFwiaWRcIikuXG5cdCogVXNlcyBNZXRhZGF0YUJ1aWxkZXIgZm9yIGNvbmZpZyBhY2N1bXVsYXRpb24sIGJ1dCB3cmFwcyAudXBkYXRlKCkgaW4gdG9vbHMucnVuKCkgZm9yIG1lbW9pemF0aW9uLlxuXHQqL1xuXHRjb25zdCBjcmVhdGVTdGVwTWV0YWRhdGFXcmFwcGVyID0gKG1lbW9pemF0aW9uSWQsIGJ1aWxkZXIpID0+IHtcblx0XHRpZiAoIWNsaWVudFtcImV4cGVyaW1lbnRhbE1ldGFkYXRhRW5hYmxlZFwiXSkgdGhyb3cgbmV3IEVycm9yKFwic3RlcC5tZXRhZGF0YSgpIGlzIGV4cGVyaW1lbnRhbC4gRW5hYmxlIGl0IGJ5IGFkZGluZyBtZXRhZGF0YU1pZGRsZXdhcmUoKSBmcm9tIFxcXCJpbm5nZXN0L2V4cGVyaW1lbnRhbFxcXCIgdG8geW91ciBjbGllbnQgbWlkZGxld2FyZS5cIik7XG5cdFx0Y29uc3Qgd2l0aEJ1aWxkZXIgPSAobmV4dCkgPT4gY3JlYXRlU3RlcE1ldGFkYXRhV3JhcHBlcihtZW1vaXphdGlvbklkLCBuZXh0KTtcblx0XHRpZiAoIWJ1aWxkZXIpIGJ1aWxkZXIgPSBuZXcgVW5zY29wZWRNZXRhZGF0YUJ1aWxkZXIoY2xpZW50KS5ydW4oKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cnVuOiAocnVuSWQpID0+IHdpdGhCdWlsZGVyKGJ1aWxkZXIucnVuKHJ1bklkKSksXG5cdFx0XHRzdGVwOiAoc3RlcElkLCBpbmRleCkgPT4gd2l0aEJ1aWxkZXIoYnVpbGRlci5zdGVwKHN0ZXBJZCwgaW5kZXgpKSxcblx0XHRcdGF0dGVtcHQ6IChhdHRlbXB0SW5kZXgpID0+IHdpdGhCdWlsZGVyKGJ1aWxkZXIuYXR0ZW1wdChhdHRlbXB0SW5kZXgpKSxcblx0XHRcdHNwYW46IChzcGFuSWQpID0+IHdpdGhCdWlsZGVyKGJ1aWxkZXIuc3BhbihzcGFuSWQpKSxcblx0XHRcdHVwZGF0ZTogYXN5bmMgKHZhbHVlcywga2luZCA9IFwiZGVmYXVsdFwiKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRvb2xzLnJ1bihtZW1vaXphdGlvbklkLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0YXdhaXQgYnVpbGRlci51cGRhdGUodmFsdWVzLCBraW5kKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdFx0ZG86IGFzeW5jIChmbikgPT4ge1xuXHRcdFx0XHRhd2FpdCB0b29scy5ydW4obWVtb2l6YXRpb25JZCwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGF3YWl0IGZuKGJ1aWxkZXIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXHR9O1xuXHQvKipcblx0KiBEZWZpbmUgdGhlIHNldCBvZiB0b29scyB0aGUgdXNlciBoYXMgYWNjZXNzIHRvIGZvciB0aGVpciBzdGVwIGZ1bmN0aW9ucy5cblx0KlxuXHQqIEVhY2gga2V5IGlzIHRoZSBmdW5jdGlvbiBuYW1lIGFuZCBpcyBleHBlY3RlZCB0byBydW4gYGNyZWF0ZVRvb2xgIGFuZCBwYXNzXG5cdCogYSBnZW5lcmljIHR5cGUgZm9yIHRoYXQgZnVuY3Rpb24gYXMgaXQgd2lsbCBhcHBlYXIgaW4gdGhlIHVzZXIncyBjb2RlLlxuXHQqL1xuXHRjb25zdCB0b29scyA9IHtcblx0XHRzZW5kRXZlbnQ6IGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSkgPT4ge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQsXG5cdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLlN5bmMsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBQbGFubmVkLFxuXHRcdFx0XHRuYW1lOiBcInNlbmRFdmVudFwiLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0b3B0czogeyB0eXBlOiBcInN0ZXAuc2VuZEV2ZW50XCIgfSxcblx0XHRcdFx0dXNlcmxhbmQ6IHsgaWQgfVxuXHRcdFx0fTtcblx0XHR9LCB7IGZuOiAoX2lkT3JPcHRpb25zLCBwYXlsb2FkKSA9PiB7XG5cdFx0XHRyZXR1cm4gY2xpZW50W1wiX3NlbmRcIl0oe1xuXHRcdFx0XHRwYXlsb2FkLFxuXHRcdFx0XHRoZWFkZXJzOiBleGVjdXRpb25bXCJvcHRpb25zXCJdW1wiaGVhZGVyc1wiXVxuXHRcdFx0fSk7XG5cdFx0fSB9KSxcblx0XHR3YWl0Rm9yU2lnbmFsOiBjcmVhdGVUb29sKCh7IGlkLCBuYW1lIH0sIG9wdHMpID0+IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGlkLFxuXHRcdFx0XHRtb2RlOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuV2FpdEZvclNpZ25hbCxcblx0XHRcdFx0bmFtZTogb3B0cy5zaWduYWwsXG5cdFx0XHRcdGRpc3BsYXlOYW1lOiBuYW1lID8/IGlkLFxuXHRcdFx0XHRvcHRzOiB7XG5cdFx0XHRcdFx0c2lnbmFsOiBvcHRzLnNpZ25hbCxcblx0XHRcdFx0XHR0aW1lb3V0OiB0aW1lU3RyKG9wdHMudGltZW91dCksXG5cdFx0XHRcdFx0Y29uZmxpY3Q6IG9wdHMub25Db25mbGljdFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1c2VybGFuZDogeyBpZCB9XG5cdFx0XHR9O1xuXHRcdH0pLFxuXHRcdHNlbmRTaWduYWw6IGNyZWF0ZVRvb2woKHsgaWQsIG5hbWUgfSwgb3B0cykgPT4ge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQsXG5cdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLlN5bmMsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBQbGFubmVkLFxuXHRcdFx0XHRuYW1lOiBcInNlbmRTaWduYWxcIixcblx0XHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRcdG9wdHM6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXAuc2VuZFNpZ25hbFwiLFxuXHRcdFx0XHRcdHNpZ25hbDogb3B0cy5zaWduYWxcblx0XHRcdFx0fSxcblx0XHRcdFx0dXNlcmxhbmQ6IHsgaWQgfVxuXHRcdFx0fTtcblx0XHR9LCB7IGZuOiAoX2lkT3JPcHRpb25zLCBvcHRzKSA9PiB7XG5cdFx0XHRyZXR1cm4gY2xpZW50W1wiX3NlbmRTaWduYWxcIl0oe1xuXHRcdFx0XHRzaWduYWw6IG9wdHMuc2lnbmFsLFxuXHRcdFx0XHRkYXRhOiBvcHRzLmRhdGEsXG5cdFx0XHRcdGhlYWRlcnM6IGV4ZWN1dGlvbltcIm9wdGlvbnNcIl1bXCJoZWFkZXJzXCJdXG5cdFx0XHR9KTtcblx0XHR9IH0pLFxuXHRcdHdhaXRGb3JFdmVudDogY3JlYXRlVG9vbCgoeyBpZCwgbmFtZSB9LCBvcHRzKSA9PiB7XG5cdFx0XHRjb25zdCBtYXRjaE9wdHMgPSB7IHRpbWVvdXQ6IHRpbWVTdHIodHlwZW9mIG9wdHMgPT09IFwic3RyaW5nXCIgPyBvcHRzIDogb3B0cy50aW1lb3V0KSB9O1xuXHRcdFx0aWYgKHR5cGVvZiBvcHRzICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdGlmIChvcHRzPy5tYXRjaCkgbWF0Y2hPcHRzLmlmID0gYGV2ZW50LiR7b3B0cy5tYXRjaH0gPT0gYXN5bmMuJHtvcHRzLm1hdGNofWA7XG5cdFx0XHRcdGVsc2UgaWYgKG9wdHM/LmlmKSBtYXRjaE9wdHMuaWYgPSBvcHRzLmlmO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQsXG5cdFx0XHRcdG1vZGU6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0XHRvcDogU3RlcE9wQ29kZS5XYWl0Rm9yRXZlbnQsXG5cdFx0XHRcdG5hbWU6IG9wdHMuZXZlbnQsXG5cdFx0XHRcdG9wdHM6IG1hdGNoT3B0cyxcblx0XHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRcdHVzZXJsYW5kOiB7IGlkIH1cblx0XHRcdH07XG5cdFx0fSksXG5cdFx0cnVuOiBjcmVhdGVTdGVwUnVuKCksXG5cdFx0YWk6IHtcblx0XHRcdGluZmVyOiBjcmVhdGVUb29sKCh7IGlkLCBuYW1lIH0sIG9wdGlvbnMpID0+IHtcblx0XHRcdFx0Y29uc3QgeyBtb2RlbCwgYm9keSwgLi4ucmVzdCB9ID0gb3B0aW9ucztcblx0XHRcdFx0Y29uc3QgbW9kZWxDb3B5ID0geyAuLi5tb2RlbCB9O1xuXHRcdFx0XHRvcHRpb25zLm1vZGVsLm9uQ2FsbD8uKG1vZGVsQ29weSwgb3B0aW9ucy5ib2R5KTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRtb2RlOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0XHRvcDogU3RlcE9wQ29kZS5BaUdhdGV3YXksXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRcdFx0b3B0czoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdGVwLmFpLmluZmVyXCIsXG5cdFx0XHRcdFx0XHR1cmw6IG1vZGVsQ29weS51cmwsXG5cdFx0XHRcdFx0XHRoZWFkZXJzOiBtb2RlbENvcHkuaGVhZGVycyxcblx0XHRcdFx0XHRcdGF1dGhfa2V5OiBtb2RlbENvcHkuYXV0aEtleSxcblx0XHRcdFx0XHRcdGZvcm1hdDogbW9kZWxDb3B5LmZvcm1hdCxcblx0XHRcdFx0XHRcdGJvZHksXG5cdFx0XHRcdFx0XHQuLi5yZXN0XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR1c2VybGFuZDogeyBpZCB9XG5cdFx0XHRcdH07XG5cdFx0XHR9KSxcblx0XHRcdHdyYXA6IGNyZWF0ZVN0ZXBSdW4oXCJzdGVwLmFpLndyYXBcIiksXG5cdFx0XHRtb2RlbHM6IHsgLi4ubW9kZWxzIH1cblx0XHR9LFxuXHRcdHNsZWVwOiBjcmVhdGVUb29sKCh7IGlkLCBuYW1lIH0sIHRpbWUpID0+IHtcblx0XHRcdC8qKlxuXHRcdFx0KiBUaGUgcHJlc2VuY2Ugb2YgdGhpcyBvcGVyYXRpb24gaW4gdGhlIHJldHVybmVkIHN0YWNrIGluZGljYXRlcyB0aGF0IHRoZVxuXHRcdFx0KiBzbGVlcCBpcyBvdmVyIGFuZCB3ZSBzaG91bGQgY29udGludWUgZXhlY3V0aW9uLlxuXHRcdFx0Ki9cblx0XHRcdGNvbnN0IG1zVGltZVN0ciA9IHRpbWVTdHIoaXNUZW1wb3JhbER1cmF0aW9uKHRpbWUpID8gdGltZS50b3RhbCh7IHVuaXQ6IFwibWlsbGlzZWNvbmRzXCIgfSkgOiB0aW1lKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGlkLFxuXHRcdFx0XHRtb2RlOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU2xlZXAsXG5cdFx0XHRcdG5hbWU6IG1zVGltZVN0cixcblx0XHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRcdHVzZXJsYW5kOiB7IGlkIH1cblx0XHRcdH07XG5cdFx0fSksXG5cdFx0c2xlZXBVbnRpbDogY3JlYXRlVG9vbCgoeyBpZCwgbmFtZSB9LCB0aW1lKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBpc28gPSBnZXRJU09TdHJpbmcodGltZSk7XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQqIFRoZSBwcmVzZW5jZSBvZiB0aGlzIG9wZXJhdGlvbiBpbiB0aGUgcmV0dXJuZWQgc3RhY2sgaW5kaWNhdGVzIHRoYXQgdGhlXG5cdFx0XHRcdCogc2xlZXAgaXMgb3ZlciBhbmQgd2Ugc2hvdWxkIGNvbnRpbnVlIGV4ZWN1dGlvbi5cblx0XHRcdFx0Ki9cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRtb2RlOiBTdGVwTW9kZS5Bc3luYyxcblx0XHRcdFx0XHRvcDogU3RlcE9wQ29kZS5TbGVlcCxcblx0XHRcdFx0XHRuYW1lOiBpc28sXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6IG5hbWUgPz8gaWQsXG5cdFx0XHRcdFx0dXNlcmxhbmQ6IHsgaWQgfVxuXHRcdFx0XHR9O1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQqIElmIHdlJ3JlIGhlcmUsIGl0J3MgYmVjYXVzZSB0aGUgZGF0ZSBpcyBpbnZhbGlkLiBXZSdsbCB0aHJvdyBhIGN1c3RvbVxuXHRcdFx0XHQqIGVycm9yIGhlcmUgdG8gc3RhbmRhcmRpc2UgdGhpcyByZXNwb25zZS5cblx0XHRcdFx0Ki9cblx0XHRcdFx0Y29uc29sZS53YXJuKFwiSW52YWxpZCBgRGF0ZWAsIGRhdGUgc3RyaW5nLCBgVGVtcG9yYWwuSW5zdGFudGAsIG9yIGBUZW1wb3JhbC5ab25lZERhdGVUaW1lYCBwYXNzZWQgdG8gc2xlZXBVbnRpbDtcIiwgZXJyKTtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFxcYERhdGVcXGAsIGRhdGUgc3RyaW5nLCBcXGBUZW1wb3JhbC5JbnN0YW50XFxgLCBvciBcXGBUZW1wb3JhbC5ab25lZERhdGVUaW1lXFxgIHBhc3NlZCB0byBzbGVlcFVudGlsOiAke3RpbWV9YCk7XG5cdFx0XHR9XG5cdFx0fSksXG5cdFx0aW52b2tlOiBjcmVhdGVUb29sKCh7IGlkLCBuYW1lIH0sIGludm9rZU9wdHMpID0+IHtcblx0XHRcdGNvbnN0IG9wdHNTY2hlbWEgPSBpbnZva2VQYXlsb2FkU2NoZW1hLmV4dGVuZCh7IHRpbWVvdXQ6IHoudW5pb24oW1xuXHRcdFx0XHR6Lm51bWJlcigpLFxuXHRcdFx0XHR6LnN0cmluZygpLFxuXHRcdFx0XHR6LmRhdGUoKVxuXHRcdFx0XSkub3B0aW9uYWwoKSB9KTtcblx0XHRcdGNvbnN0IHBhcnNlZEZuT3B0cyA9IG9wdHNTY2hlbWEuZXh0ZW5kKHtcblx0XHRcdFx0X3R5cGU6IHoubGl0ZXJhbChcImZ1bGxJZFwiKS5vcHRpb25hbCgpLmRlZmF1bHQoXCJmdWxsSWRcIiksXG5cdFx0XHRcdGZ1bmN0aW9uOiB6LnN0cmluZygpLm1pbigxKVxuXHRcdFx0fSkub3Iob3B0c1NjaGVtYS5leHRlbmQoe1xuXHRcdFx0XHRfdHlwZTogei5saXRlcmFsKFwiZm5JbnN0YW5jZVwiKS5vcHRpb25hbCgpLmRlZmF1bHQoXCJmbkluc3RhbmNlXCIpLFxuXHRcdFx0XHRmdW5jdGlvbjogei5pbnN0YW5jZW9mKElubmdlc3RGdW5jdGlvbilcblx0XHRcdH0pKS5vcihvcHRzU2NoZW1hLmV4dGVuZCh7XG5cdFx0XHRcdF90eXBlOiB6LmxpdGVyYWwoXCJyZWZJbnN0YW5jZVwiKS5vcHRpb25hbCgpLmRlZmF1bHQoXCJyZWZJbnN0YW5jZVwiKSxcblx0XHRcdFx0ZnVuY3Rpb246IHouaW5zdGFuY2VvZihJbm5nZXN0RnVuY3Rpb25SZWZlcmVuY2UpXG5cdFx0XHR9KSkuc2FmZVBhcnNlKGludm9rZU9wdHMpO1xuXHRcdFx0aWYgKCFwYXJzZWRGbk9wdHMuc3VjY2VzcykgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGludm9jYXRpb24gb3B0aW9ucyBwYXNzZWQgdG8gaW52b2tlOyBtdXN0IGluY2x1ZGUgZWl0aGVyIGEgZnVuY3Rpb24gb3IgZnVuY3Rpb25JZC5gKTtcblx0XHRcdGNvbnN0IHsgX3R5cGUsIGZ1bmN0aW9uOiBmbiwgZGF0YSwgdXNlciwgdiwgdGltZW91dCB9ID0gcGFyc2VkRm5PcHRzLmRhdGE7XG5cdFx0XHRjb25zdCBvcHRzID0ge1xuXHRcdFx0XHRwYXlsb2FkOiB7XG5cdFx0XHRcdFx0ZGF0YSxcblx0XHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRcdHZcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb25faWQ6IFwiXCIsXG5cdFx0XHRcdHRpbWVvdXQ6IHR5cGVvZiB0aW1lb3V0ID09PSBcInVuZGVmaW5lZFwiID8gdm9pZCAwIDogdGltZVN0cih0aW1lb3V0KVxuXHRcdFx0fTtcblx0XHRcdHN3aXRjaCAoX3R5cGUpIHtcblx0XHRcdFx0Y2FzZSBcImZuSW5zdGFuY2VcIjpcblx0XHRcdFx0XHRvcHRzLmZ1bmN0aW9uX2lkID0gZm4uaWQoZm5bXCJjbGllbnRcIl0uaWQpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZnVsbElkXCI6XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKGAke2xvZ1ByZWZpeH0gSW52b2tpbmcgZnVuY3Rpb24gd2l0aCBcXGBmdW5jdGlvbjogc3RyaW5nXFxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB2NC4wLjA7IHVzZSBhbiBpbXBvcnRlZCBmdW5jdGlvbiBvciBcXGByZWZlcmVuY2VGdW5jdGlvbigpXFxgIGluc3RlYWQuIFNlZSBodHRwczovL2lubmdlLnN0L3RzLXJlZmVyZW5jaW5nLWZ1bmN0aW9uc2ApO1xuXHRcdFx0XHRcdG9wdHMuZnVuY3Rpb25faWQgPSBmbjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInJlZkluc3RhbmNlXCI6XG5cdFx0XHRcdFx0b3B0cy5mdW5jdGlvbl9pZCA9IFtmbi5vcHRzLmFwcElkIHx8IGNsaWVudC5pZCwgZm4ub3B0cy5mdW5jdGlvbklkXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIi1cIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpZCxcblx0XHRcdFx0bW9kZTogU3RlcE1vZGUuQXN5bmMsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLkludm9rZUZ1bmN0aW9uLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogbmFtZSA/PyBpZCxcblx0XHRcdFx0b3B0cyxcblx0XHRcdFx0dXNlcmxhbmQ6IHsgaWQgfVxuXHRcdFx0fTtcblx0XHR9KSxcblx0XHRmZXRjaFxuXHR9O1xuXHR0b29sc1ttZXRhZGF0YVN5bWJvbF0gPSAobWVtb2l6YXRpb25JZCkgPT4gY3JlYXRlU3RlcE1ldGFkYXRhV3JhcHBlcihtZW1vaXphdGlvbklkKTtcblx0dG9vbHNbZ2F0ZXdheVN5bWJvbF0gPSBjcmVhdGVUb29sKCh7IGlkLCBuYW1lIH0sIGlucHV0LCBpbml0KSA9PiB7XG5cdFx0Y29uc3QgdXJsID0gaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0ID8gaW5wdXQudXJsIDogaW5wdXQudG9TdHJpbmcoKTtcblx0XHRjb25zdCBoZWFkZXJzID0ge307XG5cdFx0aWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkgaW5wdXQuaGVhZGVycy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG5cdFx0XHRoZWFkZXJzW2tleV0gPSB2YWx1ZTtcblx0XHR9KTtcblx0XHRlbHNlIGlmIChpbml0Py5oZWFkZXJzKSBuZXcgSGVhZGVycyhpbml0LmhlYWRlcnMpLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcblx0XHRcdGhlYWRlcnNba2V5XSA9IHZhbHVlO1xuXHRcdH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZCxcblx0XHRcdG1vZGU6IFN0ZXBNb2RlLkFzeW5jLFxuXHRcdFx0b3A6IFN0ZXBPcENvZGUuR2F0ZXdheSxcblx0XHRcdGRpc3BsYXlOYW1lOiBuYW1lID8/IGlkLFxuXHRcdFx0b3B0czoge1xuXHRcdFx0XHR1cmwsXG5cdFx0XHRcdG1ldGhvZDogaW5pdD8ubWV0aG9kID8/IFwiR0VUXCIsXG5cdFx0XHRcdGhlYWRlcnMsXG5cdFx0XHRcdGJvZHk6IGluaXQ/LmJvZHlcblx0XHRcdH0sXG5cdFx0XHR1c2VybGFuZDogeyBpZCB9XG5cdFx0fTtcblx0fSk7XG5cdHJldHVybiB0b29scztcbn07XG5jb25zdCBnYXRld2F5U3ltYm9sID0gU3ltYm9sLmZvcihcImlubmdlc3Quc3RlcC5nYXRld2F5XCIpO1xuLyoqXG4qIEEgZ2VuZXJpYyBzZXQgb2Ygc3RlcCB0b29scyB0aGF0IGNhbiBiZSB1c2VkIHdpdGhvdXQgdHlwaW5nIGluZm9ybWF0aW9uIGFib3V0XG4qIHRoZSBjbGllbnQgdXNlZCB0byBjcmVhdGUgdGhlbS5cbipcbiogVGhlc2UgdG9vbHMgdXNlIEFzeW5jTG9jYWxTdG9yYWdlIHRvIHRyYWNrIHRoZSBjb250ZXh0IGluIHdoaWNoIHRoZXkgYXJlXG4qIHVzZWQsIGFuZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHVzZWQgb3V0c2lkZSBvZiBhbiBJbm5nZXN0IGNvbnRleHQuXG4qXG4qIFRoZSBpbnRlbnRpb24gb2YgdGhlc2UgaGlnaC1sZXZlbCB0b29scyBpcyB0byBhbGxvdyB1c2FnZSBvZiBJbm5nZXN0IHN0ZXBcbiogdG9vbHMgd2l0aGluIEFQSSBlbmRwb2ludHMsIHRob3VnaCB0aGV5IGNhbiBzdGlsbCBiZSB1c2VkIHdpdGhpbiByZWd1bGFyXG4qIElubmdlc3QgZnVuY3Rpb25zIGFzIHdlbGwuXG4qL1xuY29uc3Qgc3RlcCA9IHtcblx0ZmV0Y2g6IG51bGwsXG5cdGFpOiB7XG5cdFx0aW5mZXI6ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLmFpLmluZmVyKC4uLmFyZ3MpKSxcblx0XHR3cmFwOiAoLi4uYXJncykgPT4gZ2V0RGVmZXJyZWRTdGVwVG9vbGluZygpLnRoZW4oKHRvb2xzKSA9PiB0b29scy5haS53cmFwKC4uLmFyZ3MpKSxcblx0XHRtb2RlbHM6IHsgLi4ubW9kZWxzIH1cblx0fSxcblx0aW52b2tlOiAoLi4uYXJncykgPT4gZ2V0RGVmZXJyZWRTdGVwVG9vbGluZygpLnRoZW4oKHRvb2xzKSA9PiB0b29scy5pbnZva2UoLi4uYXJncykpLFxuXHRydW46ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLnJ1biguLi5hcmdzKSksXG5cdHNlbmRFdmVudDogKC4uLmFyZ3MpID0+IGdldERlZmVycmVkU3RlcFRvb2xpbmcoKS50aGVuKCh0b29scykgPT4gdG9vbHMuc2VuZEV2ZW50KC4uLmFyZ3MpKSxcblx0c2VuZFNpZ25hbDogKC4uLmFyZ3MpID0+IGdldERlZmVycmVkU3RlcFRvb2xpbmcoKS50aGVuKCh0b29scykgPT4gdG9vbHMuc2VuZFNpZ25hbCguLi5hcmdzKSksXG5cdHNsZWVwOiAoLi4uYXJncykgPT4gZ2V0RGVmZXJyZWRTdGVwVG9vbGluZygpLnRoZW4oKHRvb2xzKSA9PiB0b29scy5zbGVlcCguLi5hcmdzKSksXG5cdHNsZWVwVW50aWw6ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLnNsZWVwVW50aWwoLi4uYXJncykpLFxuXHR3YWl0Rm9yRXZlbnQ6ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLndhaXRGb3JFdmVudCguLi5hcmdzKSksXG5cdHdhaXRGb3JTaWduYWw6ICguLi5hcmdzKSA9PiBnZXREZWZlcnJlZFN0ZXBUb29saW5nKCkudGhlbigodG9vbHMpID0+IHRvb2xzLndhaXRGb3JTaWduYWwoLi4uYXJncykpXG59O1xuLyoqXG4qIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgdG8gcmV0cmlldmUgb3IgY3JlYXRlIHN0ZXAgdG9vbGluZyBmb3IgdGhlIGN1cnJlbnRcbiogZXhlY3V0aW9uIGNvbnRleHQuXG4qXG4qIE5vdGUgdGhhdCB0aGlzIHJlcXVpcmVzIGFuIGV4aXN0aW5nIGNvbnRleHQgdG8gY3JlYXRlIHRoZSBzdGVwIHRvb2xpbmc7XG4qIHNvbWV0aGluZyBtdXN0IGRlY2xhcmUgdGhlIElubmdlc3QgZXhlY3V0aW9uIGNvbnRleHQgYmVmb3JlIHRoaXMgY2FuIGJlIHVzZWQuXG4qL1xuY29uc3QgZ2V0RGVmZXJyZWRTdGVwVG9vbGluZyA9IGFzeW5jICgpID0+IHtcblx0Y29uc3QgY3R4ID0gYXdhaXQgZ2V0QXN5bmNDdHgoKTtcblx0aWYgKCFjdHgpIHRocm93IG5ldyBFcnJvcihcImBzdGVwYCB0b29scyBjYW4gb25seSBiZSB1c2VkIHdpdGhpbiBJbm5nZXN0IGZ1bmN0aW9uIGV4ZWN1dGlvbnM7IG5vIGNvbnRleHQgd2FzIGZvdW5kXCIpO1xuXHRpZiAoIWN0eC5hcHApIHRocm93IG5ldyBFcnJvcihcImBzdGVwYCB0b29scyBjYW4gb25seSBiZSB1c2VkIHdpdGhpbiBJbm5nZXN0IGZ1bmN0aW9uIGV4ZWN1dGlvbnM7IG5vIElubmdlc3QgY2xpZW50IHdhcyBmb3VuZCBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHRcIik7XG5cdGlmICghY3R4LmV4ZWN1dGlvbikgdGhyb3cgbmV3IEVycm9yKFwiYHN0ZXBgIHRvb2xzIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIElubmdlc3QgZnVuY3Rpb24gZXhlY3V0aW9uczsgbm8gZXhlY3V0aW9uIGNvbnRleHQgd2FzIGZvdW5kXCIpO1xuXHRyZXR1cm4gY3R4LmV4ZWN1dGlvbi5jdHguc3RlcDtcbn07XG4vKipcbiogVGhlIGV2ZW50IHBheWxvYWQgcG9ydGlvbiBvZiB0aGUgb3B0aW9ucyBmb3IgYHN0ZXAuaW52b2tlKClgLiBUaGlzIGRvZXMgbm90XG4qIGluY2x1ZGUgbm9uLXBheWxvYWQgb3B0aW9ucyBsaWtlIGB0aW1lb3V0YCBvciB0aGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuKi9cbmNvbnN0IGludm9rZVBheWxvYWRTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGRhdGE6IHoucmVjb3JkKHouYW55KCkpLm9wdGlvbmFsKCksXG5cdHVzZXI6IHoucmVjb3JkKHouYW55KCkpLm9wdGlvbmFsKCksXG5cdHY6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU1RFUF9JTkRFWElOR19TVUZGSVgsIGNyZWF0ZVN0ZXBUb29scywgZ2F0ZXdheVN5bWJvbCwgZ2V0U3RlcE9wdGlvbnMsIGludm9rZVBheWxvYWRTY2hlbWEsIHN0ZXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlubmdlc3RTdGVwVG9vbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/InngestStepTools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/NonRetriableError.js":
/*!**************************************************************!*\
  !*** ./node_modules/inngest/components/NonRetriableError.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NonRetriableError: () => (/* binding */ NonRetriableError)\n/* harmony export */ });\n//#region src/components/NonRetriableError.ts\n/**\n* An error that, when thrown, indicates to Inngest that the function should\n* cease all execution and not retry.\n*\n* A `message` must be provided, and an optional `cause` can be provided to\n* provide more context to the error.\n*\n* @public\n*/\nvar NonRetriableError = class extends Error {\n\t/**\n\t* The underlying cause of the error, if any.\n\t*\n\t* This will be serialized and sent to Inngest.\n\t*/\n\tcause;\n\tconstructor(message, options) {\n\t\tsuper(message);\n\t\tthis.cause = options?.cause;\n\t\tthis.name = \"NonRetriableError\";\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=NonRetriableError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL05vblJldHJpYWJsZUVycm9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvY29tcG9uZW50cy9Ob25SZXRyaWFibGVFcnJvci5qcz80NDljIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9Ob25SZXRyaWFibGVFcnJvci50c1xuLyoqXG4qIEFuIGVycm9yIHRoYXQsIHdoZW4gdGhyb3duLCBpbmRpY2F0ZXMgdG8gSW5uZ2VzdCB0aGF0IHRoZSBmdW5jdGlvbiBzaG91bGRcbiogY2Vhc2UgYWxsIGV4ZWN1dGlvbiBhbmQgbm90IHJldHJ5LlxuKlxuKiBBIGBtZXNzYWdlYCBtdXN0IGJlIHByb3ZpZGVkLCBhbmQgYW4gb3B0aW9uYWwgYGNhdXNlYCBjYW4gYmUgcHJvdmlkZWQgdG9cbiogcHJvdmlkZSBtb3JlIGNvbnRleHQgdG8gdGhlIGVycm9yLlxuKlxuKiBAcHVibGljXG4qL1xudmFyIE5vblJldHJpYWJsZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdC8qKlxuXHQqIFRoZSB1bmRlcmx5aW5nIGNhdXNlIG9mIHRoZSBlcnJvciwgaWYgYW55LlxuXHQqXG5cdCogVGhpcyB3aWxsIGJlIHNlcmlhbGl6ZWQgYW5kIHNlbnQgdG8gSW5uZ2VzdC5cblx0Ki9cblx0Y2F1c2U7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcblx0XHRzdXBlcihtZXNzYWdlKTtcblx0XHR0aGlzLmNhdXNlID0gb3B0aW9ucz8uY2F1c2U7XG5cdFx0dGhpcy5uYW1lID0gXCJOb25SZXRyaWFibGVFcnJvclwiO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IE5vblJldHJpYWJsZUVycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ob25SZXRyaWFibGVFcnJvci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/NonRetriableError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/RetryAfterError.js":
/*!************************************************************!*\
  !*** ./node_modules/inngest/components/RetryAfterError.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RetryAfterError: () => (/* binding */ RetryAfterError)\n/* harmony export */ });\n/* harmony import */ var ms__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ms */ \"(rsc)/./node_modules/ms/index.js\");\n\n\n//#region src/components/RetryAfterError.ts\n/**\n* An error that, when thrown, indicates to Inngest that the function should be\n* retried after a given amount of time.\n*\n* A `message` must be provided, as well as a `retryAfter` parameter, which can\n* be a `number` of milliseconds, an `ms`-compatible time string, or a `Date`.\n*\n* An optional `cause` can be provided to provide more context to the error.\n*\n* @public\n*/\nvar RetryAfterError = class extends Error {\n\t/**\n\t* The underlying cause of the error, if any.\n\t*\n\t* This will be serialized and sent to Inngest.\n\t*/\n\tcause;\n\t/**\n\t* The time after which the function should be retried. Represents either a\n\t* number of milliseconds or a RFC3339 date.\n\t*/\n\tretryAfter;\n\tconstructor(message, retryAfter, options) {\n\t\tsuper(message);\n\t\tif (retryAfter instanceof Date) this.retryAfter = retryAfter.toISOString();\n\t\telse {\n\t\t\tconst seconds = `${Math.ceil((typeof retryAfter === \"string\" ? ms__WEBPACK_IMPORTED_MODULE_0__(retryAfter) : retryAfter) / 1e3)}`;\n\t\t\tif (!isFinite(Number(seconds))) throw new Error(\"retryAfter must be a number of milliseconds, a ms-compatible string, or a Date\");\n\t\t\tthis.retryAfter = seconds;\n\t\t}\n\t\tthis.cause = options?.cause;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=RetryAfterError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL1JldHJ5QWZ0ZXJFcnJvci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQjs7QUFFcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNENBQTRDLCtCQUFFLGtDQUFrQztBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL1JldHJ5QWZ0ZXJFcnJvci5qcz80NmU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtcyBmcm9tIFwibXNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL1JldHJ5QWZ0ZXJFcnJvci50c1xuLyoqXG4qIEFuIGVycm9yIHRoYXQsIHdoZW4gdGhyb3duLCBpbmRpY2F0ZXMgdG8gSW5uZ2VzdCB0aGF0IHRoZSBmdW5jdGlvbiBzaG91bGQgYmVcbiogcmV0cmllZCBhZnRlciBhIGdpdmVuIGFtb3VudCBvZiB0aW1lLlxuKlxuKiBBIGBtZXNzYWdlYCBtdXN0IGJlIHByb3ZpZGVkLCBhcyB3ZWxsIGFzIGEgYHJldHJ5QWZ0ZXJgIHBhcmFtZXRlciwgd2hpY2ggY2FuXG4qIGJlIGEgYG51bWJlcmAgb2YgbWlsbGlzZWNvbmRzLCBhbiBgbXNgLWNvbXBhdGlibGUgdGltZSBzdHJpbmcsIG9yIGEgYERhdGVgLlxuKlxuKiBBbiBvcHRpb25hbCBgY2F1c2VgIGNhbiBiZSBwcm92aWRlZCB0byBwcm92aWRlIG1vcmUgY29udGV4dCB0byB0aGUgZXJyb3IuXG4qXG4qIEBwdWJsaWNcbiovXG52YXIgUmV0cnlBZnRlckVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdC8qKlxuXHQqIFRoZSB1bmRlcmx5aW5nIGNhdXNlIG9mIHRoZSBlcnJvciwgaWYgYW55LlxuXHQqXG5cdCogVGhpcyB3aWxsIGJlIHNlcmlhbGl6ZWQgYW5kIHNlbnQgdG8gSW5uZ2VzdC5cblx0Ki9cblx0Y2F1c2U7XG5cdC8qKlxuXHQqIFRoZSB0aW1lIGFmdGVyIHdoaWNoIHRoZSBmdW5jdGlvbiBzaG91bGQgYmUgcmV0cmllZC4gUmVwcmVzZW50cyBlaXRoZXIgYVxuXHQqIG51bWJlciBvZiBtaWxsaXNlY29uZHMgb3IgYSBSRkMzMzM5IGRhdGUuXG5cdCovXG5cdHJldHJ5QWZ0ZXI7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHJldHJ5QWZ0ZXIsIG9wdGlvbnMpIHtcblx0XHRzdXBlcihtZXNzYWdlKTtcblx0XHRpZiAocmV0cnlBZnRlciBpbnN0YW5jZW9mIERhdGUpIHRoaXMucmV0cnlBZnRlciA9IHJldHJ5QWZ0ZXIudG9JU09TdHJpbmcoKTtcblx0XHRlbHNlIHtcblx0XHRcdGNvbnN0IHNlY29uZHMgPSBgJHtNYXRoLmNlaWwoKHR5cGVvZiByZXRyeUFmdGVyID09PSBcInN0cmluZ1wiID8gbXMocmV0cnlBZnRlcikgOiByZXRyeUFmdGVyKSAvIDFlMyl9YDtcblx0XHRcdGlmICghaXNGaW5pdGUoTnVtYmVyKHNlY29uZHMpKSkgdGhyb3cgbmV3IEVycm9yKFwicmV0cnlBZnRlciBtdXN0IGJlIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYSBtcy1jb21wYXRpYmxlIHN0cmluZywgb3IgYSBEYXRlXCIpO1xuXHRcdFx0dGhpcy5yZXRyeUFmdGVyID0gc2Vjb25kcztcblx0XHR9XG5cdFx0dGhpcy5jYXVzZSA9IG9wdGlvbnM/LmNhdXNlO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFJldHJ5QWZ0ZXJFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmV0cnlBZnRlckVycm9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/RetryAfterError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/StepError.js":
/*!******************************************************!*\
  !*** ./node_modules/inngest/components/StepError.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StepError: () => (/* binding */ StepError)\n/* harmony export */ });\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n\n\n\n//#region src/components/StepError.ts\n/**\n* An error that represents a step exhausting all retries and failing. This is\n* thrown by an Inngest step if it fails.\n*\n* It's synonymous with an `Error`, with the addition of the `stepId` that\n* failed.\n*\n* @public\n*/\nvar StepError = class extends Error {\n\tcause;\n\tconstructor(stepId, err) {\n\t\tconst parsedErr = _types_js__WEBPACK_IMPORTED_MODULE_0__.jsonErrorSchema.parse(err);\n\t\tsuper(parsedErr.message);\n\t\tthis.stepId = stepId;\n\t\tthis.name = parsedErr.name;\n\t\tthis.stepId = stepId;\n\t\tthis.stack = parsedErr.stack ?? void 0;\n\t\tthis.cause = parsedErr.cause ? (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_1__.deserializeError)(parsedErr.cause, true) : void 0;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=StepError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL1N0ZXBFcnJvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFDVTs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0RBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvRUFBZ0I7QUFDakQ7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvU3RlcEVycm9yLmpzPzk3NTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganNvbkVycm9yU2NoZW1hIH0gZnJvbSBcIi4uL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBkZXNlcmlhbGl6ZUVycm9yIH0gZnJvbSBcIi4uL2hlbHBlcnMvZXJyb3JzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29tcG9uZW50cy9TdGVwRXJyb3IudHNcbi8qKlxuKiBBbiBlcnJvciB0aGF0IHJlcHJlc2VudHMgYSBzdGVwIGV4aGF1c3RpbmcgYWxsIHJldHJpZXMgYW5kIGZhaWxpbmcuIFRoaXMgaXNcbiogdGhyb3duIGJ5IGFuIElubmdlc3Qgc3RlcCBpZiBpdCBmYWlscy5cbipcbiogSXQncyBzeW5vbnltb3VzIHdpdGggYW4gYEVycm9yYCwgd2l0aCB0aGUgYWRkaXRpb24gb2YgdGhlIGBzdGVwSWRgIHRoYXRcbiogZmFpbGVkLlxuKlxuKiBAcHVibGljXG4qL1xudmFyIFN0ZXBFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRjYXVzZTtcblx0Y29uc3RydWN0b3Ioc3RlcElkLCBlcnIpIHtcblx0XHRjb25zdCBwYXJzZWRFcnIgPSBqc29uRXJyb3JTY2hlbWEucGFyc2UoZXJyKTtcblx0XHRzdXBlcihwYXJzZWRFcnIubWVzc2FnZSk7XG5cdFx0dGhpcy5zdGVwSWQgPSBzdGVwSWQ7XG5cdFx0dGhpcy5uYW1lID0gcGFyc2VkRXJyLm5hbWU7XG5cdFx0dGhpcy5zdGVwSWQgPSBzdGVwSWQ7XG5cdFx0dGhpcy5zdGFjayA9IHBhcnNlZEVyci5zdGFjayA/PyB2b2lkIDA7XG5cdFx0dGhpcy5jYXVzZSA9IHBhcnNlZEVyci5jYXVzZSA/IGRlc2VyaWFsaXplRXJyb3IocGFyc2VkRXJyLmNhdXNlLCB0cnVlKSA6IHZvaWQgMDtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTdGVwRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0ZXBFcnJvci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/StepError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/InngestExecution.js":
/*!***********************************************************************!*\
  !*** ./node_modules/inngest/components/execution/InngestExecution.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InngestExecution: () => (/* binding */ InngestExecution),\n/* harmony export */   InngestExecution_exports: () => (/* binding */ InngestExecution_exports),\n/* harmony export */   PREFERRED_EXECUTION_VERSION: () => (/* binding */ PREFERRED_EXECUTION_VERSION)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! debug */ \"(rsc)/./node_modules/debug/src/index.js\");\n\n\n\n\n//#region src/components/execution/InngestExecution.ts\nvar InngestExecution_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__.__export)({\n\tExecutionVersion: () => _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion,\n\tInngestExecution: () => InngestExecution,\n\tPREFERRED_EXECUTION_VERSION: () => PREFERRED_EXECUTION_VERSION\n});\n/**\n* The preferred execution version that will be used by the SDK when handling\n* brand new runs where the Executor is allowing us to choose.\n*\n* Changing this should not ever be a breaking change, as this will only change\n* new runs, not existing ones.\n*/\nconst PREFERRED_EXECUTION_VERSION = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1;\nvar InngestExecution = class {\n\tdebug;\n\tconstructor(options) {\n\t\tthis.options = options;\n\t\tthis.debug = debug__WEBPACK_IMPORTED_MODULE_0__(`${_helpers_consts_js__WEBPACK_IMPORTED_MODULE_2__.debugPrefix}:${this.options.runId}`);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=InngestExecution.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi9Jbm5nZXN0RXhlY3V0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4RDtBQUNVO0FBQzlDOztBQUUxQjtBQUNBLCtDQUErQyxzRUFBUTtBQUN2RCx5QkFBeUIsZ0VBQWdCO0FBQ3pDO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZ0VBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQ0FBSyxJQUFJLDJEQUFXLENBQUMsR0FBRyxtQkFBbUI7QUFDMUQ7QUFDQTs7QUFFQTtBQUNtRjtBQUNuRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvZXhlY3V0aW9uL0lubmdlc3RFeGVjdXRpb24uanM/NjNhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4cG9ydCB9IGZyb20gXCIuLi8uLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBFeGVjdXRpb25WZXJzaW9uLCBkZWJ1Z1ByZWZpeCB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2NvbnN0cy5qc1wiO1xuaW1wb3J0IERlYnVnIGZyb20gXCJkZWJ1Z1wiO1xuXG4vLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvZXhlY3V0aW9uL0lubmdlc3RFeGVjdXRpb24udHNcbnZhciBJbm5nZXN0RXhlY3V0aW9uX2V4cG9ydHMgPSAvKiBAX19QVVJFX18gKi8gX19leHBvcnQoe1xuXHRFeGVjdXRpb25WZXJzaW9uOiAoKSA9PiBFeGVjdXRpb25WZXJzaW9uLFxuXHRJbm5nZXN0RXhlY3V0aW9uOiAoKSA9PiBJbm5nZXN0RXhlY3V0aW9uLFxuXHRQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT046ICgpID0+IFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTlxufSk7XG4vKipcbiogVGhlIHByZWZlcnJlZCBleGVjdXRpb24gdmVyc2lvbiB0aGF0IHdpbGwgYmUgdXNlZCBieSB0aGUgU0RLIHdoZW4gaGFuZGxpbmdcbiogYnJhbmQgbmV3IHJ1bnMgd2hlcmUgdGhlIEV4ZWN1dG9yIGlzIGFsbG93aW5nIHVzIHRvIGNob29zZS5cbipcbiogQ2hhbmdpbmcgdGhpcyBzaG91bGQgbm90IGV2ZXIgYmUgYSBicmVha2luZyBjaGFuZ2UsIGFzIHRoaXMgd2lsbCBvbmx5IGNoYW5nZVxuKiBuZXcgcnVucywgbm90IGV4aXN0aW5nIG9uZXMuXG4qL1xuY29uc3QgUFJFRkVSUkVEX0VYRUNVVElPTl9WRVJTSU9OID0gRXhlY3V0aW9uVmVyc2lvbi5WMTtcbnZhciBJbm5nZXN0RXhlY3V0aW9uID0gY2xhc3Mge1xuXHRkZWJ1Zztcblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5kZWJ1ZyA9IERlYnVnKGAke2RlYnVnUHJlZml4fToke3RoaXMub3B0aW9ucy5ydW5JZH1gKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBJbm5nZXN0RXhlY3V0aW9uLCBJbm5nZXN0RXhlY3V0aW9uX2V4cG9ydHMsIFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5uZ2VzdEV4ZWN1dGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/als.js":
/*!**********************************************************!*\
  !*** ./node_modules/inngest/components/execution/als.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAsyncCtx: () => (/* binding */ getAsyncCtx),\n/* harmony export */   getAsyncLocalStorage: () => (/* binding */ getAsyncLocalStorage)\n/* harmony export */ });\n//#region src/components/execution/als.ts\n/**\n* A local-only symbol used as a key in global state to store the async local\n* storage instance.\n*/\nconst alsSymbol = Symbol.for(\"inngest:als\");\n/**\n* Retrieve the async context for the current execution.\n*/\nconst getAsyncCtx = async () => {\n\treturn getAsyncLocalStorage().then((als) => als.getStore());\n};\n/**\n* Get a singleton instance of `AsyncLocalStorage` used to store and retrieve\n* async context for the current execution.\n*/\nconst getAsyncLocalStorage = async () => {\n\tglobalThis[alsSymbol] ??= new Promise(async (resolve) => {\n\t\ttry {\n\t\t\tconst { AsyncLocalStorage } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:async_hooks */ \"node:async_hooks\", 19));\n\t\t\tresolve(new AsyncLocalStorage());\n\t\t} catch (_err) {\n\t\t\tconsole.warn(\"node:async_hooks is not supported in this runtime. Experimental async context is disabled.\");\n\t\t\tresolve({\n\t\t\t\tgetStore: () => void 0,\n\t\t\t\trun: (_, fn) => fn()\n\t\t\t});\n\t\t}\n\t});\n\treturn globalThis[alsSymbol];\n};\n\n//#endregion\n\n//# sourceMappingURL=als.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi9hbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsb0JBQW9CLFFBQVEsc0lBQTBCO0FBQ2pFO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDNkM7QUFDN0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi9hbHMuanM/NjljMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NvbXBvbmVudHMvZXhlY3V0aW9uL2Fscy50c1xuLyoqXG4qIEEgbG9jYWwtb25seSBzeW1ib2wgdXNlZCBhcyBhIGtleSBpbiBnbG9iYWwgc3RhdGUgdG8gc3RvcmUgdGhlIGFzeW5jIGxvY2FsXG4qIHN0b3JhZ2UgaW5zdGFuY2UuXG4qL1xuY29uc3QgYWxzU3ltYm9sID0gU3ltYm9sLmZvcihcImlubmdlc3Q6YWxzXCIpO1xuLyoqXG4qIFJldHJpZXZlIHRoZSBhc3luYyBjb250ZXh0IGZvciB0aGUgY3VycmVudCBleGVjdXRpb24uXG4qL1xuY29uc3QgZ2V0QXN5bmNDdHggPSBhc3luYyAoKSA9PiB7XG5cdHJldHVybiBnZXRBc3luY0xvY2FsU3RvcmFnZSgpLnRoZW4oKGFscykgPT4gYWxzLmdldFN0b3JlKCkpO1xufTtcbi8qKlxuKiBHZXQgYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgYEFzeW5jTG9jYWxTdG9yYWdlYCB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZVxuKiBhc3luYyBjb250ZXh0IGZvciB0aGUgY3VycmVudCBleGVjdXRpb24uXG4qL1xuY29uc3QgZ2V0QXN5bmNMb2NhbFN0b3JhZ2UgPSBhc3luYyAoKSA9PiB7XG5cdGdsb2JhbFRoaXNbYWxzU3ltYm9sXSA/Pz0gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgeyBBc3luY0xvY2FsU3RvcmFnZSB9ID0gYXdhaXQgaW1wb3J0KFwibm9kZTphc3luY19ob29rc1wiKTtcblx0XHRcdHJlc29sdmUobmV3IEFzeW5jTG9jYWxTdG9yYWdlKCkpO1xuXHRcdH0gY2F0Y2ggKF9lcnIpIHtcblx0XHRcdGNvbnNvbGUud2FybihcIm5vZGU6YXN5bmNfaG9va3MgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIHJ1bnRpbWUuIEV4cGVyaW1lbnRhbCBhc3luYyBjb250ZXh0IGlzIGRpc2FibGVkLlwiKTtcblx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRnZXRTdG9yZTogKCkgPT4gdm9pZCAwLFxuXHRcdFx0XHRydW46IChfLCBmbikgPT4gZm4oKVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIGdsb2JhbFRoaXNbYWxzU3ltYm9sXTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0QXN5bmNDdHgsIGdldEFzeW5jTG9jYWxTdG9yYWdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/als.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/otel/access.js":
/*!******************************************************************!*\
  !*** ./node_modules/inngest/components/execution/otel/access.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientProcessorMap: () => (/* binding */ clientProcessorMap)\n/* harmony export */ });\n//#region src/components/execution/otel/access.ts\n/**\n* A map of Inngest clients to their OTel span processors. This is used to\n* ensure that we only create one span processor per client, and that we can\n* access the span processor from the client without exposing the OTel\n* libraries to the user.\n*/\nconst clientProcessorMap = /* @__PURE__ */ new WeakMap();\n\n//#endregion\n\n//# sourceMappingURL=access.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi9vdGVsL2FjY2Vzcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QjtBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvZXhlY3V0aW9uL290ZWwvYWNjZXNzLmpzPzM5YTUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL2V4ZWN1dGlvbi9vdGVsL2FjY2Vzcy50c1xuLyoqXG4qIEEgbWFwIG9mIElubmdlc3QgY2xpZW50cyB0byB0aGVpciBPVGVsIHNwYW4gcHJvY2Vzc29ycy4gVGhpcyBpcyB1c2VkIHRvXG4qIGVuc3VyZSB0aGF0IHdlIG9ubHkgY3JlYXRlIG9uZSBzcGFuIHByb2Nlc3NvciBwZXIgY2xpZW50LCBhbmQgdGhhdCB3ZSBjYW5cbiogYWNjZXNzIHRoZSBzcGFuIHByb2Nlc3NvciBmcm9tIHRoZSBjbGllbnQgd2l0aG91dCBleHBvc2luZyB0aGUgT1RlbFxuKiBsaWJyYXJpZXMgdG8gdGhlIHVzZXIuXG4qL1xuY29uc3QgY2xpZW50UHJvY2Vzc29yTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2xpZW50UHJvY2Vzc29yTWFwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2Nlc3MuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/otel/access.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/v0.js":
/*!*********************************************************!*\
  !*** ./node_modules/inngest/components/execution/v0.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createV0InngestExecution: () => (/* binding */ createV0InngestExecution),\n/* harmony export */   v0_exports: () => (/* binding */ v0_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../RetryAfterError.js */ \"(rsc)/./node_modules/inngest/components/RetryAfterError.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var canonicalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! canonicalize */ \"(rsc)/./node_modules/canonicalize/lib/canonicalize.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/execution/v0.ts\nvar v0_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__.__export)({\n\tV0InngestExecution: () => V0InngestExecution,\n\t_internals: () => _internals,\n\tcreateV0InngestExecution: () => createV0InngestExecution\n});\nconst { sha1 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\nconst createV0InngestExecution = (options) => {\n\treturn new V0InngestExecution(options);\n};\nvar V0InngestExecution = class extends _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__.InngestExecution {\n\tversion = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V0;\n\tstate;\n\texecution;\n\tuserFnToRun;\n\tfnArg;\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.userFnToRun = this.getUserFnToRun();\n\t\tthis.state = this.createExecutionState();\n\t\tthis.fnArg = this.createFnArg();\n\t}\n\taddMetadata(_stepId, _kind, _scope, _op, _values) {\n\t\treturn false;\n\t}\n\tstart() {\n\t\tthis.debug(\"starting V0 execution\");\n\t\treturn this.execution ??= this._start().then((result) => {\n\t\t\tthis.debug(\"result:\", result);\n\t\t\treturn result;\n\t\t});\n\t}\n\tasync _start() {\n\t\tthis.state.hooks = await this.initializeMiddleware();\n\t\ttry {\n\t\t\tawait this.transformInput();\n\t\t\tawait this.state.hooks.beforeMemoization?.();\n\t\t\tif (this.state.opStack.length === 0 && !this.options.requestedRunStep) {\n\t\t\t\tawait this.state.hooks.afterMemoization?.();\n\t\t\t\tawait this.state.hooks.beforeExecution?.();\n\t\t\t}\n\t\t\tconst userFnPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.runAsPromise)(() => this.userFnToRun(this.fnArg));\n\t\t\tlet pos = -1;\n\t\t\tdo {\n\t\t\t\tif (pos >= 0) {\n\t\t\t\t\tif (!this.options.requestedRunStep && pos === this.state.opStack.length - 1) {\n\t\t\t\t\t\tawait this.state.hooks.afterMemoization?.();\n\t\t\t\t\t\tawait this.state.hooks.beforeExecution?.();\n\t\t\t\t\t}\n\t\t\t\t\tthis.state.tickOps = {};\n\t\t\t\t\tconst incomingOp = this.state.opStack[pos];\n\t\t\t\t\tthis.state.currentOp = this.state.allFoundOps[incomingOp.id];\n\t\t\t\t\tif (!this.state.currentOp)\n /**\n\t\t\t\t\t* We're trying to resume the function, but we can't find where to go.\n\t\t\t\t\t*\n\t\t\t\t\t* This means that either the function has changed or there are async\n\t\t\t\t\t* actions in-between steps that we haven't noticed in previous\n\t\t\t\t\t* executions.\n\t\t\t\t\t*\n\t\t\t\t\t* Whichever the case, this is bad and we can't continue in this\n\t\t\t\t\t* undefined state.\n\t\t\t\t\t*/\n\t\t\t\t\tthrow new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\t\t\t\twhatHappened: \" Your function was stopped from running\",\n\t\t\t\t\t\twhy: \"We couldn't resume your function's state because it may have changed since the run started or there are async actions in-between steps that we haven't noticed in previous executions.\",\n\t\t\t\t\t\tconsequences: \"Continuing to run the function may result in unexpected behaviour, so we've stopped your function to ensure nothing unexpected happened!\",\n\t\t\t\t\t\ttoFixNow: \"Ensure that your function is either entirely step-based or entirely non-step-based, by either wrapping all asynchronous logic in `step.run()` calls or by removing all `step.*()` calls.\",\n\t\t\t\t\t\totherwise: \"For more information on why step functions work in this manner, see https://www.inngest.com/docs/functions/multi-step#gotchas\",\n\t\t\t\t\t\tstack: true,\n\t\t\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.NON_DETERMINISTIC_FUNCTION\n\t\t\t\t\t}));\n\t\t\t\t\tthis.state.currentOp.fulfilled = true;\n\t\t\t\t\tif (typeof incomingOp.data !== \"undefined\") this.state.currentOp.resolve(incomingOp.data);\n\t\t\t\t\telse this.state.currentOp.reject(incomingOp.error);\n\t\t\t\t}\n\t\t\t\tawait (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.resolveAfterPending)();\n\t\t\t\tthis.state.reset();\n\t\t\t\tpos++;\n\t\t\t} while (pos < this.state.opStack.length);\n\t\t\tawait this.state.hooks.afterMemoization?.();\n\t\t\tconst discoveredOps = Object.values(this.state.tickOps).map(tickOpToOutgoing);\n\t\t\tconst runStep = this.options.requestedRunStep || this.getEarlyExecRunStep(discoveredOps);\n\t\t\tif (runStep) {\n\t\t\t\tconst userFnOp = this.state.allFoundOps[runStep];\n\t\t\t\tconst stepToRun = userFnOp?.fn;\n\t\t\t\tif (!stepToRun) throw new Error(`Bad stack; executor requesting to run unknown step \"${runStep}\"`);\n\t\t\t\tconst outgoingUserFnOp = {\n\t\t\t\t\t...tickOpToOutgoing(userFnOp),\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.Step\n\t\t\t\t};\n\t\t\t\tawait this.state.hooks.beforeExecution?.();\n\t\t\t\tthis.state.executingStep = true;\n\t\t\t\tconst { type: _type, ...rest } = await (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.runAsPromise)(stepToRun).finally(() => {\n\t\t\t\t\tthis.state.executingStep = false;\n\t\t\t\t}).catch(async (error) => {\n\t\t\t\t\treturn await this.transformOutput({ error }, outgoingUserFnOp);\n\t\t\t\t}).then(async (data) => {\n\t\t\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\t\t\treturn await this.transformOutput({ data }, outgoingUserFnOp);\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tstep: {\n\t\t\t\t\t\t...outgoingUserFnOp,\n\t\t\t\t\t\t...rest\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (!discoveredOps.length) {\n\t\t\t\tconst fnRet = await Promise.race([userFnPromise.then((data) => ({\n\t\t\t\t\ttype: \"complete\",\n\t\t\t\t\tdata\n\t\t\t\t})), (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_5__.resolveNextTick)().then(() => ({ type: \"incomplete\" }))]);\n\t\t\t\tif (fnRet.type === \"complete\") {\n\t\t\t\t\tawait this.state.hooks.afterExecution?.();\n\t\t\t\t\tif (Object.values(this.state.allFoundOps).every((op) => {\n\t\t\t\t\t\treturn op.fulfilled;\n\t\t\t\t\t})) return await this.transformOutput({ data: fnRet.data });\n\t\t\t\t} else if (!this.state.hasUsedTools) {\n\t\t\t\t\tthis.state.nonStepFnDetected = true;\n\t\t\t\t\tconst data = await userFnPromise;\n\t\t\t\t\tawait this.state.hooks.afterExecution?.();\n\t\t\t\t\treturn await this.transformOutput({ data });\n\t\t\t\t} else if (!Object.values(this.state.allFoundOps).some((op) => {\n\t\t\t\t\treturn op.fulfilled === false;\n\t\t\t\t})) throw new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.functionStoppedRunningErr)(_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.ASYNC_DETECTED_AFTER_MEMOIZATION));\n\t\t\t}\n\t\t\tawait this.state.hooks.afterExecution?.();\n\t\t\treturn {\n\t\t\t\ttype: \"steps-found\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\tsteps: discoveredOps\n\t\t\t};\n\t\t} catch (error) {\n\t\t\treturn await this.transformOutput({ error });\n\t\t} finally {\n\t\t\tawait this.state.hooks.beforeResponse?.();\n\t\t}\n\t}\n\tasync initializeMiddleware() {\n\t\tconst ctx = this.options.data;\n\t\treturn await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_9__.getHookStack)(this.options.fn[\"middleware\"], \"onFunctionRun\", {\n\t\t\tctx,\n\t\t\tfn: this.options.fn,\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\treqArgs: this.options.reqArgs\n\t\t}, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tctx: {\n\t\t\t\t\t\t...prev.ctx,\n\t\t\t\t\t\t...output?.ctx\n\t\t\t\t\t},\n\t\t\t\t\tfn: this.options.fn,\n\t\t\t\t\tsteps: prev.steps.map((step, i) => ({\n\t\t\t\t\t\t...step,\n\t\t\t\t\t\t...output?.steps?.[i]\n\t\t\t\t\t})),\n\t\t\t\t\treqArgs: prev.reqArgs\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tresult: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t},\n\t\t\t\t\tstep: prev.step\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n\tcreateExecutionState() {\n\t\tconst state = {\n\t\t\tallFoundOps: {},\n\t\t\ttickOps: {},\n\t\t\ttickOpHashes: {},\n\t\t\tcurrentOp: void 0,\n\t\t\thasUsedTools: false,\n\t\t\treset: () => {\n\t\t\t\tstate.tickOpHashes = {};\n\t\t\t\tstate.allFoundOps = {\n\t\t\t\t\t...state.allFoundOps,\n\t\t\t\t\t...state.tickOps\n\t\t\t\t};\n\t\t\t},\n\t\t\tnonStepFnDetected: false,\n\t\t\texecutingStep: false,\n\t\t\topStack: this.options.stepCompletionOrder.reduce((acc, stepId) => {\n\t\t\t\tconst stepState = this.options.stepState[stepId];\n\t\t\t\tif (!stepState) return acc;\n\t\t\t\treturn [...acc, stepState];\n\t\t\t}, [])\n\t\t};\n\t\treturn state;\n\t}\n\tget ops() {\n\t\treturn Object.fromEntries(Object.entries(this.state.allFoundOps).map(([id, op]) => [id, {\n\t\t\tid: op.id,\n\t\t\trawArgs: op.rawArgs,\n\t\t\tdata: op.data,\n\t\t\terror: op.error,\n\t\t\tfulfilled: op.fulfilled,\n\t\t\tseen: true\n\t\t}]));\n\t}\n\tgetUserFnToRun() {\n\t\tif (!this.options.isFailureHandler) return this.options.fn[\"fn\"];\n\t\tif (!this.options.fn[\"onFailureFn\"])\n /**\n\t\t* Somehow, we've ended up detecting that this is a failure handler but\n\t\t* doesn't have an `onFailure` function. This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Cannot find function `onFailure` handler\");\n\t\treturn this.options.fn[\"onFailureFn\"];\n\t}\n\tcreateFnArg() {\n\t\tthis.state.tickOps = this.state.allFoundOps;\n\t\t/**\n\t\t* Create a unique hash of an operation using only a subset of the operation's\n\t\t* properties; will never use `data` and will guarantee the order of the\n\t\t* object so we don't rely on individual tools for that.\n\t\t*\n\t\t* If the operation already contains an ID, the current ID will be used\n\t\t* instead, so that users can provide their own IDs.\n\t\t*/\n\t\tconst hashOp = (op) => {\n\t\t\t/**\n\t\t\t* It's difficult for v0 to understand whether or not an op has\n\t\t\t* historically contained a custom ID, as all step usage now require them.\n\t\t\t*\n\t\t\t* For this reason, we make the assumption that steps in v0 do not have a\n\t\t\t* custom ID and generate one for them as we would in all recommendations\n\t\t\t* and examples.\n\t\t\t*/\n\t\t\tconst obj = {\n\t\t\t\tparent: this.state.currentOp?.id ?? null,\n\t\t\t\top: op.op,\n\t\t\t\tname: op.name,\n\t\t\t\topts: op.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned ? null : op.opts ?? null\n\t\t\t};\n\t\t\tconst collisionHash = _internals.hashData(obj);\n\t\t\tconst pos = this.state.tickOpHashes[collisionHash] = (this.state.tickOpHashes[collisionHash] ?? -1) + 1;\n\t\t\treturn {\n\t\t\t\t...op,\n\t\t\t\tid: _internals.hashData({\n\t\t\t\t\tpos,\n\t\t\t\t\t...obj\n\t\t\t\t})\n\t\t\t};\n\t\t};\n\t\tconst stepHandler = ({ args, matchOp, opts }) => {\n\t\t\tif (this.state.nonStepFnDetected) throw new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.functionStoppedRunningErr)(_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.STEP_USED_AFTER_ASYNC));\n\t\t\tif (this.state.executingStep) throw new _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.prettyError)({\n\t\t\t\twhatHappened: \"Your function was stopped from running\",\n\t\t\t\twhy: \"We detected that you have nested `step.*` tooling.\",\n\t\t\t\tconsequences: \"Nesting `step.*` tooling is not supported.\",\n\t\t\t\tstack: true,\n\t\t\t\ttoFixNow: \"Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.\",\n\t\t\t\totherwise: \"For more information on step functions with Inngest, see https://www.inngest.com/docs/functions/multi-step\",\n\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.ErrCode.NESTING_STEPS\n\t\t\t}));\n\t\t\tthis.state.hasUsedTools = true;\n\t\t\tconst opId = hashOp(matchOp((0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_10__.getStepOptions)(args[0]), ...args.slice(1)));\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.state.tickOps[opId.id] = {\n\t\t\t\t\t...opId,\n\t\t\t\t\t...opts?.fn ? { fn: () => opts.fn?.(...args) } : {},\n\t\t\t\t\trawArgs: args,\n\t\t\t\t\tresolve,\n\t\t\t\t\treject,\n\t\t\t\t\tfulfilled: false\n\t\t\t\t};\n\t\t\t});\n\t\t};\n\t\tconst step = (0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_10__.createStepTools)(this.options.client, this, stepHandler);\n\t\tlet fnArg = {\n\t\t\t...this.options.data,\n\t\t\tstep\n\t\t};\n\t\tif (this.options.isFailureHandler) {\n\t\t\tconst eventData = zod_v3__WEBPACK_IMPORTED_MODULE_11__.object({ error: _types_js__WEBPACK_IMPORTED_MODULE_8__.jsonErrorSchema }).parse(fnArg.event?.data);\n\t\t\tfnArg = {\n\t\t\t\t...fnArg,\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.deserializeError)(eventData.error)\n\t\t\t};\n\t\t}\n\t\treturn this.options.transformCtx?.(fnArg) ?? fnArg;\n\t}\n\t/**\n\t* Using middleware, transform input before running.\n\t*/\n\tasync transformInput() {\n\t\tconst inputMutations = await this.state.hooks?.transformInput?.({\n\t\t\tctx: { ...this.fnArg },\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\tfn: this.options.fn,\n\t\t\treqArgs: this.options.reqArgs\n\t\t});\n\t\tif (inputMutations?.ctx) this.fnArg = inputMutations.ctx;\n\t\tif (inputMutations?.steps) this.state.opStack = [...inputMutations.steps];\n\t}\n\tgetEarlyExecRunStep(ops) {\n\t\tif (ops.length !== 1) return;\n\t\tconst op = ops[0];\n\t\tif (op && op.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned) return op.id;\n\t}\n\t/**\n\t* Using middleware, transform output before returning.\n\t*/\n\tasync transformOutput(dataOrError, step) {\n\t\tconst output = { ...dataOrError };\n\t\tif (typeof output.error !== \"undefined\") output.data = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.serializeError)(output.error);\n\t\tconst transformedOutput = await this.state.hooks?.transformOutput?.({\n\t\t\tresult: { ...output },\n\t\t\tstep\n\t\t});\n\t\tconst { data, error } = {\n\t\t\t...output,\n\t\t\t...transformedOutput?.result\n\t\t};\n\t\tif (!step) await this.state.hooks?.finished?.({ result: { ...typeof error !== \"undefined\" ? { error } : { data } } });\n\t\tif (typeof error !== \"undefined\") {\n\t\t\t/**\n\t\t\t* Ensure we give middleware the chance to decide on retriable behaviour\n\t\t\t* by looking at the error returned from output transformation.\n\t\t\t*/\n\t\t\tlet retriable = !(error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_6__.NonRetriableError);\n\t\t\tif (retriable && error instanceof _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_12__.RetryAfterError) retriable = error.retryAfter;\n\t\t\tconst serializedError = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_7__.serializeError)(error);\n\t\t\treturn {\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\terror: serializedError,\n\t\t\t\tretriable\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\ttype: \"function-resolved\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_13__.undefinedToNull)(data)\n\t\t};\n\t}\n};\nconst tickOpToOutgoing = (op) => {\n\treturn {\n\t\top: op.op,\n\t\tid: op.id,\n\t\tname: op.name,\n\t\topts: op.opts\n\t};\n};\nconst hashData = (op) => {\n\treturn sha1().update(canonicalize__WEBPACK_IMPORTED_MODULE_1__(op)).digest(\"hex\");\n};\n/**\n* Exported for testing.\n*/\nconst _internals = { hashData };\n\n//#endregion\n\n//# sourceMappingURL=v0.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92MC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThEO0FBQ0g7QUFDRTtBQUNKO0FBQ0c7QUFDZ0U7QUFDL0Q7QUFDTjtBQUN3QztBQUN2QztBQUNpQjtBQUM5QztBQUNFO0FBQ1c7O0FBRXhDO0FBQ0EsaUNBQWlDLHNFQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxRQUFRLE9BQU8sRUFBRSxvQ0FBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsa0VBQWdCO0FBQ3ZELFdBQVcsZ0VBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrRUFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9FQUFpQixDQUFDLCtEQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQU87QUFDbkIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5RUFBbUI7QUFDN0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsMkNBQTJDLFFBQVE7QUFDbkc7QUFDQTtBQUNBLFNBQVMsaURBQVU7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1QkFBdUIsUUFBUSxrRUFBWTtBQUN2RDtBQUNBLEtBQUs7QUFDTCx5Q0FBeUMsT0FBTztBQUNoRCxL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QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVFQUFlO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5Q0FBWTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDZ0Q7QUFDaEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92MC5qcz8zMTMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uLy4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IEV4ZWN1dGlvblZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaGVscGVycy9jb25zdHMuanNcIjtcbmltcG9ydCB7IFN0ZXBPcENvZGUsIGpzb25FcnJvclNjaGVtYSB9IGZyb20gXCIuLi8uLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdEV4ZWN1dGlvbiB9IGZyb20gXCIuL0lubmdlc3RFeGVjdXRpb24uanNcIjtcbmltcG9ydCB7IE5vblJldHJpYWJsZUVycm9yIH0gZnJvbSBcIi4uL05vblJldHJpYWJsZUVycm9yLmpzXCI7XG5pbXBvcnQgeyBFcnJDb2RlLCBkZXNlcmlhbGl6ZUVycm9yLCBmdW5jdGlvblN0b3BwZWRSdW5uaW5nRXJyLCBwcmV0dHlFcnJvciwgc2VyaWFsaXplRXJyb3IgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHVuZGVmaW5lZFRvTnVsbCB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2Z1bmN0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZ2V0SG9va1N0YWNrIH0gZnJvbSBcIi4uL0lubmdlc3RNaWRkbGV3YXJlLmpzXCI7XG5pbXBvcnQgeyByZXNvbHZlQWZ0ZXJQZW5kaW5nLCByZXNvbHZlTmV4dFRpY2ssIHJ1bkFzUHJvbWlzZSB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL3Byb21pc2VzLmpzXCI7XG5pbXBvcnQgeyBSZXRyeUFmdGVyRXJyb3IgfSBmcm9tIFwiLi4vUmV0cnlBZnRlckVycm9yLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTdGVwVG9vbHMsIGdldFN0ZXBPcHRpb25zIH0gZnJvbSBcIi4uL0lubmdlc3RTdGVwVG9vbHMuanNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5pbXBvcnQgaGFzaGpzIGZyb20gXCJoYXNoLmpzXCI7XG5pbXBvcnQgY2Fub25pY2FsaXplIGZyb20gXCJjYW5vbmljYWxpemVcIjtcblxuLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL2V4ZWN1dGlvbi92MC50c1xudmFyIHYwX2V4cG9ydHMgPSAvKiBAX19QVVJFX18gKi8gX19leHBvcnQoe1xuXHRWMElubmdlc3RFeGVjdXRpb246ICgpID0+IFYwSW5uZ2VzdEV4ZWN1dGlvbixcblx0X2ludGVybmFsczogKCkgPT4gX2ludGVybmFscyxcblx0Y3JlYXRlVjBJbm5nZXN0RXhlY3V0aW9uOiAoKSA9PiBjcmVhdGVWMElubmdlc3RFeGVjdXRpb25cbn0pO1xuY29uc3QgeyBzaGExIH0gPSBoYXNoanM7XG5jb25zdCBjcmVhdGVWMElubmdlc3RFeGVjdXRpb24gPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4gbmV3IFYwSW5uZ2VzdEV4ZWN1dGlvbihvcHRpb25zKTtcbn07XG52YXIgVjBJbm5nZXN0RXhlY3V0aW9uID0gY2xhc3MgZXh0ZW5kcyBJbm5nZXN0RXhlY3V0aW9uIHtcblx0dmVyc2lvbiA9IEV4ZWN1dGlvblZlcnNpb24uVjA7XG5cdHN0YXRlO1xuXHRleGVjdXRpb247XG5cdHVzZXJGblRvUnVuO1xuXHRmbkFyZztcblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdHN1cGVyKG9wdGlvbnMpO1xuXHRcdHRoaXMudXNlckZuVG9SdW4gPSB0aGlzLmdldFVzZXJGblRvUnVuKCk7XG5cdFx0dGhpcy5zdGF0ZSA9IHRoaXMuY3JlYXRlRXhlY3V0aW9uU3RhdGUoKTtcblx0XHR0aGlzLmZuQXJnID0gdGhpcy5jcmVhdGVGbkFyZygpO1xuXHR9XG5cdGFkZE1ldGFkYXRhKF9zdGVwSWQsIF9raW5kLCBfc2NvcGUsIF9vcCwgX3ZhbHVlcykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRzdGFydCgpIHtcblx0XHR0aGlzLmRlYnVnKFwic3RhcnRpbmcgVjAgZXhlY3V0aW9uXCIpO1xuXHRcdHJldHVybiB0aGlzLmV4ZWN1dGlvbiA/Pz0gdGhpcy5fc3RhcnQoKS50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdHRoaXMuZGVidWcoXCJyZXN1bHQ6XCIsIHJlc3VsdCk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIF9zdGFydCgpIHtcblx0XHR0aGlzLnN0YXRlLmhvb2tzID0gYXdhaXQgdGhpcy5pbml0aWFsaXplTWlkZGxld2FyZSgpO1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLnRyYW5zZm9ybUlucHV0KCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmJlZm9yZU1lbW9pemF0aW9uPy4oKTtcblx0XHRcdGlmICh0aGlzLnN0YXRlLm9wU3RhY2subGVuZ3RoID09PSAwICYmICF0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB1c2VyRm5Qcm9taXNlID0gcnVuQXNQcm9taXNlKCgpID0+IHRoaXMudXNlckZuVG9SdW4odGhpcy5mbkFyZykpO1xuXHRcdFx0bGV0IHBvcyA9IC0xO1xuXHRcdFx0ZG8ge1xuXHRcdFx0XHRpZiAocG9zID49IDApIHtcblx0XHRcdFx0XHRpZiAoIXRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwICYmIHBvcyA9PT0gdGhpcy5zdGF0ZS5vcFN0YWNrLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMuc3RhdGUudGlja09wcyA9IHt9O1xuXHRcdFx0XHRcdGNvbnN0IGluY29taW5nT3AgPSB0aGlzLnN0YXRlLm9wU3RhY2tbcG9zXTtcblx0XHRcdFx0XHR0aGlzLnN0YXRlLmN1cnJlbnRPcCA9IHRoaXMuc3RhdGUuYWxsRm91bmRPcHNbaW5jb21pbmdPcC5pZF07XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRPcClcbiAvKipcblx0XHRcdFx0XHQqIFdlJ3JlIHRyeWluZyB0byByZXN1bWUgdGhlIGZ1bmN0aW9uLCBidXQgd2UgY2FuJ3QgZmluZCB3aGVyZSB0byBnby5cblx0XHRcdFx0XHQqXG5cdFx0XHRcdFx0KiBUaGlzIG1lYW5zIHRoYXQgZWl0aGVyIHRoZSBmdW5jdGlvbiBoYXMgY2hhbmdlZCBvciB0aGVyZSBhcmUgYXN5bmNcblx0XHRcdFx0XHQqIGFjdGlvbnMgaW4tYmV0d2VlbiBzdGVwcyB0aGF0IHdlIGhhdmVuJ3Qgbm90aWNlZCBpbiBwcmV2aW91c1xuXHRcdFx0XHRcdCogZXhlY3V0aW9ucy5cblx0XHRcdFx0XHQqXG5cdFx0XHRcdFx0KiBXaGljaGV2ZXIgdGhlIGNhc2UsIHRoaXMgaXMgYmFkIGFuZCB3ZSBjYW4ndCBjb250aW51ZSBpbiB0aGlzXG5cdFx0XHRcdFx0KiB1bmRlZmluZWQgc3RhdGUuXG5cdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHR0aHJvdyBuZXcgTm9uUmV0cmlhYmxlRXJyb3IocHJldHR5RXJyb3Ioe1xuXHRcdFx0XHRcdFx0d2hhdEhhcHBlbmVkOiBcIiBZb3VyIGZ1bmN0aW9uIHdhcyBzdG9wcGVkIGZyb20gcnVubmluZ1wiLFxuXHRcdFx0XHRcdFx0d2h5OiBcIldlIGNvdWxkbid0IHJlc3VtZSB5b3VyIGZ1bmN0aW9uJ3Mgc3RhdGUgYmVjYXVzZSBpdCBtYXkgaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBydW4gc3RhcnRlZCBvciB0aGVyZSBhcmUgYXN5bmMgYWN0aW9ucyBpbi1iZXR3ZWVuIHN0ZXBzIHRoYXQgd2UgaGF2ZW4ndCBub3RpY2VkIGluIHByZXZpb3VzIGV4ZWN1dGlvbnMuXCIsXG5cdFx0XHRcdFx0XHRjb25zZXF1ZW5jZXM6IFwiQ29udGludWluZyB0byBydW4gdGhlIGZ1bmN0aW9uIG1heSByZXN1bHQgaW4gdW5leHBlY3RlZCBiZWhhdmlvdXIsIHNvIHdlJ3ZlIHN0b3BwZWQgeW91ciBmdW5jdGlvbiB0byBlbnN1cmUgbm90aGluZyB1bmV4cGVjdGVkIGhhcHBlbmVkIVwiLFxuXHRcdFx0XHRcdFx0dG9GaXhOb3c6IFwiRW5zdXJlIHRoYXQgeW91ciBmdW5jdGlvbiBpcyBlaXRoZXIgZW50aXJlbHkgc3RlcC1iYXNlZCBvciBlbnRpcmVseSBub24tc3RlcC1iYXNlZCwgYnkgZWl0aGVyIHdyYXBwaW5nIGFsbCBhc3luY2hyb25vdXMgbG9naWMgaW4gYHN0ZXAucnVuKClgIGNhbGxzIG9yIGJ5IHJlbW92aW5nIGFsbCBgc3RlcC4qKClgIGNhbGxzLlwiLFxuXHRcdFx0XHRcdFx0b3RoZXJ3aXNlOiBcIkZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHdoeSBzdGVwIGZ1bmN0aW9ucyB3b3JrIGluIHRoaXMgbWFubmVyLCBzZWUgaHR0cHM6Ly93d3cuaW5uZ2VzdC5jb20vZG9jcy9mdW5jdGlvbnMvbXVsdGktc3RlcCNnb3RjaGFzXCIsXG5cdFx0XHRcdFx0XHRzdGFjazogdHJ1ZSxcblx0XHRcdFx0XHRcdGNvZGU6IEVyckNvZGUuTk9OX0RFVEVSTUlOSVNUSUNfRlVOQ1RJT05cblx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdFx0dGhpcy5zdGF0ZS5jdXJyZW50T3AuZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGluY29taW5nT3AuZGF0YSAhPT0gXCJ1bmRlZmluZWRcIikgdGhpcy5zdGF0ZS5jdXJyZW50T3AucmVzb2x2ZShpbmNvbWluZ09wLmRhdGEpO1xuXHRcdFx0XHRcdGVsc2UgdGhpcy5zdGF0ZS5jdXJyZW50T3AucmVqZWN0KGluY29taW5nT3AuZXJyb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHJlc29sdmVBZnRlclBlbmRpbmcoKTtcblx0XHRcdFx0dGhpcy5zdGF0ZS5yZXNldCgpO1xuXHRcdFx0XHRwb3MrKztcblx0XHRcdH0gd2hpbGUgKHBvcyA8IHRoaXMuc3RhdGUub3BTdGFjay5sZW5ndGgpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRcdGNvbnN0IGRpc2NvdmVyZWRPcHMgPSBPYmplY3QudmFsdWVzKHRoaXMuc3RhdGUudGlja09wcykubWFwKHRpY2tPcFRvT3V0Z29pbmcpO1xuXHRcdFx0Y29uc3QgcnVuU3RlcCA9IHRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwIHx8IHRoaXMuZ2V0RWFybHlFeGVjUnVuU3RlcChkaXNjb3ZlcmVkT3BzKTtcblx0XHRcdGlmIChydW5TdGVwKSB7XG5cdFx0XHRcdGNvbnN0IHVzZXJGbk9wID0gdGhpcy5zdGF0ZS5hbGxGb3VuZE9wc1tydW5TdGVwXTtcblx0XHRcdFx0Y29uc3Qgc3RlcFRvUnVuID0gdXNlckZuT3A/LmZuO1xuXHRcdFx0XHRpZiAoIXN0ZXBUb1J1bikgdGhyb3cgbmV3IEVycm9yKGBCYWQgc3RhY2s7IGV4ZWN1dG9yIHJlcXVlc3RpbmcgdG8gcnVuIHVua25vd24gc3RlcCBcIiR7cnVuU3RlcH1cImApO1xuXHRcdFx0XHRjb25zdCBvdXRnb2luZ1VzZXJGbk9wID0ge1xuXHRcdFx0XHRcdC4uLnRpY2tPcFRvT3V0Z29pbmcodXNlckZuT3ApLFxuXHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBcblx0XHRcdFx0fTtcblx0XHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdFx0XHR0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXAgPSB0cnVlO1xuXHRcdFx0XHRjb25zdCB7IHR5cGU6IF90eXBlLCAuLi5yZXN0IH0gPSBhd2FpdCBydW5Bc1Byb21pc2Uoc3RlcFRvUnVuKS5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXAgPSBmYWxzZTtcblx0XHRcdFx0fSkuY2F0Y2goYXN5bmMgKGVycm9yKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZXJyb3IgfSwgb3V0Z29pbmdVc2VyRm5PcCk7XG5cdFx0XHRcdH0pLnRoZW4oYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZGF0YSB9LCBvdXRnb2luZ1VzZXJGbk9wKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdGVwLXJhblwiLFxuXHRcdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0XHRvcHM6IHRoaXMub3BzLFxuXHRcdFx0XHRcdHN0ZXA6IHtcblx0XHRcdFx0XHRcdC4uLm91dGdvaW5nVXNlckZuT3AsXG5cdFx0XHRcdFx0XHQuLi5yZXN0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFkaXNjb3ZlcmVkT3BzLmxlbmd0aCkge1xuXHRcdFx0XHRjb25zdCBmblJldCA9IGF3YWl0IFByb21pc2UucmFjZShbdXNlckZuUHJvbWlzZS50aGVuKChkYXRhKSA9PiAoe1xuXHRcdFx0XHRcdHR5cGU6IFwiY29tcGxldGVcIixcblx0XHRcdFx0XHRkYXRhXG5cdFx0XHRcdH0pKSwgcmVzb2x2ZU5leHRUaWNrKCkudGhlbigoKSA9PiAoeyB0eXBlOiBcImluY29tcGxldGVcIiB9KSldKTtcblx0XHRcdFx0aWYgKGZuUmV0LnR5cGUgPT09IFwiY29tcGxldGVcIikge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdFx0XHRcdGlmIChPYmplY3QudmFsdWVzKHRoaXMuc3RhdGUuYWxsRm91bmRPcHMpLmV2ZXJ5KChvcCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG9wLmZ1bGZpbGxlZDtcblx0XHRcdFx0XHR9KSkgcmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZGF0YTogZm5SZXQuZGF0YSB9KTtcblx0XHRcdFx0fSBlbHNlIGlmICghdGhpcy5zdGF0ZS5oYXNVc2VkVG9vbHMpIHtcblx0XHRcdFx0XHR0aGlzLnN0YXRlLm5vblN0ZXBGbkRldGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gYXdhaXQgdXNlckZuUHJvbWlzZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBkYXRhIH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCFPYmplY3QudmFsdWVzKHRoaXMuc3RhdGUuYWxsRm91bmRPcHMpLnNvbWUoKG9wKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wLmZ1bGZpbGxlZCA9PT0gZmFsc2U7XG5cdFx0XHRcdH0pKSB0aHJvdyBuZXcgTm9uUmV0cmlhYmxlRXJyb3IoZnVuY3Rpb25TdG9wcGVkUnVubmluZ0VycihFcnJDb2RlLkFTWU5DX0RFVEVDVEVEX0FGVEVSX01FTU9JWkFUSU9OKSk7XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzLmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHR5cGU6IFwic3RlcHMtZm91bmRcIixcblx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRvcHM6IHRoaXMub3BzLFxuXHRcdFx0XHRzdGVwczogZGlzY292ZXJlZE9wc1xuXHRcdFx0fTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZXJyb3IgfSk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3MuYmVmb3JlUmVzcG9uc2U/LigpO1xuXHRcdH1cblx0fVxuXHRhc3luYyBpbml0aWFsaXplTWlkZGxld2FyZSgpIHtcblx0XHRjb25zdCBjdHggPSB0aGlzLm9wdGlvbnMuZGF0YTtcblx0XHRyZXR1cm4gYXdhaXQgZ2V0SG9va1N0YWNrKHRoaXMub3B0aW9ucy5mbltcIm1pZGRsZXdhcmVcIl0sIFwib25GdW5jdGlvblJ1blwiLCB7XG5cdFx0XHRjdHgsXG5cdFx0XHRmbjogdGhpcy5vcHRpb25zLmZuLFxuXHRcdFx0c3RlcHM6IE9iamVjdC52YWx1ZXModGhpcy5vcHRpb25zLnN0ZXBTdGF0ZSksXG5cdFx0XHRyZXFBcmdzOiB0aGlzLm9wdGlvbnMucmVxQXJnc1xuXHRcdH0sIHtcblx0XHRcdHRyYW5zZm9ybUlucHV0OiAocHJldiwgb3V0cHV0KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y3R4OiB7XG5cdFx0XHRcdFx0XHQuLi5wcmV2LmN0eCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8uY3R4XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmbjogdGhpcy5vcHRpb25zLmZuLFxuXHRcdFx0XHRcdHN0ZXBzOiBwcmV2LnN0ZXBzLm1hcCgoc3RlcCwgaSkgPT4gKHtcblx0XHRcdFx0XHRcdC4uLnN0ZXAsXG5cdFx0XHRcdFx0XHQuLi5vdXRwdXQ/LnN0ZXBzPy5baV1cblx0XHRcdFx0XHR9KSksXG5cdFx0XHRcdFx0cmVxQXJnczogcHJldi5yZXFBcmdzXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0dHJhbnNmb3JtT3V0cHV0OiAocHJldiwgb3V0cHV0KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0cmVzdWx0OiB7XG5cdFx0XHRcdFx0XHQuLi5wcmV2LnJlc3VsdCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8ucmVzdWx0XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdGVwOiBwcmV2LnN0ZXBcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRjcmVhdGVFeGVjdXRpb25TdGF0ZSgpIHtcblx0XHRjb25zdCBzdGF0ZSA9IHtcblx0XHRcdGFsbEZvdW5kT3BzOiB7fSxcblx0XHRcdHRpY2tPcHM6IHt9LFxuXHRcdFx0dGlja09wSGFzaGVzOiB7fSxcblx0XHRcdGN1cnJlbnRPcDogdm9pZCAwLFxuXHRcdFx0aGFzVXNlZFRvb2xzOiBmYWxzZSxcblx0XHRcdHJlc2V0OiAoKSA9PiB7XG5cdFx0XHRcdHN0YXRlLnRpY2tPcEhhc2hlcyA9IHt9O1xuXHRcdFx0XHRzdGF0ZS5hbGxGb3VuZE9wcyA9IHtcblx0XHRcdFx0XHQuLi5zdGF0ZS5hbGxGb3VuZE9wcyxcblx0XHRcdFx0XHQuLi5zdGF0ZS50aWNrT3BzXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0bm9uU3RlcEZuRGV0ZWN0ZWQ6IGZhbHNlLFxuXHRcdFx0ZXhlY3V0aW5nU3RlcDogZmFsc2UsXG5cdFx0XHRvcFN0YWNrOiB0aGlzLm9wdGlvbnMuc3RlcENvbXBsZXRpb25PcmRlci5yZWR1Y2UoKGFjYywgc3RlcElkKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHN0ZXBTdGF0ZSA9IHRoaXMub3B0aW9ucy5zdGVwU3RhdGVbc3RlcElkXTtcblx0XHRcdFx0aWYgKCFzdGVwU3RhdGUpIHJldHVybiBhY2M7XG5cdFx0XHRcdHJldHVybiBbLi4uYWNjLCBzdGVwU3RhdGVdO1xuXHRcdFx0fSwgW10pXG5cdFx0fTtcblx0XHRyZXR1cm4gc3RhdGU7XG5cdH1cblx0Z2V0IG9wcygpIHtcblx0XHRyZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHRoaXMuc3RhdGUuYWxsRm91bmRPcHMpLm1hcCgoW2lkLCBvcF0pID0+IFtpZCwge1xuXHRcdFx0aWQ6IG9wLmlkLFxuXHRcdFx0cmF3QXJnczogb3AucmF3QXJncyxcblx0XHRcdGRhdGE6IG9wLmRhdGEsXG5cdFx0XHRlcnJvcjogb3AuZXJyb3IsXG5cdFx0XHRmdWxmaWxsZWQ6IG9wLmZ1bGZpbGxlZCxcblx0XHRcdHNlZW46IHRydWVcblx0XHR9XSkpO1xuXHR9XG5cdGdldFVzZXJGblRvUnVuKCkge1xuXHRcdGlmICghdGhpcy5vcHRpb25zLmlzRmFpbHVyZUhhbmRsZXIpIHJldHVybiB0aGlzLm9wdGlvbnMuZm5bXCJmblwiXTtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5mbltcIm9uRmFpbHVyZUZuXCJdKVxuIC8qKlxuXHRcdCogU29tZWhvdywgd2UndmUgZW5kZWQgdXAgZGV0ZWN0aW5nIHRoYXQgdGhpcyBpcyBhIGZhaWx1cmUgaGFuZGxlciBidXRcblx0XHQqIGRvZXNuJ3QgaGF2ZSBhbiBgb25GYWlsdXJlYCBmdW5jdGlvbi4gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLlxuXHRcdCovXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgZnVuY3Rpb24gYG9uRmFpbHVyZWAgaGFuZGxlclwiKTtcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmZuW1wib25GYWlsdXJlRm5cIl07XG5cdH1cblx0Y3JlYXRlRm5BcmcoKSB7XG5cdFx0dGhpcy5zdGF0ZS50aWNrT3BzID0gdGhpcy5zdGF0ZS5hbGxGb3VuZE9wcztcblx0XHQvKipcblx0XHQqIENyZWF0ZSBhIHVuaXF1ZSBoYXNoIG9mIGFuIG9wZXJhdGlvbiB1c2luZyBvbmx5IGEgc3Vic2V0IG9mIHRoZSBvcGVyYXRpb24nc1xuXHRcdCogcHJvcGVydGllczsgd2lsbCBuZXZlciB1c2UgYGRhdGFgIGFuZCB3aWxsIGd1YXJhbnRlZSB0aGUgb3JkZXIgb2YgdGhlXG5cdFx0KiBvYmplY3Qgc28gd2UgZG9uJ3QgcmVseSBvbiBpbmRpdmlkdWFsIHRvb2xzIGZvciB0aGF0LlxuXHRcdCpcblx0XHQqIElmIHRoZSBvcGVyYXRpb24gYWxyZWFkeSBjb250YWlucyBhbiBJRCwgdGhlIGN1cnJlbnQgSUQgd2lsbCBiZSB1c2VkXG5cdFx0KiBpbnN0ZWFkLCBzbyB0aGF0IHVzZXJzIGNhbiBwcm92aWRlIHRoZWlyIG93biBJRHMuXG5cdFx0Ki9cblx0XHRjb25zdCBoYXNoT3AgPSAob3ApID0+IHtcblx0XHRcdC8qKlxuXHRcdFx0KiBJdCdzIGRpZmZpY3VsdCBmb3IgdjAgdG8gdW5kZXJzdGFuZCB3aGV0aGVyIG9yIG5vdCBhbiBvcCBoYXNcblx0XHRcdCogaGlzdG9yaWNhbGx5IGNvbnRhaW5lZCBhIGN1c3RvbSBJRCwgYXMgYWxsIHN0ZXAgdXNhZ2Ugbm93IHJlcXVpcmUgdGhlbS5cblx0XHRcdCpcblx0XHRcdCogRm9yIHRoaXMgcmVhc29uLCB3ZSBtYWtlIHRoZSBhc3N1bXB0aW9uIHRoYXQgc3RlcHMgaW4gdjAgZG8gbm90IGhhdmUgYVxuXHRcdFx0KiBjdXN0b20gSUQgYW5kIGdlbmVyYXRlIG9uZSBmb3IgdGhlbSBhcyB3ZSB3b3VsZCBpbiBhbGwgcmVjb21tZW5kYXRpb25zXG5cdFx0XHQqIGFuZCBleGFtcGxlcy5cblx0XHRcdCovXG5cdFx0XHRjb25zdCBvYmogPSB7XG5cdFx0XHRcdHBhcmVudDogdGhpcy5zdGF0ZS5jdXJyZW50T3A/LmlkID8/IG51bGwsXG5cdFx0XHRcdG9wOiBvcC5vcCxcblx0XHRcdFx0bmFtZTogb3AubmFtZSxcblx0XHRcdFx0b3B0czogb3Aub3AgPT09IFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQgPyBudWxsIDogb3Aub3B0cyA/PyBudWxsXG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgY29sbGlzaW9uSGFzaCA9IF9pbnRlcm5hbHMuaGFzaERhdGEob2JqKTtcblx0XHRcdGNvbnN0IHBvcyA9IHRoaXMuc3RhdGUudGlja09wSGFzaGVzW2NvbGxpc2lvbkhhc2hdID0gKHRoaXMuc3RhdGUudGlja09wSGFzaGVzW2NvbGxpc2lvbkhhc2hdID8/IC0xKSArIDE7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5vcCxcblx0XHRcdFx0aWQ6IF9pbnRlcm5hbHMuaGFzaERhdGEoe1xuXHRcdFx0XHRcdHBvcyxcblx0XHRcdFx0XHQuLi5vYmpcblx0XHRcdFx0fSlcblx0XHRcdH07XG5cdFx0fTtcblx0XHRjb25zdCBzdGVwSGFuZGxlciA9ICh7IGFyZ3MsIG1hdGNoT3AsIG9wdHMgfSkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc3RhdGUubm9uU3RlcEZuRGV0ZWN0ZWQpIHRocm93IG5ldyBOb25SZXRyaWFibGVFcnJvcihmdW5jdGlvblN0b3BwZWRSdW5uaW5nRXJyKEVyckNvZGUuU1RFUF9VU0VEX0FGVEVSX0FTWU5DKSk7XG5cdFx0XHRpZiAodGhpcy5zdGF0ZS5leGVjdXRpbmdTdGVwKSB0aHJvdyBuZXcgTm9uUmV0cmlhYmxlRXJyb3IocHJldHR5RXJyb3Ioe1xuXHRcdFx0XHR3aGF0SGFwcGVuZWQ6IFwiWW91ciBmdW5jdGlvbiB3YXMgc3RvcHBlZCBmcm9tIHJ1bm5pbmdcIixcblx0XHRcdFx0d2h5OiBcIldlIGRldGVjdGVkIHRoYXQgeW91IGhhdmUgbmVzdGVkIGBzdGVwLipgIHRvb2xpbmcuXCIsXG5cdFx0XHRcdGNvbnNlcXVlbmNlczogXCJOZXN0aW5nIGBzdGVwLipgIHRvb2xpbmcgaXMgbm90IHN1cHBvcnRlZC5cIixcblx0XHRcdFx0c3RhY2s6IHRydWUsXG5cdFx0XHRcdHRvRml4Tm93OiBcIk1ha2Ugc3VyZSB5b3UncmUgbm90IHVzaW5nIGBzdGVwLipgIHRvb2xpbmcgaW5zaWRlIG9mIG90aGVyIGBzdGVwLipgIHRvb2xpbmcuIElmIHlvdSBuZWVkIHRvIGNvbXBvc2Ugc3RlcHMgdG9nZXRoZXIsIHlvdSBjYW4gY3JlYXRlIGEgbmV3IGFzeW5jIGZ1bmN0aW9uIGFuZCBjYWxsIGl0IGZyb20gd2l0aGluIHlvdXIgc3RlcCBmdW5jdGlvbiwgb3IgdXNlIHByb21pc2UgY2hhaW5pbmcuXCIsXG5cdFx0XHRcdG90aGVyd2lzZTogXCJGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBzdGVwIGZ1bmN0aW9ucyB3aXRoIElubmdlc3QsIHNlZSBodHRwczovL3d3dy5pbm5nZXN0LmNvbS9kb2NzL2Z1bmN0aW9ucy9tdWx0aS1zdGVwXCIsXG5cdFx0XHRcdGNvZGU6IEVyckNvZGUuTkVTVElOR19TVEVQU1xuXHRcdFx0fSkpO1xuXHRcdFx0dGhpcy5zdGF0ZS5oYXNVc2VkVG9vbHMgPSB0cnVlO1xuXHRcdFx0Y29uc3Qgb3BJZCA9IGhhc2hPcChtYXRjaE9wKGdldFN0ZXBPcHRpb25zKGFyZ3NbMF0pLCAuLi5hcmdzLnNsaWNlKDEpKSk7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHR0aGlzLnN0YXRlLnRpY2tPcHNbb3BJZC5pZF0gPSB7XG5cdFx0XHRcdFx0Li4ub3BJZCxcblx0XHRcdFx0XHQuLi5vcHRzPy5mbiA/IHsgZm46ICgpID0+IG9wdHMuZm4/LiguLi5hcmdzKSB9IDoge30sXG5cdFx0XHRcdFx0cmF3QXJnczogYXJncyxcblx0XHRcdFx0XHRyZXNvbHZlLFxuXHRcdFx0XHRcdHJlamVjdCxcblx0XHRcdFx0XHRmdWxmaWxsZWQ6IGZhbHNlXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHR9O1xuXHRcdGNvbnN0IHN0ZXAgPSBjcmVhdGVTdGVwVG9vbHModGhpcy5vcHRpb25zLmNsaWVudCwgdGhpcywgc3RlcEhhbmRsZXIpO1xuXHRcdGxldCBmbkFyZyA9IHtcblx0XHRcdC4uLnRoaXMub3B0aW9ucy5kYXRhLFxuXHRcdFx0c3RlcFxuXHRcdH07XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5pc0ZhaWx1cmVIYW5kbGVyKSB7XG5cdFx0XHRjb25zdCBldmVudERhdGEgPSB6Lm9iamVjdCh7IGVycm9yOiBqc29uRXJyb3JTY2hlbWEgfSkucGFyc2UoZm5BcmcuZXZlbnQ/LmRhdGEpO1xuXHRcdFx0Zm5BcmcgPSB7XG5cdFx0XHRcdC4uLmZuQXJnLFxuXHRcdFx0XHRlcnJvcjogZGVzZXJpYWxpemVFcnJvcihldmVudERhdGEuZXJyb3IpXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLnRyYW5zZm9ybUN0eD8uKGZuQXJnKSA/PyBmbkFyZztcblx0fVxuXHQvKipcblx0KiBVc2luZyBtaWRkbGV3YXJlLCB0cmFuc2Zvcm0gaW5wdXQgYmVmb3JlIHJ1bm5pbmcuXG5cdCovXG5cdGFzeW5jIHRyYW5zZm9ybUlucHV0KCkge1xuXHRcdGNvbnN0IGlucHV0TXV0YXRpb25zID0gYXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8udHJhbnNmb3JtSW5wdXQ/Lih7XG5cdFx0XHRjdHg6IHsgLi4udGhpcy5mbkFyZyB9LFxuXHRcdFx0c3RlcHM6IE9iamVjdC52YWx1ZXModGhpcy5vcHRpb25zLnN0ZXBTdGF0ZSksXG5cdFx0XHRmbjogdGhpcy5vcHRpb25zLmZuLFxuXHRcdFx0cmVxQXJnczogdGhpcy5vcHRpb25zLnJlcUFyZ3Ncblx0XHR9KTtcblx0XHRpZiAoaW5wdXRNdXRhdGlvbnM/LmN0eCkgdGhpcy5mbkFyZyA9IGlucHV0TXV0YXRpb25zLmN0eDtcblx0XHRpZiAoaW5wdXRNdXRhdGlvbnM/LnN0ZXBzKSB0aGlzLnN0YXRlLm9wU3RhY2sgPSBbLi4uaW5wdXRNdXRhdGlvbnMuc3RlcHNdO1xuXHR9XG5cdGdldEVhcmx5RXhlY1J1blN0ZXAob3BzKSB7XG5cdFx0aWYgKG9wcy5sZW5ndGggIT09IDEpIHJldHVybjtcblx0XHRjb25zdCBvcCA9IG9wc1swXTtcblx0XHRpZiAob3AgJiYgb3Aub3AgPT09IFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQpIHJldHVybiBvcC5pZDtcblx0fVxuXHQvKipcblx0KiBVc2luZyBtaWRkbGV3YXJlLCB0cmFuc2Zvcm0gb3V0cHV0IGJlZm9yZSByZXR1cm5pbmcuXG5cdCovXG5cdGFzeW5jIHRyYW5zZm9ybU91dHB1dChkYXRhT3JFcnJvciwgc3RlcCkge1xuXHRcdGNvbnN0IG91dHB1dCA9IHsgLi4uZGF0YU9yRXJyb3IgfTtcblx0XHRpZiAodHlwZW9mIG91dHB1dC5lcnJvciAhPT0gXCJ1bmRlZmluZWRcIikgb3V0cHV0LmRhdGEgPSBzZXJpYWxpemVFcnJvcihvdXRwdXQuZXJyb3IpO1xuXHRcdGNvbnN0IHRyYW5zZm9ybWVkT3V0cHV0ID0gYXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8udHJhbnNmb3JtT3V0cHV0Py4oe1xuXHRcdFx0cmVzdWx0OiB7IC4uLm91dHB1dCB9LFxuXHRcdFx0c3RlcFxuXHRcdH0pO1xuXHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHtcblx0XHRcdC4uLm91dHB1dCxcblx0XHRcdC4uLnRyYW5zZm9ybWVkT3V0cHV0Py5yZXN1bHRcblx0XHR9O1xuXHRcdGlmICghc3RlcCkgYXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uZmluaXNoZWQ/Lih7IHJlc3VsdDogeyAuLi50eXBlb2YgZXJyb3IgIT09IFwidW5kZWZpbmVkXCIgPyB7IGVycm9yIH0gOiB7IGRhdGEgfSB9IH0pO1xuXHRcdGlmICh0eXBlb2YgZXJyb3IgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdC8qKlxuXHRcdFx0KiBFbnN1cmUgd2UgZ2l2ZSBtaWRkbGV3YXJlIHRoZSBjaGFuY2UgdG8gZGVjaWRlIG9uIHJldHJpYWJsZSBiZWhhdmlvdXJcblx0XHRcdCogYnkgbG9va2luZyBhdCB0aGUgZXJyb3IgcmV0dXJuZWQgZnJvbSBvdXRwdXQgdHJhbnNmb3JtYXRpb24uXG5cdFx0XHQqL1xuXHRcdFx0bGV0IHJldHJpYWJsZSA9ICEoZXJyb3IgaW5zdGFuY2VvZiBOb25SZXRyaWFibGVFcnJvcik7XG5cdFx0XHRpZiAocmV0cmlhYmxlICYmIGVycm9yIGluc3RhbmNlb2YgUmV0cnlBZnRlckVycm9yKSByZXRyaWFibGUgPSBlcnJvci5yZXRyeUFmdGVyO1xuXHRcdFx0Y29uc3Qgc2VyaWFsaXplZEVycm9yID0gc2VyaWFsaXplRXJyb3IoZXJyb3IpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZWplY3RlZFwiLFxuXHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdGVycm9yOiBzZXJpYWxpemVkRXJyb3IsXG5cdFx0XHRcdHJldHJpYWJsZVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVzb2x2ZWRcIixcblx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRkYXRhOiB1bmRlZmluZWRUb051bGwoZGF0YSlcblx0XHR9O1xuXHR9XG59O1xuY29uc3QgdGlja09wVG9PdXRnb2luZyA9IChvcCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdG9wOiBvcC5vcCxcblx0XHRpZDogb3AuaWQsXG5cdFx0bmFtZTogb3AubmFtZSxcblx0XHRvcHRzOiBvcC5vcHRzXG5cdH07XG59O1xuY29uc3QgaGFzaERhdGEgPSAob3ApID0+IHtcblx0cmV0dXJuIHNoYTEoKS51cGRhdGUoY2Fub25pY2FsaXplKG9wKSkuZGlnZXN0KFwiaGV4XCIpO1xufTtcbi8qKlxuKiBFeHBvcnRlZCBmb3IgdGVzdGluZy5cbiovXG5jb25zdCBfaW50ZXJuYWxzID0geyBoYXNoRGF0YSB9O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZVYwSW5uZ2VzdEV4ZWN1dGlvbiwgdjBfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9djAuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/v0.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/v1.js":
/*!*********************************************************!*\
  !*** ./node_modules/inngest/components/execution/v1.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _internals: () => (/* binding */ _internals),\n/* harmony export */   createV1InngestExecution: () => (/* binding */ createV1InngestExecution),\n/* harmony export */   v1_exports: () => (/* binding */ v1_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _als_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _otel_access_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./otel/access.js */ \"(rsc)/./node_modules/inngest/components/execution/otel/access.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _helpers_temporal_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../helpers/temporal.js */ \"(rsc)/./node_modules/inngest/helpers/temporal.js\");\n/* harmony import */ var _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../RetryAfterError.js */ \"(rsc)/./node_modules/inngest/components/RetryAfterError.js\");\n/* harmony import */ var _StepError_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../StepError.js */ \"(rsc)/./node_modules/inngest/components/StepError.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _opentelemetry_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/@opentelemetry/api/build/esm/trace-api.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var ms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ms */ \"(rsc)/./node_modules/ms/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/execution/v1.ts\nvar v1_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_2__.__export)({\n\t_internals: () => _internals,\n\tcreateV1InngestExecution: () => createV1InngestExecution\n});\nconst { sha1 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\nconst createV1InngestExecution = (options) => {\n\treturn new V1InngestExecution(options);\n};\nvar V1InngestExecution = class extends _InngestExecution_js__WEBPACK_IMPORTED_MODULE_3__.InngestExecution {\n\tversion = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.ExecutionVersion.V1;\n\tstate;\n\tfnArg;\n\tcheckpointHandlers;\n\ttimeoutDuration = 1e3 * 10;\n\texecution;\n\tuserFnToRun;\n\t/**\n\t* If we're supposed to run a particular step via `requestedRunStep`, this\n\t* will be a `Promise` that resolves after no steps have been found for\n\t* `timeoutDuration` milliseconds.\n\t*\n\t* If we're not supposed to run a particular step, this will be `undefined`.\n\t*/\n\ttimeout;\n\t/**\n\t* If we're checkpointing and have been given a maximum runtime, this will be\n\t* a `Promise` that resolves after that duration has elapsed, allowing us to\n\t* ensure that we end the execution in good time, especially in serverless\n\t* environments.\n\t*/\n\tcheckpointingMaxRuntimeTimer;\n\tconstructor(rawOptions) {\n\t\tconst options = {\n\t\t\t...rawOptions,\n\t\t\tstepMode: rawOptions.stepMode ?? _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async\n\t\t};\n\t\tsuper(options);\n\t\t/**\n\t\t* Check we have everything we need for checkpointing\n\t\t*/\n\t\tif (this.options.stepMode === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync) {\n\t\t\tif (!this.options.createResponse) throw new Error(\"createResponse is required for sync step mode\");\n\t\t}\n\t\tthis.userFnToRun = this.getUserFnToRun();\n\t\tthis.state = this.createExecutionState();\n\t\tthis.fnArg = this.createFnArg();\n\t\tthis.checkpointHandlers = this.createCheckpointHandlers();\n\t\tthis.initializeTimer(this.state);\n\t\tthis.initializeCheckpointRuntimeTimer(this.state);\n\t\tthis.debug(\"created new V1 execution for run;\", this.options.requestedRunStep ? `wanting to run step \"${this.options.requestedRunStep}\"` : \"discovering steps\");\n\t\tthis.debug(\"existing state keys:\", Object.keys(this.state.stepState));\n\t}\n\t/**\n\t* Idempotently start the execution of the user's function.\n\t*/\n\tstart() {\n\t\tif (!this.execution) {\n\t\t\tthis.debug(\"starting V1 execution\");\n\t\t\tconst tracer = _opentelemetry_api__WEBPACK_IMPORTED_MODULE_6__.trace.getTracer(\"inngest\", _version_js__WEBPACK_IMPORTED_MODULE_7__.version);\n\t\t\tthis.execution = (0,_als_js__WEBPACK_IMPORTED_MODULE_8__.getAsyncLocalStorage)().then((als) => {\n\t\t\t\treturn als.run({\n\t\t\t\t\tapp: this.options.client,\n\t\t\t\t\texecution: {\n\t\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\t\tinstance: this\n\t\t\t\t\t}\n\t\t\t\t}, async () => {\n\t\t\t\t\treturn tracer.startActiveSpan(\"inngest.execution\", (span) => {\n\t\t\t\t\t\t_otel_access_js__WEBPACK_IMPORTED_MODULE_9__.clientProcessorMap.get(this.options.client)?.declareStartingSpan({\n\t\t\t\t\t\t\tspan,\n\t\t\t\t\t\t\trunId: this.options.runId,\n\t\t\t\t\t\t\ttraceparent: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.TraceParent],\n\t\t\t\t\t\t\ttracestate: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.headerKeys.TraceState]\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn this._start().then((result) => {\n\t\t\t\t\t\t\tthis.debug(\"result:\", result);\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tspan.end();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this.execution;\n\t}\n\taddMetadata(stepId, kind, scope, op, values) {\n\t\tif (!this.state.metadata) this.state.metadata = /* @__PURE__ */ new Map();\n\t\tconst updates = this.state.metadata.get(stepId) ?? [];\n\t\tupdates.push({\n\t\t\tkind,\n\t\t\tscope,\n\t\t\top,\n\t\t\tvalues\n\t\t});\n\t\tthis.state.metadata.set(stepId, updates);\n\t\treturn true;\n\t}\n\t/**\n\t* Starts execution of the user's function and the core loop.\n\t*/\n\tasync _start() {\n\t\ttry {\n\t\t\tconst allCheckpointHandler = this.getCheckpointHandler(\"\");\n\t\t\tthis.state.hooks = await this.initializeMiddleware();\n\t\t\tawait this.startExecution();\n\t\t\tlet i = 0;\n\t\t\tfor await (const checkpoint of this.state.loop) {\n\t\t\t\tawait allCheckpointHandler(checkpoint, i);\n\t\t\t\tconst result = await this.getCheckpointHandler(checkpoint.type)(checkpoint, i++);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\treturn await this.transformOutput({ error });\n\t\t} finally {\n\t\t\tthis.state.loop.return();\n\t\t\tawait this.state.hooks?.beforeResponse?.();\n\t\t}\n\t\t/**\n\t\t* If we're here, the generator somehow finished without returning a value.\n\t\t* This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Core loop finished without returning a value\");\n\t}\n\tasync checkpoint(steps) {\n\t\tif (this.options.stepMode === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync) if (!this.state.checkpointedRun) {\n\t\t\tconst res = await this.options.client[\"inngestApi\"].checkpointNewRun({\n\t\t\t\trunId: this.fnArg.runId,\n\t\t\t\tevent: this.fnArg.event,\n\t\t\t\tsteps\n\t\t\t});\n\t\t\tthis.state.checkpointedRun = {\n\t\t\t\tappId: res.data.app_id,\n\t\t\t\tfnId: res.data.fn_id,\n\t\t\t\ttoken: res.data.token\n\t\t\t};\n\t\t} else await this.options.client[\"inngestApi\"].checkpointSteps({\n\t\t\tappId: this.state.checkpointedRun.appId,\n\t\t\tfnId: this.state.checkpointedRun.fnId,\n\t\t\trunId: this.fnArg.runId,\n\t\t\tsteps\n\t\t});\n\t\telse if (this.options.stepMode === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing) {\n\t\t\tif (!this.options.queueItemId) throw new Error(\"Missing queueItemId for async checkpointing. This is a bug in the Inngest SDK.\");\n\t\t\tif (!this.options.internalFnId) throw new Error(\"Missing internalFnId for async checkpointing. This is a bug in the Inngest SDK.\");\n\t\t\tawait this.options.client[\"inngestApi\"].checkpointStepsAsync({\n\t\t\t\trunId: this.fnArg.runId,\n\t\t\t\tfnId: this.options.internalFnId,\n\t\t\t\tqueueItemId: this.options.queueItemId,\n\t\t\t\tsteps\n\t\t\t});\n\t\t} else throw new Error(\"Checkpointing is only supported in Sync and AsyncCheckpointing step modes. This is a bug in the Inngest SDK.\");\n\t}\n\tasync checkpointAndSwitchToAsync(steps) {\n\t\tawait this.checkpoint(steps);\n\t\tif (!this.state.checkpointedRun?.token) throw new Error(\"Failed to checkpoint and switch to async mode\");\n\t\treturn {\n\t\t\ttype: \"change-mode\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tto: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async,\n\t\t\ttoken: this.state.checkpointedRun?.token\n\t\t};\n\t}\n\t/**\n\t* Returns whether we're in the final attempt of execution, or `null` if we\n\t* can't determine this in the SDK.\n\t*/\n\tinFinalAttempt() {\n\t\tif (typeof this.fnArg.maxAttempts !== \"number\") return null;\n\t\treturn this.fnArg.attempt + 1 >= this.fnArg.maxAttempts;\n\t}\n\t/**\n\t* Creates a handler for every checkpoint type, defining what to do when we\n\t* reach that checkpoint in the core loop.\n\t*/\n\tcreateCheckpointHandlers() {\n\t\tconst commonCheckpointHandler = (checkpoint) => {\n\t\t\tthis.debug(`${this.options.stepMode} checkpoint:`, checkpoint);\n\t\t};\n\t\tconst stepRanHandler = async (stepResult) => {\n\t\t\tconst transformResult = await this.transformOutput(stepResult);\n\t\t\t/**\n\t\t\t* Transforming output will always return either function rejection or\n\t\t\t* resolution. In most cases, this can be immediately returned, but in\n\t\t\t* this particular case we want to handle it differently.\n\t\t\t*/\n\t\t\tif (transformResult.type === \"function-resolved\") return {\n\t\t\t\ttype: \"step-ran\",\n\t\t\t\tctx: transformResult.ctx,\n\t\t\t\tops: transformResult.ops,\n\t\t\t\tstep: {\n\t\t\t\t\t...stepResult,\n\t\t\t\t\tdata: transformResult.data\n\t\t\t\t}\n\t\t\t};\n\t\t\telse if (transformResult.type === \"function-rejected\") {\n\t\t\t\tconst stepForResponse = {\n\t\t\t\t\t...stepResult,\n\t\t\t\t\terror: transformResult.error\n\t\t\t\t};\n\t\t\t\tif (stepResult.op === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepFailed) {\n\t\t\t\t\tconst ser = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.serializeError)(transformResult.error);\n\t\t\t\t\tstepForResponse.data = {\n\t\t\t\t\t\t__serialized: true,\n\t\t\t\t\t\tname: ser.name,\n\t\t\t\t\t\tmessage: ser.message,\n\t\t\t\t\t\tstack: \"\"\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\tctx: transformResult.ctx,\n\t\t\t\t\tops: transformResult.ops,\n\t\t\t\t\tretriable: transformResult.retriable,\n\t\t\t\t\tstep: stepForResponse\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn transformResult;\n\t\t};\n\t\tconst maybeReturnNewSteps = async () => {\n\t\t\tconst newSteps = await this.filterNewSteps(Array.from(this.state.steps.values()));\n\t\t\tif (newSteps) return {\n\t\t\t\ttype: \"steps-found\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\tsteps: newSteps\n\t\t\t};\n\t\t};\n\t\tconst syncHandlers = {\n\t\t\t\"\": commonCheckpointHandler,\n\t\t\t\"function-resolved\": async (checkpoint, i) => {\n\t\t\t\tawait this.checkpoint([{\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.RunComplete,\n\t\t\t\t\tid: _internals.hashId(\"complete\"),\n\t\t\t\t\tdata: await this.options.createResponse(checkpoint.data)\n\t\t\t\t}]);\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"function-resolved\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tdata: checkpoint.data\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"function-rejected\": (checkpoint) => {\n\t\t\t\tif (this.inFinalAttempt()) return {\n\t\t\t\t\ttype: \"function-rejected\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\terror: checkpoint.error,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tretriable: false\n\t\t\t\t};\n\t\t\t\treturn this.checkpointAndSwitchToAsync([{\n\t\t\t\t\tid: _internals.hashId(\"complete\"),\n\t\t\t\t\tdisplayName: \"complete\",\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepError,\n\t\t\t\t\terror: checkpoint.error\n\t\t\t\t}]);\n\t\t\t},\n\t\t\t\"step-not-found\": ({ step }) => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"function-rejected\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\terror: /* @__PURE__ */ new Error(\"Step not found when checkpointing; this should never happen\"),\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tretriable: false\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tif (steps.length !== 1 || steps[0].mode !== _types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync) return this.checkpointAndSwitchToAsync(steps.map((step) => ({\n\t\t\t\t\t...step,\n\t\t\t\t\tid: step.hashedId\n\t\t\t\t})));\n\t\t\t\tconst result = await this.executeStep(steps[0]);\n\t\t\t\tif (result.error) return this.checkpointAndSwitchToAsync([result]);\n\t\t\t\tawait this.checkpoint([this.resumeStepWithResult(result)]);\n\t\t\t},\n\t\t\t\"checkpointing-runtime-reached\": () => {\n\t\t\t\treturn this.checkpointAndSwitchToAsync([{\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.DiscoveryRequest,\n\t\t\t\t\tid: _internals.hashId(\"discovery-request\")\n\t\t\t\t}]);\n\t\t\t}\n\t\t};\n\t\tconst asyncHandlers = {\n\t\t\t\"\": commonCheckpointHandler,\n\t\t\t\"function-resolved\": async ({ data }) => {\n\t\t\t\tif (this.options.createResponse) data = await this.options.createResponse(data);\n\t\t\t\treturn await this.transformOutput({ data });\n\t\t\t},\n\t\t\t\"function-rejected\": async (checkpoint) => {\n\t\t\t\treturn await this.transformOutput({ error: checkpoint.error });\n\t\t\t},\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tconst stepResult = await this.tryExecuteStep(steps);\n\t\t\t\tif (stepResult) return stepRanHandler(stepResult);\n\t\t\t\treturn maybeReturnNewSteps();\n\t\t\t},\n\t\t\t\"step-not-found\": ({ step }) => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-not-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tstep\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"checkpointing-runtime-reached\": () => {\n\t\t\t\tthrow new Error(\"Checkpointing maximum runtime reached, but this is not in a checkpointing step mode. This is a bug in the Inngest SDK.\");\n\t\t\t}\n\t\t};\n\t\tconst asyncCheckpointingHandlers = {\n\t\t\t\"\": commonCheckpointHandler,\n\t\t\t\"function-resolved\": async (checkpoint, i) => {\n\t\t\t\tconst output = await asyncHandlers[\"function-resolved\"](checkpoint, i);\n\t\t\t\tif (output?.type === \"function-resolved\") return {\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tctx: output.ctx,\n\t\t\t\t\tops: output.ops,\n\t\t\t\t\tsteps: [{\n\t\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.RunComplete,\n\t\t\t\t\t\tid: _internals.hashId(\"complete\"),\n\t\t\t\t\t\tdata: output.data\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"function-rejected\": asyncHandlers[\"function-rejected\"],\n\t\t\t\"step-not-found\": asyncHandlers[\"step-not-found\"],\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tif (this.options.requestedRunStep) {\n\t\t\t\t\tthis.debug(\"async checkpointing looking for step to run, so attempting to find it\");\n\t\t\t\t\tconst step = steps.find((s) => s.hashedId === this.options.requestedRunStep && s.fn);\n\t\t\t\t\tif (step) {\n\t\t\t\t\t\tconst stepResult = await this.executeStep(step);\n\t\t\t\t\t\tif (stepResult) return stepRanHandler(stepResult);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst { stepsToResume, newSteps } = steps.reduce((acc, step) => {\n\t\t\t\t\tif (!step.hasStepState) acc.newSteps.push(step);\n\t\t\t\t\telse if (!step.fulfilled) acc.stepsToResume.push(step);\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {\n\t\t\t\t\tstepsToResume: [],\n\t\t\t\t\tnewSteps: []\n\t\t\t\t});\n\t\t\t\tthis.debug(\"split found steps in to:\", {\n\t\t\t\t\tstepsToResume: stepsToResume.length,\n\t\t\t\t\tnewSteps: newSteps.length\n\t\t\t\t});\n\t\t\t\tif (!this.options.requestedRunStep && newSteps.length) {\n\t\t\t\t\tconst stepResult = await this.tryExecuteStep(newSteps);\n\t\t\t\t\tif (stepResult) {\n\t\t\t\t\t\tthis.debug(`executed step \"${stepResult.id}\" successfully`);\n\t\t\t\t\t\tif (stepResult.error) return stepRanHandler(stepResult);\n\t\t\t\t\t\tthis.debug(\"checkpointing and resuming execution after step run\");\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.checkpoint([this.resumeStepWithResult(stepResult)]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tthis.debug(\"error checkpointing after step run, so falling back to async\", err);\n\t\t\t\t\t\t\treturn stepRanHandler(stepResult);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn maybeReturnNewSteps();\n\t\t\t\t}\n\t\t\t\tif (stepsToResume.length) {\n\t\t\t\t\tthis.debug(`resuming ${stepsToResume.length} steps`);\n\t\t\t\t\tfor (const st of stepsToResume) this.resumeStepWithResult({\n\t\t\t\t\t\t...st,\n\t\t\t\t\t\tid: st.hashedId\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"checkpointing-runtime-reached\": async () => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tsteps: [{\n\t\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.DiscoveryRequest,\n\t\t\t\t\t\tid: _internals.hashId(\"discovery-request\")\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\treturn {\n\t\t\t[_types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Async]: asyncHandlers,\n\t\t\t[_types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.Sync]: syncHandlers,\n\t\t\t[_types_js__WEBPACK_IMPORTED_MODULE_5__.StepMode.AsyncCheckpointing]: asyncCheckpointingHandlers\n\t\t};\n\t}\n\tgetCheckpointHandler(type) {\n\t\treturn this.checkpointHandlers[this.options.stepMode][type];\n\t}\n\tasync tryExecuteStep(steps) {\n\t\tconst hashedStepIdToRun = this.options.requestedRunStep || this.getEarlyExecRunStep(steps);\n\t\tif (!hashedStepIdToRun) return;\n\t\tconst step = steps.find((step$1) => step$1.hashedId === hashedStepIdToRun && step$1.fn);\n\t\tif (step) return await this.executeStep(step);\n\t\tthis.timeout?.reset();\n\t}\n\t/**\n\t* Given a list of outgoing ops, decide if we can execute an op early and\n\t* return the ID of the step to execute if we can.\n\t*/\n\tgetEarlyExecRunStep(steps) {\n\t\t/**\n\t\t* We may have been disabled due to parallelism, in which case we can't\n\t\t* immediately execute unless explicitly requested.\n\t\t*/\n\t\tif (this.options.disableImmediateExecution) return;\n\t\tconst unfulfilledSteps = steps.filter((step) => !step.fulfilled);\n\t\tif (unfulfilledSteps.length !== 1) return;\n\t\tconst op = unfulfilledSteps[0];\n\t\tif (op && op.op === _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepPlanned) return op.hashedId;\n\t}\n\tasync filterNewSteps(foundSteps) {\n\t\tif (this.options.requestedRunStep) return;\n\t\tconst newSteps = foundSteps.reduce((acc, step) => {\n\t\t\tif (!step.hasStepState) acc.push(step);\n\t\t\treturn acc;\n\t\t}, []);\n\t\tif (!newSteps.length) return;\n\t\t/**\n\t\t* We're finishing up; let's trigger the last of the hooks.\n\t\t*/\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tawait this.state.hooks?.afterExecution?.();\n\t\tconst stepList = newSteps.map((step) => ({\n\t\t\tdisplayName: step.displayName,\n\t\t\top: step.op,\n\t\t\tid: step.hashedId,\n\t\t\tname: step.name,\n\t\t\topts: step.opts,\n\t\t\tuserland: step.userland\n\t\t}));\n\t\t/**\n\t\t* We also run `onSendEvent` middleware hooks against `step.invoke()` steps\n\t\t* to ensure that their `data` is transformed correctly.\n\t\t*/\n\t\treturn await this.transformNewSteps(stepList);\n\t}\n\t/**\n\t* Using middleware, transform any newly-found steps before returning them to\n\t* an Inngest Server.\n\t*/\n\tasync transformNewSteps(steps) {\n\t\treturn Promise.all(steps.map(async (step) => {\n\t\t\tif (step.op !== _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.InvokeFunction) return step;\n\t\t\t/**\n\t\t\t* For each event being sent, create a new `onSendEvent` hook stack to\n\t\t\t* process it. We do this as middleware hooks are intended to run once\n\t\t\t* during each lifecycle (onFunctionRun or onSendEvent) and here, a hook\n\t\t\t* is run for every single event.\n\t\t\t*\n\t\t\t* This is done because a developer can use this hook to filter out\n\t\t\t* events entirely; if we batch all of the events together, we can't\n\t\t\t* tell which ones were filtered out if we're processing >1 invocation\n\t\t\t* here.\n\t\t\t*/\n\t\t\tconst transformedPayload = await (await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_11__.getHookStack)(this.options.fn[\"middleware\"], \"onSendEvent\", void 0, {\n\t\t\t\ttransformInput: (prev, output) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t...output\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\t\treturn { result: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t} };\n\t\t\t\t}\n\t\t\t})).transformInput?.({ payloads: [{\n\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\tname: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_4__.internalEvents.FunctionInvoked\n\t\t\t}] });\n\t\t\tconst newPayload = _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.invokePayloadSchema.parse(transformedPayload?.payloads?.[0] ?? {});\n\t\t\treturn {\n\t\t\t\t...step,\n\t\t\t\topts: {\n\t\t\t\t\t...step.opts,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\t\t\t...newPayload\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}));\n\t}\n\tasync executeStep({ id, name, opts, fn, displayName, userland, hashedId }) {\n\t\tthis.debug(`preparing to execute step \"${id}\"`);\n\t\tthis.timeout?.clear();\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tconst outgoingOp = {\n\t\t\tid: hashedId,\n\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepRun,\n\t\t\tname,\n\t\t\topts,\n\t\t\tdisplayName,\n\t\t\tuserland\n\t\t};\n\t\tthis.state.executingStep = outgoingOp;\n\t\tconst store = await (0,_als_js__WEBPACK_IMPORTED_MODULE_8__.getAsyncCtx)();\n\t\tif (store?.execution) store.execution.executingStep = {\n\t\t\tid,\n\t\t\tname: displayName\n\t\t};\n\t\tthis.debug(`executing step \"${id}\"`);\n\t\tlet interval;\n\t\treturn (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.goIntervalTiming)(() => (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(fn)).finally(async () => {\n\t\t\tthis.debug(`finished executing step \"${id}\"`);\n\t\t\tdelete this.state.executingStep;\n\t\t\tif (store?.execution) delete store.execution.executingStep;\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then(async ({ resultPromise, interval: _interval }) => {\n\t\t\tinterval = _interval;\n\t\t\tconst metadata = this.state.metadata?.get(id);\n\t\t\treturn {\n\t\t\t\t...outgoingOp,\n\t\t\t\tdata: await resultPromise,\n\t\t\t\t...metadata && metadata.length > 0 ? { metadata } : {}\n\t\t\t};\n\t\t}).catch((error) => {\n\t\t\tlet errorIsRetriable = true;\n\t\t\tif (error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_14__.NonRetriableError) errorIsRetriable = false;\n\t\t\telse if (this.fnArg.maxAttempts && this.fnArg?.maxAttempts - 1 === this.fnArg.attempt) errorIsRetriable = false;\n\t\t\tconst metadata = this.state.metadata?.get(id);\n\t\t\tif (errorIsRetriable) return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepError,\n\t\t\t\terror,\n\t\t\t\t...metadata && metadata.length > 0 ? { metadata } : {}\n\t\t\t};\n\t\t\telse return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepFailed,\n\t\t\t\terror,\n\t\t\t\t...metadata && metadata.length > 0 ? { metadata } : {}\n\t\t\t};\n\t\t}).then((op) => ({\n\t\t\t...op,\n\t\t\ttiming: interval\n\t\t}));\n\t}\n\t/**\n\t* Starts execution of the user's function, including triggering checkpoints\n\t* and middleware hooks where appropriate.\n\t*/\n\tasync startExecution() {\n\t\t/**\n\t\t* Mutate input as neccessary based on middleware.\n\t\t*/\n\t\tawait this.transformInput();\n\t\t/**\n\t\t* Start the timer to time out the run if needed.\n\t\t*/\n\t\tthis.timeout?.start();\n\t\tthis.checkpointingMaxRuntimeTimer?.start();\n\t\tawait this.state.hooks?.beforeMemoization?.();\n\t\t/**\n\t\t* If we had no state to begin with, immediately end the memoization phase.\n\t\t*/\n\t\tif (this.state.allStateUsed()) {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t}\n\t\t/**\n\t\t* Trigger the user's function.\n\t\t*/\n\t\t(0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.runAsPromise)(() => this.userFnToRun(this.fnArg)).finally(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then((data) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-resolved\",\n\t\t\t\tdata\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\terror\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t* Using middleware, transform input before running.\n\t*/\n\tasync transformInput() {\n\t\tconst inputMutations = await this.state.hooks?.transformInput?.({\n\t\t\tctx: { ...this.fnArg },\n\t\t\tsteps: Object.values(this.state.stepState),\n\t\t\tfn: this.options.fn,\n\t\t\treqArgs: this.options.reqArgs\n\t\t});\n\t\tif (inputMutations?.ctx) this.fnArg = inputMutations.ctx;\n\t\tif (inputMutations?.steps) this.state.stepState = Object.fromEntries(inputMutations.steps.map((step) => [step.id, step]));\n\t}\n\t/**\n\t* Using middleware, transform output before returning.\n\t*/\n\tasync transformOutput(dataOrError) {\n\t\tconst output = { ...dataOrError };\n\t\tconst isStepExecution = Boolean(this.state.executingStep);\n\t\tconst transformedOutput = await this.state.hooks?.transformOutput?.({\n\t\t\tresult: { ...output },\n\t\t\tstep: this.state.executingStep\n\t\t});\n\t\tconst { data, error } = {\n\t\t\t...output,\n\t\t\t...transformedOutput?.result\n\t\t};\n\t\tif (!isStepExecution) await this.state.hooks?.finished?.({ result: { ...typeof error !== \"undefined\" ? { error } : { data } } });\n\t\tif (typeof error !== \"undefined\") {\n\t\t\t/**\n\t\t\t* Ensure we give middleware the chance to decide on retriable behaviour\n\t\t\t* by looking at the error returned from output transformation.\n\t\t\t*/\n\t\t\tlet retriable = !(error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_14__.NonRetriableError || error instanceof _StepError_js__WEBPACK_IMPORTED_MODULE_15__.StepError && error === this.state.recentlyRejectedStepError);\n\t\t\tif (retriable && error instanceof _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_16__.RetryAfterError) retriable = error.retryAfter;\n\t\t\tconst serializedError = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.minifyPrettyError)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.serializeError)(error));\n\t\t\treturn {\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\terror: serializedError,\n\t\t\t\tretriable\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\ttype: \"function-resolved\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_17__.undefinedToNull)(data)\n\t\t};\n\t}\n\tcreateExecutionState() {\n\t\tconst d = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createDeferredPromiseWithStack)();\n\t\tlet checkpointResolve = d.deferred.resolve;\n\t\tconst checkpointResults = d.results;\n\t\tconst loop = (async function* (cleanUp) {\n\t\t\ttry {\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst res = (await checkpointResults.next()).value;\n\t\t\t\t\tif (res) yield res;\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tcleanUp?.();\n\t\t\t}\n\t\t})(() => {\n\t\t\tthis.timeout?.clear();\n\t\t\tthis.checkpointingMaxRuntimeTimer?.clear();\n\t\t\tcheckpointResults.return();\n\t\t});\n\t\tconst stepsToFulfill = Object.keys(this.options.stepState).length;\n\t\treturn {\n\t\t\tstepState: this.options.stepState,\n\t\t\tstepsToFulfill,\n\t\t\tsteps: /* @__PURE__ */ new Map(),\n\t\t\tloop,\n\t\t\thasSteps: Boolean(stepsToFulfill),\n\t\t\tstepCompletionOrder: [...this.options.stepCompletionOrder],\n\t\t\tremainingStepsToBeSeen: new Set(this.options.stepCompletionOrder),\n\t\t\tsetCheckpoint: (checkpoint) => {\n\t\t\t\t({resolve: checkpointResolve} = checkpointResolve(checkpoint));\n\t\t\t},\n\t\t\tallStateUsed: () => {\n\t\t\t\treturn this.state.remainingStepsToBeSeen.size === 0;\n\t\t\t},\n\t\t\tmetadata: /* @__PURE__ */ new Map()\n\t\t};\n\t}\n\tget ops() {\n\t\treturn Object.fromEntries(this.state.steps);\n\t}\n\tcreateFnArg() {\n\t\tconst step = this.createStepTools();\n\t\tlet fnArg = {\n\t\t\t...this.options.data,\n\t\t\tstep\n\t\t};\n\t\t/**\n\t\t* Handle use of the `onFailure` option by deserializing the error.\n\t\t*/\n\t\tif (this.options.isFailureHandler) {\n\t\t\tconst eventData = zod_v3__WEBPACK_IMPORTED_MODULE_18__.object({ error: _types_js__WEBPACK_IMPORTED_MODULE_5__.jsonErrorSchema }).parse(fnArg.event?.data);\n\t\t\tfnArg = {\n\t\t\t\t...fnArg,\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.deserializeError)(eventData.error)\n\t\t\t};\n\t\t}\n\t\treturn this.options.transformCtx?.(fnArg) ?? fnArg;\n\t}\n\tcreateStepTools() {\n\t\t/**\n\t\t* A list of steps that have been found and are being rolled up before being\n\t\t* reported to the core loop.\n\t\t*/\n\t\tconst foundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the subset of found steps to report that have not yet been\n\t\t* handled. Used for fast access to steps that need to be handled in order.\n\t\t*/\n\t\tconst unhandledFoundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the latest sequential step indexes found for each step ID. Used\n\t\t* to ensure that we don't index steps in parallel.\n\t\t*\n\t\t* Note that these must be sequential; if we've seen or assigned `a:1`,\n\t\t* `a:2` and `a:4`, the latest sequential step index is `2`.\n\t\t*\n\t\t*/\n\t\tconst expectedNextStepIndexes = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* An ordered list of step IDs that have yet to be handled in this\n\t\t* execution. Used to ensure that we handle steps in the order they were\n\t\t* found and based on the `stepCompletionOrder` in this execution's state.\n\t\t*/\n\t\tconst remainingStepCompletionOrder = this.state.stepCompletionOrder.slice();\n\t\t/**\n\t\t* A promise that's used to ensure that step reporting cannot be run more than\n\t\t* once in a given asynchronous time span.\n\t\t*/\n\t\tlet foundStepsReportPromise;\n\t\t/**\n\t\t* A promise that's used to represent middleware hooks running before\n\t\t* execution.\n\t\t*/\n\t\tlet beforeExecHooksPromise;\n\t\t/**\n\t\t* A flag used to ensure that we only warn about parallel indexing once per\n\t\t* execution to avoid spamming the console.\n\t\t*/\n\t\tlet warnOfParallelIndexing = false;\n\t\t/**\n\t\t* Counts the number of times we've extended this tick.\n\t\t*/\n\t\tlet tickExtensionCount = 0;\n\t\t/**\n\t\t* Given a colliding step ID, maybe warn the user about parallel indexing.\n\t\t*/\n\t\tconst maybeWarnOfParallelIndexing = (userlandCollisionId) => {\n\t\t\tif (warnOfParallelIndexing) return;\n\t\t\tconst hashedCollisionId = _internals.hashId(userlandCollisionId);\n\t\t\tif (this.state.steps.has(hashedCollisionId)) {\n\t\t\t\tif (!foundStepsToReport.has(hashedCollisionId)) {\n\t\t\t\t\twarnOfParallelIndexing = true;\n\t\t\t\t\tthis.options.client[\"warnMetadata\"]({ run_id: this.fnArg.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.AUTOMATIC_PARALLEL_INDEXING, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.prettyError)({\n\t\t\t\t\t\ttype: \"warn\",\n\t\t\t\t\t\twhatHappened: \"We detected that you have multiple steps with the same ID.\",\n\t\t\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.AUTOMATIC_PARALLEL_INDEXING,\n\t\t\t\t\t\twhy: `This can happen if you're using the same ID for multiple steps across different chains of parallel work. We found the issue with step \"${userlandCollisionId}\".`,\n\t\t\t\t\t\treassurance: \"Your function is still running, though it may exhibit unexpected behaviour.\",\n\t\t\t\t\t\tconsequences: \"Using the same IDs across parallel chains of work can cause unexpected behaviour.\",\n\t\t\t\t\t\ttoFixNow: \"We recommend using a unique ID for each step, especially those happening in parallel.\"\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t* A helper used to report steps to the core loop. Used after adding an item\n\t\t* to `foundStepsToReport`.\n\t\t*/\n\t\tconst reportNextTick = () => {\n\t\t\tif (foundStepsReportPromise) return;\n\t\t\tlet extensionPromise;\n\t\t\tif (++tickExtensionCount >= 10) {\n\t\t\t\ttickExtensionCount = 0;\n\t\t\t\textensionPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.resolveNextTick)();\n\t\t\t} else extensionPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.resolveAfterPending)();\n\t\t\tfoundStepsReportPromise = extensionPromise.then(() => beforeExecHooksPromise).then(() => {\n\t\t\t\tfoundStepsReportPromise = void 0;\n\t\t\t\tfor (let i = 0; i < remainingStepCompletionOrder.length; i++) {\n\t\t\t\t\tconst nextStepId = remainingStepCompletionOrder[i];\n\t\t\t\t\tif (!nextStepId) continue;\n\t\t\t\t\tif (unhandledFoundStepsToReport.get(nextStepId)?.handle()) {\n\t\t\t\t\t\tremainingStepCompletionOrder.splice(i, 1);\n\t\t\t\t\t\tunhandledFoundStepsToReport.delete(nextStepId);\n\t\t\t\t\t\treportNextTick();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst steps = [...foundStepsToReport.values()];\n\t\t\t\tfoundStepsToReport.clear();\n\t\t\t\tunhandledFoundStepsToReport.clear();\n\t\t\t\tthis.state.setCheckpoint({\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tsteps\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\t/**\n\t\t* A helper used to push a step to the list of steps to report.\n\t\t*/\n\t\tconst pushStepToReport = (step) => {\n\t\t\tfoundStepsToReport.set(step.hashedId, step);\n\t\t\tunhandledFoundStepsToReport.set(step.hashedId, step);\n\t\t\treportNextTick();\n\t\t};\n\t\tconst stepHandler = async ({ args, matchOp, opts }) => {\n\t\t\tawait beforeExecHooksPromise;\n\t\t\tconst opId = matchOp((0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.getStepOptions)(args[0]), ...args.slice(1));\n\t\t\tif (this.state.executingStep)\n /**\n\t\t\t* If a step is found after asynchronous actions during another step's\n\t\t\t* execution, everything is fine. The problem here is if we've found\n\t\t\t* that a step nested inside another a step, which is something we don't\n\t\t\t* support at the time of writing.\n\t\t\t*\n\t\t\t* In this case, we could use something like Async Hooks to understand\n\t\t\t* how the step is being triggered, though this isn't available in all\n\t\t\t* environments.\n\t\t\t*\n\t\t\t* Therefore, we'll only show a warning here to indicate that this is\n\t\t\t* potentially an issue.\n\t\t\t*/\n\t\t\tthis.options.client[\"warnMetadata\"]({ run_id: this.fnArg.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.NESTING_STEPS, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.prettyError)({\n\t\t\t\twhatHappened: `We detected that you have nested \\`step.*\\` tooling in \\`${opId.displayName ?? opId.id}\\``,\n\t\t\t\tconsequences: \"Nesting `step.*` tooling is not supported.\",\n\t\t\t\ttype: \"warn\",\n\t\t\t\treassurance: \"It's possible to see this warning if steps are separated by regular asynchronous calls, which is fine.\",\n\t\t\t\tstack: true,\n\t\t\t\ttoFixNow: \"Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.\",\n\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_10__.ErrCode.NESTING_STEPS\n\t\t\t}));\n\t\t\tif (this.state.steps.has(_internals.hashId(opId.id))) {\n\t\t\t\tconst originalId = opId.id;\n\t\t\t\tmaybeWarnOfParallelIndexing(originalId);\n\t\t\t\tconst expectedNextIndex = expectedNextStepIndexes.get(originalId) ?? 1;\n\t\t\t\tfor (let i = expectedNextIndex;; i++) {\n\t\t\t\t\tconst newId = originalId + _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.STEP_INDEXING_SUFFIX + i;\n\t\t\t\t\tif (!this.state.steps.has(_internals.hashId(newId))) {\n\t\t\t\t\t\texpectedNextStepIndexes.set(originalId, i + 1);\n\t\t\t\t\t\topId.id = newId;\n\t\t\t\t\t\topId.userland.index = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst { promise, resolve, reject } = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createDeferredPromise)();\n\t\t\tconst hashedId = _internals.hashId(opId.id);\n\t\t\tconst stepState = this.state.stepState[hashedId];\n\t\t\tlet isFulfilled = false;\n\t\t\tif (stepState) {\n\t\t\t\tstepState.seen = true;\n\t\t\t\tthis.state.remainingStepsToBeSeen.delete(hashedId);\n\t\t\t\tif (typeof stepState.input === \"undefined\") isFulfilled = true;\n\t\t\t}\n\t\t\tlet extraOpts;\n\t\t\tlet fnArgs = [...args];\n\t\t\tif (typeof stepState?.input !== \"undefined\" && Array.isArray(stepState.input)) switch (opId.op) {\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepPlanned:\n\t\t\t\t\tfnArgs = [...args.slice(0, 2), ...stepState.input];\n\t\t\t\t\textraOpts = { input: [...stepState.input] };\n\t\t\t\t\tbreak;\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.AiGateway:\n\t\t\t\t\textraOpts = { body: {\n\t\t\t\t\t\t...typeof opId.opts?.body === \"object\" ? { ...opId.opts.body } : {},\n\t\t\t\t\t\t...stepState.input[0]\n\t\t\t\t\t} };\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst step = {\n\t\t\t\t...opId,\n\t\t\t\topts: {\n\t\t\t\t\t...opId.opts,\n\t\t\t\t\t...extraOpts\n\t\t\t\t},\n\t\t\t\trawArgs: fnArgs,\n\t\t\t\thashedId,\n\t\t\t\tinput: stepState?.input,\n\t\t\t\tfn: opts?.fn ? () => opts.fn?.(...fnArgs) : void 0,\n\t\t\t\tpromise,\n\t\t\t\tfulfilled: isFulfilled,\n\t\t\t\thasStepState: Boolean(stepState),\n\t\t\t\tdisplayName: opId.displayName ?? opId.id,\n\t\t\t\thandled: false,\n\t\t\t\thandle: () => {\n\t\t\t\t\tif (step.handled) return false;\n\t\t\t\t\tthis.debug(`handling step \"${hashedId}\"`);\n\t\t\t\t\tstep.handled = true;\n\t\t\t\t\tconst result = this.state.stepState[hashedId];\n\t\t\t\t\tif (step.fulfilled && result) {\n\t\t\t\t\t\tresult.fulfilled = true;\n\t\t\t\t\t\tPromise.all([\n\t\t\t\t\t\t\tresult.data,\n\t\t\t\t\t\t\tresult.error,\n\t\t\t\t\t\t\tresult.input\n\t\t\t\t\t\t]).then(() => {\n\t\t\t\t\t\t\tif (typeof result.data !== \"undefined\") resolve(result.data);\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthis.state.recentlyRejectedStepError = new _StepError_js__WEBPACK_IMPORTED_MODULE_15__.StepError(opId.id, result.error);\n\t\t\t\t\t\t\t\treject(this.state.recentlyRejectedStepError);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.state.steps.set(hashedId, step);\n\t\t\tthis.state.hasSteps = true;\n\t\t\tpushStepToReport(step);\n\t\t\t/**\n\t\t\t* If this is the last piece of state we had, we've now finished\n\t\t\t* memoizing.\n\t\t\t*/\n\t\t\tif (!beforeExecHooksPromise && this.state.allStateUsed()) await (beforeExecHooksPromise = (async () => {\n\t\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\t})());\n\t\t\treturn promise;\n\t\t};\n\t\treturn (0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_12__.createStepTools)(this.options.client, this, stepHandler);\n\t}\n\tresumeStepWithResult(resultOp) {\n\t\tconst userlandStep = this.state.steps.get(resultOp.id);\n\t\tif (!userlandStep) throw new Error(\"Step not found in memoization state during async checkpointing; this should never happen and is a bug in the Inngest SDK\");\n\t\tuserlandStep.data = (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_17__.undefinedToNull)(resultOp.data);\n\t\tuserlandStep.timing = resultOp.timing;\n\t\tuserlandStep.fulfilled = true;\n\t\tuserlandStep.hasStepState = true;\n\t\tuserlandStep.op = resultOp.op;\n\t\tuserlandStep.id = resultOp.id;\n\t\tthis.state.stepState[resultOp.id] = userlandStep;\n\t\tuserlandStep.handle();\n\t\treturn userlandStep;\n\t}\n\tgetUserFnToRun() {\n\t\tif (!this.options.isFailureHandler) return this.options.fn[\"fn\"];\n\t\tif (!this.options.fn[\"onFailureFn\"])\n /**\n\t\t* Somehow, we've ended up detecting that this is a failure handler but\n\t\t* doesn't have an `onFailure` function. This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Cannot find function `onFailure` handler\");\n\t\treturn this.options.fn[\"onFailureFn\"];\n\t}\n\tinitializeTimer(state) {\n\t\tif (!this.options.requestedRunStep) return;\n\t\tthis.timeout = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createTimeoutPromise)(this.timeoutDuration);\n\t\tthis.timeout.then(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\tstate.setCheckpoint({\n\t\t\t\ttype: \"step-not-found\",\n\t\t\t\tstep: {\n\t\t\t\t\tid: this.options.requestedRunStep,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_5__.StepOpCode.StepNotFound\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tinitializeCheckpointRuntimeTimer(state) {\n\t\tif (!this.options.checkpointingConfig) return;\n\t\tif (typeof this.options.checkpointingConfig === \"boolean\") return;\n\t\tif (!this.options.checkpointingConfig.maxRuntime) return;\n\t\tconst maxRuntimeMs = (0,_helpers_temporal_js__WEBPACK_IMPORTED_MODULE_19__.isTemporalDuration)(this.options.checkpointingConfig.maxRuntime) ? this.options.checkpointingConfig.maxRuntime.total({ unit: \"milliseconds\" }) : typeof this.options.checkpointingConfig.maxRuntime === \"string\" ? ms__WEBPACK_IMPORTED_MODULE_1__(this.options.checkpointingConfig.maxRuntime) : this.options.checkpointingConfig.maxRuntime;\n\t\tif (!Number.isFinite(maxRuntimeMs) || maxRuntimeMs <= 0) return;\n\t\tthis.checkpointingMaxRuntimeTimer = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_13__.createTimeoutPromise)(maxRuntimeMs);\n\t\tthis.checkpointingMaxRuntimeTimer.then(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\tstate.setCheckpoint({ type: \"checkpointing-runtime-reached\" });\n\t\t});\n\t}\n\tasync initializeMiddleware() {\n\t\tconst ctx = this.options.data;\n\t\treturn await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_11__.getHookStack)(this.options.fn[\"middleware\"], \"onFunctionRun\", {\n\t\t\tctx,\n\t\t\tfn: this.options.fn,\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\treqArgs: this.options.reqArgs\n\t\t}, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tctx: {\n\t\t\t\t\t\t...prev.ctx,\n\t\t\t\t\t\t...output?.ctx\n\t\t\t\t\t},\n\t\t\t\t\tfn: this.options.fn,\n\t\t\t\t\tsteps: prev.steps.map((step, i) => ({\n\t\t\t\t\t\t...step,\n\t\t\t\t\t\t...output?.steps?.[i]\n\t\t\t\t\t})),\n\t\t\t\t\treqArgs: prev.reqArgs\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tresult: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t},\n\t\t\t\t\tstep: prev.step\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n};\nconst hashId = (id) => {\n\treturn sha1().update(id).digest(\"hex\");\n};\nconst hashOp = (op) => {\n\treturn {\n\t\t...op,\n\t\tid: hashId(op.id)\n\t};\n};\n/**\n* Exported for testing.\n*/\nconst _internals = {\n\thashOp,\n\thashId\n};\n\n//#endregion\n\n//# sourceMappingURL=v1.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNEO0FBQ2xCO0FBQzRDO0FBQ2hCO0FBQ2Q7QUFDRztBQUN3RDtBQUN2RDtBQUNOO0FBQ0Q7QUFDd0k7QUFDL0g7QUFDUDtBQUNaO0FBQ3dFO0FBQ3pGO0FBQ2dCO0FBQ2Q7QUFDVDs7QUFFcEI7QUFDQSxpQ0FBaUMsc0VBQVE7QUFDekM7QUFDQTtBQUNBLENBQUM7QUFDRCxRQUFRLE9BQU8sRUFBRSxvQ0FBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsa0VBQWdCO0FBQ3ZELFdBQVcsZ0VBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywrQ0FBUTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLCtDQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsMkRBQTJELDhCQUE4QjtBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFEQUFLLHNCQUFzQixnREFBTztBQUNwRCxvQkFBb0IsNkRBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLE1BQU0sK0RBQWtCO0FBQ3hCO0FBQ0E7QUFDQSx5Q0FBeUMsMERBQVU7QUFDbkQsd0NBQXdDLDBEQUFVO0FBQ2xELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNB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TUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEQ7QUFDNUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92MS5qcz81YmE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uLy4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGdldEFzeW5jQ3R4LCBnZXRBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gXCIuL2Fscy5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi8uLi92ZXJzaW9uLmpzXCI7XG5pbXBvcnQgeyBFeGVjdXRpb25WZXJzaW9uLCBoZWFkZXJLZXlzLCBpbnRlcm5hbEV2ZW50cyB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2NvbnN0cy5qc1wiO1xuaW1wb3J0IHsgU3RlcE1vZGUsIFN0ZXBPcENvZGUsIGpzb25FcnJvclNjaGVtYSB9IGZyb20gXCIuLi8uLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdEV4ZWN1dGlvbiB9IGZyb20gXCIuL0lubmdlc3RFeGVjdXRpb24uanNcIjtcbmltcG9ydCB7IE5vblJldHJpYWJsZUVycm9yIH0gZnJvbSBcIi4uL05vblJldHJpYWJsZUVycm9yLmpzXCI7XG5pbXBvcnQgeyBFcnJDb2RlLCBkZXNlcmlhbGl6ZUVycm9yLCBtaW5pZnlQcmV0dHlFcnJvciwgcHJldHR5RXJyb3IsIHNlcmlhbGl6ZUVycm9yIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyB1bmRlZmluZWRUb051bGwgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9mdW5jdGlvbnMuanNcIjtcbmltcG9ydCB7IGdldEhvb2tTdGFjayB9IGZyb20gXCIuLi9Jbm5nZXN0TWlkZGxld2FyZS5qc1wiO1xuaW1wb3J0IHsgY2xpZW50UHJvY2Vzc29yTWFwIH0gZnJvbSBcIi4vb3RlbC9hY2Nlc3MuanNcIjtcbmltcG9ydCB7IGNyZWF0ZURlZmVycmVkUHJvbWlzZSwgY3JlYXRlRGVmZXJyZWRQcm9taXNlV2l0aFN0YWNrLCBjcmVhdGVUaW1lb3V0UHJvbWlzZSwgZ29JbnRlcnZhbFRpbWluZywgcmVzb2x2ZUFmdGVyUGVuZGluZywgcmVzb2x2ZU5leHRUaWNrLCBydW5Bc1Byb21pc2UgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgaXNUZW1wb3JhbER1cmF0aW9uIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvdGVtcG9yYWwuanNcIjtcbmltcG9ydCB7IFJldHJ5QWZ0ZXJFcnJvciB9IGZyb20gXCIuLi9SZXRyeUFmdGVyRXJyb3IuanNcIjtcbmltcG9ydCB7IFN0ZXBFcnJvciB9IGZyb20gXCIuLi9TdGVwRXJyb3IuanNcIjtcbmltcG9ydCB7IFNURVBfSU5ERVhJTkdfU1VGRklYLCBjcmVhdGVTdGVwVG9vbHMsIGdldFN0ZXBPcHRpb25zLCBpbnZva2VQYXlsb2FkU2NoZW1hIH0gZnJvbSBcIi4uL0lubmdlc3RTdGVwVG9vbHMuanNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gXCJAb3BlbnRlbGVtZXRyeS9hcGlcIjtcbmltcG9ydCBoYXNoanMgZnJvbSBcImhhc2guanNcIjtcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL2V4ZWN1dGlvbi92MS50c1xudmFyIHYxX2V4cG9ydHMgPSAvKiBAX19QVVJFX18gKi8gX19leHBvcnQoe1xuXHRfaW50ZXJuYWxzOiAoKSA9PiBfaW50ZXJuYWxzLFxuXHRjcmVhdGVWMUlubmdlc3RFeGVjdXRpb246ICgpID0+IGNyZWF0ZVYxSW5uZ2VzdEV4ZWN1dGlvblxufSk7XG5jb25zdCB7IHNoYTEgfSA9IGhhc2hqcztcbmNvbnN0IGNyZWF0ZVYxSW5uZ2VzdEV4ZWN1dGlvbiA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiBuZXcgVjFJbm5nZXN0RXhlY3V0aW9uKG9wdGlvbnMpO1xufTtcbnZhciBWMUlubmdlc3RFeGVjdXRpb24gPSBjbGFzcyBleHRlbmRzIElubmdlc3RFeGVjdXRpb24ge1xuXHR2ZXJzaW9uID0gRXhlY3V0aW9uVmVyc2lvbi5WMTtcblx0c3RhdGU7XG5cdGZuQXJnO1xuXHRjaGVja3BvaW50SGFuZGxlcnM7XG5cdHRpbWVvdXREdXJhdGlvbiA9IDFlMyAqIDEwO1xuXHRleGVjdXRpb247XG5cdHVzZXJGblRvUnVuO1xuXHQvKipcblx0KiBJZiB3ZSdyZSBzdXBwb3NlZCB0byBydW4gYSBwYXJ0aWN1bGFyIHN0ZXAgdmlhIGByZXF1ZXN0ZWRSdW5TdGVwYCwgdGhpc1xuXHQqIHdpbGwgYmUgYSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyBhZnRlciBubyBzdGVwcyBoYXZlIGJlZW4gZm91bmQgZm9yXG5cdCogYHRpbWVvdXREdXJhdGlvbmAgbWlsbGlzZWNvbmRzLlxuXHQqXG5cdCogSWYgd2UncmUgbm90IHN1cHBvc2VkIHRvIHJ1biBhIHBhcnRpY3VsYXIgc3RlcCwgdGhpcyB3aWxsIGJlIGB1bmRlZmluZWRgLlxuXHQqL1xuXHR0aW1lb3V0O1xuXHQvKipcblx0KiBJZiB3ZSdyZSBjaGVja3BvaW50aW5nIGFuZCBoYXZlIGJlZW4gZ2l2ZW4gYSBtYXhpbXVtIHJ1bnRpbWUsIHRoaXMgd2lsbCBiZVxuXHQqIGEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhhdCBkdXJhdGlvbiBoYXMgZWxhcHNlZCwgYWxsb3dpbmcgdXMgdG9cblx0KiBlbnN1cmUgdGhhdCB3ZSBlbmQgdGhlIGV4ZWN1dGlvbiBpbiBnb29kIHRpbWUsIGVzcGVjaWFsbHkgaW4gc2VydmVybGVzc1xuXHQqIGVudmlyb25tZW50cy5cblx0Ki9cblx0Y2hlY2twb2ludGluZ01heFJ1bnRpbWVUaW1lcjtcblx0Y29uc3RydWN0b3IocmF3T3B0aW9ucykge1xuXHRcdGNvbnN0IG9wdGlvbnMgPSB7XG5cdFx0XHQuLi5yYXdPcHRpb25zLFxuXHRcdFx0c3RlcE1vZGU6IHJhd09wdGlvbnMuc3RlcE1vZGUgPz8gU3RlcE1vZGUuQXN5bmNcblx0XHR9O1xuXHRcdHN1cGVyKG9wdGlvbnMpO1xuXHRcdC8qKlxuXHRcdCogQ2hlY2sgd2UgaGF2ZSBldmVyeXRoaW5nIHdlIG5lZWQgZm9yIGNoZWNrcG9pbnRpbmdcblx0XHQqL1xuXHRcdGlmICh0aGlzLm9wdGlvbnMuc3RlcE1vZGUgPT09IFN0ZXBNb2RlLlN5bmMpIHtcblx0XHRcdGlmICghdGhpcy5vcHRpb25zLmNyZWF0ZVJlc3BvbnNlKSB0aHJvdyBuZXcgRXJyb3IoXCJjcmVhdGVSZXNwb25zZSBpcyByZXF1aXJlZCBmb3Igc3luYyBzdGVwIG1vZGVcIik7XG5cdFx0fVxuXHRcdHRoaXMudXNlckZuVG9SdW4gPSB0aGlzLmdldFVzZXJGblRvUnVuKCk7XG5cdFx0dGhpcy5zdGF0ZSA9IHRoaXMuY3JlYXRlRXhlY3V0aW9uU3RhdGUoKTtcblx0XHR0aGlzLmZuQXJnID0gdGhpcy5jcmVhdGVGbkFyZygpO1xuXHRcdHRoaXMuY2hlY2twb2ludEhhbmRsZXJzID0gdGhpcy5jcmVhdGVDaGVja3BvaW50SGFuZGxlcnMoKTtcblx0XHR0aGlzLmluaXRpYWxpemVUaW1lcih0aGlzLnN0YXRlKTtcblx0XHR0aGlzLmluaXRpYWxpemVDaGVja3BvaW50UnVudGltZVRpbWVyKHRoaXMuc3RhdGUpO1xuXHRcdHRoaXMuZGVidWcoXCJjcmVhdGVkIG5ldyBWMSBleGVjdXRpb24gZm9yIHJ1bjtcIiwgdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAgPyBgd2FudGluZyB0byBydW4gc3RlcCBcIiR7dGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXB9XCJgIDogXCJkaXNjb3ZlcmluZyBzdGVwc1wiKTtcblx0XHR0aGlzLmRlYnVnKFwiZXhpc3Rpbmcgc3RhdGUga2V5czpcIiwgT2JqZWN0LmtleXModGhpcy5zdGF0ZS5zdGVwU3RhdGUpKTtcblx0fVxuXHQvKipcblx0KiBJZGVtcG90ZW50bHkgc3RhcnQgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgdXNlcidzIGZ1bmN0aW9uLlxuXHQqL1xuXHRzdGFydCgpIHtcblx0XHRpZiAoIXRoaXMuZXhlY3V0aW9uKSB7XG5cdFx0XHR0aGlzLmRlYnVnKFwic3RhcnRpbmcgVjEgZXhlY3V0aW9uXCIpO1xuXHRcdFx0Y29uc3QgdHJhY2VyID0gdHJhY2UuZ2V0VHJhY2VyKFwiaW5uZ2VzdFwiLCB2ZXJzaW9uKTtcblx0XHRcdHRoaXMuZXhlY3V0aW9uID0gZ2V0QXN5bmNMb2NhbFN0b3JhZ2UoKS50aGVuKChhbHMpID0+IHtcblx0XHRcdFx0cmV0dXJuIGFscy5ydW4oe1xuXHRcdFx0XHRcdGFwcDogdGhpcy5vcHRpb25zLmNsaWVudCxcblx0XHRcdFx0XHRleGVjdXRpb246IHtcblx0XHRcdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0XHRcdGluc3RhbmNlOiB0aGlzXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIHRyYWNlci5zdGFydEFjdGl2ZVNwYW4oXCJpbm5nZXN0LmV4ZWN1dGlvblwiLCAoc3BhbikgPT4ge1xuXHRcdFx0XHRcdFx0Y2xpZW50UHJvY2Vzc29yTWFwLmdldCh0aGlzLm9wdGlvbnMuY2xpZW50KT8uZGVjbGFyZVN0YXJ0aW5nU3Bhbih7XG5cdFx0XHRcdFx0XHRcdHNwYW4sXG5cdFx0XHRcdFx0XHRcdHJ1bklkOiB0aGlzLm9wdGlvbnMucnVuSWQsXG5cdFx0XHRcdFx0XHRcdHRyYWNlcGFyZW50OiB0aGlzLm9wdGlvbnMuaGVhZGVyc1toZWFkZXJLZXlzLlRyYWNlUGFyZW50XSxcblx0XHRcdFx0XHRcdFx0dHJhY2VzdGF0ZTogdGhpcy5vcHRpb25zLmhlYWRlcnNbaGVhZGVyS2V5cy5UcmFjZVN0YXRlXVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fc3RhcnQoKS50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5kZWJ1ZyhcInJlc3VsdDpcIiwgcmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHRcdH0pLmZpbmFsbHkoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRzcGFuLmVuZCgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmV4ZWN1dGlvbjtcblx0fVxuXHRhZGRNZXRhZGF0YShzdGVwSWQsIGtpbmQsIHNjb3BlLCBvcCwgdmFsdWVzKSB7XG5cdFx0aWYgKCF0aGlzLnN0YXRlLm1ldGFkYXRhKSB0aGlzLnN0YXRlLm1ldGFkYXRhID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHRjb25zdCB1cGRhdGVzID0gdGhpcy5zdGF0ZS5tZXRhZGF0YS5nZXQoc3RlcElkKSA/PyBbXTtcblx0XHR1cGRhdGVzLnB1c2goe1xuXHRcdFx0a2luZCxcblx0XHRcdHNjb3BlLFxuXHRcdFx0b3AsXG5cdFx0XHR2YWx1ZXNcblx0XHR9KTtcblx0XHR0aGlzLnN0YXRlLm1ldGFkYXRhLnNldChzdGVwSWQsIHVwZGF0ZXMpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdC8qKlxuXHQqIFN0YXJ0cyBleGVjdXRpb24gb2YgdGhlIHVzZXIncyBmdW5jdGlvbiBhbmQgdGhlIGNvcmUgbG9vcC5cblx0Ki9cblx0YXN5bmMgX3N0YXJ0KCkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBhbGxDaGVja3BvaW50SGFuZGxlciA9IHRoaXMuZ2V0Q2hlY2twb2ludEhhbmRsZXIoXCJcIik7XG5cdFx0XHR0aGlzLnN0YXRlLmhvb2tzID0gYXdhaXQgdGhpcy5pbml0aWFsaXplTWlkZGxld2FyZSgpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGFydEV4ZWN1dGlvbigpO1xuXHRcdFx0bGV0IGkgPSAwO1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBjaGVja3BvaW50IG9mIHRoaXMuc3RhdGUubG9vcCkge1xuXHRcdFx0XHRhd2FpdCBhbGxDaGVja3BvaW50SGFuZGxlcihjaGVja3BvaW50LCBpKTtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRDaGVja3BvaW50SGFuZGxlcihjaGVja3BvaW50LnR5cGUpKGNoZWNrcG9pbnQsIGkrKyk7XG5cdFx0XHRcdGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnRyYW5zZm9ybU91dHB1dCh7IGVycm9yIH0pO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLnN0YXRlLmxvb3AucmV0dXJuKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVSZXNwb25zZT8uKCk7XG5cdFx0fVxuXHRcdC8qKlxuXHRcdCogSWYgd2UncmUgaGVyZSwgdGhlIGdlbmVyYXRvciBzb21laG93IGZpbmlzaGVkIHdpdGhvdXQgcmV0dXJuaW5nIGEgdmFsdWUuXG5cdFx0KiBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uXG5cdFx0Ki9cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3JlIGxvb3AgZmluaXNoZWQgd2l0aG91dCByZXR1cm5pbmcgYSB2YWx1ZVwiKTtcblx0fVxuXHRhc3luYyBjaGVja3BvaW50KHN0ZXBzKSB7XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5zdGVwTW9kZSA9PT0gU3RlcE1vZGUuU3luYykgaWYgKCF0aGlzLnN0YXRlLmNoZWNrcG9pbnRlZFJ1bikge1xuXHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudFtcImlubmdlc3RBcGlcIl0uY2hlY2twb2ludE5ld1J1bih7XG5cdFx0XHRcdHJ1bklkOiB0aGlzLmZuQXJnLnJ1bklkLFxuXHRcdFx0XHRldmVudDogdGhpcy5mbkFyZy5ldmVudCxcblx0XHRcdFx0c3RlcHNcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5zdGF0ZS5jaGVja3BvaW50ZWRSdW4gPSB7XG5cdFx0XHRcdGFwcElkOiByZXMuZGF0YS5hcHBfaWQsXG5cdFx0XHRcdGZuSWQ6IHJlcy5kYXRhLmZuX2lkLFxuXHRcdFx0XHR0b2tlbjogcmVzLmRhdGEudG9rZW5cblx0XHRcdH07XG5cdFx0fSBlbHNlIGF3YWl0IHRoaXMub3B0aW9ucy5jbGllbnRbXCJpbm5nZXN0QXBpXCJdLmNoZWNrcG9pbnRTdGVwcyh7XG5cdFx0XHRhcHBJZDogdGhpcy5zdGF0ZS5jaGVja3BvaW50ZWRSdW4uYXBwSWQsXG5cdFx0XHRmbklkOiB0aGlzLnN0YXRlLmNoZWNrcG9pbnRlZFJ1bi5mbklkLFxuXHRcdFx0cnVuSWQ6IHRoaXMuZm5BcmcucnVuSWQsXG5cdFx0XHRzdGVwc1xuXHRcdH0pO1xuXHRcdGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zdGVwTW9kZSA9PT0gU3RlcE1vZGUuQXN5bmNDaGVja3BvaW50aW5nKSB7XG5cdFx0XHRpZiAoIXRoaXMub3B0aW9ucy5xdWV1ZUl0ZW1JZCkgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBxdWV1ZUl0ZW1JZCBmb3IgYXN5bmMgY2hlY2twb2ludGluZy4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgSW5uZ2VzdCBTREsuXCIpO1xuXHRcdFx0aWYgKCF0aGlzLm9wdGlvbnMuaW50ZXJuYWxGbklkKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGludGVybmFsRm5JZCBmb3IgYXN5bmMgY2hlY2twb2ludGluZy4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgSW5uZ2VzdCBTREsuXCIpO1xuXHRcdFx0YXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudFtcImlubmdlc3RBcGlcIl0uY2hlY2twb2ludFN0ZXBzQXN5bmMoe1xuXHRcdFx0XHRydW5JZDogdGhpcy5mbkFyZy5ydW5JZCxcblx0XHRcdFx0Zm5JZDogdGhpcy5vcHRpb25zLmludGVybmFsRm5JZCxcblx0XHRcdFx0cXVldWVJdGVtSWQ6IHRoaXMub3B0aW9ucy5xdWV1ZUl0ZW1JZCxcblx0XHRcdFx0c3RlcHNcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJDaGVja3BvaW50aW5nIGlzIG9ubHkgc3VwcG9ydGVkIGluIFN5bmMgYW5kIEFzeW5jQ2hlY2twb2ludGluZyBzdGVwIG1vZGVzLiBUaGlzIGlzIGEgYnVnIGluIHRoZSBJbm5nZXN0IFNESy5cIik7XG5cdH1cblx0YXN5bmMgY2hlY2twb2ludEFuZFN3aXRjaFRvQXN5bmMoc3RlcHMpIHtcblx0XHRhd2FpdCB0aGlzLmNoZWNrcG9pbnQoc3RlcHMpO1xuXHRcdGlmICghdGhpcy5zdGF0ZS5jaGVja3BvaW50ZWRSdW4/LnRva2VuKSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY2hlY2twb2ludCBhbmQgc3dpdGNoIHRvIGFzeW5jIG1vZGVcIik7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiY2hhbmdlLW1vZGVcIixcblx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHR0bzogU3RlcE1vZGUuQXN5bmMsXG5cdFx0XHR0b2tlbjogdGhpcy5zdGF0ZS5jaGVja3BvaW50ZWRSdW4/LnRva2VuXG5cdFx0fTtcblx0fVxuXHQvKipcblx0KiBSZXR1cm5zIHdoZXRoZXIgd2UncmUgaW4gdGhlIGZpbmFsIGF0dGVtcHQgb2YgZXhlY3V0aW9uLCBvciBgbnVsbGAgaWYgd2Vcblx0KiBjYW4ndCBkZXRlcm1pbmUgdGhpcyBpbiB0aGUgU0RLLlxuXHQqL1xuXHRpbkZpbmFsQXR0ZW1wdCgpIHtcblx0XHRpZiAodHlwZW9mIHRoaXMuZm5BcmcubWF4QXR0ZW1wdHMgIT09IFwibnVtYmVyXCIpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB0aGlzLmZuQXJnLmF0dGVtcHQgKyAxID49IHRoaXMuZm5BcmcubWF4QXR0ZW1wdHM7XG5cdH1cblx0LyoqXG5cdCogQ3JlYXRlcyBhIGhhbmRsZXIgZm9yIGV2ZXJ5IGNoZWNrcG9pbnQgdHlwZSwgZGVmaW5pbmcgd2hhdCB0byBkbyB3aGVuIHdlXG5cdCogcmVhY2ggdGhhdCBjaGVja3BvaW50IGluIHRoZSBjb3JlIGxvb3AuXG5cdCovXG5cdGNyZWF0ZUNoZWNrcG9pbnRIYW5kbGVycygpIHtcblx0XHRjb25zdCBjb21tb25DaGVja3BvaW50SGFuZGxlciA9IChjaGVja3BvaW50KSA9PiB7XG5cdFx0XHR0aGlzLmRlYnVnKGAke3RoaXMub3B0aW9ucy5zdGVwTW9kZX0gY2hlY2twb2ludDpgLCBjaGVja3BvaW50KTtcblx0XHR9O1xuXHRcdGNvbnN0IHN0ZXBSYW5IYW5kbGVyID0gYXN5bmMgKHN0ZXBSZXN1bHQpID0+IHtcblx0XHRcdGNvbnN0IHRyYW5zZm9ybVJlc3VsdCA9IGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHN0ZXBSZXN1bHQpO1xuXHRcdFx0LyoqXG5cdFx0XHQqIFRyYW5zZm9ybWluZyBvdXRwdXQgd2lsbCBhbHdheXMgcmV0dXJuIGVpdGhlciBmdW5jdGlvbiByZWplY3Rpb24gb3Jcblx0XHRcdCogcmVzb2x1dGlvbi4gSW4gbW9zdCBjYXNlcywgdGhpcyBjYW4gYmUgaW1tZWRpYXRlbHkgcmV0dXJuZWQsIGJ1dCBpblxuXHRcdFx0KiB0aGlzIHBhcnRpY3VsYXIgY2FzZSB3ZSB3YW50IHRvIGhhbmRsZSBpdCBkaWZmZXJlbnRseS5cblx0XHRcdCovXG5cdFx0XHRpZiAodHJhbnNmb3JtUmVzdWx0LnR5cGUgPT09IFwiZnVuY3Rpb24tcmVzb2x2ZWRcIikgcmV0dXJuIHtcblx0XHRcdFx0dHlwZTogXCJzdGVwLXJhblwiLFxuXHRcdFx0XHRjdHg6IHRyYW5zZm9ybVJlc3VsdC5jdHgsXG5cdFx0XHRcdG9wczogdHJhbnNmb3JtUmVzdWx0Lm9wcyxcblx0XHRcdFx0c3RlcDoge1xuXHRcdFx0XHRcdC4uLnN0ZXBSZXN1bHQsXG5cdFx0XHRcdFx0ZGF0YTogdHJhbnNmb3JtUmVzdWx0LmRhdGFcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGVsc2UgaWYgKHRyYW5zZm9ybVJlc3VsdC50eXBlID09PSBcImZ1bmN0aW9uLXJlamVjdGVkXCIpIHtcblx0XHRcdFx0Y29uc3Qgc3RlcEZvclJlc3BvbnNlID0ge1xuXHRcdFx0XHRcdC4uLnN0ZXBSZXN1bHQsXG5cdFx0XHRcdFx0ZXJyb3I6IHRyYW5zZm9ybVJlc3VsdC5lcnJvclxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAoc3RlcFJlc3VsdC5vcCA9PT0gU3RlcE9wQ29kZS5TdGVwRmFpbGVkKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2VyID0gc2VyaWFsaXplRXJyb3IodHJhbnNmb3JtUmVzdWx0LmVycm9yKTtcblx0XHRcdFx0XHRzdGVwRm9yUmVzcG9uc2UuZGF0YSA9IHtcblx0XHRcdFx0XHRcdF9fc2VyaWFsaXplZDogdHJ1ZSxcblx0XHRcdFx0XHRcdG5hbWU6IHNlci5uYW1lLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogc2VyLm1lc3NhZ2UsXG5cdFx0XHRcdFx0XHRzdGFjazogXCJcIlxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXAtcmFuXCIsXG5cdFx0XHRcdFx0Y3R4OiB0cmFuc2Zvcm1SZXN1bHQuY3R4LFxuXHRcdFx0XHRcdG9wczogdHJhbnNmb3JtUmVzdWx0Lm9wcyxcblx0XHRcdFx0XHRyZXRyaWFibGU6IHRyYW5zZm9ybVJlc3VsdC5yZXRyaWFibGUsXG5cdFx0XHRcdFx0c3RlcDogc3RlcEZvclJlc3BvbnNlXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJhbnNmb3JtUmVzdWx0O1xuXHRcdH07XG5cdFx0Y29uc3QgbWF5YmVSZXR1cm5OZXdTdGVwcyA9IGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IG5ld1N0ZXBzID0gYXdhaXQgdGhpcy5maWx0ZXJOZXdTdGVwcyhBcnJheS5mcm9tKHRoaXMuc3RhdGUuc3RlcHMudmFsdWVzKCkpKTtcblx0XHRcdGlmIChuZXdTdGVwcykgcmV0dXJuIHtcblx0XHRcdFx0dHlwZTogXCJzdGVwcy1mb3VuZFwiLFxuXHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdHN0ZXBzOiBuZXdTdGVwc1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcdGNvbnN0IHN5bmNIYW5kbGVycyA9IHtcblx0XHRcdFwiXCI6IGNvbW1vbkNoZWNrcG9pbnRIYW5kbGVyLFxuXHRcdFx0XCJmdW5jdGlvbi1yZXNvbHZlZFwiOiBhc3luYyAoY2hlY2twb2ludCwgaSkgPT4ge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmNoZWNrcG9pbnQoW3tcblx0XHRcdFx0XHRvcDogU3RlcE9wQ29kZS5SdW5Db21wbGV0ZSxcblx0XHRcdFx0XHRpZDogX2ludGVybmFscy5oYXNoSWQoXCJjb21wbGV0ZVwiKSxcblx0XHRcdFx0XHRkYXRhOiBhd2FpdCB0aGlzLm9wdGlvbnMuY3JlYXRlUmVzcG9uc2UoY2hlY2twb2ludC5kYXRhKVxuXHRcdFx0XHR9XSk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZXNvbHZlZFwiLFxuXHRcdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0XHRvcHM6IHRoaXMub3BzLFxuXHRcdFx0XHRcdGRhdGE6IGNoZWNrcG9pbnQuZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHRcdFwiZnVuY3Rpb24tcmVqZWN0ZWRcIjogKGNoZWNrcG9pbnQpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuaW5GaW5hbEF0dGVtcHQoKSkgcmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlamVjdGVkXCIsXG5cdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdGVycm9yOiBjaGVja3BvaW50LmVycm9yLFxuXHRcdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdFx0cmV0cmlhYmxlOiBmYWxzZVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jaGVja3BvaW50QW5kU3dpdGNoVG9Bc3luYyhbe1xuXHRcdFx0XHRcdGlkOiBfaW50ZXJuYWxzLmhhc2hJZChcImNvbXBsZXRlXCIpLFxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiBcImNvbXBsZXRlXCIsXG5cdFx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcEVycm9yLFxuXHRcdFx0XHRcdGVycm9yOiBjaGVja3BvaW50LmVycm9yXG5cdFx0XHRcdH1dKTtcblx0XHRcdH0sXG5cdFx0XHRcInN0ZXAtbm90LWZvdW5kXCI6ICh7IHN0ZXAgfSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVqZWN0ZWRcIixcblx0XHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdFx0ZXJyb3I6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRXJyb3IoXCJTdGVwIG5vdCBmb3VuZCB3aGVuIGNoZWNrcG9pbnRpbmc7IHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlblwiKSxcblx0XHRcdFx0XHRvcHM6IHRoaXMub3BzLFxuXHRcdFx0XHRcdHJldHJpYWJsZTogZmFsc2Vcblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFx0XHRcInN0ZXBzLWZvdW5kXCI6IGFzeW5jICh7IHN0ZXBzIH0pID0+IHtcblx0XHRcdFx0aWYgKHN0ZXBzLmxlbmd0aCAhPT0gMSB8fCBzdGVwc1swXS5tb2RlICE9PSBTdGVwTW9kZS5TeW5jKSByZXR1cm4gdGhpcy5jaGVja3BvaW50QW5kU3dpdGNoVG9Bc3luYyhzdGVwcy5tYXAoKHN0ZXApID0+ICh7XG5cdFx0XHRcdFx0Li4uc3RlcCxcblx0XHRcdFx0XHRpZDogc3RlcC5oYXNoZWRJZFxuXHRcdFx0XHR9KSkpO1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTdGVwKHN0ZXBzWzBdKTtcblx0XHRcdFx0aWYgKHJlc3VsdC5lcnJvcikgcmV0dXJuIHRoaXMuY2hlY2twb2ludEFuZFN3aXRjaFRvQXN5bmMoW3Jlc3VsdF0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmNoZWNrcG9pbnQoW3RoaXMucmVzdW1lU3RlcFdpdGhSZXN1bHQocmVzdWx0KV0pO1xuXHRcdFx0fSxcblx0XHRcdFwiY2hlY2twb2ludGluZy1ydW50aW1lLXJlYWNoZWRcIjogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jaGVja3BvaW50QW5kU3dpdGNoVG9Bc3luYyhbe1xuXHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLkRpc2NvdmVyeVJlcXVlc3QsXG5cdFx0XHRcdFx0aWQ6IF9pbnRlcm5hbHMuaGFzaElkKFwiZGlzY292ZXJ5LXJlcXVlc3RcIilcblx0XHRcdFx0fV0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgYXN5bmNIYW5kbGVycyA9IHtcblx0XHRcdFwiXCI6IGNvbW1vbkNoZWNrcG9pbnRIYW5kbGVyLFxuXHRcdFx0XCJmdW5jdGlvbi1yZXNvbHZlZFwiOiBhc3luYyAoeyBkYXRhIH0pID0+IHtcblx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5jcmVhdGVSZXNwb25zZSkgZGF0YSA9IGF3YWl0IHRoaXMub3B0aW9ucy5jcmVhdGVSZXNwb25zZShkYXRhKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZGF0YSB9KTtcblx0XHRcdH0sXG5cdFx0XHRcImZ1bmN0aW9uLXJlamVjdGVkXCI6IGFzeW5jIChjaGVja3BvaW50KSA9PiB7XG5cdFx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnRyYW5zZm9ybU91dHB1dCh7IGVycm9yOiBjaGVja3BvaW50LmVycm9yIH0pO1xuXHRcdFx0fSxcblx0XHRcdFwic3RlcHMtZm91bmRcIjogYXN5bmMgKHsgc3RlcHMgfSkgPT4ge1xuXHRcdFx0XHRjb25zdCBzdGVwUmVzdWx0ID0gYXdhaXQgdGhpcy50cnlFeGVjdXRlU3RlcChzdGVwcyk7XG5cdFx0XHRcdGlmIChzdGVwUmVzdWx0KSByZXR1cm4gc3RlcFJhbkhhbmRsZXIoc3RlcFJlc3VsdCk7XG5cdFx0XHRcdHJldHVybiBtYXliZVJldHVybk5ld1N0ZXBzKCk7XG5cdFx0XHR9LFxuXHRcdFx0XCJzdGVwLW5vdC1mb3VuZFwiOiAoeyBzdGVwIH0pID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXAtbm90LWZvdW5kXCIsXG5cdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdFx0c3RlcFxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHRcdFwiY2hlY2twb2ludGluZy1ydW50aW1lLXJlYWNoZWRcIjogKCkgPT4ge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDaGVja3BvaW50aW5nIG1heGltdW0gcnVudGltZSByZWFjaGVkLCBidXQgdGhpcyBpcyBub3QgaW4gYSBjaGVja3BvaW50aW5nIHN0ZXAgbW9kZS4gVGhpcyBpcyBhIGJ1ZyBpbiB0aGUgSW5uZ2VzdCBTREsuXCIpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgYXN5bmNDaGVja3BvaW50aW5nSGFuZGxlcnMgPSB7XG5cdFx0XHRcIlwiOiBjb21tb25DaGVja3BvaW50SGFuZGxlcixcblx0XHRcdFwiZnVuY3Rpb24tcmVzb2x2ZWRcIjogYXN5bmMgKGNoZWNrcG9pbnQsIGkpID0+IHtcblx0XHRcdFx0Y29uc3Qgb3V0cHV0ID0gYXdhaXQgYXN5bmNIYW5kbGVyc1tcImZ1bmN0aW9uLXJlc29sdmVkXCJdKGNoZWNrcG9pbnQsIGkpO1xuXHRcdFx0XHRpZiAob3V0cHV0Py50eXBlID09PSBcImZ1bmN0aW9uLXJlc29sdmVkXCIpIHJldHVybiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdGVwcy1mb3VuZFwiLFxuXHRcdFx0XHRcdGN0eDogb3V0cHV0LmN0eCxcblx0XHRcdFx0XHRvcHM6IG91dHB1dC5vcHMsXG5cdFx0XHRcdFx0c3RlcHM6IFt7XG5cdFx0XHRcdFx0XHRvcDogU3RlcE9wQ29kZS5SdW5Db21wbGV0ZSxcblx0XHRcdFx0XHRcdGlkOiBfaW50ZXJuYWxzLmhhc2hJZChcImNvbXBsZXRlXCIpLFxuXHRcdFx0XHRcdFx0ZGF0YTogb3V0cHV0LmRhdGFcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XHRcdFwiZnVuY3Rpb24tcmVqZWN0ZWRcIjogYXN5bmNIYW5kbGVyc1tcImZ1bmN0aW9uLXJlamVjdGVkXCJdLFxuXHRcdFx0XCJzdGVwLW5vdC1mb3VuZFwiOiBhc3luY0hhbmRsZXJzW1wic3RlcC1ub3QtZm91bmRcIl0sXG5cdFx0XHRcInN0ZXBzLWZvdW5kXCI6IGFzeW5jICh7IHN0ZXBzIH0pID0+IHtcblx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwKSB7XG5cdFx0XHRcdFx0dGhpcy5kZWJ1ZyhcImFzeW5jIGNoZWNrcG9pbnRpbmcgbG9va2luZyBmb3Igc3RlcCB0byBydW4sIHNvIGF0dGVtcHRpbmcgdG8gZmluZCBpdFwiKTtcblx0XHRcdFx0XHRjb25zdCBzdGVwID0gc3RlcHMuZmluZCgocykgPT4gcy5oYXNoZWRJZCA9PT0gdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAgJiYgcy5mbik7XG5cdFx0XHRcdFx0aWYgKHN0ZXApIHtcblx0XHRcdFx0XHRcdGNvbnN0IHN0ZXBSZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTdGVwKHN0ZXApO1xuXHRcdFx0XHRcdFx0aWYgKHN0ZXBSZXN1bHQpIHJldHVybiBzdGVwUmFuSGFuZGxlcihzdGVwUmVzdWx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgeyBzdGVwc1RvUmVzdW1lLCBuZXdTdGVwcyB9ID0gc3RlcHMucmVkdWNlKChhY2MsIHN0ZXApID0+IHtcblx0XHRcdFx0XHRpZiAoIXN0ZXAuaGFzU3RlcFN0YXRlKSBhY2MubmV3U3RlcHMucHVzaChzdGVwKTtcblx0XHRcdFx0XHRlbHNlIGlmICghc3RlcC5mdWxmaWxsZWQpIGFjYy5zdGVwc1RvUmVzdW1lLnB1c2goc3RlcCk7XG5cdFx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdHN0ZXBzVG9SZXN1bWU6IFtdLFxuXHRcdFx0XHRcdG5ld1N0ZXBzOiBbXVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy5kZWJ1ZyhcInNwbGl0IGZvdW5kIHN0ZXBzIGluIHRvOlwiLCB7XG5cdFx0XHRcdFx0c3RlcHNUb1Jlc3VtZTogc3RlcHNUb1Jlc3VtZS5sZW5ndGgsXG5cdFx0XHRcdFx0bmV3U3RlcHM6IG5ld1N0ZXBzLmxlbmd0aFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCF0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCAmJiBuZXdTdGVwcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRjb25zdCBzdGVwUmVzdWx0ID0gYXdhaXQgdGhpcy50cnlFeGVjdXRlU3RlcChuZXdTdGVwcyk7XG5cdFx0XHRcdFx0aWYgKHN0ZXBSZXN1bHQpIHtcblx0XHRcdFx0XHRcdHRoaXMuZGVidWcoYGV4ZWN1dGVkIHN0ZXAgXCIke3N0ZXBSZXN1bHQuaWR9XCIgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdFx0XHRpZiAoc3RlcFJlc3VsdC5lcnJvcikgcmV0dXJuIHN0ZXBSYW5IYW5kbGVyKHN0ZXBSZXN1bHQpO1xuXHRcdFx0XHRcdFx0dGhpcy5kZWJ1ZyhcImNoZWNrcG9pbnRpbmcgYW5kIHJlc3VtaW5nIGV4ZWN1dGlvbiBhZnRlciBzdGVwIHJ1blwiKTtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY2hlY2twb2ludChbdGhpcy5yZXN1bWVTdGVwV2l0aFJlc3VsdChzdGVwUmVzdWx0KV0pO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5kZWJ1ZyhcImVycm9yIGNoZWNrcG9pbnRpbmcgYWZ0ZXIgc3RlcCBydW4sIHNvIGZhbGxpbmcgYmFjayB0byBhc3luY1wiLCBlcnIpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gc3RlcFJhbkhhbmRsZXIoc3RlcFJlc3VsdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBtYXliZVJldHVybk5ld1N0ZXBzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHN0ZXBzVG9SZXN1bWUubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dGhpcy5kZWJ1ZyhgcmVzdW1pbmcgJHtzdGVwc1RvUmVzdW1lLmxlbmd0aH0gc3RlcHNgKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHN0IG9mIHN0ZXBzVG9SZXN1bWUpIHRoaXMucmVzdW1lU3RlcFdpdGhSZXN1bHQoe1xuXHRcdFx0XHRcdFx0Li4uc3QsXG5cdFx0XHRcdFx0XHRpZDogc3QuaGFzaGVkSWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdFwiY2hlY2twb2ludGluZy1ydW50aW1lLXJlYWNoZWRcIjogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RlcHMtZm91bmRcIixcblx0XHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0XHRzdGVwczogW3tcblx0XHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLkRpc2NvdmVyeVJlcXVlc3QsXG5cdFx0XHRcdFx0XHRpZDogX2ludGVybmFscy5oYXNoSWQoXCJkaXNjb3ZlcnktcmVxdWVzdFwiKVxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0W1N0ZXBNb2RlLkFzeW5jXTogYXN5bmNIYW5kbGVycyxcblx0XHRcdFtTdGVwTW9kZS5TeW5jXTogc3luY0hhbmRsZXJzLFxuXHRcdFx0W1N0ZXBNb2RlLkFzeW5jQ2hlY2twb2ludGluZ106IGFzeW5jQ2hlY2twb2ludGluZ0hhbmRsZXJzXG5cdFx0fTtcblx0fVxuXHRnZXRDaGVja3BvaW50SGFuZGxlcih0eXBlKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2hlY2twb2ludEhhbmRsZXJzW3RoaXMub3B0aW9ucy5zdGVwTW9kZV1bdHlwZV07XG5cdH1cblx0YXN5bmMgdHJ5RXhlY3V0ZVN0ZXAoc3RlcHMpIHtcblx0XHRjb25zdCBoYXNoZWRTdGVwSWRUb1J1biA9IHRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwIHx8IHRoaXMuZ2V0RWFybHlFeGVjUnVuU3RlcChzdGVwcyk7XG5cdFx0aWYgKCFoYXNoZWRTdGVwSWRUb1J1bikgcmV0dXJuO1xuXHRcdGNvbnN0IHN0ZXAgPSBzdGVwcy5maW5kKChzdGVwJDEpID0+IHN0ZXAkMS5oYXNoZWRJZCA9PT0gaGFzaGVkU3RlcElkVG9SdW4gJiYgc3RlcCQxLmZuKTtcblx0XHRpZiAoc3RlcCkgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZVN0ZXAoc3RlcCk7XG5cdFx0dGhpcy50aW1lb3V0Py5yZXNldCgpO1xuXHR9XG5cdC8qKlxuXHQqIEdpdmVuIGEgbGlzdCBvZiBvdXRnb2luZyBvcHMsIGRlY2lkZSBpZiB3ZSBjYW4gZXhlY3V0ZSBhbiBvcCBlYXJseSBhbmRcblx0KiByZXR1cm4gdGhlIElEIG9mIHRoZSBzdGVwIHRvIGV4ZWN1dGUgaWYgd2UgY2FuLlxuXHQqL1xuXHRnZXRFYXJseUV4ZWNSdW5TdGVwKHN0ZXBzKSB7XG5cdFx0LyoqXG5cdFx0KiBXZSBtYXkgaGF2ZSBiZWVuIGRpc2FibGVkIGR1ZSB0byBwYXJhbGxlbGlzbSwgaW4gd2hpY2ggY2FzZSB3ZSBjYW4ndFxuXHRcdCogaW1tZWRpYXRlbHkgZXhlY3V0ZSB1bmxlc3MgZXhwbGljaXRseSByZXF1ZXN0ZWQuXG5cdFx0Ki9cblx0XHRpZiAodGhpcy5vcHRpb25zLmRpc2FibGVJbW1lZGlhdGVFeGVjdXRpb24pIHJldHVybjtcblx0XHRjb25zdCB1bmZ1bGZpbGxlZFN0ZXBzID0gc3RlcHMuZmlsdGVyKChzdGVwKSA9PiAhc3RlcC5mdWxmaWxsZWQpO1xuXHRcdGlmICh1bmZ1bGZpbGxlZFN0ZXBzLmxlbmd0aCAhPT0gMSkgcmV0dXJuO1xuXHRcdGNvbnN0IG9wID0gdW5mdWxmaWxsZWRTdGVwc1swXTtcblx0XHRpZiAob3AgJiYgb3Aub3AgPT09IFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQpIHJldHVybiBvcC5oYXNoZWRJZDtcblx0fVxuXHRhc3luYyBmaWx0ZXJOZXdTdGVwcyhmb3VuZFN0ZXBzKSB7XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwKSByZXR1cm47XG5cdFx0Y29uc3QgbmV3U3RlcHMgPSBmb3VuZFN0ZXBzLnJlZHVjZSgoYWNjLCBzdGVwKSA9PiB7XG5cdFx0XHRpZiAoIXN0ZXAuaGFzU3RlcFN0YXRlKSBhY2MucHVzaChzdGVwKTtcblx0XHRcdHJldHVybiBhY2M7XG5cdFx0fSwgW10pO1xuXHRcdGlmICghbmV3U3RlcHMubGVuZ3RoKSByZXR1cm47XG5cdFx0LyoqXG5cdFx0KiBXZSdyZSBmaW5pc2hpbmcgdXA7IGxldCdzIHRyaWdnZXIgdGhlIGxhc3Qgb2YgdGhlIGhvb2tzLlxuXHRcdCovXG5cdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0Y29uc3Qgc3RlcExpc3QgPSBuZXdTdGVwcy5tYXAoKHN0ZXApID0+ICh7XG5cdFx0XHRkaXNwbGF5TmFtZTogc3RlcC5kaXNwbGF5TmFtZSxcblx0XHRcdG9wOiBzdGVwLm9wLFxuXHRcdFx0aWQ6IHN0ZXAuaGFzaGVkSWQsXG5cdFx0XHRuYW1lOiBzdGVwLm5hbWUsXG5cdFx0XHRvcHRzOiBzdGVwLm9wdHMsXG5cdFx0XHR1c2VybGFuZDogc3RlcC51c2VybGFuZFxuXHRcdH0pKTtcblx0XHQvKipcblx0XHQqIFdlIGFsc28gcnVuIGBvblNlbmRFdmVudGAgbWlkZGxld2FyZSBob29rcyBhZ2FpbnN0IGBzdGVwLmludm9rZSgpYCBzdGVwc1xuXHRcdCogdG8gZW5zdXJlIHRoYXQgdGhlaXIgYGRhdGFgIGlzIHRyYW5zZm9ybWVkIGNvcnJlY3RseS5cblx0XHQqL1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnRyYW5zZm9ybU5ld1N0ZXBzKHN0ZXBMaXN0KTtcblx0fVxuXHQvKipcblx0KiBVc2luZyBtaWRkbGV3YXJlLCB0cmFuc2Zvcm0gYW55IG5ld2x5LWZvdW5kIHN0ZXBzIGJlZm9yZSByZXR1cm5pbmcgdGhlbSB0b1xuXHQqIGFuIElubmdlc3QgU2VydmVyLlxuXHQqL1xuXHRhc3luYyB0cmFuc2Zvcm1OZXdTdGVwcyhzdGVwcykge1xuXHRcdHJldHVybiBQcm9taXNlLmFsbChzdGVwcy5tYXAoYXN5bmMgKHN0ZXApID0+IHtcblx0XHRcdGlmIChzdGVwLm9wICE9PSBTdGVwT3BDb2RlLkludm9rZUZ1bmN0aW9uKSByZXR1cm4gc3RlcDtcblx0XHRcdC8qKlxuXHRcdFx0KiBGb3IgZWFjaCBldmVudCBiZWluZyBzZW50LCBjcmVhdGUgYSBuZXcgYG9uU2VuZEV2ZW50YCBob29rIHN0YWNrIHRvXG5cdFx0XHQqIHByb2Nlc3MgaXQuIFdlIGRvIHRoaXMgYXMgbWlkZGxld2FyZSBob29rcyBhcmUgaW50ZW5kZWQgdG8gcnVuIG9uY2Vcblx0XHRcdCogZHVyaW5nIGVhY2ggbGlmZWN5Y2xlIChvbkZ1bmN0aW9uUnVuIG9yIG9uU2VuZEV2ZW50KSBhbmQgaGVyZSwgYSBob29rXG5cdFx0XHQqIGlzIHJ1biBmb3IgZXZlcnkgc2luZ2xlIGV2ZW50LlxuXHRcdFx0KlxuXHRcdFx0KiBUaGlzIGlzIGRvbmUgYmVjYXVzZSBhIGRldmVsb3BlciBjYW4gdXNlIHRoaXMgaG9vayB0byBmaWx0ZXIgb3V0XG5cdFx0XHQqIGV2ZW50cyBlbnRpcmVseTsgaWYgd2UgYmF0Y2ggYWxsIG9mIHRoZSBldmVudHMgdG9nZXRoZXIsIHdlIGNhbid0XG5cdFx0XHQqIHRlbGwgd2hpY2ggb25lcyB3ZXJlIGZpbHRlcmVkIG91dCBpZiB3ZSdyZSBwcm9jZXNzaW5nID4xIGludm9jYXRpb25cblx0XHRcdCogaGVyZS5cblx0XHRcdCovXG5cdFx0XHRjb25zdCB0cmFuc2Zvcm1lZFBheWxvYWQgPSBhd2FpdCAoYXdhaXQgZ2V0SG9va1N0YWNrKHRoaXMub3B0aW9ucy5mbltcIm1pZGRsZXdhcmVcIl0sIFwib25TZW5kRXZlbnRcIiwgdm9pZCAwLCB7XG5cdFx0XHRcdHRyYW5zZm9ybUlucHV0OiAocHJldiwgb3V0cHV0KSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdC4uLnByZXYsXG5cdFx0XHRcdFx0XHQuLi5vdXRwdXRcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0cmFuc2Zvcm1PdXRwdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4geyByZXN1bHQ6IHtcblx0XHRcdFx0XHRcdC4uLnByZXYucmVzdWx0LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5yZXN1bHRcblx0XHRcdFx0XHR9IH07XG5cdFx0XHRcdH1cblx0XHRcdH0pKS50cmFuc2Zvcm1JbnB1dD8uKHsgcGF5bG9hZHM6IFt7XG5cdFx0XHRcdC4uLnN0ZXAub3B0cz8ucGF5bG9hZCA/PyB7fSxcblx0XHRcdFx0bmFtZTogaW50ZXJuYWxFdmVudHMuRnVuY3Rpb25JbnZva2VkXG5cdFx0XHR9XSB9KTtcblx0XHRcdGNvbnN0IG5ld1BheWxvYWQgPSBpbnZva2VQYXlsb2FkU2NoZW1hLnBhcnNlKHRyYW5zZm9ybWVkUGF5bG9hZD8ucGF5bG9hZHM/LlswXSA/PyB7fSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5zdGVwLFxuXHRcdFx0XHRvcHRzOiB7XG5cdFx0XHRcdFx0Li4uc3RlcC5vcHRzLFxuXHRcdFx0XHRcdHBheWxvYWQ6IHtcblx0XHRcdFx0XHRcdC4uLnN0ZXAub3B0cz8ucGF5bG9hZCA/PyB7fSxcblx0XHRcdFx0XHRcdC4uLm5ld1BheWxvYWRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSkpO1xuXHR9XG5cdGFzeW5jIGV4ZWN1dGVTdGVwKHsgaWQsIG5hbWUsIG9wdHMsIGZuLCBkaXNwbGF5TmFtZSwgdXNlcmxhbmQsIGhhc2hlZElkIH0pIHtcblx0XHR0aGlzLmRlYnVnKGBwcmVwYXJpbmcgdG8gZXhlY3V0ZSBzdGVwIFwiJHtpZH1cImApO1xuXHRcdHRoaXMudGltZW91dD8uY2xlYXIoKTtcblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdGNvbnN0IG91dGdvaW5nT3AgPSB7XG5cdFx0XHRpZDogaGFzaGVkSWQsXG5cdFx0XHRvcDogU3RlcE9wQ29kZS5TdGVwUnVuLFxuXHRcdFx0bmFtZSxcblx0XHRcdG9wdHMsXG5cdFx0XHRkaXNwbGF5TmFtZSxcblx0XHRcdHVzZXJsYW5kXG5cdFx0fTtcblx0XHR0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXAgPSBvdXRnb2luZ09wO1xuXHRcdGNvbnN0IHN0b3JlID0gYXdhaXQgZ2V0QXN5bmNDdHgoKTtcblx0XHRpZiAoc3RvcmU/LmV4ZWN1dGlvbikgc3RvcmUuZXhlY3V0aW9uLmV4ZWN1dGluZ1N0ZXAgPSB7XG5cdFx0XHRpZCxcblx0XHRcdG5hbWU6IGRpc3BsYXlOYW1lXG5cdFx0fTtcblx0XHR0aGlzLmRlYnVnKGBleGVjdXRpbmcgc3RlcCBcIiR7aWR9XCJgKTtcblx0XHRsZXQgaW50ZXJ2YWw7XG5cdFx0cmV0dXJuIGdvSW50ZXJ2YWxUaW1pbmcoKCkgPT4gcnVuQXNQcm9taXNlKGZuKSkuZmluYWxseShhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLmRlYnVnKGBmaW5pc2hlZCBleGVjdXRpbmcgc3RlcCBcIiR7aWR9XCJgKTtcblx0XHRcdGRlbGV0ZSB0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXA7XG5cdFx0XHRpZiAoc3RvcmU/LmV4ZWN1dGlvbikgZGVsZXRlIHN0b3JlLmV4ZWN1dGlvbi5leGVjdXRpbmdTdGVwO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdH0pLnRoZW4oYXN5bmMgKHsgcmVzdWx0UHJvbWlzZSwgaW50ZXJ2YWw6IF9pbnRlcnZhbCB9KSA9PiB7XG5cdFx0XHRpbnRlcnZhbCA9IF9pbnRlcnZhbDtcblx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5zdGF0ZS5tZXRhZGF0YT8uZ2V0KGlkKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLm91dGdvaW5nT3AsXG5cdFx0XHRcdGRhdGE6IGF3YWl0IHJlc3VsdFByb21pc2UsXG5cdFx0XHRcdC4uLm1ldGFkYXRhICYmIG1ldGFkYXRhLmxlbmd0aCA+IDAgPyB7IG1ldGFkYXRhIH0gOiB7fVxuXHRcdFx0fTtcblx0XHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdGxldCBlcnJvcklzUmV0cmlhYmxlID0gdHJ1ZTtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIE5vblJldHJpYWJsZUVycm9yKSBlcnJvcklzUmV0cmlhYmxlID0gZmFsc2U7XG5cdFx0XHRlbHNlIGlmICh0aGlzLmZuQXJnLm1heEF0dGVtcHRzICYmIHRoaXMuZm5Bcmc/Lm1heEF0dGVtcHRzIC0gMSA9PT0gdGhpcy5mbkFyZy5hdHRlbXB0KSBlcnJvcklzUmV0cmlhYmxlID0gZmFsc2U7XG5cdFx0XHRjb25zdCBtZXRhZGF0YSA9IHRoaXMuc3RhdGUubWV0YWRhdGE/LmdldChpZCk7XG5cdFx0XHRpZiAoZXJyb3JJc1JldHJpYWJsZSkgcmV0dXJuIHtcblx0XHRcdFx0Li4ub3V0Z29pbmdPcCxcblx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcEVycm9yLFxuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0Li4ubWV0YWRhdGEgJiYgbWV0YWRhdGEubGVuZ3RoID4gMCA/IHsgbWV0YWRhdGEgfSA6IHt9XG5cdFx0XHR9O1xuXHRcdFx0ZWxzZSByZXR1cm4ge1xuXHRcdFx0XHQuLi5vdXRnb2luZ09wLFxuXHRcdFx0XHRvcDogU3RlcE9wQ29kZS5TdGVwRmFpbGVkLFxuXHRcdFx0XHRlcnJvcixcblx0XHRcdFx0Li4ubWV0YWRhdGEgJiYgbWV0YWRhdGEubGVuZ3RoID4gMCA/IHsgbWV0YWRhdGEgfSA6IHt9XG5cdFx0XHR9O1xuXHRcdH0pLnRoZW4oKG9wKSA9PiAoe1xuXHRcdFx0Li4ub3AsXG5cdFx0XHR0aW1pbmc6IGludGVydmFsXG5cdFx0fSkpO1xuXHR9XG5cdC8qKlxuXHQqIFN0YXJ0cyBleGVjdXRpb24gb2YgdGhlIHVzZXIncyBmdW5jdGlvbiwgaW5jbHVkaW5nIHRyaWdnZXJpbmcgY2hlY2twb2ludHNcblx0KiBhbmQgbWlkZGxld2FyZSBob29rcyB3aGVyZSBhcHByb3ByaWF0ZS5cblx0Ki9cblx0YXN5bmMgc3RhcnRFeGVjdXRpb24oKSB7XG5cdFx0LyoqXG5cdFx0KiBNdXRhdGUgaW5wdXQgYXMgbmVjY2Vzc2FyeSBiYXNlZCBvbiBtaWRkbGV3YXJlLlxuXHRcdCovXG5cdFx0YXdhaXQgdGhpcy50cmFuc2Zvcm1JbnB1dCgpO1xuXHRcdC8qKlxuXHRcdCogU3RhcnQgdGhlIHRpbWVyIHRvIHRpbWUgb3V0IHRoZSBydW4gaWYgbmVlZGVkLlxuXHRcdCovXG5cdFx0dGhpcy50aW1lb3V0Py5zdGFydCgpO1xuXHRcdHRoaXMuY2hlY2twb2ludGluZ01heFJ1bnRpbWVUaW1lcj8uc3RhcnQoKTtcblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVNZW1vaXphdGlvbj8uKCk7XG5cdFx0LyoqXG5cdFx0KiBJZiB3ZSBoYWQgbm8gc3RhdGUgdG8gYmVnaW4gd2l0aCwgaW1tZWRpYXRlbHkgZW5kIHRoZSBtZW1vaXphdGlvbiBwaGFzZS5cblx0XHQqL1xuXHRcdGlmICh0aGlzLnN0YXRlLmFsbFN0YXRlVXNlZCgpKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0fVxuXHRcdC8qKlxuXHRcdCogVHJpZ2dlciB0aGUgdXNlcidzIGZ1bmN0aW9uLlxuXHRcdCovXG5cdFx0cnVuQXNQcm9taXNlKCgpID0+IHRoaXMudXNlckZuVG9SdW4odGhpcy5mbkFyZykpLmZpbmFsbHkoYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJNZW1vaXphdGlvbj8uKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdH0pLnRoZW4oKGRhdGEpID0+IHtcblx0XHRcdHRoaXMuc3RhdGUuc2V0Q2hlY2twb2ludCh7XG5cdFx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVzb2x2ZWRcIixcblx0XHRcdFx0ZGF0YVxuXHRcdFx0fSk7XG5cdFx0fSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0XHR0aGlzLnN0YXRlLnNldENoZWNrcG9pbnQoe1xuXHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlamVjdGVkXCIsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXHQvKipcblx0KiBVc2luZyBtaWRkbGV3YXJlLCB0cmFuc2Zvcm0gaW5wdXQgYmVmb3JlIHJ1bm5pbmcuXG5cdCovXG5cdGFzeW5jIHRyYW5zZm9ybUlucHV0KCkge1xuXHRcdGNvbnN0IGlucHV0TXV0YXRpb25zID0gYXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8udHJhbnNmb3JtSW5wdXQ/Lih7XG5cdFx0XHRjdHg6IHsgLi4udGhpcy5mbkFyZyB9LFxuXHRcdFx0c3RlcHM6IE9iamVjdC52YWx1ZXModGhpcy5zdGF0ZS5zdGVwU3RhdGUpLFxuXHRcdFx0Zm46IHRoaXMub3B0aW9ucy5mbixcblx0XHRcdHJlcUFyZ3M6IHRoaXMub3B0aW9ucy5yZXFBcmdzXG5cdFx0fSk7XG5cdFx0aWYgKGlucHV0TXV0YXRpb25zPy5jdHgpIHRoaXMuZm5BcmcgPSBpbnB1dE11dGF0aW9ucy5jdHg7XG5cdFx0aWYgKGlucHV0TXV0YXRpb25zPy5zdGVwcykgdGhpcy5zdGF0ZS5zdGVwU3RhdGUgPSBPYmplY3QuZnJvbUVudHJpZXMoaW5wdXRNdXRhdGlvbnMuc3RlcHMubWFwKChzdGVwKSA9PiBbc3RlcC5pZCwgc3RlcF0pKTtcblx0fVxuXHQvKipcblx0KiBVc2luZyBtaWRkbGV3YXJlLCB0cmFuc2Zvcm0gb3V0cHV0IGJlZm9yZSByZXR1cm5pbmcuXG5cdCovXG5cdGFzeW5jIHRyYW5zZm9ybU91dHB1dChkYXRhT3JFcnJvcikge1xuXHRcdGNvbnN0IG91dHB1dCA9IHsgLi4uZGF0YU9yRXJyb3IgfTtcblx0XHRjb25zdCBpc1N0ZXBFeGVjdXRpb24gPSBCb29sZWFuKHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcCk7XG5cdFx0Y29uc3QgdHJhbnNmb3JtZWRPdXRwdXQgPSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy50cmFuc2Zvcm1PdXRwdXQ/Lih7XG5cdFx0XHRyZXN1bHQ6IHsgLi4ub3V0cHV0IH0sXG5cdFx0XHRzdGVwOiB0aGlzLnN0YXRlLmV4ZWN1dGluZ1N0ZXBcblx0XHR9KTtcblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSB7XG5cdFx0XHQuLi5vdXRwdXQsXG5cdFx0XHQuLi50cmFuc2Zvcm1lZE91dHB1dD8ucmVzdWx0XG5cdFx0fTtcblx0XHRpZiAoIWlzU3RlcEV4ZWN1dGlvbikgYXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uZmluaXNoZWQ/Lih7IHJlc3VsdDogeyAuLi50eXBlb2YgZXJyb3IgIT09IFwidW5kZWZpbmVkXCIgPyB7IGVycm9yIH0gOiB7IGRhdGEgfSB9IH0pO1xuXHRcdGlmICh0eXBlb2YgZXJyb3IgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdC8qKlxuXHRcdFx0KiBFbnN1cmUgd2UgZ2l2ZSBtaWRkbGV3YXJlIHRoZSBjaGFuY2UgdG8gZGVjaWRlIG9uIHJldHJpYWJsZSBiZWhhdmlvdXJcblx0XHRcdCogYnkgbG9va2luZyBhdCB0aGUgZXJyb3IgcmV0dXJuZWQgZnJvbSBvdXRwdXQgdHJhbnNmb3JtYXRpb24uXG5cdFx0XHQqL1xuXHRcdFx0bGV0IHJldHJpYWJsZSA9ICEoZXJyb3IgaW5zdGFuY2VvZiBOb25SZXRyaWFibGVFcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIFN0ZXBFcnJvciAmJiBlcnJvciA9PT0gdGhpcy5zdGF0ZS5yZWNlbnRseVJlamVjdGVkU3RlcEVycm9yKTtcblx0XHRcdGlmIChyZXRyaWFibGUgJiYgZXJyb3IgaW5zdGFuY2VvZiBSZXRyeUFmdGVyRXJyb3IpIHJldHJpYWJsZSA9IGVycm9yLnJldHJ5QWZ0ZXI7XG5cdFx0XHRjb25zdCBzZXJpYWxpemVkRXJyb3IgPSBtaW5pZnlQcmV0dHlFcnJvcihzZXJpYWxpemVFcnJvcihlcnJvcikpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZWplY3RlZFwiLFxuXHRcdFx0XHRjdHg6IHRoaXMuZm5BcmcsXG5cdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdGVycm9yOiBzZXJpYWxpemVkRXJyb3IsXG5cdFx0XHRcdHJldHJpYWJsZVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVzb2x2ZWRcIixcblx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRkYXRhOiB1bmRlZmluZWRUb051bGwoZGF0YSlcblx0XHR9O1xuXHR9XG5cdGNyZWF0ZUV4ZWN1dGlvblN0YXRlKCkge1xuXHRcdGNvbnN0IGQgPSBjcmVhdGVEZWZlcnJlZFByb21pc2VXaXRoU3RhY2soKTtcblx0XHRsZXQgY2hlY2twb2ludFJlc29sdmUgPSBkLmRlZmVycmVkLnJlc29sdmU7XG5cdFx0Y29uc3QgY2hlY2twb2ludFJlc3VsdHMgPSBkLnJlc3VsdHM7XG5cdFx0Y29uc3QgbG9vcCA9IChhc3luYyBmdW5jdGlvbiogKGNsZWFuVXApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gKGF3YWl0IGNoZWNrcG9pbnRSZXN1bHRzLm5leHQoKSkudmFsdWU7XG5cdFx0XHRcdFx0aWYgKHJlcykgeWllbGQgcmVzO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRjbGVhblVwPy4oKTtcblx0XHRcdH1cblx0XHR9KSgoKSA9PiB7XG5cdFx0XHR0aGlzLnRpbWVvdXQ/LmNsZWFyKCk7XG5cdFx0XHR0aGlzLmNoZWNrcG9pbnRpbmdNYXhSdW50aW1lVGltZXI/LmNsZWFyKCk7XG5cdFx0XHRjaGVja3BvaW50UmVzdWx0cy5yZXR1cm4oKTtcblx0XHR9KTtcblx0XHRjb25zdCBzdGVwc1RvRnVsZmlsbCA9IE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5zdGVwU3RhdGUpLmxlbmd0aDtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RlcFN0YXRlOiB0aGlzLm9wdGlvbnMuc3RlcFN0YXRlLFxuXHRcdFx0c3RlcHNUb0Z1bGZpbGwsXG5cdFx0XHRzdGVwczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcblx0XHRcdGxvb3AsXG5cdFx0XHRoYXNTdGVwczogQm9vbGVhbihzdGVwc1RvRnVsZmlsbCksXG5cdFx0XHRzdGVwQ29tcGxldGlvbk9yZGVyOiBbLi4udGhpcy5vcHRpb25zLnN0ZXBDb21wbGV0aW9uT3JkZXJdLFxuXHRcdFx0cmVtYWluaW5nU3RlcHNUb0JlU2VlbjogbmV3IFNldCh0aGlzLm9wdGlvbnMuc3RlcENvbXBsZXRpb25PcmRlciksXG5cdFx0XHRzZXRDaGVja3BvaW50OiAoY2hlY2twb2ludCkgPT4ge1xuXHRcdFx0XHQoe3Jlc29sdmU6IGNoZWNrcG9pbnRSZXNvbHZlfSA9IGNoZWNrcG9pbnRSZXNvbHZlKGNoZWNrcG9pbnQpKTtcblx0XHRcdH0sXG5cdFx0XHRhbGxTdGF0ZVVzZWQ6ICgpID0+IHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuc3RhdGUucmVtYWluaW5nU3RlcHNUb0JlU2Vlbi5zaXplID09PSAwO1xuXHRcdFx0fSxcblx0XHRcdG1ldGFkYXRhOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpXG5cdFx0fTtcblx0fVxuXHRnZXQgb3BzKCkge1xuXHRcdHJldHVybiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5zdGF0ZS5zdGVwcyk7XG5cdH1cblx0Y3JlYXRlRm5BcmcoKSB7XG5cdFx0Y29uc3Qgc3RlcCA9IHRoaXMuY3JlYXRlU3RlcFRvb2xzKCk7XG5cdFx0bGV0IGZuQXJnID0ge1xuXHRcdFx0Li4udGhpcy5vcHRpb25zLmRhdGEsXG5cdFx0XHRzdGVwXG5cdFx0fTtcblx0XHQvKipcblx0XHQqIEhhbmRsZSB1c2Ugb2YgdGhlIGBvbkZhaWx1cmVgIG9wdGlvbiBieSBkZXNlcmlhbGl6aW5nIHRoZSBlcnJvci5cblx0XHQqL1xuXHRcdGlmICh0aGlzLm9wdGlvbnMuaXNGYWlsdXJlSGFuZGxlcikge1xuXHRcdFx0Y29uc3QgZXZlbnREYXRhID0gei5vYmplY3QoeyBlcnJvcjoganNvbkVycm9yU2NoZW1hIH0pLnBhcnNlKGZuQXJnLmV2ZW50Py5kYXRhKTtcblx0XHRcdGZuQXJnID0ge1xuXHRcdFx0XHQuLi5mbkFyZyxcblx0XHRcdFx0ZXJyb3I6IGRlc2VyaWFsaXplRXJyb3IoZXZlbnREYXRhLmVycm9yKVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy50cmFuc2Zvcm1DdHg/LihmbkFyZykgPz8gZm5Bcmc7XG5cdH1cblx0Y3JlYXRlU3RlcFRvb2xzKCkge1xuXHRcdC8qKlxuXHRcdCogQSBsaXN0IG9mIHN0ZXBzIHRoYXQgaGF2ZSBiZWVuIGZvdW5kIGFuZCBhcmUgYmVpbmcgcm9sbGVkIHVwIGJlZm9yZSBiZWluZ1xuXHRcdCogcmVwb3J0ZWQgdG8gdGhlIGNvcmUgbG9vcC5cblx0XHQqL1xuXHRcdGNvbnN0IGZvdW5kU3RlcHNUb1JlcG9ydCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0LyoqXG5cdFx0KiBBIG1hcCBvZiB0aGUgc3Vic2V0IG9mIGZvdW5kIHN0ZXBzIHRvIHJlcG9ydCB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG5cdFx0KiBoYW5kbGVkLiBVc2VkIGZvciBmYXN0IGFjY2VzcyB0byBzdGVwcyB0aGF0IG5lZWQgdG8gYmUgaGFuZGxlZCBpbiBvcmRlci5cblx0XHQqL1xuXHRcdGNvbnN0IHVuaGFuZGxlZEZvdW5kU3RlcHNUb1JlcG9ydCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0LyoqXG5cdFx0KiBBIG1hcCBvZiB0aGUgbGF0ZXN0IHNlcXVlbnRpYWwgc3RlcCBpbmRleGVzIGZvdW5kIGZvciBlYWNoIHN0ZXAgSUQuIFVzZWRcblx0XHQqIHRvIGVuc3VyZSB0aGF0IHdlIGRvbid0IGluZGV4IHN0ZXBzIGluIHBhcmFsbGVsLlxuXHRcdCpcblx0XHQqIE5vdGUgdGhhdCB0aGVzZSBtdXN0IGJlIHNlcXVlbnRpYWw7IGlmIHdlJ3ZlIHNlZW4gb3IgYXNzaWduZWQgYGE6MWAsXG5cdFx0KiBgYToyYCBhbmQgYGE6NGAsIHRoZSBsYXRlc3Qgc2VxdWVudGlhbCBzdGVwIGluZGV4IGlzIGAyYC5cblx0XHQqXG5cdFx0Ki9cblx0XHRjb25zdCBleHBlY3RlZE5leHRTdGVwSW5kZXhlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0LyoqXG5cdFx0KiBBbiBvcmRlcmVkIGxpc3Qgb2Ygc3RlcCBJRHMgdGhhdCBoYXZlIHlldCB0byBiZSBoYW5kbGVkIGluIHRoaXNcblx0XHQqIGV4ZWN1dGlvbi4gVXNlZCB0byBlbnN1cmUgdGhhdCB3ZSBoYW5kbGUgc3RlcHMgaW4gdGhlIG9yZGVyIHRoZXkgd2VyZVxuXHRcdCogZm91bmQgYW5kIGJhc2VkIG9uIHRoZSBgc3RlcENvbXBsZXRpb25PcmRlcmAgaW4gdGhpcyBleGVjdXRpb24ncyBzdGF0ZS5cblx0XHQqL1xuXHRcdGNvbnN0IHJlbWFpbmluZ1N0ZXBDb21wbGV0aW9uT3JkZXIgPSB0aGlzLnN0YXRlLnN0ZXBDb21wbGV0aW9uT3JkZXIuc2xpY2UoKTtcblx0XHQvKipcblx0XHQqIEEgcHJvbWlzZSB0aGF0J3MgdXNlZCB0byBlbnN1cmUgdGhhdCBzdGVwIHJlcG9ydGluZyBjYW5ub3QgYmUgcnVuIG1vcmUgdGhhblxuXHRcdCogb25jZSBpbiBhIGdpdmVuIGFzeW5jaHJvbm91cyB0aW1lIHNwYW4uXG5cdFx0Ki9cblx0XHRsZXQgZm91bmRTdGVwc1JlcG9ydFByb21pc2U7XG5cdFx0LyoqXG5cdFx0KiBBIHByb21pc2UgdGhhdCdzIHVzZWQgdG8gcmVwcmVzZW50IG1pZGRsZXdhcmUgaG9va3MgcnVubmluZyBiZWZvcmVcblx0XHQqIGV4ZWN1dGlvbi5cblx0XHQqL1xuXHRcdGxldCBiZWZvcmVFeGVjSG9va3NQcm9taXNlO1xuXHRcdC8qKlxuXHRcdCogQSBmbGFnIHVzZWQgdG8gZW5zdXJlIHRoYXQgd2Ugb25seSB3YXJuIGFib3V0IHBhcmFsbGVsIGluZGV4aW5nIG9uY2UgcGVyXG5cdFx0KiBleGVjdXRpb24gdG8gYXZvaWQgc3BhbW1pbmcgdGhlIGNvbnNvbGUuXG5cdFx0Ki9cblx0XHRsZXQgd2Fybk9mUGFyYWxsZWxJbmRleGluZyA9IGZhbHNlO1xuXHRcdC8qKlxuXHRcdCogQ291bnRzIHRoZSBudW1iZXIgb2YgdGltZXMgd2UndmUgZXh0ZW5kZWQgdGhpcyB0aWNrLlxuXHRcdCovXG5cdFx0bGV0IHRpY2tFeHRlbnNpb25Db3VudCA9IDA7XG5cdFx0LyoqXG5cdFx0KiBHaXZlbiBhIGNvbGxpZGluZyBzdGVwIElELCBtYXliZSB3YXJuIHRoZSB1c2VyIGFib3V0IHBhcmFsbGVsIGluZGV4aW5nLlxuXHRcdCovXG5cdFx0Y29uc3QgbWF5YmVXYXJuT2ZQYXJhbGxlbEluZGV4aW5nID0gKHVzZXJsYW5kQ29sbGlzaW9uSWQpID0+IHtcblx0XHRcdGlmICh3YXJuT2ZQYXJhbGxlbEluZGV4aW5nKSByZXR1cm47XG5cdFx0XHRjb25zdCBoYXNoZWRDb2xsaXNpb25JZCA9IF9pbnRlcm5hbHMuaGFzaElkKHVzZXJsYW5kQ29sbGlzaW9uSWQpO1xuXHRcdFx0aWYgKHRoaXMuc3RhdGUuc3RlcHMuaGFzKGhhc2hlZENvbGxpc2lvbklkKSkge1xuXHRcdFx0XHRpZiAoIWZvdW5kU3RlcHNUb1JlcG9ydC5oYXMoaGFzaGVkQ29sbGlzaW9uSWQpKSB7XG5cdFx0XHRcdFx0d2Fybk9mUGFyYWxsZWxJbmRleGluZyA9IHRydWU7XG5cdFx0XHRcdFx0dGhpcy5vcHRpb25zLmNsaWVudFtcIndhcm5NZXRhZGF0YVwiXSh7IHJ1bl9pZDogdGhpcy5mbkFyZy5ydW5JZCB9LCBFcnJDb2RlLkFVVE9NQVRJQ19QQVJBTExFTF9JTkRFWElORywgcHJldHR5RXJyb3Ioe1xuXHRcdFx0XHRcdFx0dHlwZTogXCJ3YXJuXCIsXG5cdFx0XHRcdFx0XHR3aGF0SGFwcGVuZWQ6IFwiV2UgZGV0ZWN0ZWQgdGhhdCB5b3UgaGF2ZSBtdWx0aXBsZSBzdGVwcyB3aXRoIHRoZSBzYW1lIElELlwiLFxuXHRcdFx0XHRcdFx0Y29kZTogRXJyQ29kZS5BVVRPTUFUSUNfUEFSQUxMRUxfSU5ERVhJTkcsXG5cdFx0XHRcdFx0XHR3aHk6IGBUaGlzIGNhbiBoYXBwZW4gaWYgeW91J3JlIHVzaW5nIHRoZSBzYW1lIElEIGZvciBtdWx0aXBsZSBzdGVwcyBhY3Jvc3MgZGlmZmVyZW50IGNoYWlucyBvZiBwYXJhbGxlbCB3b3JrLiBXZSBmb3VuZCB0aGUgaXNzdWUgd2l0aCBzdGVwIFwiJHt1c2VybGFuZENvbGxpc2lvbklkfVwiLmAsXG5cdFx0XHRcdFx0XHRyZWFzc3VyYW5jZTogXCJZb3VyIGZ1bmN0aW9uIGlzIHN0aWxsIHJ1bm5pbmcsIHRob3VnaCBpdCBtYXkgZXhoaWJpdCB1bmV4cGVjdGVkIGJlaGF2aW91ci5cIixcblx0XHRcdFx0XHRcdGNvbnNlcXVlbmNlczogXCJVc2luZyB0aGUgc2FtZSBJRHMgYWNyb3NzIHBhcmFsbGVsIGNoYWlucyBvZiB3b3JrIGNhbiBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW91ci5cIixcblx0XHRcdFx0XHRcdHRvRml4Tm93OiBcIldlIHJlY29tbWVuZCB1c2luZyBhIHVuaXF1ZSBJRCBmb3IgZWFjaCBzdGVwLCBlc3BlY2lhbGx5IHRob3NlIGhhcHBlbmluZyBpbiBwYXJhbGxlbC5cIlxuXHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0LyoqXG5cdFx0KiBBIGhlbHBlciB1c2VkIHRvIHJlcG9ydCBzdGVwcyB0byB0aGUgY29yZSBsb29wLiBVc2VkIGFmdGVyIGFkZGluZyBhbiBpdGVtXG5cdFx0KiB0byBgZm91bmRTdGVwc1RvUmVwb3J0YC5cblx0XHQqL1xuXHRcdGNvbnN0IHJlcG9ydE5leHRUaWNrID0gKCkgPT4ge1xuXHRcdFx0aWYgKGZvdW5kU3RlcHNSZXBvcnRQcm9taXNlKSByZXR1cm47XG5cdFx0XHRsZXQgZXh0ZW5zaW9uUHJvbWlzZTtcblx0XHRcdGlmICgrK3RpY2tFeHRlbnNpb25Db3VudCA+PSAxMCkge1xuXHRcdFx0XHR0aWNrRXh0ZW5zaW9uQ291bnQgPSAwO1xuXHRcdFx0XHRleHRlbnNpb25Qcm9taXNlID0gcmVzb2x2ZU5leHRUaWNrKCk7XG5cdFx0XHR9IGVsc2UgZXh0ZW5zaW9uUHJvbWlzZSA9IHJlc29sdmVBZnRlclBlbmRpbmcoKTtcblx0XHRcdGZvdW5kU3RlcHNSZXBvcnRQcm9taXNlID0gZXh0ZW5zaW9uUHJvbWlzZS50aGVuKCgpID0+IGJlZm9yZUV4ZWNIb29rc1Byb21pc2UpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRmb3VuZFN0ZXBzUmVwb3J0UHJvbWlzZSA9IHZvaWQgMDtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCByZW1haW5pbmdTdGVwQ29tcGxldGlvbk9yZGVyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV4dFN0ZXBJZCA9IHJlbWFpbmluZ1N0ZXBDb21wbGV0aW9uT3JkZXJbaV07XG5cdFx0XHRcdFx0aWYgKCFuZXh0U3RlcElkKSBjb250aW51ZTtcblx0XHRcdFx0XHRpZiAodW5oYW5kbGVkRm91bmRTdGVwc1RvUmVwb3J0LmdldChuZXh0U3RlcElkKT8uaGFuZGxlKCkpIHtcblx0XHRcdFx0XHRcdHJlbWFpbmluZ1N0ZXBDb21wbGV0aW9uT3JkZXIuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRcdFx0dW5oYW5kbGVkRm91bmRTdGVwc1RvUmVwb3J0LmRlbGV0ZShuZXh0U3RlcElkKTtcblx0XHRcdFx0XHRcdHJlcG9ydE5leHRUaWNrKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHN0ZXBzID0gWy4uLmZvdW5kU3RlcHNUb1JlcG9ydC52YWx1ZXMoKV07XG5cdFx0XHRcdGZvdW5kU3RlcHNUb1JlcG9ydC5jbGVhcigpO1xuXHRcdFx0XHR1bmhhbmRsZWRGb3VuZFN0ZXBzVG9SZXBvcnQuY2xlYXIoKTtcblx0XHRcdFx0dGhpcy5zdGF0ZS5zZXRDaGVja3BvaW50KHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXBzLWZvdW5kXCIsXG5cdFx0XHRcdFx0c3RlcHNcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCogQSBoZWxwZXIgdXNlZCB0byBwdXNoIGEgc3RlcCB0byB0aGUgbGlzdCBvZiBzdGVwcyB0byByZXBvcnQuXG5cdFx0Ki9cblx0XHRjb25zdCBwdXNoU3RlcFRvUmVwb3J0ID0gKHN0ZXApID0+IHtcblx0XHRcdGZvdW5kU3RlcHNUb1JlcG9ydC5zZXQoc3RlcC5oYXNoZWRJZCwgc3RlcCk7XG5cdFx0XHR1bmhhbmRsZWRGb3VuZFN0ZXBzVG9SZXBvcnQuc2V0KHN0ZXAuaGFzaGVkSWQsIHN0ZXApO1xuXHRcdFx0cmVwb3J0TmV4dFRpY2soKTtcblx0XHR9O1xuXHRcdGNvbnN0IHN0ZXBIYW5kbGVyID0gYXN5bmMgKHsgYXJncywgbWF0Y2hPcCwgb3B0cyB9KSA9PiB7XG5cdFx0XHRhd2FpdCBiZWZvcmVFeGVjSG9va3NQcm9taXNlO1xuXHRcdFx0Y29uc3Qgb3BJZCA9IG1hdGNoT3AoZ2V0U3RlcE9wdGlvbnMoYXJnc1swXSksIC4uLmFyZ3Muc2xpY2UoMSkpO1xuXHRcdFx0aWYgKHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcClcbiAvKipcblx0XHRcdCogSWYgYSBzdGVwIGlzIGZvdW5kIGFmdGVyIGFzeW5jaHJvbm91cyBhY3Rpb25zIGR1cmluZyBhbm90aGVyIHN0ZXAnc1xuXHRcdFx0KiBleGVjdXRpb24sIGV2ZXJ5dGhpbmcgaXMgZmluZS4gVGhlIHByb2JsZW0gaGVyZSBpcyBpZiB3ZSd2ZSBmb3VuZFxuXHRcdFx0KiB0aGF0IGEgc3RlcCBuZXN0ZWQgaW5zaWRlIGFub3RoZXIgYSBzdGVwLCB3aGljaCBpcyBzb21ldGhpbmcgd2UgZG9uJ3Rcblx0XHRcdCogc3VwcG9ydCBhdCB0aGUgdGltZSBvZiB3cml0aW5nLlxuXHRcdFx0KlxuXHRcdFx0KiBJbiB0aGlzIGNhc2UsIHdlIGNvdWxkIHVzZSBzb21ldGhpbmcgbGlrZSBBc3luYyBIb29rcyB0byB1bmRlcnN0YW5kXG5cdFx0XHQqIGhvdyB0aGUgc3RlcCBpcyBiZWluZyB0cmlnZ2VyZWQsIHRob3VnaCB0aGlzIGlzbid0IGF2YWlsYWJsZSBpbiBhbGxcblx0XHRcdCogZW52aXJvbm1lbnRzLlxuXHRcdFx0KlxuXHRcdFx0KiBUaGVyZWZvcmUsIHdlJ2xsIG9ubHkgc2hvdyBhIHdhcm5pbmcgaGVyZSB0byBpbmRpY2F0ZSB0aGF0IHRoaXMgaXNcblx0XHRcdCogcG90ZW50aWFsbHkgYW4gaXNzdWUuXG5cdFx0XHQqL1xuXHRcdFx0dGhpcy5vcHRpb25zLmNsaWVudFtcIndhcm5NZXRhZGF0YVwiXSh7IHJ1bl9pZDogdGhpcy5mbkFyZy5ydW5JZCB9LCBFcnJDb2RlLk5FU1RJTkdfU1RFUFMsIHByZXR0eUVycm9yKHtcblx0XHRcdFx0d2hhdEhhcHBlbmVkOiBgV2UgZGV0ZWN0ZWQgdGhhdCB5b3UgaGF2ZSBuZXN0ZWQgXFxgc3RlcC4qXFxgIHRvb2xpbmcgaW4gXFxgJHtvcElkLmRpc3BsYXlOYW1lID8/IG9wSWQuaWR9XFxgYCxcblx0XHRcdFx0Y29uc2VxdWVuY2VzOiBcIk5lc3RpbmcgYHN0ZXAuKmAgdG9vbGluZyBpcyBub3Qgc3VwcG9ydGVkLlwiLFxuXHRcdFx0XHR0eXBlOiBcIndhcm5cIixcblx0XHRcdFx0cmVhc3N1cmFuY2U6IFwiSXQncyBwb3NzaWJsZSB0byBzZWUgdGhpcyB3YXJuaW5nIGlmIHN0ZXBzIGFyZSBzZXBhcmF0ZWQgYnkgcmVndWxhciBhc3luY2hyb25vdXMgY2FsbHMsIHdoaWNoIGlzIGZpbmUuXCIsXG5cdFx0XHRcdHN0YWNrOiB0cnVlLFxuXHRcdFx0XHR0b0ZpeE5vdzogXCJNYWtlIHN1cmUgeW91J3JlIG5vdCB1c2luZyBgc3RlcC4qYCB0b29saW5nIGluc2lkZSBvZiBvdGhlciBgc3RlcC4qYCB0b29saW5nLiBJZiB5b3UgbmVlZCB0byBjb21wb3NlIHN0ZXBzIHRvZ2V0aGVyLCB5b3UgY2FuIGNyZWF0ZSBhIG5ldyBhc3luYyBmdW5jdGlvbiBhbmQgY2FsbCBpdCBmcm9tIHdpdGhpbiB5b3VyIHN0ZXAgZnVuY3Rpb24sIG9yIHVzZSBwcm9taXNlIGNoYWluaW5nLlwiLFxuXHRcdFx0XHRjb2RlOiBFcnJDb2RlLk5FU1RJTkdfU1RFUFNcblx0XHRcdH0pKTtcblx0XHRcdGlmICh0aGlzLnN0YXRlLnN0ZXBzLmhhcyhfaW50ZXJuYWxzLmhhc2hJZChvcElkLmlkKSkpIHtcblx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxJZCA9IG9wSWQuaWQ7XG5cdFx0XHRcdG1heWJlV2Fybk9mUGFyYWxsZWxJbmRleGluZyhvcmlnaW5hbElkKTtcblx0XHRcdFx0Y29uc3QgZXhwZWN0ZWROZXh0SW5kZXggPSBleHBlY3RlZE5leHRTdGVwSW5kZXhlcy5nZXQob3JpZ2luYWxJZCkgPz8gMTtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IGV4cGVjdGVkTmV4dEluZGV4OzsgaSsrKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3SWQgPSBvcmlnaW5hbElkICsgU1RFUF9JTkRFWElOR19TVUZGSVggKyBpO1xuXHRcdFx0XHRcdGlmICghdGhpcy5zdGF0ZS5zdGVwcy5oYXMoX2ludGVybmFscy5oYXNoSWQobmV3SWQpKSkge1xuXHRcdFx0XHRcdFx0ZXhwZWN0ZWROZXh0U3RlcEluZGV4ZXMuc2V0KG9yaWdpbmFsSWQsIGkgKyAxKTtcblx0XHRcdFx0XHRcdG9wSWQuaWQgPSBuZXdJZDtcblx0XHRcdFx0XHRcdG9wSWQudXNlcmxhbmQuaW5kZXggPSBpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB7IHByb21pc2UsIHJlc29sdmUsIHJlamVjdCB9ID0gY3JlYXRlRGVmZXJyZWRQcm9taXNlKCk7XG5cdFx0XHRjb25zdCBoYXNoZWRJZCA9IF9pbnRlcm5hbHMuaGFzaElkKG9wSWQuaWQpO1xuXHRcdFx0Y29uc3Qgc3RlcFN0YXRlID0gdGhpcy5zdGF0ZS5zdGVwU3RhdGVbaGFzaGVkSWRdO1xuXHRcdFx0bGV0IGlzRnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRpZiAoc3RlcFN0YXRlKSB7XG5cdFx0XHRcdHN0ZXBTdGF0ZS5zZWVuID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5zdGF0ZS5yZW1haW5pbmdTdGVwc1RvQmVTZWVuLmRlbGV0ZShoYXNoZWRJZCk7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc3RlcFN0YXRlLmlucHV0ID09PSBcInVuZGVmaW5lZFwiKSBpc0Z1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRsZXQgZXh0cmFPcHRzO1xuXHRcdFx0bGV0IGZuQXJncyA9IFsuLi5hcmdzXTtcblx0XHRcdGlmICh0eXBlb2Ygc3RlcFN0YXRlPy5pbnB1dCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBBcnJheS5pc0FycmF5KHN0ZXBTdGF0ZS5pbnB1dCkpIHN3aXRjaCAob3BJZC5vcCkge1xuXHRcdFx0XHRjYXNlIFN0ZXBPcENvZGUuU3RlcFBsYW5uZWQ6XG5cdFx0XHRcdFx0Zm5BcmdzID0gWy4uLmFyZ3Muc2xpY2UoMCwgMiksIC4uLnN0ZXBTdGF0ZS5pbnB1dF07XG5cdFx0XHRcdFx0ZXh0cmFPcHRzID0geyBpbnB1dDogWy4uLnN0ZXBTdGF0ZS5pbnB1dF0gfTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTdGVwT3BDb2RlLkFpR2F0ZXdheTpcblx0XHRcdFx0XHRleHRyYU9wdHMgPSB7IGJvZHk6IHtcblx0XHRcdFx0XHRcdC4uLnR5cGVvZiBvcElkLm9wdHM/LmJvZHkgPT09IFwib2JqZWN0XCIgPyB7IC4uLm9wSWQub3B0cy5ib2R5IH0gOiB7fSxcblx0XHRcdFx0XHRcdC4uLnN0ZXBTdGF0ZS5pbnB1dFswXVxuXHRcdFx0XHRcdH0gfTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNvbnN0IHN0ZXAgPSB7XG5cdFx0XHRcdC4uLm9wSWQsXG5cdFx0XHRcdG9wdHM6IHtcblx0XHRcdFx0XHQuLi5vcElkLm9wdHMsXG5cdFx0XHRcdFx0Li4uZXh0cmFPcHRzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJhd0FyZ3M6IGZuQXJncyxcblx0XHRcdFx0aGFzaGVkSWQsXG5cdFx0XHRcdGlucHV0OiBzdGVwU3RhdGU/LmlucHV0LFxuXHRcdFx0XHRmbjogb3B0cz8uZm4gPyAoKSA9PiBvcHRzLmZuPy4oLi4uZm5BcmdzKSA6IHZvaWQgMCxcblx0XHRcdFx0cHJvbWlzZSxcblx0XHRcdFx0ZnVsZmlsbGVkOiBpc0Z1bGZpbGxlZCxcblx0XHRcdFx0aGFzU3RlcFN0YXRlOiBCb29sZWFuKHN0ZXBTdGF0ZSksXG5cdFx0XHRcdGRpc3BsYXlOYW1lOiBvcElkLmRpc3BsYXlOYW1lID8/IG9wSWQuaWQsXG5cdFx0XHRcdGhhbmRsZWQ6IGZhbHNlLFxuXHRcdFx0XHRoYW5kbGU6ICgpID0+IHtcblx0XHRcdFx0XHRpZiAoc3RlcC5oYW5kbGVkKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0dGhpcy5kZWJ1ZyhgaGFuZGxpbmcgc3RlcCBcIiR7aGFzaGVkSWR9XCJgKTtcblx0XHRcdFx0XHRzdGVwLmhhbmRsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMuc3RhdGUuc3RlcFN0YXRlW2hhc2hlZElkXTtcblx0XHRcdFx0XHRpZiAoc3RlcC5mdWxmaWxsZWQgJiYgcmVzdWx0KSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQuZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFByb21pc2UuYWxsKFtcblx0XHRcdFx0XHRcdFx0cmVzdWx0LmRhdGEsXG5cdFx0XHRcdFx0XHRcdHJlc3VsdC5lcnJvcixcblx0XHRcdFx0XHRcdFx0cmVzdWx0LmlucHV0XG5cdFx0XHRcdFx0XHRdKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQuZGF0YSAhPT0gXCJ1bmRlZmluZWRcIikgcmVzb2x2ZShyZXN1bHQuZGF0YSk7XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc3RhdGUucmVjZW50bHlSZWplY3RlZFN0ZXBFcnJvciA9IG5ldyBTdGVwRXJyb3Iob3BJZC5pZCwgcmVzdWx0LmVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHRyZWplY3QodGhpcy5zdGF0ZS5yZWNlbnRseVJlamVjdGVkU3RlcEVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5zdGF0ZS5zdGVwcy5zZXQoaGFzaGVkSWQsIHN0ZXApO1xuXHRcdFx0dGhpcy5zdGF0ZS5oYXNTdGVwcyA9IHRydWU7XG5cdFx0XHRwdXNoU3RlcFRvUmVwb3J0KHN0ZXApO1xuXHRcdFx0LyoqXG5cdFx0XHQqIElmIHRoaXMgaXMgdGhlIGxhc3QgcGllY2Ugb2Ygc3RhdGUgd2UgaGFkLCB3ZSd2ZSBub3cgZmluaXNoZWRcblx0XHRcdCogbWVtb2l6aW5nLlxuXHRcdFx0Ki9cblx0XHRcdGlmICghYmVmb3JlRXhlY0hvb2tzUHJvbWlzZSAmJiB0aGlzLnN0YXRlLmFsbFN0YXRlVXNlZCgpKSBhd2FpdCAoYmVmb3JlRXhlY0hvb2tzUHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdFx0fSkoKSk7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHR9O1xuXHRcdHJldHVybiBjcmVhdGVTdGVwVG9vbHModGhpcy5vcHRpb25zLmNsaWVudCwgdGhpcywgc3RlcEhhbmRsZXIpO1xuXHR9XG5cdHJlc3VtZVN0ZXBXaXRoUmVzdWx0KHJlc3VsdE9wKSB7XG5cdFx0Y29uc3QgdXNlcmxhbmRTdGVwID0gdGhpcy5zdGF0ZS5zdGVwcy5nZXQocmVzdWx0T3AuaWQpO1xuXHRcdGlmICghdXNlcmxhbmRTdGVwKSB0aHJvdyBuZXcgRXJyb3IoXCJTdGVwIG5vdCBmb3VuZCBpbiBtZW1vaXphdGlvbiBzdGF0ZSBkdXJpbmcgYXN5bmMgY2hlY2twb2ludGluZzsgdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIGFuZCBpcyBhIGJ1ZyBpbiB0aGUgSW5uZ2VzdCBTREtcIik7XG5cdFx0dXNlcmxhbmRTdGVwLmRhdGEgPSB1bmRlZmluZWRUb051bGwocmVzdWx0T3AuZGF0YSk7XG5cdFx0dXNlcmxhbmRTdGVwLnRpbWluZyA9IHJlc3VsdE9wLnRpbWluZztcblx0XHR1c2VybGFuZFN0ZXAuZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHR1c2VybGFuZFN0ZXAuaGFzU3RlcFN0YXRlID0gdHJ1ZTtcblx0XHR1c2VybGFuZFN0ZXAub3AgPSByZXN1bHRPcC5vcDtcblx0XHR1c2VybGFuZFN0ZXAuaWQgPSByZXN1bHRPcC5pZDtcblx0XHR0aGlzLnN0YXRlLnN0ZXBTdGF0ZVtyZXN1bHRPcC5pZF0gPSB1c2VybGFuZFN0ZXA7XG5cdFx0dXNlcmxhbmRTdGVwLmhhbmRsZSgpO1xuXHRcdHJldHVybiB1c2VybGFuZFN0ZXA7XG5cdH1cblx0Z2V0VXNlckZuVG9SdW4oKSB7XG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMuaXNGYWlsdXJlSGFuZGxlcikgcmV0dXJuIHRoaXMub3B0aW9ucy5mbltcImZuXCJdO1xuXHRcdGlmICghdGhpcy5vcHRpb25zLmZuW1wib25GYWlsdXJlRm5cIl0pXG4gLyoqXG5cdFx0KiBTb21laG93LCB3ZSd2ZSBlbmRlZCB1cCBkZXRlY3RpbmcgdGhhdCB0aGlzIGlzIGEgZmFpbHVyZSBoYW5kbGVyIGJ1dFxuXHRcdCogZG9lc24ndCBoYXZlIGFuIGBvbkZhaWx1cmVgIGZ1bmN0aW9uLiBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uXG5cdFx0Ki9cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBmdW5jdGlvbiBgb25GYWlsdXJlYCBoYW5kbGVyXCIpO1xuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuZm5bXCJvbkZhaWx1cmVGblwiXTtcblx0fVxuXHRpbml0aWFsaXplVGltZXIoc3RhdGUpIHtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwKSByZXR1cm47XG5cdFx0dGhpcy50aW1lb3V0ID0gY3JlYXRlVGltZW91dFByb21pc2UodGhpcy50aW1lb3V0RHVyYXRpb24pO1xuXHRcdHRoaXMudGltZW91dC50aGVuKGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRcdHN0YXRlLnNldENoZWNrcG9pbnQoe1xuXHRcdFx0XHR0eXBlOiBcInN0ZXAtbm90LWZvdW5kXCIsXG5cdFx0XHRcdHN0ZXA6IHtcblx0XHRcdFx0XHRpZDogdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAsXG5cdFx0XHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcE5vdEZvdW5kXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdGluaXRpYWxpemVDaGVja3BvaW50UnVudGltZVRpbWVyKHN0YXRlKSB7XG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMuY2hlY2twb2ludGluZ0NvbmZpZykgcmV0dXJuO1xuXHRcdGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmNoZWNrcG9pbnRpbmdDb25maWcgPT09IFwiYm9vbGVhblwiKSByZXR1cm47XG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMuY2hlY2twb2ludGluZ0NvbmZpZy5tYXhSdW50aW1lKSByZXR1cm47XG5cdFx0Y29uc3QgbWF4UnVudGltZU1zID0gaXNUZW1wb3JhbER1cmF0aW9uKHRoaXMub3B0aW9ucy5jaGVja3BvaW50aW5nQ29uZmlnLm1heFJ1bnRpbWUpID8gdGhpcy5vcHRpb25zLmNoZWNrcG9pbnRpbmdDb25maWcubWF4UnVudGltZS50b3RhbCh7IHVuaXQ6IFwibWlsbGlzZWNvbmRzXCIgfSkgOiB0eXBlb2YgdGhpcy5vcHRpb25zLmNoZWNrcG9pbnRpbmdDb25maWcubWF4UnVudGltZSA9PT0gXCJzdHJpbmdcIiA/IG1zKHRoaXMub3B0aW9ucy5jaGVja3BvaW50aW5nQ29uZmlnLm1heFJ1bnRpbWUpIDogdGhpcy5vcHRpb25zLmNoZWNrcG9pbnRpbmdDb25maWcubWF4UnVudGltZTtcblx0XHRpZiAoIU51bWJlci5pc0Zpbml0ZShtYXhSdW50aW1lTXMpIHx8IG1heFJ1bnRpbWVNcyA8PSAwKSByZXR1cm47XG5cdFx0dGhpcy5jaGVja3BvaW50aW5nTWF4UnVudGltZVRpbWVyID0gY3JlYXRlVGltZW91dFByb21pc2UobWF4UnVudGltZU1zKTtcblx0XHR0aGlzLmNoZWNrcG9pbnRpbmdNYXhSdW50aW1lVGltZXIudGhlbihhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRzdGF0ZS5zZXRDaGVja3BvaW50KHsgdHlwZTogXCJjaGVja3BvaW50aW5nLXJ1bnRpbWUtcmVhY2hlZFwiIH0pO1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGluaXRpYWxpemVNaWRkbGV3YXJlKCkge1xuXHRcdGNvbnN0IGN0eCA9IHRoaXMub3B0aW9ucy5kYXRhO1xuXHRcdHJldHVybiBhd2FpdCBnZXRIb29rU3RhY2sodGhpcy5vcHRpb25zLmZuW1wibWlkZGxld2FyZVwiXSwgXCJvbkZ1bmN0aW9uUnVuXCIsIHtcblx0XHRcdGN0eCxcblx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRzdGVwczogT2JqZWN0LnZhbHVlcyh0aGlzLm9wdGlvbnMuc3RlcFN0YXRlKSxcblx0XHRcdHJlcUFyZ3M6IHRoaXMub3B0aW9ucy5yZXFBcmdzXG5cdFx0fSwge1xuXHRcdFx0dHJhbnNmb3JtSW5wdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRjdHg6IHtcblx0XHRcdFx0XHRcdC4uLnByZXYuY3R4LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5jdHhcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZuOiB0aGlzLm9wdGlvbnMuZm4sXG5cdFx0XHRcdFx0c3RlcHM6IHByZXYuc3RlcHMubWFwKChzdGVwLCBpKSA9PiAoe1xuXHRcdFx0XHRcdFx0Li4uc3RlcCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8uc3RlcHM/LltpXVxuXHRcdFx0XHRcdH0pKSxcblx0XHRcdFx0XHRyZXFBcmdzOiBwcmV2LnJlcUFyZ3Ncblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFx0XHR0cmFuc2Zvcm1PdXRwdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRyZXN1bHQ6IHtcblx0XHRcdFx0XHRcdC4uLnByZXYucmVzdWx0LFxuXHRcdFx0XHRcdFx0Li4ub3V0cHV0Py5yZXN1bHRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN0ZXA6IHByZXYuc3RlcFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59O1xuY29uc3QgaGFzaElkID0gKGlkKSA9PiB7XG5cdHJldHVybiBzaGExKCkudXBkYXRlKGlkKS5kaWdlc3QoXCJoZXhcIik7XG59O1xuY29uc3QgaGFzaE9wID0gKG9wKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0Li4ub3AsXG5cdFx0aWQ6IGhhc2hJZChvcC5pZClcblx0fTtcbn07XG4vKipcbiogRXhwb3J0ZWQgZm9yIHRlc3RpbmcuXG4qL1xuY29uc3QgX2ludGVybmFscyA9IHtcblx0aGFzaE9wLFxuXHRoYXNoSWRcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgX2ludGVybmFscywgY3JlYXRlVjFJbm5nZXN0RXhlY3V0aW9uLCB2MV9leHBvcnRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12MS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/v1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/components/execution/v2.js":
/*!*********************************************************!*\
  !*** ./node_modules/inngest/components/execution/v2.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createV2InngestExecution: () => (/* binding */ createV2InngestExecution),\n/* harmony export */   v2_exports: () => (/* binding */ v2_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _als_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./als.js */ \"(rsc)/./node_modules/inngest/components/execution/als.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../helpers/consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _InngestExecution_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../helpers/errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var _helpers_functions_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../helpers/functions.js */ \"(rsc)/./node_modules/inngest/helpers/functions.js\");\n/* harmony import */ var _InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../InngestMiddleware.js */ \"(rsc)/./node_modules/inngest/components/InngestMiddleware.js\");\n/* harmony import */ var _otel_access_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./otel/access.js */ \"(rsc)/./node_modules/inngest/components/execution/otel/access.js\");\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n/* harmony import */ var _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../RetryAfterError.js */ \"(rsc)/./node_modules/inngest/components/RetryAfterError.js\");\n/* harmony import */ var _StepError_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../StepError.js */ \"(rsc)/./node_modules/inngest/components/StepError.js\");\n/* harmony import */ var _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../InngestStepTools.js */ \"(rsc)/./node_modules/inngest/components/InngestStepTools.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _opentelemetry_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/@opentelemetry/api/build/esm/trace-api.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/components/execution/v2.ts\nvar v2_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_1__.__export)({\n\t_internals: () => _internals,\n\tcreateV2InngestExecution: () => createV2InngestExecution\n});\nconst { sha1 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\nconst createV2InngestExecution = (options) => {\n\treturn new V2InngestExecution(options);\n};\nvar V2InngestExecution = class extends _InngestExecution_js__WEBPACK_IMPORTED_MODULE_2__.InngestExecution {\n\tversion = _helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionVersion.V2;\n\tstate;\n\tfnArg;\n\tcheckpointHandlers;\n\ttimeoutDuration = 1e3 * 10;\n\texecution;\n\tuserFnToRun;\n\t/**\n\t* If we're supposed to run a particular step via `requestedRunStep`, this\n\t* will be a `Promise` that resolves after no steps have been found for\n\t* `timeoutDuration` milliseconds.\n\t*\n\t* If we're not supposed to run a particular step, this will be `undefined`.\n\t*/\n\ttimeout;\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.userFnToRun = this.getUserFnToRun();\n\t\tthis.state = this.createExecutionState();\n\t\tthis.fnArg = this.createFnArg();\n\t\tthis.checkpointHandlers = this.createCheckpointHandlers();\n\t\tthis.initializeTimer(this.state);\n\t\tthis.debug(\"created new V2 execution for run;\", this.options.requestedRunStep ? `wanting to run step \"${this.options.requestedRunStep}\"` : \"discovering steps\");\n\t\tthis.debug(\"existing state keys:\", Object.keys(this.state.stepState));\n\t}\n\t/**\n\t* Idempotently start the execution of the user's function.\n\t*/\n\tstart() {\n\t\tif (!this.execution) {\n\t\t\tthis.debug(\"starting V2 execution\");\n\t\t\tconst tracer = _opentelemetry_api__WEBPACK_IMPORTED_MODULE_4__.trace.getTracer(\"inngest\", _version_js__WEBPACK_IMPORTED_MODULE_5__.version);\n\t\t\tthis.execution = (0,_als_js__WEBPACK_IMPORTED_MODULE_6__.getAsyncLocalStorage)().then((als) => {\n\t\t\t\treturn als.run({\n\t\t\t\t\tapp: this.options.client,\n\t\t\t\t\texecution: {\n\t\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\t\tinstance: this\n\t\t\t\t\t}\n\t\t\t\t}, async () => {\n\t\t\t\t\treturn tracer.startActiveSpan(\"inngest.execution\", (span) => {\n\t\t\t\t\t\t_otel_access_js__WEBPACK_IMPORTED_MODULE_7__.clientProcessorMap.get(this.options.client)?.declareStartingSpan({\n\t\t\t\t\t\t\tspan,\n\t\t\t\t\t\t\trunId: this.options.runId,\n\t\t\t\t\t\t\ttraceparent: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.headerKeys.TraceParent],\n\t\t\t\t\t\t\ttracestate: this.options.headers[_helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.headerKeys.TraceState]\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn this._start().then((result) => {\n\t\t\t\t\t\t\tthis.debug(\"result:\", result);\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tspan.end();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this.execution;\n\t}\n\taddMetadata(stepId, kind, scope, op, values) {\n\t\tif (!this.state.metadata) this.state.metadata = /* @__PURE__ */ new Map();\n\t\tconst updates = this.state.metadata.get(stepId) ?? [];\n\t\tupdates.push({\n\t\t\tkind,\n\t\t\tscope,\n\t\t\top,\n\t\t\tvalues\n\t\t});\n\t\tthis.state.metadata.set(stepId, updates);\n\t\treturn true;\n\t}\n\t/**\n\t* Starts execution of the user's function and the core loop.\n\t*/\n\tasync _start() {\n\t\ttry {\n\t\t\tconst allCheckpointHandler = this.getCheckpointHandler(\"\");\n\t\t\tthis.state.hooks = await this.initializeMiddleware();\n\t\t\tawait this.startExecution();\n\t\t\tfor await (const checkpoint of this.state.loop) {\n\t\t\t\tawait allCheckpointHandler(checkpoint);\n\t\t\t\tconst result = await this.getCheckpointHandler(checkpoint.type)(checkpoint);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\treturn await this.transformOutput({ error });\n\t\t} finally {\n\t\t\tthis.state.loop.return();\n\t\t\tawait this.state.hooks?.beforeResponse?.();\n\t\t}\n\t\t/**\n\t\t* If we're here, the generator somehow finished without returning a value.\n\t\t* This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Core loop finished without returning a value\");\n\t}\n\t/**\n\t* Creates a handler for every checkpoint type, defining what to do when we\n\t* reach that checkpoint in the core loop.\n\t*/\n\tcreateCheckpointHandlers() {\n\t\treturn {\n\t\t\t\"\": (checkpoint) => {\n\t\t\t\tthis.debug(\"checkpoint:\", checkpoint);\n\t\t\t},\n\t\t\t\"function-resolved\": async (checkpoint) => {\n\t\t\t\treturn await this.transformOutput({ data: checkpoint.data });\n\t\t\t},\n\t\t\t\"function-rejected\": async (checkpoint) => {\n\t\t\t\treturn await this.transformOutput({ error: checkpoint.error });\n\t\t\t},\n\t\t\t\"steps-found\": async ({ steps }) => {\n\t\t\t\tconst stepResult = await this.tryExecuteStep(steps);\n\t\t\t\tif (stepResult) {\n\t\t\t\t\tconst transformResult = await this.transformOutput(stepResult);\n\t\t\t\t\t/**\n\t\t\t\t\t* Transforming output will always return either function rejection or\n\t\t\t\t\t* resolution. In most cases, this can be immediately returned, but in\n\t\t\t\t\t* this particular case we want to handle it differently.\n\t\t\t\t\t*/\n\t\t\t\t\tif (transformResult.type === \"function-resolved\") return {\n\t\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\t\tctx: transformResult.ctx,\n\t\t\t\t\t\tops: transformResult.ops,\n\t\t\t\t\t\tstep: _internals.hashOp({\n\t\t\t\t\t\t\t...stepResult,\n\t\t\t\t\t\t\tdata: transformResult.data\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t\telse if (transformResult.type === \"function-rejected\") {\n\t\t\t\t\t\tconst stepForResponse = _internals.hashOp({\n\t\t\t\t\t\t\t...stepResult,\n\t\t\t\t\t\t\terror: transformResult.error\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (stepResult.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepFailed) {\n\t\t\t\t\t\t\tconst ser = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.serializeError)(transformResult.error);\n\t\t\t\t\t\t\tstepForResponse.data = {\n\t\t\t\t\t\t\t\t__serialized: true,\n\t\t\t\t\t\t\t\tname: ser.name,\n\t\t\t\t\t\t\t\tmessage: ser.message,\n\t\t\t\t\t\t\t\tstack: \"\"\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: \"step-ran\",\n\t\t\t\t\t\t\tctx: transformResult.ctx,\n\t\t\t\t\t\t\tops: transformResult.ops,\n\t\t\t\t\t\t\tretriable: transformResult.retriable,\n\t\t\t\t\t\t\tstep: stepForResponse\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn transformResult;\n\t\t\t\t}\n\t\t\t\tconst newSteps = await this.filterNewSteps(Array.from(this.state.steps.values()));\n\t\t\t\tif (newSteps) return {\n\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tsteps: newSteps\n\t\t\t\t};\n\t\t\t},\n\t\t\t\"step-not-found\": ({ step }) => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"step-not-found\",\n\t\t\t\t\tctx: this.fnArg,\n\t\t\t\t\tops: this.ops,\n\t\t\t\t\tstep\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\tgetCheckpointHandler(type) {\n\t\treturn this.checkpointHandlers[type];\n\t}\n\tasync tryExecuteStep(steps) {\n\t\tconst hashedStepIdToRun = this.options.requestedRunStep || this.getEarlyExecRunStep(steps);\n\t\tif (!hashedStepIdToRun) return;\n\t\tconst step = steps.find((step$1) => step$1.hashedId === hashedStepIdToRun && step$1.fn);\n\t\tif (step) return await this.executeStep(step);\n\t\tthis.timeout?.reset();\n\t}\n\t/**\n\t* Given a list of outgoing ops, decide if we can execute an op early and\n\t* return the ID of the step to execute if we can.\n\t*/\n\tgetEarlyExecRunStep(steps) {\n\t\t/**\n\t\t* We may have been disabled due to parallelism, in which case we can't\n\t\t* immediately execute unless explicitly requested.\n\t\t*/\n\t\tif (this.options.disableImmediateExecution) return;\n\t\tconst unfulfilledSteps = steps.filter((step) => !step.fulfilled);\n\t\tif (unfulfilledSteps.length !== 1) return;\n\t\tconst op = unfulfilledSteps[0];\n\t\tif (op && op.op === _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned) return op.hashedId;\n\t}\n\tasync filterNewSteps(foundSteps) {\n\t\tif (this.options.requestedRunStep) return;\n\t\t/**\n\t\t* Gather any steps that aren't memoized and report them.\n\t\t*/\n\t\tconst newSteps = foundSteps.filter((step) => !step.fulfilled);\n\t\tif (!newSteps.length) return;\n\t\t/**\n\t\t* Warn if we've found new steps but haven't yet seen all previous\n\t\t* steps. This may indicate that step presence isn't determinate.\n\t\t*/\n\t\tlet knownSteps = 0;\n\t\tfor (const step of foundSteps) if (step.fulfilled) knownSteps++;\n\t\tif (!(this.state.stepsToFulfill === knownSteps)) await this.options.client[\"warnMetadata\"]({ run_id: this.options.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.ErrCode.NONDETERMINISTIC_STEPS, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.prettyError)({\n\t\t\ttype: \"warn\",\n\t\t\twhatHappened: \"Function may be indeterminate\",\n\t\t\twhy: \"We found new steps before seeing all previous steps, which may indicate that the function is non-deterministic.\",\n\t\t\tconsequences: \"This may cause unexpected behaviour as Inngest executes your function.\",\n\t\t\treassurance: \"This is expected if a function is updated in the middle of a run, but may indicate a bug if not.\"\n\t\t}));\n\t\t/**\n\t\t* We're finishing up; let's trigger the last of the hooks.\n\t\t*/\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tawait this.state.hooks?.afterExecution?.();\n\t\tconst stepList = newSteps.map((step) => ({\n\t\t\tdisplayName: step.displayName,\n\t\t\top: step.op,\n\t\t\tid: step.hashedId,\n\t\t\tname: step.name,\n\t\t\topts: step.opts,\n\t\t\tuserland: step.userland\n\t\t}));\n\t\t/**\n\t\t* We also run `onSendEvent` middleware hooks against `step.invoke()` steps\n\t\t* to ensure that their `data` is transformed correctly.\n\t\t*/\n\t\treturn await this.transformNewSteps(stepList);\n\t}\n\t/**\n\t* Using middleware, transform any newly-found steps before returning them to\n\t* an Inngest Server.\n\t*/\n\tasync transformNewSteps(steps) {\n\t\treturn Promise.all(steps.map(async (step) => {\n\t\t\tif (step.op !== _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.InvokeFunction) return step;\n\t\t\t/**\n\t\t\t* For each event being sent, create a new `onSendEvent` hook stack to\n\t\t\t* process it. We do this as middleware hooks are intended to run once\n\t\t\t* during each lifecycle (onFunctionRun or onSendEvent) and here, a hook\n\t\t\t* is run for every single event.\n\t\t\t*\n\t\t\t* This is done because a developer can use this hook to filter out\n\t\t\t* events entirely; if we batch all of the events together, we can't\n\t\t\t* tell which ones were filtered out if we're processing >1 invocation\n\t\t\t* here.\n\t\t\t*/\n\t\t\tconst transformedPayload = await (await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_10__.getHookStack)(this.options.fn[\"middleware\"], \"onSendEvent\", void 0, {\n\t\t\t\ttransformInput: (prev, output) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t...output\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\t\treturn { result: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t} };\n\t\t\t\t}\n\t\t\t})).transformInput?.({ payloads: [{\n\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\tname: _helpers_consts_js__WEBPACK_IMPORTED_MODULE_3__.internalEvents.FunctionInvoked\n\t\t\t}] });\n\t\t\tconst newPayload = _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.invokePayloadSchema.parse(transformedPayload?.payloads?.[0] ?? {});\n\t\t\treturn {\n\t\t\t\t...step,\n\t\t\t\topts: {\n\t\t\t\t\t...step.opts,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\t...step.opts?.payload ?? {},\n\t\t\t\t\t\t...newPayload\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}));\n\t}\n\tasync executeStep({ id, name, opts, fn, displayName, userland }) {\n\t\tthis.timeout?.clear();\n\t\tawait this.state.hooks?.afterMemoization?.();\n\t\tawait this.state.hooks?.beforeExecution?.();\n\t\tconst outgoingOp = {\n\t\t\tid,\n\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepRun,\n\t\t\tname,\n\t\t\topts,\n\t\t\tdisplayName,\n\t\t\tuserland\n\t\t};\n\t\tthis.state.executingStep = outgoingOp;\n\t\tconst store = await (0,_als_js__WEBPACK_IMPORTED_MODULE_6__.getAsyncCtx)();\n\t\tif (store?.execution) store.execution.executingStep = {\n\t\t\tid,\n\t\t\tname: displayName\n\t\t};\n\t\tthis.debug(`executing step \"${id}\"`);\n\t\treturn (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.runAsPromise)(fn).finally(async () => {\n\t\t\tif (store?.execution) delete store.execution.executingStep;\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then((data) => {\n\t\t\treturn {\n\t\t\t\t...outgoingOp,\n\t\t\t\tdata\n\t\t\t};\n\t\t}).catch((error) => {\n\t\t\tlet errorIsRetriable = true;\n\t\t\tif (error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_13__.NonRetriableError) errorIsRetriable = false;\n\t\t\telse if (this.fnArg.maxAttempts && this.fnArg?.maxAttempts - 1 === this.fnArg.attempt) errorIsRetriable = false;\n\t\t\tif (errorIsRetriable) return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepError,\n\t\t\t\terror\n\t\t\t};\n\t\t\telse return {\n\t\t\t\t...outgoingOp,\n\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepFailed,\n\t\t\t\terror\n\t\t\t};\n\t\t});\n\t}\n\t/**\n\t* Starts execution of the user's function, including triggering checkpoints\n\t* and middleware hooks where appropriate.\n\t*/\n\tasync startExecution() {\n\t\t/**\n\t\t* Mutate input as neccessary based on middleware.\n\t\t*/\n\t\tawait this.transformInput();\n\t\t/**\n\t\t* Start the timer to time out the run if needed.\n\t\t*/\n\t\tthis.timeout?.start();\n\t\tawait this.state.hooks?.beforeMemoization?.();\n\t\t/**\n\t\t* If we had no state to begin with, immediately end the memoization phase.\n\t\t*/\n\t\tif (this.state.allStateUsed()) {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t}\n\t\t/**\n\t\t* Trigger the user's function.\n\t\t*/\n\t\t(0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.runAsPromise)(() => this.userFnToRun(this.fnArg)).finally(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t}).then((data) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-resolved\",\n\t\t\t\tdata\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\tthis.state.setCheckpoint({\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\terror\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t* Using middleware, transform input before running.\n\t*/\n\tasync transformInput() {\n\t\tconst inputMutations = await this.state.hooks?.transformInput?.({\n\t\t\tctx: { ...this.fnArg },\n\t\t\tsteps: Object.values(this.state.stepState),\n\t\t\tfn: this.options.fn,\n\t\t\treqArgs: this.options.reqArgs\n\t\t});\n\t\tif (inputMutations?.ctx) this.fnArg = inputMutations.ctx;\n\t\tif (inputMutations?.steps) this.state.stepState = Object.fromEntries(inputMutations.steps.map((step) => [step.id, step]));\n\t}\n\t/**\n\t* Using middleware, transform output before returning.\n\t*/\n\tasync transformOutput(dataOrError) {\n\t\tconst output = { ...dataOrError };\n\t\tconst isStepExecution = Boolean(this.state.executingStep);\n\t\tconst transformedOutput = await this.state.hooks?.transformOutput?.({\n\t\t\tresult: { ...output },\n\t\t\tstep: this.state.executingStep\n\t\t});\n\t\tconst { data, error } = {\n\t\t\t...output,\n\t\t\t...transformedOutput?.result\n\t\t};\n\t\tif (!isStepExecution) await this.state.hooks?.finished?.({ result: { ...typeof error !== \"undefined\" ? { error } : { data } } });\n\t\tif (typeof error !== \"undefined\") {\n\t\t\t/**\n\t\t\t* Ensure we give middleware the chance to decide on retriable behaviour\n\t\t\t* by looking at the error returned from output transformation.\n\t\t\t*/\n\t\t\tlet retriable = !(error instanceof _NonRetriableError_js__WEBPACK_IMPORTED_MODULE_13__.NonRetriableError || error instanceof _StepError_js__WEBPACK_IMPORTED_MODULE_14__.StepError && error === this.state.recentlyRejectedStepError);\n\t\t\tif (retriable && error instanceof _RetryAfterError_js__WEBPACK_IMPORTED_MODULE_15__.RetryAfterError) retriable = error.retryAfter;\n\t\t\tconst serializedError = (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.minifyPrettyError)((0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.serializeError)(error));\n\t\t\treturn {\n\t\t\t\ttype: \"function-rejected\",\n\t\t\t\tctx: this.fnArg,\n\t\t\t\tops: this.ops,\n\t\t\t\terror: serializedError,\n\t\t\t\tretriable\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\ttype: \"function-resolved\",\n\t\t\tctx: this.fnArg,\n\t\t\tops: this.ops,\n\t\t\tdata: (0,_helpers_functions_js__WEBPACK_IMPORTED_MODULE_16__.undefinedToNull)(data)\n\t\t};\n\t}\n\tcreateExecutionState() {\n\t\tconst d = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.createDeferredPromiseWithStack)();\n\t\tlet checkpointResolve = d.deferred.resolve;\n\t\tconst checkpointResults = d.results;\n\t\tconst loop = (async function* (cleanUp) {\n\t\t\ttry {\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst res = (await checkpointResults.next()).value;\n\t\t\t\t\tif (res) yield res;\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tcleanUp?.();\n\t\t\t}\n\t\t})(() => {\n\t\t\tthis.timeout?.clear();\n\t\t\tcheckpointResults.return();\n\t\t});\n\t\tconst stepsToFulfill = Object.keys(this.options.stepState).length;\n\t\treturn {\n\t\t\tstepState: this.options.stepState,\n\t\t\tstepsToFulfill,\n\t\t\tsteps: /* @__PURE__ */ new Map(),\n\t\t\tloop,\n\t\t\thasSteps: Boolean(stepsToFulfill),\n\t\t\tstepCompletionOrder: [...this.options.stepCompletionOrder],\n\t\t\tremainingStepsToBeSeen: new Set(this.options.stepCompletionOrder),\n\t\t\tsetCheckpoint: (checkpoint) => {\n\t\t\t\t({resolve: checkpointResolve} = checkpointResolve(checkpoint));\n\t\t\t},\n\t\t\tallStateUsed: () => {\n\t\t\t\treturn this.state.remainingStepsToBeSeen.size === 0;\n\t\t\t}\n\t\t};\n\t}\n\tget ops() {\n\t\treturn Object.fromEntries(this.state.steps);\n\t}\n\tcreateFnArg() {\n\t\tconst step = this.createStepTools();\n\t\tlet fnArg = {\n\t\t\t...this.options.data,\n\t\t\tstep\n\t\t};\n\t\t/**\n\t\t* Handle use of the `onFailure` option by deserializing the error.\n\t\t*/\n\t\tif (this.options.isFailureHandler) {\n\t\t\tconst eventData = zod_v3__WEBPACK_IMPORTED_MODULE_17__.object({ error: _types_js__WEBPACK_IMPORTED_MODULE_8__.jsonErrorSchema }).parse(fnArg.event?.data);\n\t\t\tfnArg = {\n\t\t\t\t...fnArg,\n\t\t\t\terror: (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.deserializeError)(eventData.error)\n\t\t\t};\n\t\t}\n\t\treturn this.options.transformCtx?.(fnArg) ?? fnArg;\n\t}\n\tcreateStepTools() {\n\t\t/**\n\t\t* A list of steps that have been found and are being rolled up before being\n\t\t* reported to the core loop.\n\t\t*/\n\t\tconst foundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the subset of found steps to report that have not yet been\n\t\t* handled. Used for fast access to steps that need to be handled in order.\n\t\t*/\n\t\tconst unhandledFoundStepsToReport = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A map of the latest sequential step indexes found for each step ID. Used\n\t\t* to ensure that we don't index steps in parallel.\n\t\t*\n\t\t* Note that these must be sequential; if we've seen or assigned `a:1`,\n\t\t* `a:2` and `a:4`, the latest sequential step index is `2`.\n\t\t*\n\t\t*/\n\t\tconst expectedNextStepIndexes = /* @__PURE__ */ new Map();\n\t\t/**\n\t\t* A promise that's used to ensure that step reporting cannot be run more than\n\t\t* once in a given asynchronous time span.\n\t\t*/\n\t\tlet foundStepsReportPromise;\n\t\t/**\n\t\t* A promise that's used to represent middleware hooks running before\n\t\t* execution.\n\t\t*/\n\t\tlet beforeExecHooksPromise;\n\t\t/**\n\t\t* A helper used to report steps to the core loop. Used after adding an item\n\t\t* to `foundStepsToReport`.\n\t\t*/\n\t\tconst reportNextTick = () => {\n\t\t\tif (foundStepsReportPromise) return;\n\t\t\tfoundStepsReportPromise = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.resolveNextTick)().then(() => beforeExecHooksPromise).then(() => {\n\t\t\t\tfoundStepsReportPromise = void 0;\n\t\t\t\tfor (const [hashedId, step] of unhandledFoundStepsToReport) if (step.handle()) {\n\t\t\t\t\tunhandledFoundStepsToReport.delete(hashedId);\n\t\t\t\t\tif (step.fulfilled) foundStepsToReport.delete(step.id);\n\t\t\t\t}\n\t\t\t\tif (foundStepsToReport.size) {\n\t\t\t\t\tconst steps = [...foundStepsToReport.values()];\n\t\t\t\t\tfoundStepsToReport.clear();\n\t\t\t\t\tthis.state.setCheckpoint({\n\t\t\t\t\t\ttype: \"steps-found\",\n\t\t\t\t\t\tsteps\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t/**\n\t\t* A helper used to push a step to the list of steps to report.\n\t\t*/\n\t\tconst pushStepToReport = (step) => {\n\t\t\tfoundStepsToReport.set(step.id, step);\n\t\t\tunhandledFoundStepsToReport.set(step.hashedId, step);\n\t\t\treportNextTick();\n\t\t};\n\t\tconst stepHandler = async ({ args, matchOp, opts }) => {\n\t\t\tawait beforeExecHooksPromise;\n\t\t\tconst opId = matchOp((0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.getStepOptions)(args[0]), ...args.slice(1));\n\t\t\tif (this.state.executingStep)\n /**\n\t\t\t* If a step is found after asynchronous actions during another step's\n\t\t\t* execution, everything is fine. The problem here is if we've found\n\t\t\t* that a step nested inside another a step, which is something we don't\n\t\t\t* support at the time of writing.\n\t\t\t*\n\t\t\t* In this case, we could use something like Async Hooks to understand\n\t\t\t* how the step is being triggered, though this isn't available in all\n\t\t\t* environments.\n\t\t\t*\n\t\t\t* Therefore, we'll only show a warning here to indicate that this is\n\t\t\t* potentially an issue.\n\t\t\t*/\n\t\t\tthis.options.client[\"warnMetadata\"]({ run_id: this.options.runId }, _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.ErrCode.NESTING_STEPS, (0,_helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.prettyError)({\n\t\t\t\twhatHappened: `We detected that you have nested \\`step.*\\` tooling in \\`${opId.displayName ?? opId.id}\\``,\n\t\t\t\tconsequences: \"Nesting `step.*` tooling is not supported.\",\n\t\t\t\ttype: \"warn\",\n\t\t\t\treassurance: \"It's possible to see this warning if steps are separated by regular asynchronous calls, which is fine.\",\n\t\t\t\tstack: true,\n\t\t\t\ttoFixNow: \"Make sure you're not using `step.*` tooling inside of other `step.*` tooling. If you need to compose steps together, you can create a new async function and call it from within your step function, or use promise chaining.\",\n\t\t\t\tcode: _helpers_errors_js__WEBPACK_IMPORTED_MODULE_9__.ErrCode.NESTING_STEPS\n\t\t\t}));\n\t\t\tif (this.state.steps.has(opId.id)) {\n\t\t\t\tconst originalId = opId.id;\n\t\t\t\tconst expectedNextIndex = expectedNextStepIndexes.get(originalId) ?? 1;\n\t\t\t\tfor (let i = expectedNextIndex;; i++) {\n\t\t\t\t\tconst newId = originalId + _InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.STEP_INDEXING_SUFFIX + i;\n\t\t\t\t\tif (!this.state.steps.has(newId)) {\n\t\t\t\t\t\texpectedNextStepIndexes.set(originalId, i + 1);\n\t\t\t\t\t\topId.id = newId;\n\t\t\t\t\t\topId.userland.index = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst { promise, resolve, reject } = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.createDeferredPromise)();\n\t\t\tconst hashedId = _internals.hashId(opId.id);\n\t\t\tconst stepState = this.state.stepState[hashedId];\n\t\t\tlet isFulfilled = false;\n\t\t\tif (stepState) {\n\t\t\t\tstepState.seen = true;\n\t\t\t\tthis.state.remainingStepsToBeSeen.delete(hashedId);\n\t\t\t\tif (typeof stepState.input === \"undefined\") isFulfilled = true;\n\t\t\t}\n\t\t\tlet extraOpts;\n\t\t\tlet fnArgs = [...args];\n\t\t\tif (typeof stepState?.input !== \"undefined\" && Array.isArray(stepState.input)) switch (opId.op) {\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepPlanned:\n\t\t\t\t\tfnArgs = [...args.slice(0, 2), ...stepState.input];\n\t\t\t\t\textraOpts = { input: [...stepState.input] };\n\t\t\t\t\tbreak;\n\t\t\t\tcase _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.AiGateway:\n\t\t\t\t\textraOpts = { body: {\n\t\t\t\t\t\t...typeof opId.opts?.body === \"object\" ? { ...opId.opts.body } : {},\n\t\t\t\t\t\t...stepState.input[0]\n\t\t\t\t\t} };\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst step = {\n\t\t\t\t...opId,\n\t\t\t\topts: {\n\t\t\t\t\t...opId.opts,\n\t\t\t\t\t...extraOpts\n\t\t\t\t},\n\t\t\t\trawArgs: fnArgs,\n\t\t\t\thashedId,\n\t\t\t\tinput: stepState?.input,\n\t\t\t\tfn: opts?.fn ? () => opts.fn?.(...fnArgs) : void 0,\n\t\t\t\tpromise,\n\t\t\t\tfulfilled: isFulfilled,\n\t\t\t\thasStepState: Boolean(stepState),\n\t\t\t\tdisplayName: opId.displayName ?? opId.id,\n\t\t\t\thandled: false,\n\t\t\t\thandle: () => {\n\t\t\t\t\tif (step.handled) return false;\n\t\t\t\t\tstep.handled = true;\n\t\t\t\t\tif (isFulfilled && stepState) {\n\t\t\t\t\t\tstepState.fulfilled = true;\n\t\t\t\t\t\tPromise.all([\n\t\t\t\t\t\t\tstepState.data,\n\t\t\t\t\t\t\tstepState.error,\n\t\t\t\t\t\t\tstepState.input\n\t\t\t\t\t\t]).then(() => {\n\t\t\t\t\t\t\tif (typeof stepState.data !== \"undefined\") resolve(stepState.data);\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthis.state.recentlyRejectedStepError = new _StepError_js__WEBPACK_IMPORTED_MODULE_14__.StepError(opId.id, stepState.error);\n\t\t\t\t\t\t\t\treject(this.state.recentlyRejectedStepError);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.state.steps.set(opId.id, step);\n\t\t\tthis.state.hasSteps = true;\n\t\t\tpushStepToReport(step);\n\t\t\t/**\n\t\t\t* If this is the last piece of state we had, we've now finished\n\t\t\t* memoizing.\n\t\t\t*/\n\t\t\tif (!beforeExecHooksPromise && this.state.allStateUsed()) await (beforeExecHooksPromise = (async () => {\n\t\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\t})());\n\t\t\treturn promise;\n\t\t};\n\t\treturn (0,_InngestStepTools_js__WEBPACK_IMPORTED_MODULE_11__.createStepTools)(this.options.client, this, stepHandler);\n\t}\n\tgetUserFnToRun() {\n\t\tif (!this.options.isFailureHandler) return this.options.fn[\"fn\"];\n\t\tif (!this.options.fn[\"onFailureFn\"])\n /**\n\t\t* Somehow, we've ended up detecting that this is a failure handler but\n\t\t* doesn't have an `onFailure` function. This should never happen.\n\t\t*/\n\t\tthrow new Error(\"Cannot find function `onFailure` handler\");\n\t\treturn this.options.fn[\"onFailureFn\"];\n\t}\n\tinitializeTimer(state) {\n\t\tif (!this.options.requestedRunStep) return;\n\t\tthis.timeout = (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_12__.createTimeoutPromise)(this.timeoutDuration);\n\t\tthis.timeout.then(async () => {\n\t\t\tawait this.state.hooks?.afterMemoization?.();\n\t\t\tawait this.state.hooks?.beforeExecution?.();\n\t\t\tawait this.state.hooks?.afterExecution?.();\n\t\t\tstate.setCheckpoint({\n\t\t\t\ttype: \"step-not-found\",\n\t\t\t\tstep: {\n\t\t\t\t\tid: this.options.requestedRunStep,\n\t\t\t\t\top: _types_js__WEBPACK_IMPORTED_MODULE_8__.StepOpCode.StepNotFound\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tasync initializeMiddleware() {\n\t\tconst ctx = this.options.data;\n\t\treturn await (0,_InngestMiddleware_js__WEBPACK_IMPORTED_MODULE_10__.getHookStack)(this.options.fn[\"middleware\"], \"onFunctionRun\", {\n\t\t\tctx,\n\t\t\tfn: this.options.fn,\n\t\t\tsteps: Object.values(this.options.stepState),\n\t\t\treqArgs: this.options.reqArgs\n\t\t}, {\n\t\t\ttransformInput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tctx: {\n\t\t\t\t\t\t...prev.ctx,\n\t\t\t\t\t\t...output?.ctx\n\t\t\t\t\t},\n\t\t\t\t\tfn: this.options.fn,\n\t\t\t\t\tsteps: prev.steps.map((step, i) => ({\n\t\t\t\t\t\t...step,\n\t\t\t\t\t\t...output?.steps?.[i]\n\t\t\t\t\t})),\n\t\t\t\t\treqArgs: prev.reqArgs\n\t\t\t\t};\n\t\t\t},\n\t\t\ttransformOutput: (prev, output) => {\n\t\t\t\treturn {\n\t\t\t\t\tresult: {\n\t\t\t\t\t\t...prev.result,\n\t\t\t\t\t\t...output?.result\n\t\t\t\t\t},\n\t\t\t\t\tstep: prev.step\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n};\nconst hashId = (id) => {\n\treturn sha1().update(id).digest(\"hex\");\n};\nconst hashOp = (op) => {\n\treturn {\n\t\t...op,\n\t\tid: hashId(op.id)\n\t};\n};\n/**\n* Exported for testing.\n*/\nconst _internals = {\n\thashOp,\n\thashId\n};\n\n//#endregion\n\n//# sourceMappingURL=v2.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9jb21wb25lbnRzL2V4ZWN1dGlvbi92Mi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNEO0FBQ2xCO0FBQzRDO0FBQzFCO0FBQ0o7QUFDRztBQUN3RDtBQUN2RDtBQUNOO0FBQ0Q7QUFDaUc7QUFDL0Y7QUFDWjtBQUN3RTtBQUN6RjtBQUNnQjtBQUNkOztBQUU3QjtBQUNBLGlDQUFpQyxzRUFBUTtBQUN6QztBQUNBO0FBQ0EsQ0FBQztBQUNELFFBQVEsT0FBTyxFQUFFLG9DQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxrRUFBZ0I7QUFDdkQsV0FBVyxnRUFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDJEQUEyRCw4QkFBOEI7QUFDeEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixxREFBSyxzQkFBc0IsZ0RBQU87QUFDcEQsb0JBQW9CLDZEQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxNQUFNLCtEQUFrQjtBQUN4QjtBQUNBO0FBQ0EseUNBQXlDLDBEQUFVO0FBQ25ELHdDQUF3QywwREFBVTtBQUNsRCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTixLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHFEQUFTO0FBQzVEO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsU0FBUyxzRUFBZTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyRUFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaURBQVU7QUFDbkI7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0VBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRDtBQUNoRCIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2NvbXBvbmVudHMvZXhlY3V0aW9uL3YyLmpzPzg0N2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19leHBvcnQgfSBmcm9tIFwiLi4vLi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgZ2V0QXN5bmNDdHgsIGdldEFzeW5jTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vYWxzLmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IEV4ZWN1dGlvblZlcnNpb24sIGhlYWRlcktleXMsIGludGVybmFsRXZlbnRzIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvY29uc3RzLmpzXCI7XG5pbXBvcnQgeyBTdGVwT3BDb2RlLCBqc29uRXJyb3JTY2hlbWEgfSBmcm9tIFwiLi4vLi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IElubmdlc3RFeGVjdXRpb24gfSBmcm9tIFwiLi9Jbm5nZXN0RXhlY3V0aW9uLmpzXCI7XG5pbXBvcnQgeyBOb25SZXRyaWFibGVFcnJvciB9IGZyb20gXCIuLi9Ob25SZXRyaWFibGVFcnJvci5qc1wiO1xuaW1wb3J0IHsgRXJyQ29kZSwgZGVzZXJpYWxpemVFcnJvciwgbWluaWZ5UHJldHR5RXJyb3IsIHByZXR0eUVycm9yLCBzZXJpYWxpemVFcnJvciB9IGZyb20gXCIuLi8uLi9oZWxwZXJzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgdW5kZWZpbmVkVG9OdWxsIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvZnVuY3Rpb25zLmpzXCI7XG5pbXBvcnQgeyBnZXRIb29rU3RhY2sgfSBmcm9tIFwiLi4vSW5uZ2VzdE1pZGRsZXdhcmUuanNcIjtcbmltcG9ydCB7IGNsaWVudFByb2Nlc3Nvck1hcCB9IGZyb20gXCIuL290ZWwvYWNjZXNzLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZFByb21pc2UsIGNyZWF0ZURlZmVycmVkUHJvbWlzZVdpdGhTdGFjaywgY3JlYXRlVGltZW91dFByb21pc2UsIHJlc29sdmVOZXh0VGljaywgcnVuQXNQcm9taXNlIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IFJldHJ5QWZ0ZXJFcnJvciB9IGZyb20gXCIuLi9SZXRyeUFmdGVyRXJyb3IuanNcIjtcbmltcG9ydCB7IFN0ZXBFcnJvciB9IGZyb20gXCIuLi9TdGVwRXJyb3IuanNcIjtcbmltcG9ydCB7IFNURVBfSU5ERVhJTkdfU1VGRklYLCBjcmVhdGVTdGVwVG9vbHMsIGdldFN0ZXBPcHRpb25zLCBpbnZva2VQYXlsb2FkU2NoZW1hIH0gZnJvbSBcIi4uL0lubmdlc3RTdGVwVG9vbHMuanNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5pbXBvcnQgeyB0cmFjZSB9IGZyb20gXCJAb3BlbnRlbGVtZXRyeS9hcGlcIjtcbmltcG9ydCBoYXNoanMgZnJvbSBcImhhc2guanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb21wb25lbnRzL2V4ZWN1dGlvbi92Mi50c1xudmFyIHYyX2V4cG9ydHMgPSAvKiBAX19QVVJFX18gKi8gX19leHBvcnQoe1xuXHRfaW50ZXJuYWxzOiAoKSA9PiBfaW50ZXJuYWxzLFxuXHRjcmVhdGVWMklubmdlc3RFeGVjdXRpb246ICgpID0+IGNyZWF0ZVYySW5uZ2VzdEV4ZWN1dGlvblxufSk7XG5jb25zdCB7IHNoYTEgfSA9IGhhc2hqcztcbmNvbnN0IGNyZWF0ZVYySW5uZ2VzdEV4ZWN1dGlvbiA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiBuZXcgVjJJbm5nZXN0RXhlY3V0aW9uKG9wdGlvbnMpO1xufTtcbnZhciBWMklubmdlc3RFeGVjdXRpb24gPSBjbGFzcyBleHRlbmRzIElubmdlc3RFeGVjdXRpb24ge1xuXHR2ZXJzaW9uID0gRXhlY3V0aW9uVmVyc2lvbi5WMjtcblx0c3RhdGU7XG5cdGZuQXJnO1xuXHRjaGVja3BvaW50SGFuZGxlcnM7XG5cdHRpbWVvdXREdXJhdGlvbiA9IDFlMyAqIDEwO1xuXHRleGVjdXRpb247XG5cdHVzZXJGblRvUnVuO1xuXHQvKipcblx0KiBJZiB3ZSdyZSBzdXBwb3NlZCB0byBydW4gYSBwYXJ0aWN1bGFyIHN0ZXAgdmlhIGByZXF1ZXN0ZWRSdW5TdGVwYCwgdGhpc1xuXHQqIHdpbGwgYmUgYSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyBhZnRlciBubyBzdGVwcyBoYXZlIGJlZW4gZm91bmQgZm9yXG5cdCogYHRpbWVvdXREdXJhdGlvbmAgbWlsbGlzZWNvbmRzLlxuXHQqXG5cdCogSWYgd2UncmUgbm90IHN1cHBvc2VkIHRvIHJ1biBhIHBhcnRpY3VsYXIgc3RlcCwgdGhpcyB3aWxsIGJlIGB1bmRlZmluZWRgLlxuXHQqL1xuXHR0aW1lb3V0O1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0c3VwZXIob3B0aW9ucyk7XG5cdFx0dGhpcy51c2VyRm5Ub1J1biA9IHRoaXMuZ2V0VXNlckZuVG9SdW4oKTtcblx0XHR0aGlzLnN0YXRlID0gdGhpcy5jcmVhdGVFeGVjdXRpb25TdGF0ZSgpO1xuXHRcdHRoaXMuZm5BcmcgPSB0aGlzLmNyZWF0ZUZuQXJnKCk7XG5cdFx0dGhpcy5jaGVja3BvaW50SGFuZGxlcnMgPSB0aGlzLmNyZWF0ZUNoZWNrcG9pbnRIYW5kbGVycygpO1xuXHRcdHRoaXMuaW5pdGlhbGl6ZVRpbWVyKHRoaXMuc3RhdGUpO1xuXHRcdHRoaXMuZGVidWcoXCJjcmVhdGVkIG5ldyBWMiBleGVjdXRpb24gZm9yIHJ1bjtcIiwgdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAgPyBgd2FudGluZyB0byBydW4gc3RlcCBcIiR7dGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXB9XCJgIDogXCJkaXNjb3ZlcmluZyBzdGVwc1wiKTtcblx0XHR0aGlzLmRlYnVnKFwiZXhpc3Rpbmcgc3RhdGUga2V5czpcIiwgT2JqZWN0LmtleXModGhpcy5zdGF0ZS5zdGVwU3RhdGUpKTtcblx0fVxuXHQvKipcblx0KiBJZGVtcG90ZW50bHkgc3RhcnQgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgdXNlcidzIGZ1bmN0aW9uLlxuXHQqL1xuXHRzdGFydCgpIHtcblx0XHRpZiAoIXRoaXMuZXhlY3V0aW9uKSB7XG5cdFx0XHR0aGlzLmRlYnVnKFwic3RhcnRpbmcgVjIgZXhlY3V0aW9uXCIpO1xuXHRcdFx0Y29uc3QgdHJhY2VyID0gdHJhY2UuZ2V0VHJhY2VyKFwiaW5uZ2VzdFwiLCB2ZXJzaW9uKTtcblx0XHRcdHRoaXMuZXhlY3V0aW9uID0gZ2V0QXN5bmNMb2NhbFN0b3JhZ2UoKS50aGVuKChhbHMpID0+IHtcblx0XHRcdFx0cmV0dXJuIGFscy5ydW4oe1xuXHRcdFx0XHRcdGFwcDogdGhpcy5vcHRpb25zLmNsaWVudCxcblx0XHRcdFx0XHRleGVjdXRpb246IHtcblx0XHRcdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0XHRcdGluc3RhbmNlOiB0aGlzXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIHRyYWNlci5zdGFydEFjdGl2ZVNwYW4oXCJpbm5nZXN0LmV4ZWN1dGlvblwiLCAoc3BhbikgPT4ge1xuXHRcdFx0XHRcdFx0Y2xpZW50UHJvY2Vzc29yTWFwLmdldCh0aGlzLm9wdGlvbnMuY2xpZW50KT8uZGVjbGFyZVN0YXJ0aW5nU3Bhbih7XG5cdFx0XHRcdFx0XHRcdHNwYW4sXG5cdFx0XHRcdFx0XHRcdHJ1bklkOiB0aGlzLm9wdGlvbnMucnVuSWQsXG5cdFx0XHRcdFx0XHRcdHRyYWNlcGFyZW50OiB0aGlzLm9wdGlvbnMuaGVhZGVyc1toZWFkZXJLZXlzLlRyYWNlUGFyZW50XSxcblx0XHRcdFx0XHRcdFx0dHJhY2VzdGF0ZTogdGhpcy5vcHRpb25zLmhlYWRlcnNbaGVhZGVyS2V5cy5UcmFjZVN0YXRlXVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fc3RhcnQoKS50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5kZWJ1ZyhcInJlc3VsdDpcIiwgcmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHRcdH0pLmZpbmFsbHkoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRzcGFuLmVuZCgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmV4ZWN1dGlvbjtcblx0fVxuXHRhZGRNZXRhZGF0YShzdGVwSWQsIGtpbmQsIHNjb3BlLCBvcCwgdmFsdWVzKSB7XG5cdFx0aWYgKCF0aGlzLnN0YXRlLm1ldGFkYXRhKSB0aGlzLnN0YXRlLm1ldGFkYXRhID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHRjb25zdCB1cGRhdGVzID0gdGhpcy5zdGF0ZS5tZXRhZGF0YS5nZXQoc3RlcElkKSA/PyBbXTtcblx0XHR1cGRhdGVzLnB1c2goe1xuXHRcdFx0a2luZCxcblx0XHRcdHNjb3BlLFxuXHRcdFx0b3AsXG5cdFx0XHR2YWx1ZXNcblx0XHR9KTtcblx0XHR0aGlzLnN0YXRlLm1ldGFkYXRhLnNldChzdGVwSWQsIHVwZGF0ZXMpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdC8qKlxuXHQqIFN0YXJ0cyBleGVjdXRpb24gb2YgdGhlIHVzZXIncyBmdW5jdGlvbiBhbmQgdGhlIGNvcmUgbG9vcC5cblx0Ki9cblx0YXN5bmMgX3N0YXJ0KCkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBhbGxDaGVja3BvaW50SGFuZGxlciA9IHRoaXMuZ2V0Q2hlY2twb2ludEhhbmRsZXIoXCJcIik7XG5cdFx0XHR0aGlzLnN0YXRlLmhvb2tzID0gYXdhaXQgdGhpcy5pbml0aWFsaXplTWlkZGxld2FyZSgpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGFydEV4ZWN1dGlvbigpO1xuXHRcdFx0Zm9yIGF3YWl0IChjb25zdCBjaGVja3BvaW50IG9mIHRoaXMuc3RhdGUubG9vcCkge1xuXHRcdFx0XHRhd2FpdCBhbGxDaGVja3BvaW50SGFuZGxlcihjaGVja3BvaW50KTtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRDaGVja3BvaW50SGFuZGxlcihjaGVja3BvaW50LnR5cGUpKGNoZWNrcG9pbnQpO1xuXHRcdFx0XHRpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy50cmFuc2Zvcm1PdXRwdXQoeyBlcnJvciB9KTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5zdGF0ZS5sb29wLnJldHVybigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlUmVzcG9uc2U/LigpO1xuXHRcdH1cblx0XHQvKipcblx0XHQqIElmIHdlJ3JlIGhlcmUsIHRoZSBnZW5lcmF0b3Igc29tZWhvdyBmaW5pc2hlZCB3aXRob3V0IHJldHVybmluZyBhIHZhbHVlLlxuXHRcdCogVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLlxuXHRcdCovXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ29yZSBsb29wIGZpbmlzaGVkIHdpdGhvdXQgcmV0dXJuaW5nIGEgdmFsdWVcIik7XG5cdH1cblx0LyoqXG5cdCogQ3JlYXRlcyBhIGhhbmRsZXIgZm9yIGV2ZXJ5IGNoZWNrcG9pbnQgdHlwZSwgZGVmaW5pbmcgd2hhdCB0byBkbyB3aGVuIHdlXG5cdCogcmVhY2ggdGhhdCBjaGVja3BvaW50IGluIHRoZSBjb3JlIGxvb3AuXG5cdCovXG5cdGNyZWF0ZUNoZWNrcG9pbnRIYW5kbGVycygpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0XCJcIjogKGNoZWNrcG9pbnQpID0+IHtcblx0XHRcdFx0dGhpcy5kZWJ1ZyhcImNoZWNrcG9pbnQ6XCIsIGNoZWNrcG9pbnQpO1xuXHRcdFx0fSxcblx0XHRcdFwiZnVuY3Rpb24tcmVzb2x2ZWRcIjogYXN5bmMgKGNoZWNrcG9pbnQpID0+IHtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZGF0YTogY2hlY2twb2ludC5kYXRhIH0pO1xuXHRcdFx0fSxcblx0XHRcdFwiZnVuY3Rpb24tcmVqZWN0ZWRcIjogYXN5bmMgKGNoZWNrcG9pbnQpID0+IHtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtT3V0cHV0KHsgZXJyb3I6IGNoZWNrcG9pbnQuZXJyb3IgfSk7XG5cdFx0XHR9LFxuXHRcdFx0XCJzdGVwcy1mb3VuZFwiOiBhc3luYyAoeyBzdGVwcyB9KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHN0ZXBSZXN1bHQgPSBhd2FpdCB0aGlzLnRyeUV4ZWN1dGVTdGVwKHN0ZXBzKTtcblx0XHRcdFx0aWYgKHN0ZXBSZXN1bHQpIHtcblx0XHRcdFx0XHRjb25zdCB0cmFuc2Zvcm1SZXN1bHQgPSBhd2FpdCB0aGlzLnRyYW5zZm9ybU91dHB1dChzdGVwUmVzdWx0KTtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQqIFRyYW5zZm9ybWluZyBvdXRwdXQgd2lsbCBhbHdheXMgcmV0dXJuIGVpdGhlciBmdW5jdGlvbiByZWplY3Rpb24gb3Jcblx0XHRcdFx0XHQqIHJlc29sdXRpb24uIEluIG1vc3QgY2FzZXMsIHRoaXMgY2FuIGJlIGltbWVkaWF0ZWx5IHJldHVybmVkLCBidXQgaW5cblx0XHRcdFx0XHQqIHRoaXMgcGFydGljdWxhciBjYXNlIHdlIHdhbnQgdG8gaGFuZGxlIGl0IGRpZmZlcmVudGx5LlxuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0aWYgKHRyYW5zZm9ybVJlc3VsdC50eXBlID09PSBcImZ1bmN0aW9uLXJlc29sdmVkXCIpIHJldHVybiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0ZXAtcmFuXCIsXG5cdFx0XHRcdFx0XHRjdHg6IHRyYW5zZm9ybVJlc3VsdC5jdHgsXG5cdFx0XHRcdFx0XHRvcHM6IHRyYW5zZm9ybVJlc3VsdC5vcHMsXG5cdFx0XHRcdFx0XHRzdGVwOiBfaW50ZXJuYWxzLmhhc2hPcCh7XG5cdFx0XHRcdFx0XHRcdC4uLnN0ZXBSZXN1bHQsXG5cdFx0XHRcdFx0XHRcdGRhdGE6IHRyYW5zZm9ybVJlc3VsdC5kYXRhXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHJhbnNmb3JtUmVzdWx0LnR5cGUgPT09IFwiZnVuY3Rpb24tcmVqZWN0ZWRcIikge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RlcEZvclJlc3BvbnNlID0gX2ludGVybmFscy5oYXNoT3Aoe1xuXHRcdFx0XHRcdFx0XHQuLi5zdGVwUmVzdWx0LFxuXHRcdFx0XHRcdFx0XHRlcnJvcjogdHJhbnNmb3JtUmVzdWx0LmVycm9yXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGlmIChzdGVwUmVzdWx0Lm9wID09PSBTdGVwT3BDb2RlLlN0ZXBGYWlsZWQpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2VyID0gc2VyaWFsaXplRXJyb3IodHJhbnNmb3JtUmVzdWx0LmVycm9yKTtcblx0XHRcdFx0XHRcdFx0c3RlcEZvclJlc3BvbnNlLmRhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdFx0X19zZXJpYWxpemVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IHNlci5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IHNlci5tZXNzYWdlLFxuXHRcdFx0XHRcdFx0XHRcdHN0YWNrOiBcIlwiXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0ZXAtcmFuXCIsXG5cdFx0XHRcdFx0XHRcdGN0eDogdHJhbnNmb3JtUmVzdWx0LmN0eCxcblx0XHRcdFx0XHRcdFx0b3BzOiB0cmFuc2Zvcm1SZXN1bHQub3BzLFxuXHRcdFx0XHRcdFx0XHRyZXRyaWFibGU6IHRyYW5zZm9ybVJlc3VsdC5yZXRyaWFibGUsXG5cdFx0XHRcdFx0XHRcdHN0ZXA6IHN0ZXBGb3JSZXNwb25zZVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRyYW5zZm9ybVJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBuZXdTdGVwcyA9IGF3YWl0IHRoaXMuZmlsdGVyTmV3U3RlcHMoQXJyYXkuZnJvbSh0aGlzLnN0YXRlLnN0ZXBzLnZhbHVlcygpKSk7XG5cdFx0XHRcdGlmIChuZXdTdGVwcykgcmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXBzLWZvdW5kXCIsXG5cdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdFx0c3RlcHM6IG5ld1N0ZXBzXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0XCJzdGVwLW5vdC1mb3VuZFwiOiAoeyBzdGVwIH0pID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR0eXBlOiBcInN0ZXAtbm90LWZvdW5kXCIsXG5cdFx0XHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0XHRcdG9wczogdGhpcy5vcHMsXG5cdFx0XHRcdFx0c3RlcFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0Z2V0Q2hlY2twb2ludEhhbmRsZXIodHlwZSkge1xuXHRcdHJldHVybiB0aGlzLmNoZWNrcG9pbnRIYW5kbGVyc1t0eXBlXTtcblx0fVxuXHRhc3luYyB0cnlFeGVjdXRlU3RlcChzdGVwcykge1xuXHRcdGNvbnN0IGhhc2hlZFN0ZXBJZFRvUnVuID0gdGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXAgfHwgdGhpcy5nZXRFYXJseUV4ZWNSdW5TdGVwKHN0ZXBzKTtcblx0XHRpZiAoIWhhc2hlZFN0ZXBJZFRvUnVuKSByZXR1cm47XG5cdFx0Y29uc3Qgc3RlcCA9IHN0ZXBzLmZpbmQoKHN0ZXAkMSkgPT4gc3RlcCQxLmhhc2hlZElkID09PSBoYXNoZWRTdGVwSWRUb1J1biAmJiBzdGVwJDEuZm4pO1xuXHRcdGlmIChzdGVwKSByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlU3RlcChzdGVwKTtcblx0XHR0aGlzLnRpbWVvdXQ/LnJlc2V0KCk7XG5cdH1cblx0LyoqXG5cdCogR2l2ZW4gYSBsaXN0IG9mIG91dGdvaW5nIG9wcywgZGVjaWRlIGlmIHdlIGNhbiBleGVjdXRlIGFuIG9wIGVhcmx5IGFuZFxuXHQqIHJldHVybiB0aGUgSUQgb2YgdGhlIHN0ZXAgdG8gZXhlY3V0ZSBpZiB3ZSBjYW4uXG5cdCovXG5cdGdldEVhcmx5RXhlY1J1blN0ZXAoc3RlcHMpIHtcblx0XHQvKipcblx0XHQqIFdlIG1heSBoYXZlIGJlZW4gZGlzYWJsZWQgZHVlIHRvIHBhcmFsbGVsaXNtLCBpbiB3aGljaCBjYXNlIHdlIGNhbid0XG5cdFx0KiBpbW1lZGlhdGVseSBleGVjdXRlIHVubGVzcyBleHBsaWNpdGx5IHJlcXVlc3RlZC5cblx0XHQqL1xuXHRcdGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZUltbWVkaWF0ZUV4ZWN1dGlvbikgcmV0dXJuO1xuXHRcdGNvbnN0IHVuZnVsZmlsbGVkU3RlcHMgPSBzdGVwcy5maWx0ZXIoKHN0ZXApID0+ICFzdGVwLmZ1bGZpbGxlZCk7XG5cdFx0aWYgKHVuZnVsZmlsbGVkU3RlcHMubGVuZ3RoICE9PSAxKSByZXR1cm47XG5cdFx0Y29uc3Qgb3AgPSB1bmZ1bGZpbGxlZFN0ZXBzWzBdO1xuXHRcdGlmIChvcCAmJiBvcC5vcCA9PT0gU3RlcE9wQ29kZS5TdGVwUGxhbm5lZCkgcmV0dXJuIG9wLmhhc2hlZElkO1xuXHR9XG5cdGFzeW5jIGZpbHRlck5ld1N0ZXBzKGZvdW5kU3RlcHMpIHtcblx0XHRpZiAodGhpcy5vcHRpb25zLnJlcXVlc3RlZFJ1blN0ZXApIHJldHVybjtcblx0XHQvKipcblx0XHQqIEdhdGhlciBhbnkgc3RlcHMgdGhhdCBhcmVuJ3QgbWVtb2l6ZWQgYW5kIHJlcG9ydCB0aGVtLlxuXHRcdCovXG5cdFx0Y29uc3QgbmV3U3RlcHMgPSBmb3VuZFN0ZXBzLmZpbHRlcigoc3RlcCkgPT4gIXN0ZXAuZnVsZmlsbGVkKTtcblx0XHRpZiAoIW5ld1N0ZXBzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdC8qKlxuXHRcdCogV2FybiBpZiB3ZSd2ZSBmb3VuZCBuZXcgc3RlcHMgYnV0IGhhdmVuJ3QgeWV0IHNlZW4gYWxsIHByZXZpb3VzXG5cdFx0KiBzdGVwcy4gVGhpcyBtYXkgaW5kaWNhdGUgdGhhdCBzdGVwIHByZXNlbmNlIGlzbid0IGRldGVybWluYXRlLlxuXHRcdCovXG5cdFx0bGV0IGtub3duU3RlcHMgPSAwO1xuXHRcdGZvciAoY29uc3Qgc3RlcCBvZiBmb3VuZFN0ZXBzKSBpZiAoc3RlcC5mdWxmaWxsZWQpIGtub3duU3RlcHMrKztcblx0XHRpZiAoISh0aGlzLnN0YXRlLnN0ZXBzVG9GdWxmaWxsID09PSBrbm93blN0ZXBzKSkgYXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudFtcIndhcm5NZXRhZGF0YVwiXSh7IHJ1bl9pZDogdGhpcy5vcHRpb25zLnJ1bklkIH0sIEVyckNvZGUuTk9OREVURVJNSU5JU1RJQ19TVEVQUywgcHJldHR5RXJyb3Ioe1xuXHRcdFx0dHlwZTogXCJ3YXJuXCIsXG5cdFx0XHR3aGF0SGFwcGVuZWQ6IFwiRnVuY3Rpb24gbWF5IGJlIGluZGV0ZXJtaW5hdGVcIixcblx0XHRcdHdoeTogXCJXZSBmb3VuZCBuZXcgc3RlcHMgYmVmb3JlIHNlZWluZyBhbGwgcHJldmlvdXMgc3RlcHMsIHdoaWNoIG1heSBpbmRpY2F0ZSB0aGF0IHRoZSBmdW5jdGlvbiBpcyBub24tZGV0ZXJtaW5pc3RpYy5cIixcblx0XHRcdGNvbnNlcXVlbmNlczogXCJUaGlzIG1heSBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW91ciBhcyBJbm5nZXN0IGV4ZWN1dGVzIHlvdXIgZnVuY3Rpb24uXCIsXG5cdFx0XHRyZWFzc3VyYW5jZTogXCJUaGlzIGlzIGV4cGVjdGVkIGlmIGEgZnVuY3Rpb24gaXMgdXBkYXRlZCBpbiB0aGUgbWlkZGxlIG9mIGEgcnVuLCBidXQgbWF5IGluZGljYXRlIGEgYnVnIGlmIG5vdC5cIlxuXHRcdH0pKTtcblx0XHQvKipcblx0XHQqIFdlJ3JlIGZpbmlzaGluZyB1cDsgbGV0J3MgdHJpZ2dlciB0aGUgbGFzdCBvZiB0aGUgaG9va3MuXG5cdFx0Ki9cblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyRXhlY3V0aW9uPy4oKTtcblx0XHRjb25zdCBzdGVwTGlzdCA9IG5ld1N0ZXBzLm1hcCgoc3RlcCkgPT4gKHtcblx0XHRcdGRpc3BsYXlOYW1lOiBzdGVwLmRpc3BsYXlOYW1lLFxuXHRcdFx0b3A6IHN0ZXAub3AsXG5cdFx0XHRpZDogc3RlcC5oYXNoZWRJZCxcblx0XHRcdG5hbWU6IHN0ZXAubmFtZSxcblx0XHRcdG9wdHM6IHN0ZXAub3B0cyxcblx0XHRcdHVzZXJsYW5kOiBzdGVwLnVzZXJsYW5kXG5cdFx0fSkpO1xuXHRcdC8qKlxuXHRcdCogV2UgYWxzbyBydW4gYG9uU2VuZEV2ZW50YCBtaWRkbGV3YXJlIGhvb2tzIGFnYWluc3QgYHN0ZXAuaW52b2tlKClgIHN0ZXBzXG5cdFx0KiB0byBlbnN1cmUgdGhhdCB0aGVpciBgZGF0YWAgaXMgdHJhbnNmb3JtZWQgY29ycmVjdGx5LlxuXHRcdCovXG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMudHJhbnNmb3JtTmV3U3RlcHMoc3RlcExpc3QpO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBhbnkgbmV3bHktZm91bmQgc3RlcHMgYmVmb3JlIHJldHVybmluZyB0aGVtIHRvXG5cdCogYW4gSW5uZ2VzdCBTZXJ2ZXIuXG5cdCovXG5cdGFzeW5jIHRyYW5zZm9ybU5ld1N0ZXBzKHN0ZXBzKSB7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKHN0ZXBzLm1hcChhc3luYyAoc3RlcCkgPT4ge1xuXHRcdFx0aWYgKHN0ZXAub3AgIT09IFN0ZXBPcENvZGUuSW52b2tlRnVuY3Rpb24pIHJldHVybiBzdGVwO1xuXHRcdFx0LyoqXG5cdFx0XHQqIEZvciBlYWNoIGV2ZW50IGJlaW5nIHNlbnQsIGNyZWF0ZSBhIG5ldyBgb25TZW5kRXZlbnRgIGhvb2sgc3RhY2sgdG9cblx0XHRcdCogcHJvY2VzcyBpdC4gV2UgZG8gdGhpcyBhcyBtaWRkbGV3YXJlIGhvb2tzIGFyZSBpbnRlbmRlZCB0byBydW4gb25jZVxuXHRcdFx0KiBkdXJpbmcgZWFjaCBsaWZlY3ljbGUgKG9uRnVuY3Rpb25SdW4gb3Igb25TZW5kRXZlbnQpIGFuZCBoZXJlLCBhIGhvb2tcblx0XHRcdCogaXMgcnVuIGZvciBldmVyeSBzaW5nbGUgZXZlbnQuXG5cdFx0XHQqXG5cdFx0XHQqIFRoaXMgaXMgZG9uZSBiZWNhdXNlIGEgZGV2ZWxvcGVyIGNhbiB1c2UgdGhpcyBob29rIHRvIGZpbHRlciBvdXRcblx0XHRcdCogZXZlbnRzIGVudGlyZWx5OyBpZiB3ZSBiYXRjaCBhbGwgb2YgdGhlIGV2ZW50cyB0b2dldGhlciwgd2UgY2FuJ3Rcblx0XHRcdCogdGVsbCB3aGljaCBvbmVzIHdlcmUgZmlsdGVyZWQgb3V0IGlmIHdlJ3JlIHByb2Nlc3NpbmcgPjEgaW52b2NhdGlvblxuXHRcdFx0KiBoZXJlLlxuXHRcdFx0Ki9cblx0XHRcdGNvbnN0IHRyYW5zZm9ybWVkUGF5bG9hZCA9IGF3YWl0IChhd2FpdCBnZXRIb29rU3RhY2sodGhpcy5vcHRpb25zLmZuW1wibWlkZGxld2FyZVwiXSwgXCJvblNlbmRFdmVudFwiLCB2b2lkIDAsIHtcblx0XHRcdFx0dHJhbnNmb3JtSW5wdXQ6IChwcmV2LCBvdXRwdXQpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Li4ucHJldixcblx0XHRcdFx0XHRcdC4uLm91dHB1dFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRyYW5zZm9ybU91dHB1dDogKHByZXYsIG91dHB1dCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiB7IHJlc3VsdDoge1xuXHRcdFx0XHRcdFx0Li4ucHJldi5yZXN1bHQsXG5cdFx0XHRcdFx0XHQuLi5vdXRwdXQ/LnJlc3VsdFxuXHRcdFx0XHRcdH0gfTtcblx0XHRcdFx0fVxuXHRcdFx0fSkpLnRyYW5zZm9ybUlucHV0Py4oeyBwYXlsb2FkczogW3tcblx0XHRcdFx0Li4uc3RlcC5vcHRzPy5wYXlsb2FkID8/IHt9LFxuXHRcdFx0XHRuYW1lOiBpbnRlcm5hbEV2ZW50cy5GdW5jdGlvbkludm9rZWRcblx0XHRcdH1dIH0pO1xuXHRcdFx0Y29uc3QgbmV3UGF5bG9hZCA9IGludm9rZVBheWxvYWRTY2hlbWEucGFyc2UodHJhbnNmb3JtZWRQYXlsb2FkPy5wYXlsb2Fkcz8uWzBdID8/IHt9KTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLnN0ZXAsXG5cdFx0XHRcdG9wdHM6IHtcblx0XHRcdFx0XHQuLi5zdGVwLm9wdHMsXG5cdFx0XHRcdFx0cGF5bG9hZDoge1xuXHRcdFx0XHRcdFx0Li4uc3RlcC5vcHRzPy5wYXlsb2FkID8/IHt9LFxuXHRcdFx0XHRcdFx0Li4ubmV3UGF5bG9hZFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9KSk7XG5cdH1cblx0YXN5bmMgZXhlY3V0ZVN0ZXAoeyBpZCwgbmFtZSwgb3B0cywgZm4sIGRpc3BsYXlOYW1lLCB1c2VybGFuZCB9KSB7XG5cdFx0dGhpcy50aW1lb3V0Py5jbGVhcigpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0Y29uc3Qgb3V0Z29pbmdPcCA9IHtcblx0XHRcdGlkLFxuXHRcdFx0b3A6IFN0ZXBPcENvZGUuU3RlcFJ1bixcblx0XHRcdG5hbWUsXG5cdFx0XHRvcHRzLFxuXHRcdFx0ZGlzcGxheU5hbWUsXG5cdFx0XHR1c2VybGFuZFxuXHRcdH07XG5cdFx0dGhpcy5zdGF0ZS5leGVjdXRpbmdTdGVwID0gb3V0Z29pbmdPcDtcblx0XHRjb25zdCBzdG9yZSA9IGF3YWl0IGdldEFzeW5jQ3R4KCk7XG5cdFx0aWYgKHN0b3JlPy5leGVjdXRpb24pIHN0b3JlLmV4ZWN1dGlvbi5leGVjdXRpbmdTdGVwID0ge1xuXHRcdFx0aWQsXG5cdFx0XHRuYW1lOiBkaXNwbGF5TmFtZVxuXHRcdH07XG5cdFx0dGhpcy5kZWJ1ZyhgZXhlY3V0aW5nIHN0ZXAgXCIke2lkfVwiYCk7XG5cdFx0cmV0dXJuIHJ1bkFzUHJvbWlzZShmbikuZmluYWxseShhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoc3RvcmU/LmV4ZWN1dGlvbikgZGVsZXRlIHN0b3JlLmV4ZWN1dGlvbi5leGVjdXRpbmdTdGVwO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYWZ0ZXJFeGVjdXRpb24/LigpO1xuXHRcdH0pLnRoZW4oKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLm91dGdvaW5nT3AsXG5cdFx0XHRcdGRhdGFcblx0XHRcdH07XG5cdFx0fSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0XHRsZXQgZXJyb3JJc1JldHJpYWJsZSA9IHRydWU7XG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb25SZXRyaWFibGVFcnJvcikgZXJyb3JJc1JldHJpYWJsZSA9IGZhbHNlO1xuXHRcdFx0ZWxzZSBpZiAodGhpcy5mbkFyZy5tYXhBdHRlbXB0cyAmJiB0aGlzLmZuQXJnPy5tYXhBdHRlbXB0cyAtIDEgPT09IHRoaXMuZm5BcmcuYXR0ZW1wdCkgZXJyb3JJc1JldHJpYWJsZSA9IGZhbHNlO1xuXHRcdFx0aWYgKGVycm9ySXNSZXRyaWFibGUpIHJldHVybiB7XG5cdFx0XHRcdC4uLm91dGdvaW5nT3AsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBFcnJvcixcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdH07XG5cdFx0XHRlbHNlIHJldHVybiB7XG5cdFx0XHRcdC4uLm91dGdvaW5nT3AsXG5cdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBGYWlsZWQsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIFN0YXJ0cyBleGVjdXRpb24gb2YgdGhlIHVzZXIncyBmdW5jdGlvbiwgaW5jbHVkaW5nIHRyaWdnZXJpbmcgY2hlY2twb2ludHNcblx0KiBhbmQgbWlkZGxld2FyZSBob29rcyB3aGVyZSBhcHByb3ByaWF0ZS5cblx0Ki9cblx0YXN5bmMgc3RhcnRFeGVjdXRpb24oKSB7XG5cdFx0LyoqXG5cdFx0KiBNdXRhdGUgaW5wdXQgYXMgbmVjY2Vzc2FyeSBiYXNlZCBvbiBtaWRkbGV3YXJlLlxuXHRcdCovXG5cdFx0YXdhaXQgdGhpcy50cmFuc2Zvcm1JbnB1dCgpO1xuXHRcdC8qKlxuXHRcdCogU3RhcnQgdGhlIHRpbWVyIHRvIHRpbWUgb3V0IHRoZSBydW4gaWYgbmVlZGVkLlxuXHRcdCovXG5cdFx0dGhpcy50aW1lb3V0Py5zdGFydCgpO1xuXHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZU1lbW9pemF0aW9uPy4oKTtcblx0XHQvKipcblx0XHQqIElmIHdlIGhhZCBubyBzdGF0ZSB0byBiZWdpbiB3aXRoLCBpbW1lZGlhdGVseSBlbmQgdGhlIG1lbW9pemF0aW9uIHBoYXNlLlxuXHRcdCovXG5cdFx0aWYgKHRoaXMuc3RhdGUuYWxsU3RhdGVVc2VkKCkpIHtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0YXdhaXQgdGhpcy5zdGF0ZS5ob29rcz8uYmVmb3JlRXhlY3V0aW9uPy4oKTtcblx0XHR9XG5cdFx0LyoqXG5cdFx0KiBUcmlnZ2VyIHRoZSB1c2VyJ3MgZnVuY3Rpb24uXG5cdFx0Ki9cblx0XHRydW5Bc1Byb21pc2UoKCkgPT4gdGhpcy51c2VyRm5Ub1J1bih0aGlzLmZuQXJnKSkuZmluYWxseShhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0fSkudGhlbigoZGF0YSkgPT4ge1xuXHRcdFx0dGhpcy5zdGF0ZS5zZXRDaGVja3BvaW50KHtcblx0XHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZXNvbHZlZFwiLFxuXHRcdFx0XHRkYXRhXG5cdFx0XHR9KTtcblx0XHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdHRoaXMuc3RhdGUuc2V0Q2hlY2twb2ludCh7XG5cdFx0XHRcdHR5cGU6IFwiZnVuY3Rpb24tcmVqZWN0ZWRcIixcblx0XHRcdFx0ZXJyb3Jcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBpbnB1dCBiZWZvcmUgcnVubmluZy5cblx0Ki9cblx0YXN5bmMgdHJhbnNmb3JtSW5wdXQoKSB7XG5cdFx0Y29uc3QgaW5wdXRNdXRhdGlvbnMgPSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy50cmFuc2Zvcm1JbnB1dD8uKHtcblx0XHRcdGN0eDogeyAuLi50aGlzLmZuQXJnIH0sXG5cdFx0XHRzdGVwczogT2JqZWN0LnZhbHVlcyh0aGlzLnN0YXRlLnN0ZXBTdGF0ZSksXG5cdFx0XHRmbjogdGhpcy5vcHRpb25zLmZuLFxuXHRcdFx0cmVxQXJnczogdGhpcy5vcHRpb25zLnJlcUFyZ3Ncblx0XHR9KTtcblx0XHRpZiAoaW5wdXRNdXRhdGlvbnM/LmN0eCkgdGhpcy5mbkFyZyA9IGlucHV0TXV0YXRpb25zLmN0eDtcblx0XHRpZiAoaW5wdXRNdXRhdGlvbnM/LnN0ZXBzKSB0aGlzLnN0YXRlLnN0ZXBTdGF0ZSA9IE9iamVjdC5mcm9tRW50cmllcyhpbnB1dE11dGF0aW9ucy5zdGVwcy5tYXAoKHN0ZXApID0+IFtzdGVwLmlkLCBzdGVwXSkpO1xuXHR9XG5cdC8qKlxuXHQqIFVzaW5nIG1pZGRsZXdhcmUsIHRyYW5zZm9ybSBvdXRwdXQgYmVmb3JlIHJldHVybmluZy5cblx0Ki9cblx0YXN5bmMgdHJhbnNmb3JtT3V0cHV0KGRhdGFPckVycm9yKSB7XG5cdFx0Y29uc3Qgb3V0cHV0ID0geyAuLi5kYXRhT3JFcnJvciB9O1xuXHRcdGNvbnN0IGlzU3RlcEV4ZWN1dGlvbiA9IEJvb2xlYW4odGhpcy5zdGF0ZS5leGVjdXRpbmdTdGVwKTtcblx0XHRjb25zdCB0cmFuc2Zvcm1lZE91dHB1dCA9IGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LnRyYW5zZm9ybU91dHB1dD8uKHtcblx0XHRcdHJlc3VsdDogeyAuLi5vdXRwdXQgfSxcblx0XHRcdHN0ZXA6IHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcFxuXHRcdH0pO1xuXHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHtcblx0XHRcdC4uLm91dHB1dCxcblx0XHRcdC4uLnRyYW5zZm9ybWVkT3V0cHV0Py5yZXN1bHRcblx0XHR9O1xuXHRcdGlmICghaXNTdGVwRXhlY3V0aW9uKSBhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5maW5pc2hlZD8uKHsgcmVzdWx0OiB7IC4uLnR5cGVvZiBlcnJvciAhPT0gXCJ1bmRlZmluZWRcIiA/IHsgZXJyb3IgfSA6IHsgZGF0YSB9IH0gfSk7XG5cdFx0aWYgKHR5cGVvZiBlcnJvciAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0LyoqXG5cdFx0XHQqIEVuc3VyZSB3ZSBnaXZlIG1pZGRsZXdhcmUgdGhlIGNoYW5jZSB0byBkZWNpZGUgb24gcmV0cmlhYmxlIGJlaGF2aW91clxuXHRcdFx0KiBieSBsb29raW5nIGF0IHRoZSBlcnJvciByZXR1cm5lZCBmcm9tIG91dHB1dCB0cmFuc2Zvcm1hdGlvbi5cblx0XHRcdCovXG5cdFx0XHRsZXQgcmV0cmlhYmxlID0gIShlcnJvciBpbnN0YW5jZW9mIE5vblJldHJpYWJsZUVycm9yIHx8IGVycm9yIGluc3RhbmNlb2YgU3RlcEVycm9yICYmIGVycm9yID09PSB0aGlzLnN0YXRlLnJlY2VudGx5UmVqZWN0ZWRTdGVwRXJyb3IpO1xuXHRcdFx0aWYgKHJldHJpYWJsZSAmJiBlcnJvciBpbnN0YW5jZW9mIFJldHJ5QWZ0ZXJFcnJvcikgcmV0cmlhYmxlID0gZXJyb3IucmV0cnlBZnRlcjtcblx0XHRcdGNvbnN0IHNlcmlhbGl6ZWRFcnJvciA9IG1pbmlmeVByZXR0eUVycm9yKHNlcmlhbGl6ZUVycm9yKGVycm9yKSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiBcImZ1bmN0aW9uLXJlamVjdGVkXCIsXG5cdFx0XHRcdGN0eDogdGhpcy5mbkFyZyxcblx0XHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdFx0ZXJyb3I6IHNlcmlhbGl6ZWRFcnJvcixcblx0XHRcdFx0cmV0cmlhYmxlXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJmdW5jdGlvbi1yZXNvbHZlZFwiLFxuXHRcdFx0Y3R4OiB0aGlzLmZuQXJnLFxuXHRcdFx0b3BzOiB0aGlzLm9wcyxcblx0XHRcdGRhdGE6IHVuZGVmaW5lZFRvTnVsbChkYXRhKVxuXHRcdH07XG5cdH1cblx0Y3JlYXRlRXhlY3V0aW9uU3RhdGUoKSB7XG5cdFx0Y29uc3QgZCA9IGNyZWF0ZURlZmVycmVkUHJvbWlzZVdpdGhTdGFjaygpO1xuXHRcdGxldCBjaGVja3BvaW50UmVzb2x2ZSA9IGQuZGVmZXJyZWQucmVzb2x2ZTtcblx0XHRjb25zdCBjaGVja3BvaW50UmVzdWx0cyA9IGQucmVzdWx0cztcblx0XHRjb25zdCBsb29wID0gKGFzeW5jIGZ1bmN0aW9uKiAoY2xlYW5VcCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSAoYXdhaXQgY2hlY2twb2ludFJlc3VsdHMubmV4dCgpKS52YWx1ZTtcblx0XHRcdFx0XHRpZiAocmVzKSB5aWVsZCByZXM7XG5cdFx0XHRcdH1cblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdGNsZWFuVXA/LigpO1xuXHRcdFx0fVxuXHRcdH0pKCgpID0+IHtcblx0XHRcdHRoaXMudGltZW91dD8uY2xlYXIoKTtcblx0XHRcdGNoZWNrcG9pbnRSZXN1bHRzLnJldHVybigpO1xuXHRcdH0pO1xuXHRcdGNvbnN0IHN0ZXBzVG9GdWxmaWxsID0gT2JqZWN0LmtleXModGhpcy5vcHRpb25zLnN0ZXBTdGF0ZSkubGVuZ3RoO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzdGVwU3RhdGU6IHRoaXMub3B0aW9ucy5zdGVwU3RhdGUsXG5cdFx0XHRzdGVwc1RvRnVsZmlsbCxcblx0XHRcdHN0ZXBzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLFxuXHRcdFx0bG9vcCxcblx0XHRcdGhhc1N0ZXBzOiBCb29sZWFuKHN0ZXBzVG9GdWxmaWxsKSxcblx0XHRcdHN0ZXBDb21wbGV0aW9uT3JkZXI6IFsuLi50aGlzLm9wdGlvbnMuc3RlcENvbXBsZXRpb25PcmRlcl0sXG5cdFx0XHRyZW1haW5pbmdTdGVwc1RvQmVTZWVuOiBuZXcgU2V0KHRoaXMub3B0aW9ucy5zdGVwQ29tcGxldGlvbk9yZGVyKSxcblx0XHRcdHNldENoZWNrcG9pbnQ6IChjaGVja3BvaW50KSA9PiB7XG5cdFx0XHRcdCh7cmVzb2x2ZTogY2hlY2twb2ludFJlc29sdmV9ID0gY2hlY2twb2ludFJlc29sdmUoY2hlY2twb2ludCkpO1xuXHRcdFx0fSxcblx0XHRcdGFsbFN0YXRlVXNlZDogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5zdGF0ZS5yZW1haW5pbmdTdGVwc1RvQmVTZWVuLnNpemUgPT09IDA7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRnZXQgb3BzKCkge1xuXHRcdHJldHVybiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5zdGF0ZS5zdGVwcyk7XG5cdH1cblx0Y3JlYXRlRm5BcmcoKSB7XG5cdFx0Y29uc3Qgc3RlcCA9IHRoaXMuY3JlYXRlU3RlcFRvb2xzKCk7XG5cdFx0bGV0IGZuQXJnID0ge1xuXHRcdFx0Li4udGhpcy5vcHRpb25zLmRhdGEsXG5cdFx0XHRzdGVwXG5cdFx0fTtcblx0XHQvKipcblx0XHQqIEhhbmRsZSB1c2Ugb2YgdGhlIGBvbkZhaWx1cmVgIG9wdGlvbiBieSBkZXNlcmlhbGl6aW5nIHRoZSBlcnJvci5cblx0XHQqL1xuXHRcdGlmICh0aGlzLm9wdGlvbnMuaXNGYWlsdXJlSGFuZGxlcikge1xuXHRcdFx0Y29uc3QgZXZlbnREYXRhID0gei5vYmplY3QoeyBlcnJvcjoganNvbkVycm9yU2NoZW1hIH0pLnBhcnNlKGZuQXJnLmV2ZW50Py5kYXRhKTtcblx0XHRcdGZuQXJnID0ge1xuXHRcdFx0XHQuLi5mbkFyZyxcblx0XHRcdFx0ZXJyb3I6IGRlc2VyaWFsaXplRXJyb3IoZXZlbnREYXRhLmVycm9yKVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy50cmFuc2Zvcm1DdHg/LihmbkFyZykgPz8gZm5Bcmc7XG5cdH1cblx0Y3JlYXRlU3RlcFRvb2xzKCkge1xuXHRcdC8qKlxuXHRcdCogQSBsaXN0IG9mIHN0ZXBzIHRoYXQgaGF2ZSBiZWVuIGZvdW5kIGFuZCBhcmUgYmVpbmcgcm9sbGVkIHVwIGJlZm9yZSBiZWluZ1xuXHRcdCogcmVwb3J0ZWQgdG8gdGhlIGNvcmUgbG9vcC5cblx0XHQqL1xuXHRcdGNvbnN0IGZvdW5kU3RlcHNUb1JlcG9ydCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0LyoqXG5cdFx0KiBBIG1hcCBvZiB0aGUgc3Vic2V0IG9mIGZvdW5kIHN0ZXBzIHRvIHJlcG9ydCB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG5cdFx0KiBoYW5kbGVkLiBVc2VkIGZvciBmYXN0IGFjY2VzcyB0byBzdGVwcyB0aGF0IG5lZWQgdG8gYmUgaGFuZGxlZCBpbiBvcmRlci5cblx0XHQqL1xuXHRcdGNvbnN0IHVuaGFuZGxlZEZvdW5kU3RlcHNUb1JlcG9ydCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0LyoqXG5cdFx0KiBBIG1hcCBvZiB0aGUgbGF0ZXN0IHNlcXVlbnRpYWwgc3RlcCBpbmRleGVzIGZvdW5kIGZvciBlYWNoIHN0ZXAgSUQuIFVzZWRcblx0XHQqIHRvIGVuc3VyZSB0aGF0IHdlIGRvbid0IGluZGV4IHN0ZXBzIGluIHBhcmFsbGVsLlxuXHRcdCpcblx0XHQqIE5vdGUgdGhhdCB0aGVzZSBtdXN0IGJlIHNlcXVlbnRpYWw7IGlmIHdlJ3ZlIHNlZW4gb3IgYXNzaWduZWQgYGE6MWAsXG5cdFx0KiBgYToyYCBhbmQgYGE6NGAsIHRoZSBsYXRlc3Qgc2VxdWVudGlhbCBzdGVwIGluZGV4IGlzIGAyYC5cblx0XHQqXG5cdFx0Ki9cblx0XHRjb25zdCBleHBlY3RlZE5leHRTdGVwSW5kZXhlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0LyoqXG5cdFx0KiBBIHByb21pc2UgdGhhdCdzIHVzZWQgdG8gZW5zdXJlIHRoYXQgc3RlcCByZXBvcnRpbmcgY2Fubm90IGJlIHJ1biBtb3JlIHRoYW5cblx0XHQqIG9uY2UgaW4gYSBnaXZlbiBhc3luY2hyb25vdXMgdGltZSBzcGFuLlxuXHRcdCovXG5cdFx0bGV0IGZvdW5kU3RlcHNSZXBvcnRQcm9taXNlO1xuXHRcdC8qKlxuXHRcdCogQSBwcm9taXNlIHRoYXQncyB1c2VkIHRvIHJlcHJlc2VudCBtaWRkbGV3YXJlIGhvb2tzIHJ1bm5pbmcgYmVmb3JlXG5cdFx0KiBleGVjdXRpb24uXG5cdFx0Ki9cblx0XHRsZXQgYmVmb3JlRXhlY0hvb2tzUHJvbWlzZTtcblx0XHQvKipcblx0XHQqIEEgaGVscGVyIHVzZWQgdG8gcmVwb3J0IHN0ZXBzIHRvIHRoZSBjb3JlIGxvb3AuIFVzZWQgYWZ0ZXIgYWRkaW5nIGFuIGl0ZW1cblx0XHQqIHRvIGBmb3VuZFN0ZXBzVG9SZXBvcnRgLlxuXHRcdCovXG5cdFx0Y29uc3QgcmVwb3J0TmV4dFRpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoZm91bmRTdGVwc1JlcG9ydFByb21pc2UpIHJldHVybjtcblx0XHRcdGZvdW5kU3RlcHNSZXBvcnRQcm9taXNlID0gcmVzb2x2ZU5leHRUaWNrKCkudGhlbigoKSA9PiBiZWZvcmVFeGVjSG9va3NQcm9taXNlKS50aGVuKCgpID0+IHtcblx0XHRcdFx0Zm91bmRTdGVwc1JlcG9ydFByb21pc2UgPSB2b2lkIDA7XG5cdFx0XHRcdGZvciAoY29uc3QgW2hhc2hlZElkLCBzdGVwXSBvZiB1bmhhbmRsZWRGb3VuZFN0ZXBzVG9SZXBvcnQpIGlmIChzdGVwLmhhbmRsZSgpKSB7XG5cdFx0XHRcdFx0dW5oYW5kbGVkRm91bmRTdGVwc1RvUmVwb3J0LmRlbGV0ZShoYXNoZWRJZCk7XG5cdFx0XHRcdFx0aWYgKHN0ZXAuZnVsZmlsbGVkKSBmb3VuZFN0ZXBzVG9SZXBvcnQuZGVsZXRlKHN0ZXAuaWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChmb3VuZFN0ZXBzVG9SZXBvcnQuc2l6ZSkge1xuXHRcdFx0XHRcdGNvbnN0IHN0ZXBzID0gWy4uLmZvdW5kU3RlcHNUb1JlcG9ydC52YWx1ZXMoKV07XG5cdFx0XHRcdFx0Zm91bmRTdGVwc1RvUmVwb3J0LmNsZWFyKCk7XG5cdFx0XHRcdFx0dGhpcy5zdGF0ZS5zZXRDaGVja3BvaW50KHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RlcHMtZm91bmRcIixcblx0XHRcdFx0XHRcdHN0ZXBzXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9O1xuXHRcdC8qKlxuXHRcdCogQSBoZWxwZXIgdXNlZCB0byBwdXNoIGEgc3RlcCB0byB0aGUgbGlzdCBvZiBzdGVwcyB0byByZXBvcnQuXG5cdFx0Ki9cblx0XHRjb25zdCBwdXNoU3RlcFRvUmVwb3J0ID0gKHN0ZXApID0+IHtcblx0XHRcdGZvdW5kU3RlcHNUb1JlcG9ydC5zZXQoc3RlcC5pZCwgc3RlcCk7XG5cdFx0XHR1bmhhbmRsZWRGb3VuZFN0ZXBzVG9SZXBvcnQuc2V0KHN0ZXAuaGFzaGVkSWQsIHN0ZXApO1xuXHRcdFx0cmVwb3J0TmV4dFRpY2soKTtcblx0XHR9O1xuXHRcdGNvbnN0IHN0ZXBIYW5kbGVyID0gYXN5bmMgKHsgYXJncywgbWF0Y2hPcCwgb3B0cyB9KSA9PiB7XG5cdFx0XHRhd2FpdCBiZWZvcmVFeGVjSG9va3NQcm9taXNlO1xuXHRcdFx0Y29uc3Qgb3BJZCA9IG1hdGNoT3AoZ2V0U3RlcE9wdGlvbnMoYXJnc1swXSksIC4uLmFyZ3Muc2xpY2UoMSkpO1xuXHRcdFx0aWYgKHRoaXMuc3RhdGUuZXhlY3V0aW5nU3RlcClcbiAvKipcblx0XHRcdCogSWYgYSBzdGVwIGlzIGZvdW5kIGFmdGVyIGFzeW5jaHJvbm91cyBhY3Rpb25zIGR1cmluZyBhbm90aGVyIHN0ZXAnc1xuXHRcdFx0KiBleGVjdXRpb24sIGV2ZXJ5dGhpbmcgaXMgZmluZS4gVGhlIHByb2JsZW0gaGVyZSBpcyBpZiB3ZSd2ZSBmb3VuZFxuXHRcdFx0KiB0aGF0IGEgc3RlcCBuZXN0ZWQgaW5zaWRlIGFub3RoZXIgYSBzdGVwLCB3aGljaCBpcyBzb21ldGhpbmcgd2UgZG9uJ3Rcblx0XHRcdCogc3VwcG9ydCBhdCB0aGUgdGltZSBvZiB3cml0aW5nLlxuXHRcdFx0KlxuXHRcdFx0KiBJbiB0aGlzIGNhc2UsIHdlIGNvdWxkIHVzZSBzb21ldGhpbmcgbGlrZSBBc3luYyBIb29rcyB0byB1bmRlcnN0YW5kXG5cdFx0XHQqIGhvdyB0aGUgc3RlcCBpcyBiZWluZyB0cmlnZ2VyZWQsIHRob3VnaCB0aGlzIGlzbid0IGF2YWlsYWJsZSBpbiBhbGxcblx0XHRcdCogZW52aXJvbm1lbnRzLlxuXHRcdFx0KlxuXHRcdFx0KiBUaGVyZWZvcmUsIHdlJ2xsIG9ubHkgc2hvdyBhIHdhcm5pbmcgaGVyZSB0byBpbmRpY2F0ZSB0aGF0IHRoaXMgaXNcblx0XHRcdCogcG90ZW50aWFsbHkgYW4gaXNzdWUuXG5cdFx0XHQqL1xuXHRcdFx0dGhpcy5vcHRpb25zLmNsaWVudFtcIndhcm5NZXRhZGF0YVwiXSh7IHJ1bl9pZDogdGhpcy5vcHRpb25zLnJ1bklkIH0sIEVyckNvZGUuTkVTVElOR19TVEVQUywgcHJldHR5RXJyb3Ioe1xuXHRcdFx0XHR3aGF0SGFwcGVuZWQ6IGBXZSBkZXRlY3RlZCB0aGF0IHlvdSBoYXZlIG5lc3RlZCBcXGBzdGVwLipcXGAgdG9vbGluZyBpbiBcXGAke29wSWQuZGlzcGxheU5hbWUgPz8gb3BJZC5pZH1cXGBgLFxuXHRcdFx0XHRjb25zZXF1ZW5jZXM6IFwiTmVzdGluZyBgc3RlcC4qYCB0b29saW5nIGlzIG5vdCBzdXBwb3J0ZWQuXCIsXG5cdFx0XHRcdHR5cGU6IFwid2FyblwiLFxuXHRcdFx0XHRyZWFzc3VyYW5jZTogXCJJdCdzIHBvc3NpYmxlIHRvIHNlZSB0aGlzIHdhcm5pbmcgaWYgc3RlcHMgYXJlIHNlcGFyYXRlZCBieSByZWd1bGFyIGFzeW5jaHJvbm91cyBjYWxscywgd2hpY2ggaXMgZmluZS5cIixcblx0XHRcdFx0c3RhY2s6IHRydWUsXG5cdFx0XHRcdHRvRml4Tm93OiBcIk1ha2Ugc3VyZSB5b3UncmUgbm90IHVzaW5nIGBzdGVwLipgIHRvb2xpbmcgaW5zaWRlIG9mIG90aGVyIGBzdGVwLipgIHRvb2xpbmcuIElmIHlvdSBuZWVkIHRvIGNvbXBvc2Ugc3RlcHMgdG9nZXRoZXIsIHlvdSBjYW4gY3JlYXRlIGEgbmV3IGFzeW5jIGZ1bmN0aW9uIGFuZCBjYWxsIGl0IGZyb20gd2l0aGluIHlvdXIgc3RlcCBmdW5jdGlvbiwgb3IgdXNlIHByb21pc2UgY2hhaW5pbmcuXCIsXG5cdFx0XHRcdGNvZGU6IEVyckNvZGUuTkVTVElOR19TVEVQU1xuXHRcdFx0fSkpO1xuXHRcdFx0aWYgKHRoaXMuc3RhdGUuc3RlcHMuaGFzKG9wSWQuaWQpKSB7XG5cdFx0XHRcdGNvbnN0IG9yaWdpbmFsSWQgPSBvcElkLmlkO1xuXHRcdFx0XHRjb25zdCBleHBlY3RlZE5leHRJbmRleCA9IGV4cGVjdGVkTmV4dFN0ZXBJbmRleGVzLmdldChvcmlnaW5hbElkKSA/PyAxO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gZXhwZWN0ZWROZXh0SW5kZXg7OyBpKyspIHtcblx0XHRcdFx0XHRjb25zdCBuZXdJZCA9IG9yaWdpbmFsSWQgKyBTVEVQX0lOREVYSU5HX1NVRkZJWCArIGk7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnN0YXRlLnN0ZXBzLmhhcyhuZXdJZCkpIHtcblx0XHRcdFx0XHRcdGV4cGVjdGVkTmV4dFN0ZXBJbmRleGVzLnNldChvcmlnaW5hbElkLCBpICsgMSk7XG5cdFx0XHRcdFx0XHRvcElkLmlkID0gbmV3SWQ7XG5cdFx0XHRcdFx0XHRvcElkLnVzZXJsYW5kLmluZGV4ID0gaTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y29uc3QgeyBwcm9taXNlLCByZXNvbHZlLCByZWplY3QgfSA9IGNyZWF0ZURlZmVycmVkUHJvbWlzZSgpO1xuXHRcdFx0Y29uc3QgaGFzaGVkSWQgPSBfaW50ZXJuYWxzLmhhc2hJZChvcElkLmlkKTtcblx0XHRcdGNvbnN0IHN0ZXBTdGF0ZSA9IHRoaXMuc3RhdGUuc3RlcFN0YXRlW2hhc2hlZElkXTtcblx0XHRcdGxldCBpc0Z1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0aWYgKHN0ZXBTdGF0ZSkge1xuXHRcdFx0XHRzdGVwU3RhdGUuc2VlbiA9IHRydWU7XG5cdFx0XHRcdHRoaXMuc3RhdGUucmVtYWluaW5nU3RlcHNUb0JlU2Vlbi5kZWxldGUoaGFzaGVkSWQpO1xuXHRcdFx0XHRpZiAodHlwZW9mIHN0ZXBTdGF0ZS5pbnB1dCA9PT0gXCJ1bmRlZmluZWRcIikgaXNGdWxmaWxsZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGV4dHJhT3B0cztcblx0XHRcdGxldCBmbkFyZ3MgPSBbLi4uYXJnc107XG5cdFx0XHRpZiAodHlwZW9mIHN0ZXBTdGF0ZT8uaW5wdXQgIT09IFwidW5kZWZpbmVkXCIgJiYgQXJyYXkuaXNBcnJheShzdGVwU3RhdGUuaW5wdXQpKSBzd2l0Y2ggKG9wSWQub3ApIHtcblx0XHRcdFx0Y2FzZSBTdGVwT3BDb2RlLlN0ZXBQbGFubmVkOlxuXHRcdFx0XHRcdGZuQXJncyA9IFsuLi5hcmdzLnNsaWNlKDAsIDIpLCAuLi5zdGVwU3RhdGUuaW5wdXRdO1xuXHRcdFx0XHRcdGV4dHJhT3B0cyA9IHsgaW5wdXQ6IFsuLi5zdGVwU3RhdGUuaW5wdXRdIH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgU3RlcE9wQ29kZS5BaUdhdGV3YXk6XG5cdFx0XHRcdFx0ZXh0cmFPcHRzID0geyBib2R5OiB7XG5cdFx0XHRcdFx0XHQuLi50eXBlb2Ygb3BJZC5vcHRzPy5ib2R5ID09PSBcIm9iamVjdFwiID8geyAuLi5vcElkLm9wdHMuYm9keSB9IDoge30sXG5cdFx0XHRcdFx0XHQuLi5zdGVwU3RhdGUuaW5wdXRbMF1cblx0XHRcdFx0XHR9IH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBzdGVwID0ge1xuXHRcdFx0XHQuLi5vcElkLFxuXHRcdFx0XHRvcHRzOiB7XG5cdFx0XHRcdFx0Li4ub3BJZC5vcHRzLFxuXHRcdFx0XHRcdC4uLmV4dHJhT3B0c1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRyYXdBcmdzOiBmbkFyZ3MsXG5cdFx0XHRcdGhhc2hlZElkLFxuXHRcdFx0XHRpbnB1dDogc3RlcFN0YXRlPy5pbnB1dCxcblx0XHRcdFx0Zm46IG9wdHM/LmZuID8gKCkgPT4gb3B0cy5mbj8uKC4uLmZuQXJncykgOiB2b2lkIDAsXG5cdFx0XHRcdHByb21pc2UsXG5cdFx0XHRcdGZ1bGZpbGxlZDogaXNGdWxmaWxsZWQsXG5cdFx0XHRcdGhhc1N0ZXBTdGF0ZTogQm9vbGVhbihzdGVwU3RhdGUpLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogb3BJZC5kaXNwbGF5TmFtZSA/PyBvcElkLmlkLFxuXHRcdFx0XHRoYW5kbGVkOiBmYWxzZSxcblx0XHRcdFx0aGFuZGxlOiAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHN0ZXAuaGFuZGxlZCkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdHN0ZXAuaGFuZGxlZCA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKGlzRnVsZmlsbGVkICYmIHN0ZXBTdGF0ZSkge1xuXHRcdFx0XHRcdFx0c3RlcFN0YXRlLmZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRQcm9taXNlLmFsbChbXG5cdFx0XHRcdFx0XHRcdHN0ZXBTdGF0ZS5kYXRhLFxuXHRcdFx0XHRcdFx0XHRzdGVwU3RhdGUuZXJyb3IsXG5cdFx0XHRcdFx0XHRcdHN0ZXBTdGF0ZS5pbnB1dFxuXHRcdFx0XHRcdFx0XSkudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlb2Ygc3RlcFN0YXRlLmRhdGEgIT09IFwidW5kZWZpbmVkXCIpIHJlc29sdmUoc3RlcFN0YXRlLmRhdGEpO1xuXHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnN0YXRlLnJlY2VudGx5UmVqZWN0ZWRTdGVwRXJyb3IgPSBuZXcgU3RlcEVycm9yKG9wSWQuaWQsIHN0ZXBTdGF0ZS5lcnJvcik7XG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KHRoaXMuc3RhdGUucmVjZW50bHlSZWplY3RlZFN0ZXBFcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHRoaXMuc3RhdGUuc3RlcHMuc2V0KG9wSWQuaWQsIHN0ZXApO1xuXHRcdFx0dGhpcy5zdGF0ZS5oYXNTdGVwcyA9IHRydWU7XG5cdFx0XHRwdXNoU3RlcFRvUmVwb3J0KHN0ZXApO1xuXHRcdFx0LyoqXG5cdFx0XHQqIElmIHRoaXMgaXMgdGhlIGxhc3QgcGllY2Ugb2Ygc3RhdGUgd2UgaGFkLCB3ZSd2ZSBub3cgZmluaXNoZWRcblx0XHRcdCogbWVtb2l6aW5nLlxuXHRcdFx0Ki9cblx0XHRcdGlmICghYmVmb3JlRXhlY0hvb2tzUHJvbWlzZSAmJiB0aGlzLnN0YXRlLmFsbFN0YXRlVXNlZCgpKSBhd2FpdCAoYmVmb3JlRXhlY0hvb2tzUHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmFmdGVyTWVtb2l6YXRpb24/LigpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5iZWZvcmVFeGVjdXRpb24/LigpO1xuXHRcdFx0fSkoKSk7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHR9O1xuXHRcdHJldHVybiBjcmVhdGVTdGVwVG9vbHModGhpcy5vcHRpb25zLmNsaWVudCwgdGhpcywgc3RlcEhhbmRsZXIpO1xuXHR9XG5cdGdldFVzZXJGblRvUnVuKCkge1xuXHRcdGlmICghdGhpcy5vcHRpb25zLmlzRmFpbHVyZUhhbmRsZXIpIHJldHVybiB0aGlzLm9wdGlvbnMuZm5bXCJmblwiXTtcblx0XHRpZiAoIXRoaXMub3B0aW9ucy5mbltcIm9uRmFpbHVyZUZuXCJdKVxuIC8qKlxuXHRcdCogU29tZWhvdywgd2UndmUgZW5kZWQgdXAgZGV0ZWN0aW5nIHRoYXQgdGhpcyBpcyBhIGZhaWx1cmUgaGFuZGxlciBidXRcblx0XHQqIGRvZXNuJ3QgaGF2ZSBhbiBgb25GYWlsdXJlYCBmdW5jdGlvbi4gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLlxuXHRcdCovXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgZnVuY3Rpb24gYG9uRmFpbHVyZWAgaGFuZGxlclwiKTtcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmZuW1wib25GYWlsdXJlRm5cIl07XG5cdH1cblx0aW5pdGlhbGl6ZVRpbWVyKHN0YXRlKSB7XG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMucmVxdWVzdGVkUnVuU3RlcCkgcmV0dXJuO1xuXHRcdHRoaXMudGltZW91dCA9IGNyZWF0ZVRpbWVvdXRQcm9taXNlKHRoaXMudGltZW91dER1cmF0aW9uKTtcblx0XHR0aGlzLnRpbWVvdXQudGhlbihhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlck1lbW9pemF0aW9uPy4oKTtcblx0XHRcdGF3YWl0IHRoaXMuc3RhdGUuaG9va3M/LmJlZm9yZUV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRhd2FpdCB0aGlzLnN0YXRlLmhvb2tzPy5hZnRlckV4ZWN1dGlvbj8uKCk7XG5cdFx0XHRzdGF0ZS5zZXRDaGVja3BvaW50KHtcblx0XHRcdFx0dHlwZTogXCJzdGVwLW5vdC1mb3VuZFwiLFxuXHRcdFx0XHRzdGVwOiB7XG5cdFx0XHRcdFx0aWQ6IHRoaXMub3B0aW9ucy5yZXF1ZXN0ZWRSdW5TdGVwLFxuXHRcdFx0XHRcdG9wOiBTdGVwT3BDb2RlLlN0ZXBOb3RGb3VuZFxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXHRhc3luYyBpbml0aWFsaXplTWlkZGxld2FyZSgpIHtcblx0XHRjb25zdCBjdHggPSB0aGlzLm9wdGlvbnMuZGF0YTtcblx0XHRyZXR1cm4gYXdhaXQgZ2V0SG9va1N0YWNrKHRoaXMub3B0aW9ucy5mbltcIm1pZGRsZXdhcmVcIl0sIFwib25GdW5jdGlvblJ1blwiLCB7XG5cdFx0XHRjdHgsXG5cdFx0XHRmbjogdGhpcy5vcHRpb25zLmZuLFxuXHRcdFx0c3RlcHM6IE9iamVjdC52YWx1ZXModGhpcy5vcHRpb25zLnN0ZXBTdGF0ZSksXG5cdFx0XHRyZXFBcmdzOiB0aGlzLm9wdGlvbnMucmVxQXJnc1xuXHRcdH0sIHtcblx0XHRcdHRyYW5zZm9ybUlucHV0OiAocHJldiwgb3V0cHV0KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y3R4OiB7XG5cdFx0XHRcdFx0XHQuLi5wcmV2LmN0eCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8uY3R4XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmbjogdGhpcy5vcHRpb25zLmZuLFxuXHRcdFx0XHRcdHN0ZXBzOiBwcmV2LnN0ZXBzLm1hcCgoc3RlcCwgaSkgPT4gKHtcblx0XHRcdFx0XHRcdC4uLnN0ZXAsXG5cdFx0XHRcdFx0XHQuLi5vdXRwdXQ/LnN0ZXBzPy5baV1cblx0XHRcdFx0XHR9KSksXG5cdFx0XHRcdFx0cmVxQXJnczogcHJldi5yZXFBcmdzXG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0dHJhbnNmb3JtT3V0cHV0OiAocHJldiwgb3V0cHV0KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0cmVzdWx0OiB7XG5cdFx0XHRcdFx0XHQuLi5wcmV2LnJlc3VsdCxcblx0XHRcdFx0XHRcdC4uLm91dHB1dD8ucmVzdWx0XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdGVwOiBwcmV2LnN0ZXBcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufTtcbmNvbnN0IGhhc2hJZCA9IChpZCkgPT4ge1xuXHRyZXR1cm4gc2hhMSgpLnVwZGF0ZShpZCkuZGlnZXN0KFwiaGV4XCIpO1xufTtcbmNvbnN0IGhhc2hPcCA9IChvcCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdC4uLm9wLFxuXHRcdGlkOiBoYXNoSWQob3AuaWQpXG5cdH07XG59O1xuLyoqXG4qIEV4cG9ydGVkIGZvciB0ZXN0aW5nLlxuKi9cbmNvbnN0IF9pbnRlcm5hbHMgPSB7XG5cdGhhc2hPcCxcblx0aGFzaElkXG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZVYySW5uZ2VzdEV4ZWN1dGlvbiwgdjJfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9djIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/components/execution/v2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/ServerTiming.js":
/*!******************************************************!*\
  !*** ./node_modules/inngest/helpers/ServerTiming.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ServerTiming: () => (/* binding */ ServerTiming),\n/* harmony export */   ServerTiming_exports: () => (/* binding */ ServerTiming_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n\n\n\n//#region src/helpers/ServerTiming.ts\nvar ServerTiming_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)({ ServerTiming: () => ServerTiming });\n/**\n* A class to manage timing functions and arbitrary periods of time before\n* generating a `Server-Timing` header for use in HTTP responses.\n*\n* This is a very simple implementation that does not support nested timings or\n* fractions of a millisecond.\n*/\nvar ServerTiming = class {\n\ttimings = {};\n\t/**\n\t* Start a timing. Returns a function that, when called, will stop the timing\n\t* and add it to the header.\n\t*/\n\tstart(name, description) {\n\t\tif (!this.timings[name]) this.timings[name] = {\n\t\t\tdescription: description ?? \"\",\n\t\t\ttimers: []\n\t\t};\n\t\tconst index = this.timings[name].timers.push({ start: Date.now() }) - 1;\n\t\treturn () => {\n\t\t\tconst target = this.timings[name];\n\t\t\tif (!target) return console.warn(`Timing \"${name}\" does not exist`);\n\t\t\tconst timer = target.timers[index];\n\t\t\tif (!timer) return console.warn(`Timer ${index} for timing \"${name}\" does not exist`);\n\t\t\ttimer.end = Date.now();\n\t\t};\n\t}\n\t/**\n\t* Add a piece of arbitrary, untimed information to the header. Common use\n\t* cases would be cache misses.\n\t*\n\t* @example\n\t* ```\n\t* timer.append(\"cache\", \"miss\");\n\t* ```\n\t*/\n\tappend(key, value) {\n\t\tthis.timings[key] = {\n\t\t\tdescription: value,\n\t\t\ttimers: []\n\t\t};\n\t}\n\t/**\n\t* Wrap a function in a timing. The timing will be stopped and added to the\n\t* header when the function resolves or rejects.\n\t*\n\t* The return value of the function will be returned from this function.\n\t*/\n\tasync wrap(name, fn, description) {\n\t\tconst stop = this.start(name, description);\n\t\ttry {\n\t\t\treturn await (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.runAsPromise)(fn);\n\t\t} finally {\n\t\t\tstop();\n\t\t}\n\t}\n\t/**\n\t* Generate the `Server-Timing` header.\n\t*/\n\tgetHeader() {\n\t\treturn Object.entries(this.timings).reduce((acc, [name, { description, timers }]) => {\n\t\t\tif (!timers.some((timer) => timer.end)) return acc;\n\t\t\tconst dur = timers.reduce((acc$1, { start, end }) => {\n\t\t\t\tif (!start || !end) return acc$1;\n\t\t\t\treturn acc$1 + (end - start);\n\t\t\t}, 0);\n\t\t\tconst entry = [\n\t\t\t\tname,\n\t\t\t\tdescription ? `desc=\"${description}\"` : \"\",\n\t\t\t\tdur ? `dur=${dur}` : \"\"\n\t\t\t].filter(Boolean).join(\";\");\n\t\t\treturn [...acc, entry];\n\t\t}, []).join(\", \");\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=ServerTiming.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL1NlcnZlclRpbWluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJEO0FBQ2Q7O0FBRTdDO0FBQ0EsMkNBQTJDLHNFQUFRLEdBQUcsa0NBQWtDO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxtQkFBbUI7QUFDcEU7QUFDQTtBQUNBLCtDQUErQyxLQUFLO0FBQ3BEO0FBQ0EsNENBQTRDLE9BQU8sY0FBYyxLQUFLO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwREFBWTtBQUM1QixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQscUJBQXFCO0FBQ2pGO0FBQ0EsdUNBQXVDLFlBQVk7QUFDbkQ7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsMkJBQTJCLFlBQVk7QUFDdkMsaUJBQWlCLElBQUk7QUFDckIsNEJBQTRCO0FBQzVCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDOEM7QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL1NlcnZlclRpbWluZy5qcz84MTI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IHJ1bkFzUHJvbWlzZSB9IGZyb20gXCIuL3Byb21pc2VzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvaGVscGVycy9TZXJ2ZXJUaW1pbmcudHNcbnZhciBTZXJ2ZXJUaW1pbmdfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7IFNlcnZlclRpbWluZzogKCkgPT4gU2VydmVyVGltaW5nIH0pO1xuLyoqXG4qIEEgY2xhc3MgdG8gbWFuYWdlIHRpbWluZyBmdW5jdGlvbnMgYW5kIGFyYml0cmFyeSBwZXJpb2RzIG9mIHRpbWUgYmVmb3JlXG4qIGdlbmVyYXRpbmcgYSBgU2VydmVyLVRpbWluZ2AgaGVhZGVyIGZvciB1c2UgaW4gSFRUUCByZXNwb25zZXMuXG4qXG4qIFRoaXMgaXMgYSB2ZXJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbiB0aGF0IGRvZXMgbm90IHN1cHBvcnQgbmVzdGVkIHRpbWluZ3Mgb3JcbiogZnJhY3Rpb25zIG9mIGEgbWlsbGlzZWNvbmQuXG4qL1xudmFyIFNlcnZlclRpbWluZyA9IGNsYXNzIHtcblx0dGltaW5ncyA9IHt9O1xuXHQvKipcblx0KiBTdGFydCBhIHRpbWluZy4gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCB3aWxsIHN0b3AgdGhlIHRpbWluZ1xuXHQqIGFuZCBhZGQgaXQgdG8gdGhlIGhlYWRlci5cblx0Ki9cblx0c3RhcnQobmFtZSwgZGVzY3JpcHRpb24pIHtcblx0XHRpZiAoIXRoaXMudGltaW5nc1tuYW1lXSkgdGhpcy50aW1pbmdzW25hbWVdID0ge1xuXHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uID8/IFwiXCIsXG5cdFx0XHR0aW1lcnM6IFtdXG5cdFx0fTtcblx0XHRjb25zdCBpbmRleCA9IHRoaXMudGltaW5nc1tuYW1lXS50aW1lcnMucHVzaCh7IHN0YXJ0OiBEYXRlLm5vdygpIH0pIC0gMTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gdGhpcy50aW1pbmdzW25hbWVdO1xuXHRcdFx0aWYgKCF0YXJnZXQpIHJldHVybiBjb25zb2xlLndhcm4oYFRpbWluZyBcIiR7bmFtZX1cIiBkb2VzIG5vdCBleGlzdGApO1xuXHRcdFx0Y29uc3QgdGltZXIgPSB0YXJnZXQudGltZXJzW2luZGV4XTtcblx0XHRcdGlmICghdGltZXIpIHJldHVybiBjb25zb2xlLndhcm4oYFRpbWVyICR7aW5kZXh9IGZvciB0aW1pbmcgXCIke25hbWV9XCIgZG9lcyBub3QgZXhpc3RgKTtcblx0XHRcdHRpbWVyLmVuZCA9IERhdGUubm93KCk7XG5cdFx0fTtcblx0fVxuXHQvKipcblx0KiBBZGQgYSBwaWVjZSBvZiBhcmJpdHJhcnksIHVudGltZWQgaW5mb3JtYXRpb24gdG8gdGhlIGhlYWRlci4gQ29tbW9uIHVzZVxuXHQqIGNhc2VzIHdvdWxkIGJlIGNhY2hlIG1pc3Nlcy5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYGBgXG5cdCogdGltZXIuYXBwZW5kKFwiY2FjaGVcIiwgXCJtaXNzXCIpO1xuXHQqIGBgYFxuXHQqL1xuXHRhcHBlbmQoa2V5LCB2YWx1ZSkge1xuXHRcdHRoaXMudGltaW5nc1trZXldID0ge1xuXHRcdFx0ZGVzY3JpcHRpb246IHZhbHVlLFxuXHRcdFx0dGltZXJzOiBbXVxuXHRcdH07XG5cdH1cblx0LyoqXG5cdCogV3JhcCBhIGZ1bmN0aW9uIGluIGEgdGltaW5nLiBUaGUgdGltaW5nIHdpbGwgYmUgc3RvcHBlZCBhbmQgYWRkZWQgdG8gdGhlXG5cdCogaGVhZGVyIHdoZW4gdGhlIGZ1bmN0aW9uIHJlc29sdmVzIG9yIHJlamVjdHMuXG5cdCpcblx0KiBUaGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB3aWxsIGJlIHJldHVybmVkIGZyb20gdGhpcyBmdW5jdGlvbi5cblx0Ki9cblx0YXN5bmMgd3JhcChuYW1lLCBmbiwgZGVzY3JpcHRpb24pIHtcblx0XHRjb25zdCBzdG9wID0gdGhpcy5zdGFydChuYW1lLCBkZXNjcmlwdGlvbik7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCBydW5Bc1Byb21pc2UoZm4pO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRzdG9wKCk7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQqIEdlbmVyYXRlIHRoZSBgU2VydmVyLVRpbWluZ2AgaGVhZGVyLlxuXHQqL1xuXHRnZXRIZWFkZXIoKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMudGltaW5ncykucmVkdWNlKChhY2MsIFtuYW1lLCB7IGRlc2NyaXB0aW9uLCB0aW1lcnMgfV0pID0+IHtcblx0XHRcdGlmICghdGltZXJzLnNvbWUoKHRpbWVyKSA9PiB0aW1lci5lbmQpKSByZXR1cm4gYWNjO1xuXHRcdFx0Y29uc3QgZHVyID0gdGltZXJzLnJlZHVjZSgoYWNjJDEsIHsgc3RhcnQsIGVuZCB9KSA9PiB7XG5cdFx0XHRcdGlmICghc3RhcnQgfHwgIWVuZCkgcmV0dXJuIGFjYyQxO1xuXHRcdFx0XHRyZXR1cm4gYWNjJDEgKyAoZW5kIC0gc3RhcnQpO1xuXHRcdFx0fSwgMCk7XG5cdFx0XHRjb25zdCBlbnRyeSA9IFtcblx0XHRcdFx0bmFtZSxcblx0XHRcdFx0ZGVzY3JpcHRpb24gPyBgZGVzYz1cIiR7ZGVzY3JpcHRpb259XCJgIDogXCJcIixcblx0XHRcdFx0ZHVyID8gYGR1cj0ke2R1cn1gIDogXCJcIlxuXHRcdFx0XS5maWx0ZXIoQm9vbGVhbikuam9pbihcIjtcIik7XG5cdFx0XHRyZXR1cm4gWy4uLmFjYywgZW50cnldO1xuXHRcdH0sIFtdKS5qb2luKFwiLCBcIik7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgU2VydmVyVGltaW5nLCBTZXJ2ZXJUaW1pbmdfZXhwb3J0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2VydmVyVGltaW5nLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/ServerTiming.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/consts.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/consts.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExecutionVersion: () => (/* binding */ ExecutionVersion),\n/* harmony export */   debugPrefix: () => (/* binding */ debugPrefix),\n/* harmony export */   defaultDevServerHost: () => (/* binding */ defaultDevServerHost),\n/* harmony export */   defaultInngestApiBaseUrl: () => (/* binding */ defaultInngestApiBaseUrl),\n/* harmony export */   defaultInngestEventBaseUrl: () => (/* binding */ defaultInngestEventBaseUrl),\n/* harmony export */   defaultMaxRetries: () => (/* binding */ defaultMaxRetries),\n/* harmony export */   dummyEventKey: () => (/* binding */ dummyEventKey),\n/* harmony export */   envKeys: () => (/* binding */ envKeys),\n/* harmony export */   forwardedHeaders: () => (/* binding */ forwardedHeaders),\n/* harmony export */   headerKeys: () => (/* binding */ headerKeys),\n/* harmony export */   internalEvents: () => (/* binding */ internalEvents),\n/* harmony export */   logPrefix: () => (/* binding */ logPrefix),\n/* harmony export */   probe: () => (/* binding */ probe),\n/* harmony export */   queryKeys: () => (/* binding */ queryKeys),\n/* harmony export */   syncKind: () => (/* binding */ syncKind)\n/* harmony export */ });\n/* harmony import */ var chalk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chalk */ \"(rsc)/./node_modules/chalk/source/index.js\");\n\n\n//#region src/helpers/consts.ts\n/**\n* Keys for accessing query parameters included in requests from Inngest to run\n* functions.\n*\n* Used internally to create handlers using `InngestCommHandler`, but can be\n* imported to be used if creating a custom handler outside of the package.\n*\n* @public\n*/\nlet queryKeys = /* @__PURE__ */ function(queryKeys$1) {\n\tqueryKeys$1[\"DeployId\"] = \"deployId\";\n\tqueryKeys$1[\"FnId\"] = \"fnId\";\n\tqueryKeys$1[\"Probe\"] = \"probe\";\n\tqueryKeys$1[\"StepId\"] = \"stepId\";\n\treturn queryKeys$1;\n}({});\nlet probe = /* @__PURE__ */ function(probe$1) {\n\tprobe$1[\"Trust\"] = \"trust\";\n\treturn probe$1;\n}({});\nlet envKeys = /* @__PURE__ */ function(envKeys$1) {\n\tenvKeys$1[\"InngestSigningKey\"] = \"INNGEST_SIGNING_KEY\";\n\tenvKeys$1[\"InngestSigningKeyFallback\"] = \"INNGEST_SIGNING_KEY_FALLBACK\";\n\tenvKeys$1[\"InngestEventKey\"] = \"INNGEST_EVENT_KEY\";\n\t/**\n\t* @deprecated Removed in v3. Use {@link InngestBaseUrl} instead.\n\t*/\n\tenvKeys$1[\"InngestDevServerUrl\"] = \"INNGEST_DEVSERVER_URL\";\n\tenvKeys$1[\"InngestEnvironment\"] = \"INNGEST_ENV\";\n\tenvKeys$1[\"InngestBaseUrl\"] = \"INNGEST_BASE_URL\";\n\tenvKeys$1[\"InngestEventApiBaseUrl\"] = \"INNGEST_EVENT_API_BASE_URL\";\n\tenvKeys$1[\"InngestApiBaseUrl\"] = \"INNGEST_API_BASE_URL\";\n\tenvKeys$1[\"InngestServeHost\"] = \"INNGEST_SERVE_HOST\";\n\tenvKeys$1[\"InngestServePath\"] = \"INNGEST_SERVE_PATH\";\n\tenvKeys$1[\"InngestLogLevel\"] = \"INNGEST_LOG_LEVEL\";\n\tenvKeys$1[\"InngestStreaming\"] = \"INNGEST_STREAMING\";\n\tenvKeys$1[\"InngestDevMode\"] = \"INNGEST_DEV\";\n\tenvKeys$1[\"InngestAllowInBandSync\"] = \"INNGEST_ALLOW_IN_BAND_SYNC\";\n\tenvKeys$1[\"InngestConnectMaxWorkerConcurrency\"] = \"INNGEST_CONNECT_MAX_WORKER_CONCURRENCY\";\n\t/**\n\t* @deprecated It's unknown what this env var was used for, but we do not\n\t* provide explicit support for it. Prefer using `INNGEST_ENV` instead.\n\t*/\n\tenvKeys$1[\"BranchName\"] = \"BRANCH_NAME\";\n\t/**\n\t* The git branch of the commit the deployment was triggered by. Example:\n\t* `improve-about-page`.\n\t*\n\t* {@link https://vercel.com/docs/concepts/projects/environment-variables/system-environment-variables#system-environment-variables}\n\t*/\n\tenvKeys$1[\"VercelBranch\"] = \"VERCEL_GIT_COMMIT_REF\";\n\t/**\n\t* Expected to be `\"1\"` if defined.\n\t*/\n\tenvKeys$1[\"IsVercel\"] = \"VERCEL\";\n\t/**\n\t* The branch name of the current deployment. May only be accessible at build\n\t* time, but included here just in case.\n\t*\n\t* {@link https://developers.cloudflare.com/pages/platform/build-configuration/#environment-variables}\n\t*/\n\tenvKeys$1[\"CloudflarePagesBranch\"] = \"CF_PAGES_BRANCH\";\n\t/**\n\t* Expected to be `\"1\"` if defined.\n\t*/\n\tenvKeys$1[\"IsCloudflarePages\"] = \"CF_PAGES\";\n\t/**\n\t* The branch name of the deployment from Git to Netlify, if available.\n\t*\n\t* {@link https://docs.netlify.com/configure-builds/environment-variables/#git-metadata}\n\t*/\n\tenvKeys$1[\"NetlifyBranch\"] = \"BRANCH\";\n\t/**\n\t* Expected to be `\"true\"` if defined.\n\t*/\n\tenvKeys$1[\"IsNetlify\"] = \"NETLIFY\";\n\t/**\n\t* The Git branch for a service or deploy.\n\t*\n\t* {@link https://render.com/docs/environment-variables#all-services}\n\t*/\n\tenvKeys$1[\"RenderBranch\"] = \"RENDER_GIT_BRANCH\";\n\t/**\n\t* Expected to be `\"true\"` if defined.\n\t*/\n\tenvKeys$1[\"IsRender\"] = \"RENDER\";\n\t/**\n\t* The branch that triggered the deployment. Example: `main`\n\t*\n\t* {@link https://docs.railway.app/develop/variables#railway-provided-variables}\n\t*/\n\tenvKeys$1[\"RailwayBranch\"] = \"RAILWAY_GIT_BRANCH\";\n\t/**\n\t* The railway environment for the deployment. Example: `production`\n\t*\n\t* {@link https://docs.railway.app/develop/variables#railway-provided-variables}\n\t*/\n\tenvKeys$1[\"RailwayEnvironment\"] = \"RAILWAY_ENVIRONMENT\";\n\tenvKeys$1[\"VercelEnvKey\"] = \"VERCEL_ENV\";\n\tenvKeys$1[\"OpenAiApiKey\"] = \"OPENAI_API_KEY\";\n\tenvKeys$1[\"GeminiApiKey\"] = \"GEMINI_API_KEY\";\n\tenvKeys$1[\"AnthropicApiKey\"] = \"ANTHROPIC_API_KEY\";\n\treturn envKeys$1;\n}({});\n/**\n* Keys for accessing headers included in requests from Inngest to run\n* functions.\n*\n* Used internally to create handlers using `InngestCommHandler`, but can be\n* imported to be used if creating a custom handler outside of the package.\n*\n* @public\n*/\nlet headerKeys = /* @__PURE__ */ function(headerKeys$1) {\n\theaderKeys$1[\"ContentType\"] = \"content-type\";\n\theaderKeys$1[\"Host\"] = \"host\";\n\theaderKeys$1[\"ForwardedFor\"] = \"x-forwarded-for\";\n\theaderKeys$1[\"RealIp\"] = \"x-real-ip\";\n\theaderKeys$1[\"Location\"] = \"location\";\n\theaderKeys$1[\"ContentLength\"] = \"content-length\";\n\theaderKeys$1[\"Signature\"] = \"x-inngest-signature\";\n\theaderKeys$1[\"SdkVersion\"] = \"x-inngest-sdk\";\n\theaderKeys$1[\"Environment\"] = \"x-inngest-env\";\n\theaderKeys$1[\"Platform\"] = \"x-inngest-platform\";\n\theaderKeys$1[\"Framework\"] = \"x-inngest-framework\";\n\theaderKeys$1[\"NoRetry\"] = \"x-inngest-no-retry\";\n\theaderKeys$1[\"RequestVersion\"] = \"x-inngest-req-version\";\n\theaderKeys$1[\"RetryAfter\"] = \"retry-after\";\n\theaderKeys$1[\"InngestServerKind\"] = \"x-inngest-server-kind\";\n\theaderKeys$1[\"InngestExpectedServerKind\"] = \"x-inngest-expected-server-kind\";\n\theaderKeys$1[\"InngestSyncKind\"] = \"x-inngest-sync-kind\";\n\theaderKeys$1[\"EventIdSeed\"] = \"x-inngest-event-id-seed\";\n\theaderKeys$1[\"TraceParent\"] = \"traceparent\";\n\theaderKeys$1[\"TraceState\"] = \"tracestate\";\n\theaderKeys$1[\"InngestRunId\"] = \"x-run-id\";\n\treturn headerKeys$1;\n}({});\n/**\n* Headers that are forwarded from the original request when an Inngest function\n* is invoked.\n*/\nconst forwardedHeaders = [headerKeys.TraceParent, headerKeys.TraceState];\nconst defaultInngestApiBaseUrl = \"https://api.inngest.com/\";\nconst defaultInngestEventBaseUrl = \"https://inn.gs/\";\nconst defaultDevServerHost = \"http://localhost:8288/\";\n/**\n* Events that Inngest may send internally that can be used to trigger\n* functions.\n*\n* @public\n*/\nlet internalEvents = /* @__PURE__ */ function(internalEvents$1) {\n\t/**\n\t* A function has failed after exhausting all available retries. This event\n\t* will contain the original event and the error that caused the failure.\n\t*/\n\tinternalEvents$1[\"FunctionFailed\"] = \"inngest/function.failed\";\n\tinternalEvents$1[\"FunctionInvoked\"] = \"inngest/function.invoked\";\n\tinternalEvents$1[\"FunctionFinished\"] = \"inngest/function.finished\";\n\tinternalEvents$1[\"FunctionCancelled\"] = \"inngest/function.cancelled\";\n\tinternalEvents$1[\"ScheduledTimer\"] = \"inngest/scheduled.timer\";\n\treturn internalEvents$1;\n}({});\nconst logPrefix = chalk__WEBPACK_IMPORTED_MODULE_0__.magenta.bold(\"[Inngest]\");\nconst debugPrefix = \"inngest\";\nconst dummyEventKey = \"NO_EVENT_KEY_SET\";\nlet syncKind = /* @__PURE__ */ function(syncKind$1) {\n\tsyncKind$1[\"InBand\"] = \"in_band\";\n\tsyncKind$1[\"OutOfBand\"] = \"out_of_band\";\n\treturn syncKind$1;\n}({});\n/**\n* The execution models the SDK is aware of.\n*\n* This is used in a number of places to ensure all execution versions are\n* accounted for for a given operation.\n*/\nlet ExecutionVersion = /* @__PURE__ */ function(ExecutionVersion$1) {\n\t/**\n\t* Very legacy, initial version of the executor. Uses hashed op objects and\n\t* `pos` to determine the order of execution and which ops to run.\n\t*\n\t* Very stubborn about determinism.\n\t*/\n\tExecutionVersion$1[ExecutionVersion$1[\"V0\"] = 0] = \"V0\";\n\t/**\n\t* Uses a more flexible approach to execution and is more lenient about\n\t* determinism, allowing non-step async actions and non-determinism.\n\t*\n\t* Nowhere near as stubborn about determinism and so can silently migrate\n\t* between versions after bug fixes.\n\t*/\n\tExecutionVersion$1[ExecutionVersion$1[\"V1\"] = 1] = \"V1\";\n\t/**\n\t* Identical to V1, but allows the Executor to optimize parallel calls, hugely\n\t* reducing traffic going to/from the SDK.\n\t*/\n\tExecutionVersion$1[ExecutionVersion$1[\"V2\"] = 2] = \"V2\";\n\treturn ExecutionVersion$1;\n}({});\n/**\n* Default maximum number of retries for function/step executions.\n*/\nconst defaultMaxRetries = 3;\n\n//#endregion\n\n//# sourceMappingURL=consts.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2NvbnN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTBCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0JBQXNCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSixrQkFBa0IsMENBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxUDtBQUNyUCIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvY29uc3RzLmpzP2JlZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWxrIGZyb20gXCJjaGFsa1wiO1xuXG4vLyNyZWdpb24gc3JjL2hlbHBlcnMvY29uc3RzLnRzXG4vKipcbiogS2V5cyBmb3IgYWNjZXNzaW5nIHF1ZXJ5IHBhcmFtZXRlcnMgaW5jbHVkZWQgaW4gcmVxdWVzdHMgZnJvbSBJbm5nZXN0IHRvIHJ1blxuKiBmdW5jdGlvbnMuXG4qXG4qIFVzZWQgaW50ZXJuYWxseSB0byBjcmVhdGUgaGFuZGxlcnMgdXNpbmcgYElubmdlc3RDb21tSGFuZGxlcmAsIGJ1dCBjYW4gYmVcbiogaW1wb3J0ZWQgdG8gYmUgdXNlZCBpZiBjcmVhdGluZyBhIGN1c3RvbSBoYW5kbGVyIG91dHNpZGUgb2YgdGhlIHBhY2thZ2UuXG4qXG4qIEBwdWJsaWNcbiovXG5sZXQgcXVlcnlLZXlzID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKHF1ZXJ5S2V5cyQxKSB7XG5cdHF1ZXJ5S2V5cyQxW1wiRGVwbG95SWRcIl0gPSBcImRlcGxveUlkXCI7XG5cdHF1ZXJ5S2V5cyQxW1wiRm5JZFwiXSA9IFwiZm5JZFwiO1xuXHRxdWVyeUtleXMkMVtcIlByb2JlXCJdID0gXCJwcm9iZVwiO1xuXHRxdWVyeUtleXMkMVtcIlN0ZXBJZFwiXSA9IFwic3RlcElkXCI7XG5cdHJldHVybiBxdWVyeUtleXMkMTtcbn0oe30pO1xubGV0IHByb2JlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKHByb2JlJDEpIHtcblx0cHJvYmUkMVtcIlRydXN0XCJdID0gXCJ0cnVzdFwiO1xuXHRyZXR1cm4gcHJvYmUkMTtcbn0oe30pO1xubGV0IGVudktleXMgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oZW52S2V5cyQxKSB7XG5cdGVudktleXMkMVtcIklubmdlc3RTaWduaW5nS2V5XCJdID0gXCJJTk5HRVNUX1NJR05JTkdfS0VZXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RTaWduaW5nS2V5RmFsbGJhY2tcIl0gPSBcIklOTkdFU1RfU0lHTklOR19LRVlfRkFMTEJBQ0tcIjtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdEV2ZW50S2V5XCJdID0gXCJJTk5HRVNUX0VWRU5UX0tFWVwiO1xuXHQvKipcblx0KiBAZGVwcmVjYXRlZCBSZW1vdmVkIGluIHYzLiBVc2Uge0BsaW5rIElubmdlc3RCYXNlVXJsfSBpbnN0ZWFkLlxuXHQqL1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0RGV2U2VydmVyVXJsXCJdID0gXCJJTk5HRVNUX0RFVlNFUlZFUl9VUkxcIjtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdEVudmlyb25tZW50XCJdID0gXCJJTk5HRVNUX0VOVlwiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0QmFzZVVybFwiXSA9IFwiSU5OR0VTVF9CQVNFX1VSTFwiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0RXZlbnRBcGlCYXNlVXJsXCJdID0gXCJJTk5HRVNUX0VWRU5UX0FQSV9CQVNFX1VSTFwiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0QXBpQmFzZVVybFwiXSA9IFwiSU5OR0VTVF9BUElfQkFTRV9VUkxcIjtcblx0ZW52S2V5cyQxW1wiSW5uZ2VzdFNlcnZlSG9zdFwiXSA9IFwiSU5OR0VTVF9TRVJWRV9IT1NUXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RTZXJ2ZVBhdGhcIl0gPSBcIklOTkdFU1RfU0VSVkVfUEFUSFwiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0TG9nTGV2ZWxcIl0gPSBcIklOTkdFU1RfTE9HX0xFVkVMXCI7XG5cdGVudktleXMkMVtcIklubmdlc3RTdHJlYW1pbmdcIl0gPSBcIklOTkdFU1RfU1RSRUFNSU5HXCI7XG5cdGVudktleXMkMVtcIklubmdlc3REZXZNb2RlXCJdID0gXCJJTk5HRVNUX0RFVlwiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0QWxsb3dJbkJhbmRTeW5jXCJdID0gXCJJTk5HRVNUX0FMTE9XX0lOX0JBTkRfU1lOQ1wiO1xuXHRlbnZLZXlzJDFbXCJJbm5nZXN0Q29ubmVjdE1heFdvcmtlckNvbmN1cnJlbmN5XCJdID0gXCJJTk5HRVNUX0NPTk5FQ1RfTUFYX1dPUktFUl9DT05DVVJSRU5DWVwiO1xuXHQvKipcblx0KiBAZGVwcmVjYXRlZCBJdCdzIHVua25vd24gd2hhdCB0aGlzIGVudiB2YXIgd2FzIHVzZWQgZm9yLCBidXQgd2UgZG8gbm90XG5cdCogcHJvdmlkZSBleHBsaWNpdCBzdXBwb3J0IGZvciBpdC4gUHJlZmVyIHVzaW5nIGBJTk5HRVNUX0VOVmAgaW5zdGVhZC5cblx0Ki9cblx0ZW52S2V5cyQxW1wiQnJhbmNoTmFtZVwiXSA9IFwiQlJBTkNIX05BTUVcIjtcblx0LyoqXG5cdCogVGhlIGdpdCBicmFuY2ggb2YgdGhlIGNvbW1pdCB0aGUgZGVwbG95bWVudCB3YXMgdHJpZ2dlcmVkIGJ5LiBFeGFtcGxlOlxuXHQqIGBpbXByb3ZlLWFib3V0LXBhZ2VgLlxuXHQqXG5cdCoge0BsaW5rIGh0dHBzOi8vdmVyY2VsLmNvbS9kb2NzL2NvbmNlcHRzL3Byb2plY3RzL2Vudmlyb25tZW50LXZhcmlhYmxlcy9zeXN0ZW0tZW52aXJvbm1lbnQtdmFyaWFibGVzI3N5c3RlbS1lbnZpcm9ubWVudC12YXJpYWJsZXN9XG5cdCovXG5cdGVudktleXMkMVtcIlZlcmNlbEJyYW5jaFwiXSA9IFwiVkVSQ0VMX0dJVF9DT01NSVRfUkVGXCI7XG5cdC8qKlxuXHQqIEV4cGVjdGVkIHRvIGJlIGBcIjFcImAgaWYgZGVmaW5lZC5cblx0Ki9cblx0ZW52S2V5cyQxW1wiSXNWZXJjZWxcIl0gPSBcIlZFUkNFTFwiO1xuXHQvKipcblx0KiBUaGUgYnJhbmNoIG5hbWUgb2YgdGhlIGN1cnJlbnQgZGVwbG95bWVudC4gTWF5IG9ubHkgYmUgYWNjZXNzaWJsZSBhdCBidWlsZFxuXHQqIHRpbWUsIGJ1dCBpbmNsdWRlZCBoZXJlIGp1c3QgaW4gY2FzZS5cblx0KlxuXHQqIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuY2xvdWRmbGFyZS5jb20vcGFnZXMvcGxhdGZvcm0vYnVpbGQtY29uZmlndXJhdGlvbi8jZW52aXJvbm1lbnQtdmFyaWFibGVzfVxuXHQqL1xuXHRlbnZLZXlzJDFbXCJDbG91ZGZsYXJlUGFnZXNCcmFuY2hcIl0gPSBcIkNGX1BBR0VTX0JSQU5DSFwiO1xuXHQvKipcblx0KiBFeHBlY3RlZCB0byBiZSBgXCIxXCJgIGlmIGRlZmluZWQuXG5cdCovXG5cdGVudktleXMkMVtcIklzQ2xvdWRmbGFyZVBhZ2VzXCJdID0gXCJDRl9QQUdFU1wiO1xuXHQvKipcblx0KiBUaGUgYnJhbmNoIG5hbWUgb2YgdGhlIGRlcGxveW1lbnQgZnJvbSBHaXQgdG8gTmV0bGlmeSwgaWYgYXZhaWxhYmxlLlxuXHQqXG5cdCoge0BsaW5rIGh0dHBzOi8vZG9jcy5uZXRsaWZ5LmNvbS9jb25maWd1cmUtYnVpbGRzL2Vudmlyb25tZW50LXZhcmlhYmxlcy8jZ2l0LW1ldGFkYXRhfVxuXHQqL1xuXHRlbnZLZXlzJDFbXCJOZXRsaWZ5QnJhbmNoXCJdID0gXCJCUkFOQ0hcIjtcblx0LyoqXG5cdCogRXhwZWN0ZWQgdG8gYmUgYFwidHJ1ZVwiYCBpZiBkZWZpbmVkLlxuXHQqL1xuXHRlbnZLZXlzJDFbXCJJc05ldGxpZnlcIl0gPSBcIk5FVExJRllcIjtcblx0LyoqXG5cdCogVGhlIEdpdCBicmFuY2ggZm9yIGEgc2VydmljZSBvciBkZXBsb3kuXG5cdCpcblx0KiB7QGxpbmsgaHR0cHM6Ly9yZW5kZXIuY29tL2RvY3MvZW52aXJvbm1lbnQtdmFyaWFibGVzI2FsbC1zZXJ2aWNlc31cblx0Ki9cblx0ZW52S2V5cyQxW1wiUmVuZGVyQnJhbmNoXCJdID0gXCJSRU5ERVJfR0lUX0JSQU5DSFwiO1xuXHQvKipcblx0KiBFeHBlY3RlZCB0byBiZSBgXCJ0cnVlXCJgIGlmIGRlZmluZWQuXG5cdCovXG5cdGVudktleXMkMVtcIklzUmVuZGVyXCJdID0gXCJSRU5ERVJcIjtcblx0LyoqXG5cdCogVGhlIGJyYW5jaCB0aGF0IHRyaWdnZXJlZCB0aGUgZGVwbG95bWVudC4gRXhhbXBsZTogYG1haW5gXG5cdCpcblx0KiB7QGxpbmsgaHR0cHM6Ly9kb2NzLnJhaWx3YXkuYXBwL2RldmVsb3AvdmFyaWFibGVzI3JhaWx3YXktcHJvdmlkZWQtdmFyaWFibGVzfVxuXHQqL1xuXHRlbnZLZXlzJDFbXCJSYWlsd2F5QnJhbmNoXCJdID0gXCJSQUlMV0FZX0dJVF9CUkFOQ0hcIjtcblx0LyoqXG5cdCogVGhlIHJhaWx3YXkgZW52aXJvbm1lbnQgZm9yIHRoZSBkZXBsb3ltZW50LiBFeGFtcGxlOiBgcHJvZHVjdGlvbmBcblx0KlxuXHQqIHtAbGluayBodHRwczovL2RvY3MucmFpbHdheS5hcHAvZGV2ZWxvcC92YXJpYWJsZXMjcmFpbHdheS1wcm92aWRlZC12YXJpYWJsZXN9XG5cdCovXG5cdGVudktleXMkMVtcIlJhaWx3YXlFbnZpcm9ubWVudFwiXSA9IFwiUkFJTFdBWV9FTlZJUk9OTUVOVFwiO1xuXHRlbnZLZXlzJDFbXCJWZXJjZWxFbnZLZXlcIl0gPSBcIlZFUkNFTF9FTlZcIjtcblx0ZW52S2V5cyQxW1wiT3BlbkFpQXBpS2V5XCJdID0gXCJPUEVOQUlfQVBJX0tFWVwiO1xuXHRlbnZLZXlzJDFbXCJHZW1pbmlBcGlLZXlcIl0gPSBcIkdFTUlOSV9BUElfS0VZXCI7XG5cdGVudktleXMkMVtcIkFudGhyb3BpY0FwaUtleVwiXSA9IFwiQU5USFJPUElDX0FQSV9LRVlcIjtcblx0cmV0dXJuIGVudktleXMkMTtcbn0oe30pO1xuLyoqXG4qIEtleXMgZm9yIGFjY2Vzc2luZyBoZWFkZXJzIGluY2x1ZGVkIGluIHJlcXVlc3RzIGZyb20gSW5uZ2VzdCB0byBydW5cbiogZnVuY3Rpb25zLlxuKlxuKiBVc2VkIGludGVybmFsbHkgdG8gY3JlYXRlIGhhbmRsZXJzIHVzaW5nIGBJbm5nZXN0Q29tbUhhbmRsZXJgLCBidXQgY2FuIGJlXG4qIGltcG9ydGVkIHRvIGJlIHVzZWQgaWYgY3JlYXRpbmcgYSBjdXN0b20gaGFuZGxlciBvdXRzaWRlIG9mIHRoZSBwYWNrYWdlLlxuKlxuKiBAcHVibGljXG4qL1xubGV0IGhlYWRlcktleXMgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oaGVhZGVyS2V5cyQxKSB7XG5cdGhlYWRlcktleXMkMVtcIkNvbnRlbnRUeXBlXCJdID0gXCJjb250ZW50LXR5cGVcIjtcblx0aGVhZGVyS2V5cyQxW1wiSG9zdFwiXSA9IFwiaG9zdFwiO1xuXHRoZWFkZXJLZXlzJDFbXCJGb3J3YXJkZWRGb3JcIl0gPSBcIngtZm9yd2FyZGVkLWZvclwiO1xuXHRoZWFkZXJLZXlzJDFbXCJSZWFsSXBcIl0gPSBcIngtcmVhbC1pcFwiO1xuXHRoZWFkZXJLZXlzJDFbXCJMb2NhdGlvblwiXSA9IFwibG9jYXRpb25cIjtcblx0aGVhZGVyS2V5cyQxW1wiQ29udGVudExlbmd0aFwiXSA9IFwiY29udGVudC1sZW5ndGhcIjtcblx0aGVhZGVyS2V5cyQxW1wiU2lnbmF0dXJlXCJdID0gXCJ4LWlubmdlc3Qtc2lnbmF0dXJlXCI7XG5cdGhlYWRlcktleXMkMVtcIlNka1ZlcnNpb25cIl0gPSBcIngtaW5uZ2VzdC1zZGtcIjtcblx0aGVhZGVyS2V5cyQxW1wiRW52aXJvbm1lbnRcIl0gPSBcIngtaW5uZ2VzdC1lbnZcIjtcblx0aGVhZGVyS2V5cyQxW1wiUGxhdGZvcm1cIl0gPSBcIngtaW5uZ2VzdC1wbGF0Zm9ybVwiO1xuXHRoZWFkZXJLZXlzJDFbXCJGcmFtZXdvcmtcIl0gPSBcIngtaW5uZ2VzdC1mcmFtZXdvcmtcIjtcblx0aGVhZGVyS2V5cyQxW1wiTm9SZXRyeVwiXSA9IFwieC1pbm5nZXN0LW5vLXJldHJ5XCI7XG5cdGhlYWRlcktleXMkMVtcIlJlcXVlc3RWZXJzaW9uXCJdID0gXCJ4LWlubmdlc3QtcmVxLXZlcnNpb25cIjtcblx0aGVhZGVyS2V5cyQxW1wiUmV0cnlBZnRlclwiXSA9IFwicmV0cnktYWZ0ZXJcIjtcblx0aGVhZGVyS2V5cyQxW1wiSW5uZ2VzdFNlcnZlcktpbmRcIl0gPSBcIngtaW5uZ2VzdC1zZXJ2ZXIta2luZFwiO1xuXHRoZWFkZXJLZXlzJDFbXCJJbm5nZXN0RXhwZWN0ZWRTZXJ2ZXJLaW5kXCJdID0gXCJ4LWlubmdlc3QtZXhwZWN0ZWQtc2VydmVyLWtpbmRcIjtcblx0aGVhZGVyS2V5cyQxW1wiSW5uZ2VzdFN5bmNLaW5kXCJdID0gXCJ4LWlubmdlc3Qtc3luYy1raW5kXCI7XG5cdGhlYWRlcktleXMkMVtcIkV2ZW50SWRTZWVkXCJdID0gXCJ4LWlubmdlc3QtZXZlbnQtaWQtc2VlZFwiO1xuXHRoZWFkZXJLZXlzJDFbXCJUcmFjZVBhcmVudFwiXSA9IFwidHJhY2VwYXJlbnRcIjtcblx0aGVhZGVyS2V5cyQxW1wiVHJhY2VTdGF0ZVwiXSA9IFwidHJhY2VzdGF0ZVwiO1xuXHRoZWFkZXJLZXlzJDFbXCJJbm5nZXN0UnVuSWRcIl0gPSBcIngtcnVuLWlkXCI7XG5cdHJldHVybiBoZWFkZXJLZXlzJDE7XG59KHt9KTtcbi8qKlxuKiBIZWFkZXJzIHRoYXQgYXJlIGZvcndhcmRlZCBmcm9tIHRoZSBvcmlnaW5hbCByZXF1ZXN0IHdoZW4gYW4gSW5uZ2VzdCBmdW5jdGlvblxuKiBpcyBpbnZva2VkLlxuKi9cbmNvbnN0IGZvcndhcmRlZEhlYWRlcnMgPSBbaGVhZGVyS2V5cy5UcmFjZVBhcmVudCwgaGVhZGVyS2V5cy5UcmFjZVN0YXRlXTtcbmNvbnN0IGRlZmF1bHRJbm5nZXN0QXBpQmFzZVVybCA9IFwiaHR0cHM6Ly9hcGkuaW5uZ2VzdC5jb20vXCI7XG5jb25zdCBkZWZhdWx0SW5uZ2VzdEV2ZW50QmFzZVVybCA9IFwiaHR0cHM6Ly9pbm4uZ3MvXCI7XG5jb25zdCBkZWZhdWx0RGV2U2VydmVySG9zdCA9IFwiaHR0cDovL2xvY2FsaG9zdDo4Mjg4L1wiO1xuLyoqXG4qIEV2ZW50cyB0aGF0IElubmdlc3QgbWF5IHNlbmQgaW50ZXJuYWxseSB0aGF0IGNhbiBiZSB1c2VkIHRvIHRyaWdnZXJcbiogZnVuY3Rpb25zLlxuKlxuKiBAcHVibGljXG4qL1xubGV0IGludGVybmFsRXZlbnRzID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKGludGVybmFsRXZlbnRzJDEpIHtcblx0LyoqXG5cdCogQSBmdW5jdGlvbiBoYXMgZmFpbGVkIGFmdGVyIGV4aGF1c3RpbmcgYWxsIGF2YWlsYWJsZSByZXRyaWVzLiBUaGlzIGV2ZW50XG5cdCogd2lsbCBjb250YWluIHRoZSBvcmlnaW5hbCBldmVudCBhbmQgdGhlIGVycm9yIHRoYXQgY2F1c2VkIHRoZSBmYWlsdXJlLlxuXHQqL1xuXHRpbnRlcm5hbEV2ZW50cyQxW1wiRnVuY3Rpb25GYWlsZWRcIl0gPSBcImlubmdlc3QvZnVuY3Rpb24uZmFpbGVkXCI7XG5cdGludGVybmFsRXZlbnRzJDFbXCJGdW5jdGlvbkludm9rZWRcIl0gPSBcImlubmdlc3QvZnVuY3Rpb24uaW52b2tlZFwiO1xuXHRpbnRlcm5hbEV2ZW50cyQxW1wiRnVuY3Rpb25GaW5pc2hlZFwiXSA9IFwiaW5uZ2VzdC9mdW5jdGlvbi5maW5pc2hlZFwiO1xuXHRpbnRlcm5hbEV2ZW50cyQxW1wiRnVuY3Rpb25DYW5jZWxsZWRcIl0gPSBcImlubmdlc3QvZnVuY3Rpb24uY2FuY2VsbGVkXCI7XG5cdGludGVybmFsRXZlbnRzJDFbXCJTY2hlZHVsZWRUaW1lclwiXSA9IFwiaW5uZ2VzdC9zY2hlZHVsZWQudGltZXJcIjtcblx0cmV0dXJuIGludGVybmFsRXZlbnRzJDE7XG59KHt9KTtcbmNvbnN0IGxvZ1ByZWZpeCA9IGNoYWxrLm1hZ2VudGEuYm9sZChcIltJbm5nZXN0XVwiKTtcbmNvbnN0IGRlYnVnUHJlZml4ID0gXCJpbm5nZXN0XCI7XG5jb25zdCBkdW1teUV2ZW50S2V5ID0gXCJOT19FVkVOVF9LRVlfU0VUXCI7XG5sZXQgc3luY0tpbmQgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oc3luY0tpbmQkMSkge1xuXHRzeW5jS2luZCQxW1wiSW5CYW5kXCJdID0gXCJpbl9iYW5kXCI7XG5cdHN5bmNLaW5kJDFbXCJPdXRPZkJhbmRcIl0gPSBcIm91dF9vZl9iYW5kXCI7XG5cdHJldHVybiBzeW5jS2luZCQxO1xufSh7fSk7XG4vKipcbiogVGhlIGV4ZWN1dGlvbiBtb2RlbHMgdGhlIFNESyBpcyBhd2FyZSBvZi5cbipcbiogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHBsYWNlcyB0byBlbnN1cmUgYWxsIGV4ZWN1dGlvbiB2ZXJzaW9ucyBhcmVcbiogYWNjb3VudGVkIGZvciBmb3IgYSBnaXZlbiBvcGVyYXRpb24uXG4qL1xubGV0IEV4ZWN1dGlvblZlcnNpb24gPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oRXhlY3V0aW9uVmVyc2lvbiQxKSB7XG5cdC8qKlxuXHQqIFZlcnkgbGVnYWN5LCBpbml0aWFsIHZlcnNpb24gb2YgdGhlIGV4ZWN1dG9yLiBVc2VzIGhhc2hlZCBvcCBvYmplY3RzIGFuZFxuXHQqIGBwb3NgIHRvIGRldGVybWluZSB0aGUgb3JkZXIgb2YgZXhlY3V0aW9uIGFuZCB3aGljaCBvcHMgdG8gcnVuLlxuXHQqXG5cdCogVmVyeSBzdHViYm9ybiBhYm91dCBkZXRlcm1pbmlzbS5cblx0Ki9cblx0RXhlY3V0aW9uVmVyc2lvbiQxW0V4ZWN1dGlvblZlcnNpb24kMVtcIlYwXCJdID0gMF0gPSBcIlYwXCI7XG5cdC8qKlxuXHQqIFVzZXMgYSBtb3JlIGZsZXhpYmxlIGFwcHJvYWNoIHRvIGV4ZWN1dGlvbiBhbmQgaXMgbW9yZSBsZW5pZW50IGFib3V0XG5cdCogZGV0ZXJtaW5pc20sIGFsbG93aW5nIG5vbi1zdGVwIGFzeW5jIGFjdGlvbnMgYW5kIG5vbi1kZXRlcm1pbmlzbS5cblx0KlxuXHQqIE5vd2hlcmUgbmVhciBhcyBzdHViYm9ybiBhYm91dCBkZXRlcm1pbmlzbSBhbmQgc28gY2FuIHNpbGVudGx5IG1pZ3JhdGVcblx0KiBiZXR3ZWVuIHZlcnNpb25zIGFmdGVyIGJ1ZyBmaXhlcy5cblx0Ki9cblx0RXhlY3V0aW9uVmVyc2lvbiQxW0V4ZWN1dGlvblZlcnNpb24kMVtcIlYxXCJdID0gMV0gPSBcIlYxXCI7XG5cdC8qKlxuXHQqIElkZW50aWNhbCB0byBWMSwgYnV0IGFsbG93cyB0aGUgRXhlY3V0b3IgdG8gb3B0aW1pemUgcGFyYWxsZWwgY2FsbHMsIGh1Z2VseVxuXHQqIHJlZHVjaW5nIHRyYWZmaWMgZ29pbmcgdG8vZnJvbSB0aGUgU0RLLlxuXHQqL1xuXHRFeGVjdXRpb25WZXJzaW9uJDFbRXhlY3V0aW9uVmVyc2lvbiQxW1wiVjJcIl0gPSAyXSA9IFwiVjJcIjtcblx0cmV0dXJuIEV4ZWN1dGlvblZlcnNpb24kMTtcbn0oe30pO1xuLyoqXG4qIERlZmF1bHQgbWF4aW11bSBudW1iZXIgb2YgcmV0cmllcyBmb3IgZnVuY3Rpb24vc3RlcCBleGVjdXRpb25zLlxuKi9cbmNvbnN0IGRlZmF1bHRNYXhSZXRyaWVzID0gMztcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBFeGVjdXRpb25WZXJzaW9uLCBkZWJ1Z1ByZWZpeCwgZGVmYXVsdERldlNlcnZlckhvc3QsIGRlZmF1bHRJbm5nZXN0QXBpQmFzZVVybCwgZGVmYXVsdElubmdlc3RFdmVudEJhc2VVcmwsIGRlZmF1bHRNYXhSZXRyaWVzLCBkdW1teUV2ZW50S2V5LCBlbnZLZXlzLCBmb3J3YXJkZWRIZWFkZXJzLCBoZWFkZXJLZXlzLCBpbnRlcm5hbEV2ZW50cywgbG9nUHJlZml4LCBwcm9iZSwgcXVlcnlLZXlzLCBzeW5jS2luZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/consts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/crypto.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/crypto.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEntropy: () => (/* binding */ createEntropy)\n/* harmony export */ });\n//#region src/helpers/crypto.ts\n/**\n* Create a cryptographically secure random value.\n*\n* @throws {Error} If the crypto module is not available.\n*/\nfunction createEntropy(byteLength) {\n\tconst bytes = new Uint8Array(byteLength);\n\tconst { crypto } = globalThis;\n\tif (!crypto) throw new Error(\"missing crypto module\");\n\tif (!crypto.getRandomValues) throw new Error(\"missing crypto.getRandomValues\");\n\tcrypto.getRandomValues(bytes);\n\treturn bytes;\n}\n\n//#endregion\n\n//# sourceMappingURL=crypto.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2NyeXB0by5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxTQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2NyeXB0by5qcz9kYzI1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvaGVscGVycy9jcnlwdG8udHNcbi8qKlxuKiBDcmVhdGUgYSBjcnlwdG9ncmFwaGljYWxseSBzZWN1cmUgcmFuZG9tIHZhbHVlLlxuKlxuKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNyeXB0byBtb2R1bGUgaXMgbm90IGF2YWlsYWJsZS5cbiovXG5mdW5jdGlvbiBjcmVhdGVFbnRyb3B5KGJ5dGVMZW5ndGgpIHtcblx0Y29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShieXRlTGVuZ3RoKTtcblx0Y29uc3QgeyBjcnlwdG8gfSA9IGdsb2JhbFRoaXM7XG5cdGlmICghY3J5cHRvKSB0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGNyeXB0byBtb2R1bGVcIik7XG5cdGlmICghY3J5cHRvLmdldFJhbmRvbVZhbHVlcykgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzXCIpO1xuXHRjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGJ5dGVzKTtcblx0cmV0dXJuIGJ5dGVzO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUVudHJvcHkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyeXB0by5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/crypto.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/devserver.js":
/*!***************************************************!*\
  !*** ./node_modules/inngest/helpers/devserver.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   devServerAvailable: () => (/* binding */ devServerAvailable),\n/* harmony export */   devServerUrl: () => (/* binding */ devServerUrl)\n/* harmony export */ });\n/* harmony import */ var _consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n\n\n\n//#region src/helpers/devserver.ts\n/**\n* Attempts to contact the dev server, returning a boolean indicating whether or\n* not it was successful.\n*\n* @example devServerUrl(process.env[envKeys.DevServerUrl], \"/your-path\")\n*/\nconst devServerAvailable = async (host = _consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost, fetch) => {\n\ttry {\n\t\tawait (await fetch(devServerUrl(host, \"/dev\").toString())).json();\n\t\treturn true;\n\t} catch (_e) {\n\t\treturn false;\n\t}\n};\n/**\n* devServerUrl returns a full URL for the given path name.\n*\n* Because Cloudflare/V8 platforms don't allow process.env, you are expected\n* to pass in the host from the dev server env key:\n*\n* @example devServerUrl(processEnv(envKeys.DevServerUrl), \"/your-path\")\n* @example devServerUrl(\"http://localhost:8288/\", \"/your-path\")\n*/\nconst devServerUrl = (host = devServerHost$1(), pathname = \"\") => {\n\treturn new URL(pathname, host.includes(\"://\") ? host : `http://${host}`);\n};\n/**\n* devServerHost exports the development server's domain by inspecting env\n* variables, or returns the default development server URL.\n*\n* This guarantees a specific URL as a string, as opposed to the env export\n* which only returns a value of the env var is set.\n*/\nconst devServerHost$1 = () => (0,_env_js__WEBPACK_IMPORTED_MODULE_1__.devServerHost)() || _consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost;\n\n//#endregion\n\n//# sourceMappingURL=devserver.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2RldnNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1EO0FBQ1Y7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDREQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsS0FBSztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFhLE1BQU0sNERBQW9COztBQUVyRTtBQUM0QztBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvZGV2c2VydmVyLmpzP2E0NDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdERldlNlcnZlckhvc3QgfSBmcm9tIFwiLi9jb25zdHMuanNcIjtcbmltcG9ydCB7IGRldlNlcnZlckhvc3QgfSBmcm9tIFwiLi9lbnYuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9oZWxwZXJzL2RldnNlcnZlci50c1xuLyoqXG4qIEF0dGVtcHRzIHRvIGNvbnRhY3QgdGhlIGRldiBzZXJ2ZXIsIHJldHVybmluZyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIG9yXG4qIG5vdCBpdCB3YXMgc3VjY2Vzc2Z1bC5cbipcbiogQGV4YW1wbGUgZGV2U2VydmVyVXJsKHByb2Nlc3MuZW52W2VudktleXMuRGV2U2VydmVyVXJsXSwgXCIveW91ci1wYXRoXCIpXG4qL1xuY29uc3QgZGV2U2VydmVyQXZhaWxhYmxlID0gYXN5bmMgKGhvc3QgPSBkZWZhdWx0RGV2U2VydmVySG9zdCwgZmV0Y2gpID0+IHtcblx0dHJ5IHtcblx0XHRhd2FpdCAoYXdhaXQgZmV0Y2goZGV2U2VydmVyVXJsKGhvc3QsIFwiL2RldlwiKS50b1N0cmluZygpKSkuanNvbigpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChfZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcbi8qKlxuKiBkZXZTZXJ2ZXJVcmwgcmV0dXJucyBhIGZ1bGwgVVJMIGZvciB0aGUgZ2l2ZW4gcGF0aCBuYW1lLlxuKlxuKiBCZWNhdXNlIENsb3VkZmxhcmUvVjggcGxhdGZvcm1zIGRvbid0IGFsbG93IHByb2Nlc3MuZW52LCB5b3UgYXJlIGV4cGVjdGVkXG4qIHRvIHBhc3MgaW4gdGhlIGhvc3QgZnJvbSB0aGUgZGV2IHNlcnZlciBlbnYga2V5OlxuKlxuKiBAZXhhbXBsZSBkZXZTZXJ2ZXJVcmwocHJvY2Vzc0VudihlbnZLZXlzLkRldlNlcnZlclVybCksIFwiL3lvdXItcGF0aFwiKVxuKiBAZXhhbXBsZSBkZXZTZXJ2ZXJVcmwoXCJodHRwOi8vbG9jYWxob3N0OjgyODgvXCIsIFwiL3lvdXItcGF0aFwiKVxuKi9cbmNvbnN0IGRldlNlcnZlclVybCA9IChob3N0ID0gZGV2U2VydmVySG9zdCQxKCksIHBhdGhuYW1lID0gXCJcIikgPT4ge1xuXHRyZXR1cm4gbmV3IFVSTChwYXRobmFtZSwgaG9zdC5pbmNsdWRlcyhcIjovL1wiKSA/IGhvc3QgOiBgaHR0cDovLyR7aG9zdH1gKTtcbn07XG4vKipcbiogZGV2U2VydmVySG9zdCBleHBvcnRzIHRoZSBkZXZlbG9wbWVudCBzZXJ2ZXIncyBkb21haW4gYnkgaW5zcGVjdGluZyBlbnZcbiogdmFyaWFibGVzLCBvciByZXR1cm5zIHRoZSBkZWZhdWx0IGRldmVsb3BtZW50IHNlcnZlciBVUkwuXG4qXG4qIFRoaXMgZ3VhcmFudGVlcyBhIHNwZWNpZmljIFVSTCBhcyBhIHN0cmluZywgYXMgb3Bwb3NlZCB0byB0aGUgZW52IGV4cG9ydFxuKiB3aGljaCBvbmx5IHJldHVybnMgYSB2YWx1ZSBvZiB0aGUgZW52IHZhciBpcyBzZXQuXG4qL1xuY29uc3QgZGV2U2VydmVySG9zdCQxID0gKCkgPT4gZGV2U2VydmVySG9zdCgpIHx8IGRlZmF1bHREZXZTZXJ2ZXJIb3N0O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRldlNlcnZlckF2YWlsYWJsZSwgZGV2U2VydmVyVXJsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXZzZXJ2ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/devserver.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/enum.js":
/*!**********************************************!*\
  !*** ./node_modules/inngest/helpers/enum.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enumFromValue: () => (/* binding */ enumFromValue)\n/* harmony export */ });\n//#region src/helpers/enum.ts\n/**\n* Returns the value of an enum from a string value.\n*\n* If the value given is not a value from the enum, `undefined` is returned.\n*/\nconst enumFromValue = (enumType, value) => {\n\tif (Object.values(enumType).includes(value)) return value;\n};\n\n//#endregion\n\n//# sourceMappingURL=enum.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2VudW0uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvZW51bS5qcz8zZjI5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvaGVscGVycy9lbnVtLnRzXG4vKipcbiogUmV0dXJucyB0aGUgdmFsdWUgb2YgYW4gZW51bSBmcm9tIGEgc3RyaW5nIHZhbHVlLlxuKlxuKiBJZiB0aGUgdmFsdWUgZ2l2ZW4gaXMgbm90IGEgdmFsdWUgZnJvbSB0aGUgZW51bSwgYHVuZGVmaW5lZGAgaXMgcmV0dXJuZWQuXG4qL1xuY29uc3QgZW51bUZyb21WYWx1ZSA9IChlbnVtVHlwZSwgdmFsdWUpID0+IHtcblx0aWYgKE9iamVjdC52YWx1ZXMoZW51bVR5cGUpLmluY2x1ZGVzKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBlbnVtRnJvbVZhbHVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnVtLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/enum.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/env.js":
/*!*********************************************!*\
  !*** ./node_modules/inngest/helpers/env.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mode: () => (/* binding */ Mode),\n/* harmony export */   allProcessEnv: () => (/* binding */ allProcessEnv),\n/* harmony export */   devServerHost: () => (/* binding */ devServerHost),\n/* harmony export */   getEnvironmentName: () => (/* binding */ getEnvironmentName),\n/* harmony export */   getFetch: () => (/* binding */ getFetch),\n/* harmony export */   getMode: () => (/* binding */ getMode),\n/* harmony export */   getPlatformName: () => (/* binding */ getPlatformName),\n/* harmony export */   getResponse: () => (/* binding */ getResponse),\n/* harmony export */   inngestHeaders: () => (/* binding */ inngestHeaders),\n/* harmony export */   parseAsBoolean: () => (/* binding */ parseAsBoolean),\n/* harmony export */   platformSupportsStreaming: () => (/* binding */ platformSupportsStreaming),\n/* harmony export */   processEnv: () => (/* binding */ processEnv)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../version.js */ \"(rsc)/./node_modules/inngest/version.js\");\n/* harmony import */ var _consts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n\n\n\n\n\n//#region src/helpers/env.ts\n/**\n* devServerHost returns the dev server host by searching for the INNGEST_DEVSERVER_URL\n* environment variable (plus project prefixces for eg. react, such as REACT_APP_INNGEST_DEVSERVER_URL).\n*\n* If not found this returns undefined, indicating that the env var has not been set.\n*\n* @example devServerHost()\n*/\nconst devServerHost = (env = allProcessEnv()) => {\n\tconst prefixes = [\"REACT_APP_\", \"NEXT_PUBLIC_\"];\n\treturn [_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestBaseUrl, _consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode].flatMap((key) => {\n\t\treturn prefixes.map((prefix) => {\n\t\t\treturn env[prefix + key];\n\t\t});\n\t}).find((v) => {\n\t\tif (!v) return;\n\t\ttry {\n\t\t\treturn Boolean(new URL(v));\n\t\t} catch {}\n\t});\n};\nconst checkFns = ((checks) => checks)({\n\tequals: (actual, expected) => actual === expected,\n\t\"starts with\": (actual, expected) => expected ? actual?.startsWith(expected) ?? false : false,\n\t\"is truthy\": (actual) => Boolean(actual),\n\t\"is truthy but not\": (actual, expected) => Boolean(actual) && actual !== expected\n});\nconst prodChecks = [\n\t[\n\t\t\"CF_PAGES\",\n\t\t\"equals\",\n\t\t\"1\"\n\t],\n\t[\n\t\t\"CONTEXT\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\n\t\t\"ENVIRONMENT\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\n\t\t\"NODE_ENV\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\n\t\t\"VERCEL_ENV\",\n\t\t\"starts with\",\n\t\t\"prod\"\n\t],\n\t[\"DENO_DEPLOYMENT_ID\", \"is truthy\"],\n\t[\n\t\t_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.VercelEnvKey,\n\t\t\"is truthy but not\",\n\t\t\"development\"\n\t],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsNetlify, \"is truthy\"],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsRender, \"is truthy\"],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RailwayBranch, \"is truthy\"],\n\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsCloudflarePages, \"is truthy\"]\n];\nvar Mode = class {\n\ttype;\n\t/**\n\t* Whether the mode was explicitly set, or inferred from other sources.\n\t*/\n\tisExplicit;\n\texplicitDevUrl;\n\tenv;\n\tconstructor({ type, isExplicit, explicitDevUrl, env = allProcessEnv() }) {\n\t\tthis.env = env;\n\t\tthis.type = type;\n\t\tthis.isExplicit = isExplicit || Boolean(explicitDevUrl);\n\t\tthis.explicitDevUrl = explicitDevUrl;\n\t}\n\tget isDev() {\n\t\treturn this.type === \"dev\";\n\t}\n\tget isCloud() {\n\t\treturn this.type === \"cloud\";\n\t}\n\tget isInferred() {\n\t\treturn !this.isExplicit;\n\t}\n\t/**\n\t* If we are explicitly in a particular mode, retrieve the URL that we are\n\t* sure we should be using, not considering any environment variables or other\n\t* influences.\n\t*/\n\tgetExplicitUrl(defaultCloudUrl) {\n\t\tif (!this.isExplicit) return;\n\t\tif (this.explicitDevUrl) return this.explicitDevUrl.href;\n\t\tif (this.isCloud) return defaultCloudUrl;\n\t\tif (this.isDev) return _consts_js__WEBPACK_IMPORTED_MODULE_0__.defaultDevServerHost;\n\t}\n};\n/**\n* Returns the mode of the current environment, based off of either passed\n* environment variables or `process.env`, or explicit settings.\n*/\nconst getMode = ({ env = allProcessEnv(), client, explicitMode } = {}) => {\n\tif (explicitMode) return new Mode({\n\t\ttype: explicitMode,\n\t\tisExplicit: true,\n\t\tenv\n\t});\n\tif (client?.[\"mode\"].isExplicit) return client[\"mode\"];\n\tif (_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode in env) {\n\t\tif (typeof env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode] === \"string\") try {\n\t\t\treturn new Mode({\n\t\t\t\ttype: \"dev\",\n\t\t\t\tisExplicit: true,\n\t\t\t\texplicitDevUrl: new URL(env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode]),\n\t\t\t\tenv\n\t\t\t});\n\t\t} catch {}\n\t\tconst envIsDev = parseAsBoolean(env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestDevMode]);\n\t\tif (typeof envIsDev === \"boolean\") return new Mode({\n\t\t\ttype: envIsDev ? \"dev\" : \"cloud\",\n\t\t\tisExplicit: true,\n\t\t\tenv\n\t\t});\n\t}\n\treturn new Mode({\n\t\ttype: prodChecks.some(([key, checkKey, expected]) => {\n\t\t\treturn checkFns[checkKey]((0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.stringifyUnknown)(env[key]), expected);\n\t\t}) ? \"cloud\" : \"dev\",\n\t\tisExplicit: false,\n\t\tenv\n\t});\n};\n/**\n* getEnvironmentName returns the suspected branch name for this environment by\n* searching through a set of common environment variables.\n*\n* This could be used to determine if we're on a branch deploy or not, though it\n* should be noted that we don't know if this is the default branch or not.\n*/\nconst getEnvironmentName = (env = allProcessEnv()) => {\n\t/**\n\t* Order is important; more than one of these env vars may be set, so ensure\n\t* that we check the most specific, most reliable env vars first.\n\t*/\n\treturn env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.InngestEnvironment] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.BranchName] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.VercelBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.NetlifyBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.CloudflarePagesBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RenderBranch] || env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RailwayBranch];\n};\nconst processEnv = (key) => {\n\treturn allProcessEnv()[key];\n};\n/**\n* allProcessEnv returns the current process environment variables, or an empty\n* object if they cannot be read, making sure we support environments other than\n* Node such as Deno, too.\n*\n* Using this ensures we don't dangerously access `process.env` in environments\n* where it may not be defined, such as Deno or the browser.\n*/\nconst allProcessEnv = () => {\n\ttry {\n\t\tif (process.env) return process.env;\n\t} catch (_err) {}\n\ttry {\n\t\tconst env = Deno.env.toObject();\n\t\tif (env) return env;\n\t} catch (_err) {}\n\ttry {\n\t\tconst env = Netlify.env.toObject();\n\t\tif (env) return env;\n\t} catch (_err) {}\n\treturn {};\n};\n/**\n* Generate a standardised set of headers based on input and environment\n* variables.\n*\n*\n*/\nconst inngestHeaders = (opts) => {\n\tconst sdkVersion = `inngest-js:v${_version_js__WEBPACK_IMPORTED_MODULE_2__.version}`;\n\tconst headers = {\n\t\t\"Content-Type\": \"application/json\",\n\t\t\"User-Agent\": sdkVersion,\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.SdkVersion]: sdkVersion\n\t};\n\tif (opts?.framework) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Framework] = opts.framework;\n\tif (opts?.expectedServerKind) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.InngestExpectedServerKind] = opts.expectedServerKind;\n\tconst env = {\n\t\t...allProcessEnv(),\n\t\t...opts?.env\n\t};\n\tconst inngestEnv = opts?.inngestEnv || getEnvironmentName(env);\n\tif (inngestEnv) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Environment] = inngestEnv;\n\tconst platform = getPlatformName(env);\n\tif (platform) headers[_consts_js__WEBPACK_IMPORTED_MODULE_0__.headerKeys.Platform] = platform;\n\treturn {\n\t\t...headers,\n\t\t...opts?.client?.[\"headers\"],\n\t\t...opts?.extras\n\t};\n};\n/**\n* A set of checks that, given an environment, will return `true` if the current\n* environment is running on the platform with the given name.\n*/\nconst platformChecks = {\n\tvercel: (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsVercel] === \"1\" || typeof EdgeRuntime === \"string\",\n\tnetlify: (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsNetlify] === \"true\",\n\t\"cloudflare-pages\": (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsCloudflarePages] === \"1\",\n\trender: (env) => env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.IsRender] === \"true\",\n\trailway: (env) => Boolean(env[_consts_js__WEBPACK_IMPORTED_MODULE_0__.envKeys.RailwayEnvironment])\n};\n/**\n* A set of checks that, given an environment, will return `true` if the current\n* environment and platform supports streaming responses back to Inngest.\n*\n* Streaming capability is both framework and platform-based. Frameworks are\n* supported in serve handlers, and platforms are checked here.\n*\n* As such, this record declares which platforms we explicitly support for\n* streaming and is used by {@link platformSupportsStreaming}.\n*/\nconst streamingChecks = {\n\tvercel: (_framework, _env) => typeof EdgeRuntime === \"string\",\n\t\"cloudflare-pages\": () => true\n};\nconst getPlatformName = (env) => {\n\treturn Object.keys(platformChecks).find((key) => {\n\t\treturn platformChecks[key](env);\n\t});\n};\n/**\n* Returns `true` if we believe the current environment supports streaming\n* responses back to Inngest.\n*\n* We run a check directly related to the platform we believe we're running on,\n* usually based on environment variables.\n*/\nconst platformSupportsStreaming = (framework, env = allProcessEnv()) => {\n\treturn streamingChecks[getPlatformName(env)]?.(framework, env) ?? false;\n};\n/**\n* A unique symbol used to mark a custom fetch implementation. We wrap the\n* implementations to provide some extra control when handling errors.\n*/\nconst CUSTOM_FETCH_MARKER = Symbol(\"Custom fetch implementation\");\n/**\n* Given a potential fetch function, return the fetch function to use based on\n* this and the environment.\n*/\nconst getFetch = (givenFetch) => {\n\t/**\n\t* If we've explicitly been given a fetch function, use that.\n\t*/\n\tif (givenFetch) {\n\t\tif (CUSTOM_FETCH_MARKER in givenFetch) return givenFetch;\n\t\t/**\n\t\t* We wrap the given fetch function to provide some extra control when\n\t\t* handling errors.\n\t\t*/\n\t\tconst customFetch = async (...args) => {\n\t\t\ttry {\n\t\t\t\treturn await givenFetch(...args);\n\t\t\t} catch (err) {\n\t\t\t\t/**\n\t\t\t\t* Capture warnings that are not simple fetch failures and highlight\n\t\t\t\t* them for the user.\n\t\t\t\t*\n\t\t\t\t* We also use this opportunity to log the causing error, as code higher\n\t\t\t\t* up the stack will likely abstract this.\n\t\t\t\t*/\n\t\t\t\tif (!(err instanceof Error) || !err.message?.startsWith(\"fetch failed\")) {\n\t\t\t\t\tconsole.warn(\"A request failed when using a custom fetch implementation; this may be a misconfiguration. Make sure that your fetch client is correctly bound to the global scope.\");\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t* Mark the custom fetch implementation so that we can identify it later, in\n\t\t* addition to adding some runtime properties to it to make it seem as much\n\t\t* like the original fetch as possible.\n\t\t*/\n\t\tObject.defineProperties(customFetch, {\n\t\t\t[CUSTOM_FETCH_MARKER]: {},\n\t\t\tname: { value: givenFetch.name },\n\t\t\tlength: { value: givenFetch.length }\n\t\t});\n\t\treturn customFetch;\n\t}\n\t/**\n\t* Browser or Node 18+\n\t*/\n\ttry {\n\t\tif (typeof globalThis !== \"undefined\" && \"fetch\" in globalThis) return fetch.bind(globalThis);\n\t} catch (_err) {}\n\t/**\n\t* Existing polyfilled fetch\n\t*/\n\tif (typeof fetch !== \"undefined\") return fetch;\n\t/**\n\t* Environments where fetch cannot be found and must be polyfilled\n\t*/\n\treturn (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_3__.__require)(\"cross-fetch\");\n};\n/**\n* If `Response` isn't included in this environment, it's probably an earlier\n* Node env that isn't already polyfilling. This function returns either the\n* native `Response` or a polyfilled one.\n*/\nconst getResponse = () => {\n\tif (typeof Response !== \"undefined\") return Response;\n\treturn (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_3__.__require)(\"cross-fetch\").Response;\n};\n/**\n* Given an unknown value, try to parse it as a `boolean`. Useful for parsing\n* environment variables that could be a selection of different values such as\n* `\"true\"`, `\"1\"`.\n*\n* If the value could not be confidently parsed as a `boolean` or was seen to be\n* `undefined`, this function returns `undefined`.\n*/\nconst parseAsBoolean = (value) => {\n\tif (typeof value === \"boolean\") return value;\n\tif (typeof value === \"number\") return Boolean(value);\n\tif (typeof value === \"string\") {\n\t\tconst trimmed = value.trim().toLowerCase();\n\t\tif (trimmed === \"undefined\") return;\n\t\tif ([\"true\", \"1\"].includes(trimmed)) return true;\n\t\treturn false;\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTREO0FBQ3BCO0FBQ2dDO0FBQ3hCOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrQ0FBTyxpQkFBaUIsK0NBQU87QUFDeEM7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLCtDQUFPO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsRUFBRSwrQ0FBTztBQUNULEVBQUUsK0NBQU87QUFDVCxFQUFFLCtDQUFPO0FBQ1QsRUFBRSwrQ0FBTztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQXlEO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNERBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4Q0FBOEMsSUFBSTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLEtBQUssK0NBQU87QUFDWixpQkFBaUIsK0NBQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLCtDQUFPO0FBQ3ZDO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSixzQ0FBc0MsK0NBQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZEQUFnQjtBQUM3QyxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsWUFBWSwrQ0FBTyw0QkFBNEIsK0NBQU8sb0JBQW9CLCtDQUFPLHNCQUFzQiwrQ0FBTyx1QkFBdUIsK0NBQU8sK0JBQStCLCtDQUFPLHNCQUFzQiwrQ0FBTztBQUMvTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0RBQU8sQ0FBQztBQUMzQztBQUNBO0FBQ0E7QUFDQSxHQUFHLGtEQUFVO0FBQ2I7QUFDQSw4QkFBOEIsa0RBQVU7QUFDeEMsdUNBQXVDLGtEQUFVO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsa0RBQVU7QUFDbkM7QUFDQSx1QkFBdUIsa0RBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrQ0FBTztBQUM3Qix1QkFBdUIsK0NBQU87QUFDOUIsa0NBQWtDLCtDQUFPO0FBQ3pDLHNCQUFzQiwrQ0FBTztBQUM3QiwrQkFBK0IsK0NBQU87QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdDQUFnQztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUIsV0FBVyx3QkFBd0I7QUFDbkMsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUVBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUVBQVM7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMEw7QUFDMUwiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Vudi5qcz8xNTI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fcmVxdWlyZSB9IGZyb20gXCIuLi9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IGRlZmF1bHREZXZTZXJ2ZXJIb3N0LCBlbnZLZXlzLCBoZWFkZXJLZXlzIH0gZnJvbSBcIi4vY29uc3RzLmpzXCI7XG5pbXBvcnQgeyBzdHJpbmdpZnlVbmtub3duIH0gZnJvbSBcIi4vc3RyaW5ncy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2hlbHBlcnMvZW52LnRzXG4vKipcbiogZGV2U2VydmVySG9zdCByZXR1cm5zIHRoZSBkZXYgc2VydmVyIGhvc3QgYnkgc2VhcmNoaW5nIGZvciB0aGUgSU5OR0VTVF9ERVZTRVJWRVJfVVJMXG4qIGVudmlyb25tZW50IHZhcmlhYmxlIChwbHVzIHByb2plY3QgcHJlZml4Y2VzIGZvciBlZy4gcmVhY3QsIHN1Y2ggYXMgUkVBQ1RfQVBQX0lOTkdFU1RfREVWU0VSVkVSX1VSTCkuXG4qXG4qIElmIG5vdCBmb3VuZCB0aGlzIHJldHVybnMgdW5kZWZpbmVkLCBpbmRpY2F0aW5nIHRoYXQgdGhlIGVudiB2YXIgaGFzIG5vdCBiZWVuIHNldC5cbipcbiogQGV4YW1wbGUgZGV2U2VydmVySG9zdCgpXG4qL1xuY29uc3QgZGV2U2VydmVySG9zdCA9IChlbnYgPSBhbGxQcm9jZXNzRW52KCkpID0+IHtcblx0Y29uc3QgcHJlZml4ZXMgPSBbXCJSRUFDVF9BUFBfXCIsIFwiTkVYVF9QVUJMSUNfXCJdO1xuXHRyZXR1cm4gW2VudktleXMuSW5uZ2VzdEJhc2VVcmwsIGVudktleXMuSW5uZ2VzdERldk1vZGVdLmZsYXRNYXAoKGtleSkgPT4ge1xuXHRcdHJldHVybiBwcmVmaXhlcy5tYXAoKHByZWZpeCkgPT4ge1xuXHRcdFx0cmV0dXJuIGVudltwcmVmaXggKyBrZXldO1xuXHRcdH0pO1xuXHR9KS5maW5kKCh2KSA9PiB7XG5cdFx0aWYgKCF2KSByZXR1cm47XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBCb29sZWFuKG5ldyBVUkwodikpO1xuXHRcdH0gY2F0Y2gge31cblx0fSk7XG59O1xuY29uc3QgY2hlY2tGbnMgPSAoKGNoZWNrcykgPT4gY2hlY2tzKSh7XG5cdGVxdWFsczogKGFjdHVhbCwgZXhwZWN0ZWQpID0+IGFjdHVhbCA9PT0gZXhwZWN0ZWQsXG5cdFwic3RhcnRzIHdpdGhcIjogKGFjdHVhbCwgZXhwZWN0ZWQpID0+IGV4cGVjdGVkID8gYWN0dWFsPy5zdGFydHNXaXRoKGV4cGVjdGVkKSA/PyBmYWxzZSA6IGZhbHNlLFxuXHRcImlzIHRydXRoeVwiOiAoYWN0dWFsKSA9PiBCb29sZWFuKGFjdHVhbCksXG5cdFwiaXMgdHJ1dGh5IGJ1dCBub3RcIjogKGFjdHVhbCwgZXhwZWN0ZWQpID0+IEJvb2xlYW4oYWN0dWFsKSAmJiBhY3R1YWwgIT09IGV4cGVjdGVkXG59KTtcbmNvbnN0IHByb2RDaGVja3MgPSBbXG5cdFtcblx0XHRcIkNGX1BBR0VTXCIsXG5cdFx0XCJlcXVhbHNcIixcblx0XHRcIjFcIlxuXHRdLFxuXHRbXG5cdFx0XCJDT05URVhUXCIsXG5cdFx0XCJzdGFydHMgd2l0aFwiLFxuXHRcdFwicHJvZFwiXG5cdF0sXG5cdFtcblx0XHRcIkVOVklST05NRU5UXCIsXG5cdFx0XCJzdGFydHMgd2l0aFwiLFxuXHRcdFwicHJvZFwiXG5cdF0sXG5cdFtcblx0XHRcIk5PREVfRU5WXCIsXG5cdFx0XCJzdGFydHMgd2l0aFwiLFxuXHRcdFwicHJvZFwiXG5cdF0sXG5cdFtcblx0XHRcIlZFUkNFTF9FTlZcIixcblx0XHRcInN0YXJ0cyB3aXRoXCIsXG5cdFx0XCJwcm9kXCJcblx0XSxcblx0W1wiREVOT19ERVBMT1lNRU5UX0lEXCIsIFwiaXMgdHJ1dGh5XCJdLFxuXHRbXG5cdFx0ZW52S2V5cy5WZXJjZWxFbnZLZXksXG5cdFx0XCJpcyB0cnV0aHkgYnV0IG5vdFwiLFxuXHRcdFwiZGV2ZWxvcG1lbnRcIlxuXHRdLFxuXHRbZW52S2V5cy5Jc05ldGxpZnksIFwiaXMgdHJ1dGh5XCJdLFxuXHRbZW52S2V5cy5Jc1JlbmRlciwgXCJpcyB0cnV0aHlcIl0sXG5cdFtlbnZLZXlzLlJhaWx3YXlCcmFuY2gsIFwiaXMgdHJ1dGh5XCJdLFxuXHRbZW52S2V5cy5Jc0Nsb3VkZmxhcmVQYWdlcywgXCJpcyB0cnV0aHlcIl1cbl07XG52YXIgTW9kZSA9IGNsYXNzIHtcblx0dHlwZTtcblx0LyoqXG5cdCogV2hldGhlciB0aGUgbW9kZSB3YXMgZXhwbGljaXRseSBzZXQsIG9yIGluZmVycmVkIGZyb20gb3RoZXIgc291cmNlcy5cblx0Ki9cblx0aXNFeHBsaWNpdDtcblx0ZXhwbGljaXREZXZVcmw7XG5cdGVudjtcblx0Y29uc3RydWN0b3IoeyB0eXBlLCBpc0V4cGxpY2l0LCBleHBsaWNpdERldlVybCwgZW52ID0gYWxsUHJvY2Vzc0VudigpIH0pIHtcblx0XHR0aGlzLmVudiA9IGVudjtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdHRoaXMuaXNFeHBsaWNpdCA9IGlzRXhwbGljaXQgfHwgQm9vbGVhbihleHBsaWNpdERldlVybCk7XG5cdFx0dGhpcy5leHBsaWNpdERldlVybCA9IGV4cGxpY2l0RGV2VXJsO1xuXHR9XG5cdGdldCBpc0RldigpIHtcblx0XHRyZXR1cm4gdGhpcy50eXBlID09PSBcImRldlwiO1xuXHR9XG5cdGdldCBpc0Nsb3VkKCkge1xuXHRcdHJldHVybiB0aGlzLnR5cGUgPT09IFwiY2xvdWRcIjtcblx0fVxuXHRnZXQgaXNJbmZlcnJlZCgpIHtcblx0XHRyZXR1cm4gIXRoaXMuaXNFeHBsaWNpdDtcblx0fVxuXHQvKipcblx0KiBJZiB3ZSBhcmUgZXhwbGljaXRseSBpbiBhIHBhcnRpY3VsYXIgbW9kZSwgcmV0cmlldmUgdGhlIFVSTCB0aGF0IHdlIGFyZVxuXHQqIHN1cmUgd2Ugc2hvdWxkIGJlIHVzaW5nLCBub3QgY29uc2lkZXJpbmcgYW55IGVudmlyb25tZW50IHZhcmlhYmxlcyBvciBvdGhlclxuXHQqIGluZmx1ZW5jZXMuXG5cdCovXG5cdGdldEV4cGxpY2l0VXJsKGRlZmF1bHRDbG91ZFVybCkge1xuXHRcdGlmICghdGhpcy5pc0V4cGxpY2l0KSByZXR1cm47XG5cdFx0aWYgKHRoaXMuZXhwbGljaXREZXZVcmwpIHJldHVybiB0aGlzLmV4cGxpY2l0RGV2VXJsLmhyZWY7XG5cdFx0aWYgKHRoaXMuaXNDbG91ZCkgcmV0dXJuIGRlZmF1bHRDbG91ZFVybDtcblx0XHRpZiAodGhpcy5pc0RldikgcmV0dXJuIGRlZmF1bHREZXZTZXJ2ZXJIb3N0O1xuXHR9XG59O1xuLyoqXG4qIFJldHVybnMgdGhlIG1vZGUgb2YgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQsIGJhc2VkIG9mZiBvZiBlaXRoZXIgcGFzc2VkXG4qIGVudmlyb25tZW50IHZhcmlhYmxlcyBvciBgcHJvY2Vzcy5lbnZgLCBvciBleHBsaWNpdCBzZXR0aW5ncy5cbiovXG5jb25zdCBnZXRNb2RlID0gKHsgZW52ID0gYWxsUHJvY2Vzc0VudigpLCBjbGllbnQsIGV4cGxpY2l0TW9kZSB9ID0ge30pID0+IHtcblx0aWYgKGV4cGxpY2l0TW9kZSkgcmV0dXJuIG5ldyBNb2RlKHtcblx0XHR0eXBlOiBleHBsaWNpdE1vZGUsXG5cdFx0aXNFeHBsaWNpdDogdHJ1ZSxcblx0XHRlbnZcblx0fSk7XG5cdGlmIChjbGllbnQ/LltcIm1vZGVcIl0uaXNFeHBsaWNpdCkgcmV0dXJuIGNsaWVudFtcIm1vZGVcIl07XG5cdGlmIChlbnZLZXlzLklubmdlc3REZXZNb2RlIGluIGVudikge1xuXHRcdGlmICh0eXBlb2YgZW52W2VudktleXMuSW5uZ2VzdERldk1vZGVdID09PSBcInN0cmluZ1wiKSB0cnkge1xuXHRcdFx0cmV0dXJuIG5ldyBNb2RlKHtcblx0XHRcdFx0dHlwZTogXCJkZXZcIixcblx0XHRcdFx0aXNFeHBsaWNpdDogdHJ1ZSxcblx0XHRcdFx0ZXhwbGljaXREZXZVcmw6IG5ldyBVUkwoZW52W2VudktleXMuSW5uZ2VzdERldk1vZGVdKSxcblx0XHRcdFx0ZW52XG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIHt9XG5cdFx0Y29uc3QgZW52SXNEZXYgPSBwYXJzZUFzQm9vbGVhbihlbnZbZW52S2V5cy5Jbm5nZXN0RGV2TW9kZV0pO1xuXHRcdGlmICh0eXBlb2YgZW52SXNEZXYgPT09IFwiYm9vbGVhblwiKSByZXR1cm4gbmV3IE1vZGUoe1xuXHRcdFx0dHlwZTogZW52SXNEZXYgPyBcImRldlwiIDogXCJjbG91ZFwiLFxuXHRcdFx0aXNFeHBsaWNpdDogdHJ1ZSxcblx0XHRcdGVudlxuXHRcdH0pO1xuXHR9XG5cdHJldHVybiBuZXcgTW9kZSh7XG5cdFx0dHlwZTogcHJvZENoZWNrcy5zb21lKChba2V5LCBjaGVja0tleSwgZXhwZWN0ZWRdKSA9PiB7XG5cdFx0XHRyZXR1cm4gY2hlY2tGbnNbY2hlY2tLZXldKHN0cmluZ2lmeVVua25vd24oZW52W2tleV0pLCBleHBlY3RlZCk7XG5cdFx0fSkgPyBcImNsb3VkXCIgOiBcImRldlwiLFxuXHRcdGlzRXhwbGljaXQ6IGZhbHNlLFxuXHRcdGVudlxuXHR9KTtcbn07XG4vKipcbiogZ2V0RW52aXJvbm1lbnROYW1lIHJldHVybnMgdGhlIHN1c3BlY3RlZCBicmFuY2ggbmFtZSBmb3IgdGhpcyBlbnZpcm9ubWVudCBieVxuKiBzZWFyY2hpbmcgdGhyb3VnaCBhIHNldCBvZiBjb21tb24gZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuKlxuKiBUaGlzIGNvdWxkIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlJ3JlIG9uIGEgYnJhbmNoIGRlcGxveSBvciBub3QsIHRob3VnaCBpdFxuKiBzaG91bGQgYmUgbm90ZWQgdGhhdCB3ZSBkb24ndCBrbm93IGlmIHRoaXMgaXMgdGhlIGRlZmF1bHQgYnJhbmNoIG9yIG5vdC5cbiovXG5jb25zdCBnZXRFbnZpcm9ubWVudE5hbWUgPSAoZW52ID0gYWxsUHJvY2Vzc0VudigpKSA9PiB7XG5cdC8qKlxuXHQqIE9yZGVyIGlzIGltcG9ydGFudDsgbW9yZSB0aGFuIG9uZSBvZiB0aGVzZSBlbnYgdmFycyBtYXkgYmUgc2V0LCBzbyBlbnN1cmVcblx0KiB0aGF0IHdlIGNoZWNrIHRoZSBtb3N0IHNwZWNpZmljLCBtb3N0IHJlbGlhYmxlIGVudiB2YXJzIGZpcnN0LlxuXHQqL1xuXHRyZXR1cm4gZW52W2VudktleXMuSW5uZ2VzdEVudmlyb25tZW50XSB8fCBlbnZbZW52S2V5cy5CcmFuY2hOYW1lXSB8fCBlbnZbZW52S2V5cy5WZXJjZWxCcmFuY2hdIHx8IGVudltlbnZLZXlzLk5ldGxpZnlCcmFuY2hdIHx8IGVudltlbnZLZXlzLkNsb3VkZmxhcmVQYWdlc0JyYW5jaF0gfHwgZW52W2VudktleXMuUmVuZGVyQnJhbmNoXSB8fCBlbnZbZW52S2V5cy5SYWlsd2F5QnJhbmNoXTtcbn07XG5jb25zdCBwcm9jZXNzRW52ID0gKGtleSkgPT4ge1xuXHRyZXR1cm4gYWxsUHJvY2Vzc0VudigpW2tleV07XG59O1xuLyoqXG4qIGFsbFByb2Nlc3NFbnYgcmV0dXJucyB0aGUgY3VycmVudCBwcm9jZXNzIGVudmlyb25tZW50IHZhcmlhYmxlcywgb3IgYW4gZW1wdHlcbiogb2JqZWN0IGlmIHRoZXkgY2Fubm90IGJlIHJlYWQsIG1ha2luZyBzdXJlIHdlIHN1cHBvcnQgZW52aXJvbm1lbnRzIG90aGVyIHRoYW5cbiogTm9kZSBzdWNoIGFzIERlbm8sIHRvby5cbipcbiogVXNpbmcgdGhpcyBlbnN1cmVzIHdlIGRvbid0IGRhbmdlcm91c2x5IGFjY2VzcyBgcHJvY2Vzcy5lbnZgIGluIGVudmlyb25tZW50c1xuKiB3aGVyZSBpdCBtYXkgbm90IGJlIGRlZmluZWQsIHN1Y2ggYXMgRGVubyBvciB0aGUgYnJvd3Nlci5cbiovXG5jb25zdCBhbGxQcm9jZXNzRW52ID0gKCkgPT4ge1xuXHR0cnkge1xuXHRcdGlmIChwcm9jZXNzLmVudikgcmV0dXJuIHByb2Nlc3MuZW52O1xuXHR9IGNhdGNoIChfZXJyKSB7fVxuXHR0cnkge1xuXHRcdGNvbnN0IGVudiA9IERlbm8uZW52LnRvT2JqZWN0KCk7XG5cdFx0aWYgKGVudikgcmV0dXJuIGVudjtcblx0fSBjYXRjaCAoX2Vycikge31cblx0dHJ5IHtcblx0XHRjb25zdCBlbnYgPSBOZXRsaWZ5LmVudi50b09iamVjdCgpO1xuXHRcdGlmIChlbnYpIHJldHVybiBlbnY7XG5cdH0gY2F0Y2ggKF9lcnIpIHt9XG5cdHJldHVybiB7fTtcbn07XG4vKipcbiogR2VuZXJhdGUgYSBzdGFuZGFyZGlzZWQgc2V0IG9mIGhlYWRlcnMgYmFzZWQgb24gaW5wdXQgYW5kIGVudmlyb25tZW50XG4qIHZhcmlhYmxlcy5cbipcbipcbiovXG5jb25zdCBpbm5nZXN0SGVhZGVycyA9IChvcHRzKSA9PiB7XG5cdGNvbnN0IHNka1ZlcnNpb24gPSBgaW5uZ2VzdC1qczp2JHt2ZXJzaW9ufWA7XG5cdGNvbnN0IGhlYWRlcnMgPSB7XG5cdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XCJVc2VyLUFnZW50XCI6IHNka1ZlcnNpb24sXG5cdFx0W2hlYWRlcktleXMuU2RrVmVyc2lvbl06IHNka1ZlcnNpb25cblx0fTtcblx0aWYgKG9wdHM/LmZyYW1ld29yaykgaGVhZGVyc1toZWFkZXJLZXlzLkZyYW1ld29ya10gPSBvcHRzLmZyYW1ld29yaztcblx0aWYgKG9wdHM/LmV4cGVjdGVkU2VydmVyS2luZCkgaGVhZGVyc1toZWFkZXJLZXlzLklubmdlc3RFeHBlY3RlZFNlcnZlcktpbmRdID0gb3B0cy5leHBlY3RlZFNlcnZlcktpbmQ7XG5cdGNvbnN0IGVudiA9IHtcblx0XHQuLi5hbGxQcm9jZXNzRW52KCksXG5cdFx0Li4ub3B0cz8uZW52XG5cdH07XG5cdGNvbnN0IGlubmdlc3RFbnYgPSBvcHRzPy5pbm5nZXN0RW52IHx8IGdldEVudmlyb25tZW50TmFtZShlbnYpO1xuXHRpZiAoaW5uZ2VzdEVudikgaGVhZGVyc1toZWFkZXJLZXlzLkVudmlyb25tZW50XSA9IGlubmdlc3RFbnY7XG5cdGNvbnN0IHBsYXRmb3JtID0gZ2V0UGxhdGZvcm1OYW1lKGVudik7XG5cdGlmIChwbGF0Zm9ybSkgaGVhZGVyc1toZWFkZXJLZXlzLlBsYXRmb3JtXSA9IHBsYXRmb3JtO1xuXHRyZXR1cm4ge1xuXHRcdC4uLmhlYWRlcnMsXG5cdFx0Li4ub3B0cz8uY2xpZW50Py5bXCJoZWFkZXJzXCJdLFxuXHRcdC4uLm9wdHM/LmV4dHJhc1xuXHR9O1xufTtcbi8qKlxuKiBBIHNldCBvZiBjaGVja3MgdGhhdCwgZ2l2ZW4gYW4gZW52aXJvbm1lbnQsIHdpbGwgcmV0dXJuIGB0cnVlYCBpZiB0aGUgY3VycmVudFxuKiBlbnZpcm9ubWVudCBpcyBydW5uaW5nIG9uIHRoZSBwbGF0Zm9ybSB3aXRoIHRoZSBnaXZlbiBuYW1lLlxuKi9cbmNvbnN0IHBsYXRmb3JtQ2hlY2tzID0ge1xuXHR2ZXJjZWw6IChlbnYpID0+IGVudltlbnZLZXlzLklzVmVyY2VsXSA9PT0gXCIxXCIgfHwgdHlwZW9mIEVkZ2VSdW50aW1lID09PSBcInN0cmluZ1wiLFxuXHRuZXRsaWZ5OiAoZW52KSA9PiBlbnZbZW52S2V5cy5Jc05ldGxpZnldID09PSBcInRydWVcIixcblx0XCJjbG91ZGZsYXJlLXBhZ2VzXCI6IChlbnYpID0+IGVudltlbnZLZXlzLklzQ2xvdWRmbGFyZVBhZ2VzXSA9PT0gXCIxXCIsXG5cdHJlbmRlcjogKGVudikgPT4gZW52W2VudktleXMuSXNSZW5kZXJdID09PSBcInRydWVcIixcblx0cmFpbHdheTogKGVudikgPT4gQm9vbGVhbihlbnZbZW52S2V5cy5SYWlsd2F5RW52aXJvbm1lbnRdKVxufTtcbi8qKlxuKiBBIHNldCBvZiBjaGVja3MgdGhhdCwgZ2l2ZW4gYW4gZW52aXJvbm1lbnQsIHdpbGwgcmV0dXJuIGB0cnVlYCBpZiB0aGUgY3VycmVudFxuKiBlbnZpcm9ubWVudCBhbmQgcGxhdGZvcm0gc3VwcG9ydHMgc3RyZWFtaW5nIHJlc3BvbnNlcyBiYWNrIHRvIElubmdlc3QuXG4qXG4qIFN0cmVhbWluZyBjYXBhYmlsaXR5IGlzIGJvdGggZnJhbWV3b3JrIGFuZCBwbGF0Zm9ybS1iYXNlZC4gRnJhbWV3b3JrcyBhcmVcbiogc3VwcG9ydGVkIGluIHNlcnZlIGhhbmRsZXJzLCBhbmQgcGxhdGZvcm1zIGFyZSBjaGVja2VkIGhlcmUuXG4qXG4qIEFzIHN1Y2gsIHRoaXMgcmVjb3JkIGRlY2xhcmVzIHdoaWNoIHBsYXRmb3JtcyB3ZSBleHBsaWNpdGx5IHN1cHBvcnQgZm9yXG4qIHN0cmVhbWluZyBhbmQgaXMgdXNlZCBieSB7QGxpbmsgcGxhdGZvcm1TdXBwb3J0c1N0cmVhbWluZ30uXG4qL1xuY29uc3Qgc3RyZWFtaW5nQ2hlY2tzID0ge1xuXHR2ZXJjZWw6IChfZnJhbWV3b3JrLCBfZW52KSA9PiB0eXBlb2YgRWRnZVJ1bnRpbWUgPT09IFwic3RyaW5nXCIsXG5cdFwiY2xvdWRmbGFyZS1wYWdlc1wiOiAoKSA9PiB0cnVlXG59O1xuY29uc3QgZ2V0UGxhdGZvcm1OYW1lID0gKGVudikgPT4ge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMocGxhdGZvcm1DaGVja3MpLmZpbmQoKGtleSkgPT4ge1xuXHRcdHJldHVybiBwbGF0Zm9ybUNoZWNrc1trZXldKGVudik7XG5cdH0pO1xufTtcbi8qKlxuKiBSZXR1cm5zIGB0cnVlYCBpZiB3ZSBiZWxpZXZlIHRoZSBjdXJyZW50IGVudmlyb25tZW50IHN1cHBvcnRzIHN0cmVhbWluZ1xuKiByZXNwb25zZXMgYmFjayB0byBJbm5nZXN0LlxuKlxuKiBXZSBydW4gYSBjaGVjayBkaXJlY3RseSByZWxhdGVkIHRvIHRoZSBwbGF0Zm9ybSB3ZSBiZWxpZXZlIHdlJ3JlIHJ1bm5pbmcgb24sXG4qIHVzdWFsbHkgYmFzZWQgb24gZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuKi9cbmNvbnN0IHBsYXRmb3JtU3VwcG9ydHNTdHJlYW1pbmcgPSAoZnJhbWV3b3JrLCBlbnYgPSBhbGxQcm9jZXNzRW52KCkpID0+IHtcblx0cmV0dXJuIHN0cmVhbWluZ0NoZWNrc1tnZXRQbGF0Zm9ybU5hbWUoZW52KV0/LihmcmFtZXdvcmssIGVudikgPz8gZmFsc2U7XG59O1xuLyoqXG4qIEEgdW5pcXVlIHN5bWJvbCB1c2VkIHRvIG1hcmsgYSBjdXN0b20gZmV0Y2ggaW1wbGVtZW50YXRpb24uIFdlIHdyYXAgdGhlXG4qIGltcGxlbWVudGF0aW9ucyB0byBwcm92aWRlIHNvbWUgZXh0cmEgY29udHJvbCB3aGVuIGhhbmRsaW5nIGVycm9ycy5cbiovXG5jb25zdCBDVVNUT01fRkVUQ0hfTUFSS0VSID0gU3ltYm9sKFwiQ3VzdG9tIGZldGNoIGltcGxlbWVudGF0aW9uXCIpO1xuLyoqXG4qIEdpdmVuIGEgcG90ZW50aWFsIGZldGNoIGZ1bmN0aW9uLCByZXR1cm4gdGhlIGZldGNoIGZ1bmN0aW9uIHRvIHVzZSBiYXNlZCBvblxuKiB0aGlzIGFuZCB0aGUgZW52aXJvbm1lbnQuXG4qL1xuY29uc3QgZ2V0RmV0Y2ggPSAoZ2l2ZW5GZXRjaCkgPT4ge1xuXHQvKipcblx0KiBJZiB3ZSd2ZSBleHBsaWNpdGx5IGJlZW4gZ2l2ZW4gYSBmZXRjaCBmdW5jdGlvbiwgdXNlIHRoYXQuXG5cdCovXG5cdGlmIChnaXZlbkZldGNoKSB7XG5cdFx0aWYgKENVU1RPTV9GRVRDSF9NQVJLRVIgaW4gZ2l2ZW5GZXRjaCkgcmV0dXJuIGdpdmVuRmV0Y2g7XG5cdFx0LyoqXG5cdFx0KiBXZSB3cmFwIHRoZSBnaXZlbiBmZXRjaCBmdW5jdGlvbiB0byBwcm92aWRlIHNvbWUgZXh0cmEgY29udHJvbCB3aGVuXG5cdFx0KiBoYW5kbGluZyBlcnJvcnMuXG5cdFx0Ki9cblx0XHRjb25zdCBjdXN0b21GZXRjaCA9IGFzeW5jICguLi5hcmdzKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXR1cm4gYXdhaXQgZ2l2ZW5GZXRjaCguLi5hcmdzKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHQvKipcblx0XHRcdFx0KiBDYXB0dXJlIHdhcm5pbmdzIHRoYXQgYXJlIG5vdCBzaW1wbGUgZmV0Y2ggZmFpbHVyZXMgYW5kIGhpZ2hsaWdodFxuXHRcdFx0XHQqIHRoZW0gZm9yIHRoZSB1c2VyLlxuXHRcdFx0XHQqXG5cdFx0XHRcdCogV2UgYWxzbyB1c2UgdGhpcyBvcHBvcnR1bml0eSB0byBsb2cgdGhlIGNhdXNpbmcgZXJyb3IsIGFzIGNvZGUgaGlnaGVyXG5cdFx0XHRcdCogdXAgdGhlIHN0YWNrIHdpbGwgbGlrZWx5IGFic3RyYWN0IHRoaXMuXG5cdFx0XHRcdCovXG5cdFx0XHRcdGlmICghKGVyciBpbnN0YW5jZW9mIEVycm9yKSB8fCAhZXJyLm1lc3NhZ2U/LnN0YXJ0c1dpdGgoXCJmZXRjaCBmYWlsZWRcIikpIHtcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oXCJBIHJlcXVlc3QgZmFpbGVkIHdoZW4gdXNpbmcgYSBjdXN0b20gZmV0Y2ggaW1wbGVtZW50YXRpb247IHRoaXMgbWF5IGJlIGEgbWlzY29uZmlndXJhdGlvbi4gTWFrZSBzdXJlIHRoYXQgeW91ciBmZXRjaCBjbGllbnQgaXMgY29ycmVjdGx5IGJvdW5kIHRvIHRoZSBnbG9iYWwgc2NvcGUuXCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvKipcblx0XHQqIE1hcmsgdGhlIGN1c3RvbSBmZXRjaCBpbXBsZW1lbnRhdGlvbiBzbyB0aGF0IHdlIGNhbiBpZGVudGlmeSBpdCBsYXRlciwgaW5cblx0XHQqIGFkZGl0aW9uIHRvIGFkZGluZyBzb21lIHJ1bnRpbWUgcHJvcGVydGllcyB0byBpdCB0byBtYWtlIGl0IHNlZW0gYXMgbXVjaFxuXHRcdCogbGlrZSB0aGUgb3JpZ2luYWwgZmV0Y2ggYXMgcG9zc2libGUuXG5cdFx0Ki9cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjdXN0b21GZXRjaCwge1xuXHRcdFx0W0NVU1RPTV9GRVRDSF9NQVJLRVJdOiB7fSxcblx0XHRcdG5hbWU6IHsgdmFsdWU6IGdpdmVuRmV0Y2gubmFtZSB9LFxuXHRcdFx0bGVuZ3RoOiB7IHZhbHVlOiBnaXZlbkZldGNoLmxlbmd0aCB9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN1c3RvbUZldGNoO1xuXHR9XG5cdC8qKlxuXHQqIEJyb3dzZXIgb3IgTm9kZSAxOCtcblx0Ki9cblx0dHJ5IHtcblx0XHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJmZXRjaFwiIGluIGdsb2JhbFRoaXMpIHJldHVybiBmZXRjaC5iaW5kKGdsb2JhbFRoaXMpO1xuXHR9IGNhdGNoIChfZXJyKSB7fVxuXHQvKipcblx0KiBFeGlzdGluZyBwb2x5ZmlsbGVkIGZldGNoXG5cdCovXG5cdGlmICh0eXBlb2YgZmV0Y2ggIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmZXRjaDtcblx0LyoqXG5cdCogRW52aXJvbm1lbnRzIHdoZXJlIGZldGNoIGNhbm5vdCBiZSBmb3VuZCBhbmQgbXVzdCBiZSBwb2x5ZmlsbGVkXG5cdCovXG5cdHJldHVybiBfX3JlcXVpcmUoXCJjcm9zcy1mZXRjaFwiKTtcbn07XG4vKipcbiogSWYgYFJlc3BvbnNlYCBpc24ndCBpbmNsdWRlZCBpbiB0aGlzIGVudmlyb25tZW50LCBpdCdzIHByb2JhYmx5IGFuIGVhcmxpZXJcbiogTm9kZSBlbnYgdGhhdCBpc24ndCBhbHJlYWR5IHBvbHlmaWxsaW5nLiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgZWl0aGVyIHRoZVxuKiBuYXRpdmUgYFJlc3BvbnNlYCBvciBhIHBvbHlmaWxsZWQgb25lLlxuKi9cbmNvbnN0IGdldFJlc3BvbnNlID0gKCkgPT4ge1xuXHRpZiAodHlwZW9mIFJlc3BvbnNlICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gUmVzcG9uc2U7XG5cdHJldHVybiBfX3JlcXVpcmUoXCJjcm9zcy1mZXRjaFwiKS5SZXNwb25zZTtcbn07XG4vKipcbiogR2l2ZW4gYW4gdW5rbm93biB2YWx1ZSwgdHJ5IHRvIHBhcnNlIGl0IGFzIGEgYGJvb2xlYW5gLiBVc2VmdWwgZm9yIHBhcnNpbmdcbiogZW52aXJvbm1lbnQgdmFyaWFibGVzIHRoYXQgY291bGQgYmUgYSBzZWxlY3Rpb24gb2YgZGlmZmVyZW50IHZhbHVlcyBzdWNoIGFzXG4qIGBcInRydWVcImAsIGBcIjFcImAuXG4qXG4qIElmIHRoZSB2YWx1ZSBjb3VsZCBub3QgYmUgY29uZmlkZW50bHkgcGFyc2VkIGFzIGEgYGJvb2xlYW5gIG9yIHdhcyBzZWVuIHRvIGJlXG4qIGB1bmRlZmluZWRgLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYHVuZGVmaW5lZGAuXG4qL1xuY29uc3QgcGFyc2VBc0Jvb2xlYW4gPSAodmFsdWUpID0+IHtcblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHJldHVybiB2YWx1ZTtcblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikgcmV0dXJuIEJvb2xlYW4odmFsdWUpO1xuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0Y29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmICh0cmltbWVkID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG5cdFx0aWYgKFtcInRydWVcIiwgXCIxXCJdLmluY2x1ZGVzKHRyaW1tZWQpKSByZXR1cm4gdHJ1ZTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgTW9kZSwgYWxsUHJvY2Vzc0VudiwgZGV2U2VydmVySG9zdCwgZ2V0RW52aXJvbm1lbnROYW1lLCBnZXRGZXRjaCwgZ2V0TW9kZSwgZ2V0UGxhdGZvcm1OYW1lLCBnZXRSZXNwb25zZSwgaW5uZ2VzdEhlYWRlcnMsIHBhcnNlQXNCb29sZWFuLCBwbGF0Zm9ybVN1cHBvcnRzU3RyZWFtaW5nLCBwcm9jZXNzRW52IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/errors.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/errors.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrCode: () => (/* binding */ ErrCode),\n/* harmony export */   deserializeError: () => (/* binding */ deserializeError$1),\n/* harmony export */   errors_exports: () => (/* binding */ errors_exports),\n/* harmony export */   fixEventKeyMissingSteps: () => (/* binding */ fixEventKeyMissingSteps),\n/* harmony export */   functionStoppedRunningErr: () => (/* binding */ functionStoppedRunningErr),\n/* harmony export */   getErrorMessage: () => (/* binding */ getErrorMessage),\n/* harmony export */   minifyPrettyError: () => (/* binding */ minifyPrettyError),\n/* harmony export */   prettyError: () => (/* binding */ prettyError),\n/* harmony export */   rethrowError: () => (/* binding */ rethrowError),\n/* harmony export */   serializeError: () => (/* binding */ serializeError$1)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var _components_NonRetriableError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/NonRetriableError.js */ \"(rsc)/./node_modules/inngest/components/NonRetriableError.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var chalk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chalk */ \"(rsc)/./node_modules/chalk/source/index.js\");\n/* harmony import */ var json_stringify_safe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! json-stringify-safe */ \"(rsc)/./node_modules/json-stringify-safe/stringify.js\");\n/* harmony import */ var serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! serialize-error-cjs */ \"(rsc)/./node_modules/serialize-error-cjs/dist/index.js\");\n/* harmony import */ var strip_ansi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! strip-ansi */ \"(rsc)/./node_modules/inngest/node_modules/strip-ansi/index.js\");\n\n\n\n\n\n\n\n\n//#region src/helpers/errors.ts\nvar errors_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_4__.__export)({\n\tErrCode: () => ErrCode,\n\tOutgoingResultError: () => OutgoingResultError,\n\tdeserializeError: () => deserializeError$1,\n\tfixEventKeyMissingSteps: () => fixEventKeyMissingSteps,\n\tfunctionStoppedRunningErr: () => functionStoppedRunningErr,\n\tgetErrorMessage: () => getErrorMessage,\n\tisSerializedError: () => isSerializedError,\n\tminifyPrettyError: () => minifyPrettyError,\n\tprettyError: () => prettyError,\n\tprettyErrorSplitter: () => prettyErrorSplitter,\n\trethrowError: () => rethrowError,\n\tserializeError: () => serializeError$1\n});\nconst SERIALIZED_KEY = \"__serialized\";\nconst SERIALIZED_VALUE = true;\n/**\n* Add first-class support for certain errors that we control, in addition to\n* built-in errors such as `TypeError`.\n*\n* Adding these allows these non-standard errors to be correctly serialized,\n* sent to Inngest, then deserialized back into the correct error type for users\n* to react to correctly.\n*\n* Note that these errors only support `message?: string | undefined` as the\n* input; more custom errors are not supported with this current strategy.\n*/\nserialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.errorConstructors.set(\"NonRetriableError\", _components_NonRetriableError_js__WEBPACK_IMPORTED_MODULE_5__.NonRetriableError);\n/**\n* Serialise an error to a serialized JSON string.\n*\n* Errors do not serialise nicely to JSON, so we use this function to convert\n* them to a serialized JSON string. Doing this is also non-trivial for some\n* errors, so we use the `serialize-error` package to do it for us.\n*\n* See {@link https://www.npmjs.com/package/serialize-error}\n*\n* This function is a small wrapper around that package to also add a `type`\n* property to the serialised error, so that we can distinguish between\n* serialised errors and other objects.\n*\n* Will not reserialise existing serialised errors.\n*/\nconst serializeError$1 = (subject, allowUnknown = false) => {\n\ttry {\n\t\tconst existingSerializedError = isSerializedError(subject);\n\t\tif (existingSerializedError) return existingSerializedError;\n\t\tif (typeof subject === \"object\" && subject !== null) {\n\t\t\tconst serializedErr = (0,serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.serializeError)(subject);\n\t\t\tif (!serializedErr.name && allowUnknown) return subject;\n\t\t\tconst ret = {\n\t\t\t\t...serializedErr,\n\t\t\t\tname: serializedErr.name || \"Error\",\n\t\t\t\tmessage: serializedErr.message || json_stringify_safe__WEBPACK_IMPORTED_MODULE_1__(subject) || \"Unknown error; error serialization could not find a message.\",\n\t\t\t\tstack: serializedErr.stack || \"\",\n\t\t\t\t[SERIALIZED_KEY]: SERIALIZED_VALUE\n\t\t\t};\n\t\t\tlet target = ret;\n\t\t\tconst maxDepth = 5;\n\t\t\tfor (let i = 0; i < maxDepth; i++) {\n\t\t\t\tif (typeof target === \"object\" && target !== null && \"cause\" in target && target.cause) {\n\t\t\t\t\ttarget = target.cause = serializeError$1(target.cause, true);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t\tthrow new Error(\"Error is not an object; strange throw value.\");\n\t} catch {\n\t\tif (allowUnknown) return subject;\n\t\ttry {\n\t\t\treturn {\n\t\t\t\t...serializeError$1(new Error(typeof subject === \"string\" ? subject : json_stringify_safe__WEBPACK_IMPORTED_MODULE_1__(subject)), false),\n\t\t\t\tstack: \"\",\n\t\t\t\t[SERIALIZED_KEY]: SERIALIZED_VALUE\n\t\t\t};\n\t\t} catch {\n\t\t\treturn {\n\t\t\t\tname: \"Could not serialize source error\",\n\t\t\t\tmessage: \"Serializing the source error failed.\",\n\t\t\t\tstack: \"\",\n\t\t\t\t[SERIALIZED_KEY]: SERIALIZED_VALUE\n\t\t\t};\n\t\t}\n\t}\n};\n/**\n* Check if an object or a string is a serialised error created by\n* {@link serializeError}.\n*/\nconst isSerializedError = (value) => {\n\ttry {\n\t\tif (typeof value === \"string\") {\n\t\t\tconst parsed = zod_v3__WEBPACK_IMPORTED_MODULE_6__.object({\n\t\t\t\t[SERIALIZED_KEY]: zod_v3__WEBPACK_IMPORTED_MODULE_6__.literal(SERIALIZED_VALUE),\n\t\t\t\tname: zod_v3__WEBPACK_IMPORTED_MODULE_6__[\"enum\"]([...Array.from(serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.errorConstructors.keys())]),\n\t\t\t\tmessage: zod_v3__WEBPACK_IMPORTED_MODULE_6__.string(),\n\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_6__.string()\n\t\t\t}).passthrough().safeParse(JSON.parse(value));\n\t\t\tif (parsed.success) return parsed.data;\n\t\t}\n\t\tif (typeof value === \"object\" && value !== null) {\n\t\t\tif (Object.hasOwn(value, SERIALIZED_KEY) && value[SERIALIZED_KEY] === SERIALIZED_VALUE) return value;\n\t\t}\n\t} catch {}\n};\n/**\n* Deserialise an error created by {@link serializeError}.\n*\n* Ensures we only deserialise errors that meet a minimum level of\n* applicability, inclusive of error handling to ensure that badly serialized\n* errors are still handled.\n*/\nconst deserializeError$1 = (subject, allowUnknown = false) => {\n\tconst requiredFields = [\"name\", \"message\"];\n\ttry {\n\t\tif (!requiredFields.every((field) => {\n\t\t\treturn Object.hasOwn(subject, field);\n\t\t})) throw new Error();\n\t\tconst deserializedErr = (0,serialize_error_cjs__WEBPACK_IMPORTED_MODULE_2__.deserializeError)(subject);\n\t\tif (\"cause\" in deserializedErr) deserializedErr.cause = deserializeError$1(deserializedErr.cause, true);\n\t\treturn deserializedErr;\n\t} catch {\n\t\tif (allowUnknown) return subject;\n\t\tconst err = /* @__PURE__ */ new Error(\"Unknown error; could not reserialize\");\n\t\t/**\n\t\t* Remove the stack so that it's not misleadingly shown as the Inngest\n\t\t* internals.\n\t\t*/\n\t\terr.stack = void 0;\n\t\treturn err;\n\t}\n};\nlet ErrCode = /* @__PURE__ */ function(ErrCode$1) {\n\tErrCode$1[\"NESTING_STEPS\"] = \"NESTING_STEPS\";\n\t/**\n\t* Legacy v0 execution error code for when a function has changed and no\n\t* longer matches its in-progress state.\n\t*\n\t* @deprecated Not for use in latest execution method.\n\t*/\n\tErrCode$1[\"NON_DETERMINISTIC_FUNCTION\"] = \"NON_DETERMINISTIC_FUNCTION\";\n\t/**\n\t* Legacy v0 execution error code for when a function is found to be using\n\t* async actions after memoziation has occurred, which v0 doesn't support.\n\t*\n\t* @deprecated Not for use in latest execution method.\n\t*/\n\tErrCode$1[\"ASYNC_DETECTED_AFTER_MEMOIZATION\"] = \"ASYNC_DETECTED_AFTER_MEMOIZATION\";\n\t/**\n\t* Legacy v0 execution error code for when a function is found to be using\n\t* steps after a non-step async action has occurred.\n\t*\n\t* @deprecated Not for use in latest execution method.\n\t*/\n\tErrCode$1[\"STEP_USED_AFTER_ASYNC\"] = \"STEP_USED_AFTER_ASYNC\";\n\tErrCode$1[\"AUTOMATIC_PARALLEL_INDEXING\"] = \"AUTOMATIC_PARALLEL_INDEXING\";\n\tErrCode$1[\"NONDETERMINISTIC_STEPS\"] = \"NONDETERMINISTIC_STEPS\";\n\treturn ErrCode$1;\n}({});\nconst prettyErrorSplitter = \"=================================================\";\n/**\n* Given an unknown `err`, mutate it to minify any pretty errors that it\n* contains.\n*/\nconst minifyPrettyError = (err) => {\n\ttry {\n\t\tif (!isError(err)) return err;\n\t\tif (!err.message.includes(prettyErrorSplitter)) return err;\n\t\tconst sanitizedMessage = strip_ansi__WEBPACK_IMPORTED_MODULE_3__(err.message);\n\t\tconst message = sanitizedMessage.split(\"  \")[1]?.split(\"\\n\")[0]?.trim() || err.message;\n\t\terr.message = [sanitizedMessage.split(\"\\n\\nCode: \")[1]?.split(\"\\n\\n\")[0]?.trim() || void 0, message].filter(Boolean).join(\" - \");\n\t\tif (err.stack) {\n\t\t\tconst stackRest = strip_ansi__WEBPACK_IMPORTED_MODULE_3__(err.stack).split(`${prettyErrorSplitter}\\n`).slice(2).join(\"\\n\");\n\t\t\terr.stack = `${err.name}: ${err.message}\\n${stackRest}`;\n\t\t}\n\t\treturn err;\n\t} catch (_noopErr) {\n\t\treturn err;\n\t}\n};\n/**\n* Given an `err`, return a boolean representing whether it is in the shape of\n* an `Error` or not.\n*/\nconst isError = (err) => {\n\ttry {\n\t\tif (err instanceof Error) return true;\n\t\tif (typeof err !== \"object\" || err === null) return false;\n\t\treturn Object.hasOwn(err, \"name\") && Object.hasOwn(err, \"message\");\n\t} catch (_noopErr) {\n\t\treturn false;\n\t}\n};\n/**\n* Given an `unknown` object, retrieve the `message` property from it, or fall\n* back to the `fallback` string if it doesn't exist or is empty.\n*/\nconst getErrorMessage = (err, fallback) => {\n\tconst { message } = zod_v3__WEBPACK_IMPORTED_MODULE_6__.object({ message: zod_v3__WEBPACK_IMPORTED_MODULE_6__.string().min(1) }).catch({ message: fallback }).parse(err);\n\treturn message;\n};\n/**\n* Given a {@link PrettyError}, return a nicely-formatted string ready to log\n* or throw.\n*\n* Useful for ensuring that errors are logged in a consistent, helpful format\n* across the SDK by prompting for key pieces of information.\n*/\nconst prettyError = ({ type = \"error\", whatHappened, otherwise, reassurance, toFixNow, why, consequences, stack, code }) => {\n\tconst { icon, colorFn } = {\n\t\terror: {\n\t\t\ticon: \"\",\n\t\t\tcolorFn: chalk__WEBPACK_IMPORTED_MODULE_0__.red\n\t\t},\n\t\twarn: {\n\t\t\ticon: \"\",\n\t\t\tcolorFn: chalk__WEBPACK_IMPORTED_MODULE_0__.yellow\n\t\t}\n\t}[type];\n\tlet header = `${icon}  ${chalk__WEBPACK_IMPORTED_MODULE_0__.bold.underline(whatHappened.trim())}`;\n\tif (stack) header += \"\\n\" + [...(/* @__PURE__ */ new Error()).stack?.split(\"\\n\").slice(1).filter(Boolean) || []].join(\"\\n\");\n\tlet toFixNowStr = (Array.isArray(toFixNow) ? toFixNow.map((s) => s.trim()).filter(Boolean).map((s, i) => `\\t${i + 1}. ${s}`).join(\"\\n\") : toFixNow?.trim()) ?? \"\";\n\tif (Array.isArray(toFixNow) && toFixNowStr) toFixNowStr = `To fix this, you can take one of the following courses of action:\\n\\n${toFixNowStr}`;\n\tlet body = [\n\t\treassurance?.trim(),\n\t\twhy?.trim(),\n\t\tconsequences?.trim()\n\t].filter(Boolean).join(\" \");\n\tbody += body ? `\\n\\n${toFixNowStr}` : toFixNowStr;\n\tconst trailer = [otherwise?.trim()].filter(Boolean).join(\" \");\n\treturn colorFn([\n\t\tprettyErrorSplitter,\n\t\theader,\n\t\tbody,\n\t\ttrailer,\n\t\tcode ? `Code: ${code}` : \"\",\n\t\tprettyErrorSplitter\n\t].filter(Boolean).join(\"\\n\\n\"));\n};\nconst fixEventKeyMissingSteps = [\n\t\"Set the `INNGEST_EVENT_KEY` environment variable\",\n\t`Pass a key to the \\`new Inngest()\\` constructor using the \\`eventKey\\` option`,\n\t`Use \\`inngest.setEventKey()\\` at runtime`\n];\n/**\n* An error that, when thrown, indicates internally that an outgoing operation\n* contains an error.\n*\n* We use this because serialized `data` sent back to Inngest may differ from\n* the error instance itself due to middleware.\n*\n* @internal\n*/\nvar OutgoingResultError = class extends Error {\n\tresult;\n\tconstructor(result) {\n\t\tsuper(\"OutgoingOpError\");\n\t\tthis.result = result;\n\t}\n};\n/**\n* Create a function that will rethrow an error with a prefix added to the\n* message.\n*\n* Useful for adding context to errors that are rethrown.\n*\n* @example\n* ```ts\n* await doSomeAction().catch(rethrowError(\"Failed to do some action\"));\n* ```\n*/\nconst rethrowError = (prefix) => {\n\treturn (err) => {\n\t\ttry {\n\t\t\terr.message &&= `${prefix}; ${err.message}`;\n\t\t} catch (_noopErr) {} finally {\n\t\t\tthrow err;\n\t\t}\n\t};\n};\n/**\n* Legacy v0 execution error for functions that don't support mixing steps and\n* regular async actions.\n*/\nconst functionStoppedRunningErr = (code) => {\n\treturn prettyError({\n\t\twhatHappened: \"Your function was stopped from running\",\n\t\twhy: \"We detected a mix of asynchronous logic, some using step tooling and some not.\",\n\t\tconsequences: \"This can cause unexpected behaviour when a function is paused and resumed and is therefore strongly discouraged; we stopped your function to ensure nothing unexpected happened!\",\n\t\tstack: true,\n\t\ttoFixNow: \"Ensure that your function is either entirely step-based or entirely non-step-based, by either wrapping all asynchronous logic in `step.run()` calls or by removing all `step.*()` calls.\",\n\t\totherwise: \"For more information on why step functions work in this manner, see https://www.inngest.com/docs/functions/multi-step#gotchas\",\n\t\tcode\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNZO0FBQzVDO0FBQ0Q7QUFDa0I7QUFDOEM7QUFDdkQ7O0FBRW5DO0FBQ0EscUNBQXFDLHNFQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0VBQWlCLDBCQUEwQiwrRUFBaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1FQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdEQUFTLDZCQUE2QjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLGdEQUFTO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxxQkFBcUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMENBQVE7QUFDMUIsc0JBQXNCLDJDQUFTO0FBQy9CLFVBQVUsMkNBQU0sZ0JBQWdCLGtFQUFpQjtBQUNqRCxhQUFhLDBDQUFRO0FBQ3JCLFdBQVcsMENBQVE7QUFDbkIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1DQUFtQyxxQkFBcUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMEJBQTBCLHFFQUFnQjtBQUMxQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHVDQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1Q0FBUyxxQkFBcUIsb0JBQW9CO0FBQ3ZFLGtCQUFrQixTQUFTLElBQUksWUFBWSxJQUFJLFVBQVU7QUFDekQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsVUFBVSxFQUFFLDBDQUFRLEdBQUcsU0FBUywwQ0FBUSxXQUFXLFVBQVUsbUJBQW1CO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0dBQWdHO0FBQ3ZILFNBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQSxZQUFZLHNDQUFTO0FBQ3JCLEdBQUc7QUFDSDtBQUNBO0FBQ0EsWUFBWSx5Q0FBWTtBQUN4QjtBQUNBLEVBQUU7QUFDRixpQkFBaUIsT0FBTyxFQUFFLHVDQUFVLGdDQUFnQztBQUNwRTtBQUNBLCtHQUErRyxNQUFNLElBQUksRUFBRTtBQUMzSCxtSUFBbUksWUFBWTtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFlBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEtBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixTQUFTLEVBQUUsWUFBWTtBQUM3QyxJQUFJLG9CQUFvQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrSUFBa0k7QUFDbEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDa087QUFDbE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Vycm9ycy5qcz85Yzc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IE5vblJldHJpYWJsZUVycm9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvTm9uUmV0cmlhYmxlRXJyb3IuanNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kL3YzXCI7XG5pbXBvcnQgY2hhbGsgZnJvbSBcImNoYWxrXCI7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gXCJqc29uLXN0cmluZ2lmeS1zYWZlXCI7XG5pbXBvcnQgeyBkZXNlcmlhbGl6ZUVycm9yLCBlcnJvckNvbnN0cnVjdG9ycywgc2VyaWFsaXplRXJyb3IgfSBmcm9tIFwic2VyaWFsaXplLWVycm9yLWNqc1wiO1xuaW1wb3J0IHN0cmlwQW5zaSBmcm9tIFwic3RyaXAtYW5zaVwiO1xuXG4vLyNyZWdpb24gc3JjL2hlbHBlcnMvZXJyb3JzLnRzXG52YXIgZXJyb3JzX2V4cG9ydHMgPSAvKiBAX19QVVJFX18gKi8gX19leHBvcnQoe1xuXHRFcnJDb2RlOiAoKSA9PiBFcnJDb2RlLFxuXHRPdXRnb2luZ1Jlc3VsdEVycm9yOiAoKSA9PiBPdXRnb2luZ1Jlc3VsdEVycm9yLFxuXHRkZXNlcmlhbGl6ZUVycm9yOiAoKSA9PiBkZXNlcmlhbGl6ZUVycm9yJDEsXG5cdGZpeEV2ZW50S2V5TWlzc2luZ1N0ZXBzOiAoKSA9PiBmaXhFdmVudEtleU1pc3NpbmdTdGVwcyxcblx0ZnVuY3Rpb25TdG9wcGVkUnVubmluZ0VycjogKCkgPT4gZnVuY3Rpb25TdG9wcGVkUnVubmluZ0Vycixcblx0Z2V0RXJyb3JNZXNzYWdlOiAoKSA9PiBnZXRFcnJvck1lc3NhZ2UsXG5cdGlzU2VyaWFsaXplZEVycm9yOiAoKSA9PiBpc1NlcmlhbGl6ZWRFcnJvcixcblx0bWluaWZ5UHJldHR5RXJyb3I6ICgpID0+IG1pbmlmeVByZXR0eUVycm9yLFxuXHRwcmV0dHlFcnJvcjogKCkgPT4gcHJldHR5RXJyb3IsXG5cdHByZXR0eUVycm9yU3BsaXR0ZXI6ICgpID0+IHByZXR0eUVycm9yU3BsaXR0ZXIsXG5cdHJldGhyb3dFcnJvcjogKCkgPT4gcmV0aHJvd0Vycm9yLFxuXHRzZXJpYWxpemVFcnJvcjogKCkgPT4gc2VyaWFsaXplRXJyb3IkMVxufSk7XG5jb25zdCBTRVJJQUxJWkVEX0tFWSA9IFwiX19zZXJpYWxpemVkXCI7XG5jb25zdCBTRVJJQUxJWkVEX1ZBTFVFID0gdHJ1ZTtcbi8qKlxuKiBBZGQgZmlyc3QtY2xhc3Mgc3VwcG9ydCBmb3IgY2VydGFpbiBlcnJvcnMgdGhhdCB3ZSBjb250cm9sLCBpbiBhZGRpdGlvbiB0b1xuKiBidWlsdC1pbiBlcnJvcnMgc3VjaCBhcyBgVHlwZUVycm9yYC5cbipcbiogQWRkaW5nIHRoZXNlIGFsbG93cyB0aGVzZSBub24tc3RhbmRhcmQgZXJyb3JzIHRvIGJlIGNvcnJlY3RseSBzZXJpYWxpemVkLFxuKiBzZW50IHRvIElubmdlc3QsIHRoZW4gZGVzZXJpYWxpemVkIGJhY2sgaW50byB0aGUgY29ycmVjdCBlcnJvciB0eXBlIGZvciB1c2Vyc1xuKiB0byByZWFjdCB0byBjb3JyZWN0bHkuXG4qXG4qIE5vdGUgdGhhdCB0aGVzZSBlcnJvcnMgb25seSBzdXBwb3J0IGBtZXNzYWdlPzogc3RyaW5nIHwgdW5kZWZpbmVkYCBhcyB0aGVcbiogaW5wdXQ7IG1vcmUgY3VzdG9tIGVycm9ycyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIHRoaXMgY3VycmVudCBzdHJhdGVneS5cbiovXG5lcnJvckNvbnN0cnVjdG9ycy5zZXQoXCJOb25SZXRyaWFibGVFcnJvclwiLCBOb25SZXRyaWFibGVFcnJvcik7XG4vKipcbiogU2VyaWFsaXNlIGFuIGVycm9yIHRvIGEgc2VyaWFsaXplZCBKU09OIHN0cmluZy5cbipcbiogRXJyb3JzIGRvIG5vdCBzZXJpYWxpc2UgbmljZWx5IHRvIEpTT04sIHNvIHdlIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGNvbnZlcnRcbiogdGhlbSB0byBhIHNlcmlhbGl6ZWQgSlNPTiBzdHJpbmcuIERvaW5nIHRoaXMgaXMgYWxzbyBub24tdHJpdmlhbCBmb3Igc29tZVxuKiBlcnJvcnMsIHNvIHdlIHVzZSB0aGUgYHNlcmlhbGl6ZS1lcnJvcmAgcGFja2FnZSB0byBkbyBpdCBmb3IgdXMuXG4qXG4qIFNlZSB7QGxpbmsgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2VyaWFsaXplLWVycm9yfVxuKlxuKiBUaGlzIGZ1bmN0aW9uIGlzIGEgc21hbGwgd3JhcHBlciBhcm91bmQgdGhhdCBwYWNrYWdlIHRvIGFsc28gYWRkIGEgYHR5cGVgXG4qIHByb3BlcnR5IHRvIHRoZSBzZXJpYWxpc2VkIGVycm9yLCBzbyB0aGF0IHdlIGNhbiBkaXN0aW5ndWlzaCBiZXR3ZWVuXG4qIHNlcmlhbGlzZWQgZXJyb3JzIGFuZCBvdGhlciBvYmplY3RzLlxuKlxuKiBXaWxsIG5vdCByZXNlcmlhbGlzZSBleGlzdGluZyBzZXJpYWxpc2VkIGVycm9ycy5cbiovXG5jb25zdCBzZXJpYWxpemVFcnJvciQxID0gKHN1YmplY3QsIGFsbG93VW5rbm93biA9IGZhbHNlKSA9PiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgZXhpc3RpbmdTZXJpYWxpemVkRXJyb3IgPSBpc1NlcmlhbGl6ZWRFcnJvcihzdWJqZWN0KTtcblx0XHRpZiAoZXhpc3RpbmdTZXJpYWxpemVkRXJyb3IpIHJldHVybiBleGlzdGluZ1NlcmlhbGl6ZWRFcnJvcjtcblx0XHRpZiAodHlwZW9mIHN1YmplY3QgPT09IFwib2JqZWN0XCIgJiYgc3ViamVjdCAhPT0gbnVsbCkge1xuXHRcdFx0Y29uc3Qgc2VyaWFsaXplZEVyciA9IHNlcmlhbGl6ZUVycm9yKHN1YmplY3QpO1xuXHRcdFx0aWYgKCFzZXJpYWxpemVkRXJyLm5hbWUgJiYgYWxsb3dVbmtub3duKSByZXR1cm4gc3ViamVjdDtcblx0XHRcdGNvbnN0IHJldCA9IHtcblx0XHRcdFx0Li4uc2VyaWFsaXplZEVycixcblx0XHRcdFx0bmFtZTogc2VyaWFsaXplZEVyci5uYW1lIHx8IFwiRXJyb3JcIixcblx0XHRcdFx0bWVzc2FnZTogc2VyaWFsaXplZEVyci5tZXNzYWdlIHx8IHN0cmluZ2lmeShzdWJqZWN0KSB8fCBcIlVua25vd24gZXJyb3I7IGVycm9yIHNlcmlhbGl6YXRpb24gY291bGQgbm90IGZpbmQgYSBtZXNzYWdlLlwiLFxuXHRcdFx0XHRzdGFjazogc2VyaWFsaXplZEVyci5zdGFjayB8fCBcIlwiLFxuXHRcdFx0XHRbU0VSSUFMSVpFRF9LRVldOiBTRVJJQUxJWkVEX1ZBTFVFXG5cdFx0XHR9O1xuXHRcdFx0bGV0IHRhcmdldCA9IHJldDtcblx0XHRcdGNvbnN0IG1heERlcHRoID0gNTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbWF4RGVwdGg7IGkrKykge1xuXHRcdFx0XHRpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiB0YXJnZXQgIT09IG51bGwgJiYgXCJjYXVzZVwiIGluIHRhcmdldCAmJiB0YXJnZXQuY2F1c2UpIHtcblx0XHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQuY2F1c2UgPSBzZXJpYWxpemVFcnJvciQxKHRhcmdldC5jYXVzZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBpcyBub3QgYW4gb2JqZWN0OyBzdHJhbmdlIHRocm93IHZhbHVlLlwiKTtcblx0fSBjYXRjaCB7XG5cdFx0aWYgKGFsbG93VW5rbm93bikgcmV0dXJuIHN1YmplY3Q7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLnNlcmlhbGl6ZUVycm9yJDEobmV3IEVycm9yKHR5cGVvZiBzdWJqZWN0ID09PSBcInN0cmluZ1wiID8gc3ViamVjdCA6IHN0cmluZ2lmeShzdWJqZWN0KSksIGZhbHNlKSxcblx0XHRcdFx0c3RhY2s6IFwiXCIsXG5cdFx0XHRcdFtTRVJJQUxJWkVEX0tFWV06IFNFUklBTElaRURfVkFMVUVcblx0XHRcdH07XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRuYW1lOiBcIkNvdWxkIG5vdCBzZXJpYWxpemUgc291cmNlIGVycm9yXCIsXG5cdFx0XHRcdG1lc3NhZ2U6IFwiU2VyaWFsaXppbmcgdGhlIHNvdXJjZSBlcnJvciBmYWlsZWQuXCIsXG5cdFx0XHRcdHN0YWNrOiBcIlwiLFxuXHRcdFx0XHRbU0VSSUFMSVpFRF9LRVldOiBTRVJJQUxJWkVEX1ZBTFVFXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxufTtcbi8qKlxuKiBDaGVjayBpZiBhbiBvYmplY3Qgb3IgYSBzdHJpbmcgaXMgYSBzZXJpYWxpc2VkIGVycm9yIGNyZWF0ZWQgYnlcbioge0BsaW5rIHNlcmlhbGl6ZUVycm9yfS5cbiovXG5jb25zdCBpc1NlcmlhbGl6ZWRFcnJvciA9ICh2YWx1ZSkgPT4ge1xuXHR0cnkge1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdGNvbnN0IHBhcnNlZCA9IHoub2JqZWN0KHtcblx0XHRcdFx0W1NFUklBTElaRURfS0VZXTogei5saXRlcmFsKFNFUklBTElaRURfVkFMVUUpLFxuXHRcdFx0XHRuYW1lOiB6LmVudW0oWy4uLkFycmF5LmZyb20oZXJyb3JDb25zdHJ1Y3RvcnMua2V5cygpKV0pLFxuXHRcdFx0XHRtZXNzYWdlOiB6LnN0cmluZygpLFxuXHRcdFx0XHRzdGFjazogei5zdHJpbmcoKVxuXHRcdFx0fSkucGFzc3Rocm91Z2goKS5zYWZlUGFyc2UoSlNPTi5wYXJzZSh2YWx1ZSkpO1xuXHRcdFx0aWYgKHBhcnNlZC5zdWNjZXNzKSByZXR1cm4gcGFyc2VkLmRhdGE7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwpIHtcblx0XHRcdGlmIChPYmplY3QuaGFzT3duKHZhbHVlLCBTRVJJQUxJWkVEX0tFWSkgJiYgdmFsdWVbU0VSSUFMSVpFRF9LRVldID09PSBTRVJJQUxJWkVEX1ZBTFVFKSByZXR1cm4gdmFsdWU7XG5cdFx0fVxuXHR9IGNhdGNoIHt9XG59O1xuLyoqXG4qIERlc2VyaWFsaXNlIGFuIGVycm9yIGNyZWF0ZWQgYnkge0BsaW5rIHNlcmlhbGl6ZUVycm9yfS5cbipcbiogRW5zdXJlcyB3ZSBvbmx5IGRlc2VyaWFsaXNlIGVycm9ycyB0aGF0IG1lZXQgYSBtaW5pbXVtIGxldmVsIG9mXG4qIGFwcGxpY2FiaWxpdHksIGluY2x1c2l2ZSBvZiBlcnJvciBoYW5kbGluZyB0byBlbnN1cmUgdGhhdCBiYWRseSBzZXJpYWxpemVkXG4qIGVycm9ycyBhcmUgc3RpbGwgaGFuZGxlZC5cbiovXG5jb25zdCBkZXNlcmlhbGl6ZUVycm9yJDEgPSAoc3ViamVjdCwgYWxsb3dVbmtub3duID0gZmFsc2UpID0+IHtcblx0Y29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbXCJuYW1lXCIsIFwibWVzc2FnZVwiXTtcblx0dHJ5IHtcblx0XHRpZiAoIXJlcXVpcmVkRmllbGRzLmV2ZXJ5KChmaWVsZCkgPT4ge1xuXHRcdFx0cmV0dXJuIE9iamVjdC5oYXNPd24oc3ViamVjdCwgZmllbGQpO1xuXHRcdH0pKSB0aHJvdyBuZXcgRXJyb3IoKTtcblx0XHRjb25zdCBkZXNlcmlhbGl6ZWRFcnIgPSBkZXNlcmlhbGl6ZUVycm9yKHN1YmplY3QpO1xuXHRcdGlmIChcImNhdXNlXCIgaW4gZGVzZXJpYWxpemVkRXJyKSBkZXNlcmlhbGl6ZWRFcnIuY2F1c2UgPSBkZXNlcmlhbGl6ZUVycm9yJDEoZGVzZXJpYWxpemVkRXJyLmNhdXNlLCB0cnVlKTtcblx0XHRyZXR1cm4gZGVzZXJpYWxpemVkRXJyO1xuXHR9IGNhdGNoIHtcblx0XHRpZiAoYWxsb3dVbmtub3duKSByZXR1cm4gc3ViamVjdDtcblx0XHRjb25zdCBlcnIgPSAvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKFwiVW5rbm93biBlcnJvcjsgY291bGQgbm90IHJlc2VyaWFsaXplXCIpO1xuXHRcdC8qKlxuXHRcdCogUmVtb3ZlIHRoZSBzdGFjayBzbyB0aGF0IGl0J3Mgbm90IG1pc2xlYWRpbmdseSBzaG93biBhcyB0aGUgSW5uZ2VzdFxuXHRcdCogaW50ZXJuYWxzLlxuXHRcdCovXG5cdFx0ZXJyLnN0YWNrID0gdm9pZCAwO1xuXHRcdHJldHVybiBlcnI7XG5cdH1cbn07XG5sZXQgRXJyQ29kZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihFcnJDb2RlJDEpIHtcblx0RXJyQ29kZSQxW1wiTkVTVElOR19TVEVQU1wiXSA9IFwiTkVTVElOR19TVEVQU1wiO1xuXHQvKipcblx0KiBMZWdhY3kgdjAgZXhlY3V0aW9uIGVycm9yIGNvZGUgZm9yIHdoZW4gYSBmdW5jdGlvbiBoYXMgY2hhbmdlZCBhbmQgbm9cblx0KiBsb25nZXIgbWF0Y2hlcyBpdHMgaW4tcHJvZ3Jlc3Mgc3RhdGUuXG5cdCpcblx0KiBAZGVwcmVjYXRlZCBOb3QgZm9yIHVzZSBpbiBsYXRlc3QgZXhlY3V0aW9uIG1ldGhvZC5cblx0Ki9cblx0RXJyQ29kZSQxW1wiTk9OX0RFVEVSTUlOSVNUSUNfRlVOQ1RJT05cIl0gPSBcIk5PTl9ERVRFUk1JTklTVElDX0ZVTkNUSU9OXCI7XG5cdC8qKlxuXHQqIExlZ2FjeSB2MCBleGVjdXRpb24gZXJyb3IgY29kZSBmb3Igd2hlbiBhIGZ1bmN0aW9uIGlzIGZvdW5kIHRvIGJlIHVzaW5nXG5cdCogYXN5bmMgYWN0aW9ucyBhZnRlciBtZW1vemlhdGlvbiBoYXMgb2NjdXJyZWQsIHdoaWNoIHYwIGRvZXNuJ3Qgc3VwcG9ydC5cblx0KlxuXHQqIEBkZXByZWNhdGVkIE5vdCBmb3IgdXNlIGluIGxhdGVzdCBleGVjdXRpb24gbWV0aG9kLlxuXHQqL1xuXHRFcnJDb2RlJDFbXCJBU1lOQ19ERVRFQ1RFRF9BRlRFUl9NRU1PSVpBVElPTlwiXSA9IFwiQVNZTkNfREVURUNURURfQUZURVJfTUVNT0laQVRJT05cIjtcblx0LyoqXG5cdCogTGVnYWN5IHYwIGV4ZWN1dGlvbiBlcnJvciBjb2RlIGZvciB3aGVuIGEgZnVuY3Rpb24gaXMgZm91bmQgdG8gYmUgdXNpbmdcblx0KiBzdGVwcyBhZnRlciBhIG5vbi1zdGVwIGFzeW5jIGFjdGlvbiBoYXMgb2NjdXJyZWQuXG5cdCpcblx0KiBAZGVwcmVjYXRlZCBOb3QgZm9yIHVzZSBpbiBsYXRlc3QgZXhlY3V0aW9uIG1ldGhvZC5cblx0Ki9cblx0RXJyQ29kZSQxW1wiU1RFUF9VU0VEX0FGVEVSX0FTWU5DXCJdID0gXCJTVEVQX1VTRURfQUZURVJfQVNZTkNcIjtcblx0RXJyQ29kZSQxW1wiQVVUT01BVElDX1BBUkFMTEVMX0lOREVYSU5HXCJdID0gXCJBVVRPTUFUSUNfUEFSQUxMRUxfSU5ERVhJTkdcIjtcblx0RXJyQ29kZSQxW1wiTk9OREVURVJNSU5JU1RJQ19TVEVQU1wiXSA9IFwiTk9OREVURVJNSU5JU1RJQ19TVEVQU1wiO1xuXHRyZXR1cm4gRXJyQ29kZSQxO1xufSh7fSk7XG5jb25zdCBwcmV0dHlFcnJvclNwbGl0dGVyID0gXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCI7XG4vKipcbiogR2l2ZW4gYW4gdW5rbm93biBgZXJyYCwgbXV0YXRlIGl0IHRvIG1pbmlmeSBhbnkgcHJldHR5IGVycm9ycyB0aGF0IGl0XG4qIGNvbnRhaW5zLlxuKi9cbmNvbnN0IG1pbmlmeVByZXR0eUVycm9yID0gKGVycikgPT4ge1xuXHR0cnkge1xuXHRcdGlmICghaXNFcnJvcihlcnIpKSByZXR1cm4gZXJyO1xuXHRcdGlmICghZXJyLm1lc3NhZ2UuaW5jbHVkZXMocHJldHR5RXJyb3JTcGxpdHRlcikpIHJldHVybiBlcnI7XG5cdFx0Y29uc3Qgc2FuaXRpemVkTWVzc2FnZSA9IHN0cmlwQW5zaShlcnIubWVzc2FnZSk7XG5cdFx0Y29uc3QgbWVzc2FnZSA9IHNhbml0aXplZE1lc3NhZ2Uuc3BsaXQoXCIgIFwiKVsxXT8uc3BsaXQoXCJcXG5cIilbMF0/LnRyaW0oKSB8fCBlcnIubWVzc2FnZTtcblx0XHRlcnIubWVzc2FnZSA9IFtzYW5pdGl6ZWRNZXNzYWdlLnNwbGl0KFwiXFxuXFxuQ29kZTogXCIpWzFdPy5zcGxpdChcIlxcblxcblwiKVswXT8udHJpbSgpIHx8IHZvaWQgMCwgbWVzc2FnZV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgLSBcIik7XG5cdFx0aWYgKGVyci5zdGFjaykge1xuXHRcdFx0Y29uc3Qgc3RhY2tSZXN0ID0gc3RyaXBBbnNpKGVyci5zdGFjaykuc3BsaXQoYCR7cHJldHR5RXJyb3JTcGxpdHRlcn1cXG5gKS5zbGljZSgyKS5qb2luKFwiXFxuXCIpO1xuXHRcdFx0ZXJyLnN0YWNrID0gYCR7ZXJyLm5hbWV9OiAke2Vyci5tZXNzYWdlfVxcbiR7c3RhY2tSZXN0fWA7XG5cdFx0fVxuXHRcdHJldHVybiBlcnI7XG5cdH0gY2F0Y2ggKF9ub29wRXJyKSB7XG5cdFx0cmV0dXJuIGVycjtcblx0fVxufTtcbi8qKlxuKiBHaXZlbiBhbiBgZXJyYCwgcmV0dXJuIGEgYm9vbGVhbiByZXByZXNlbnRpbmcgd2hldGhlciBpdCBpcyBpbiB0aGUgc2hhcGUgb2ZcbiogYW4gYEVycm9yYCBvciBub3QuXG4qL1xuY29uc3QgaXNFcnJvciA9IChlcnIpID0+IHtcblx0dHJ5IHtcblx0XHRpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiB0cnVlO1xuXHRcdGlmICh0eXBlb2YgZXJyICE9PSBcIm9iamVjdFwiIHx8IGVyciA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiBPYmplY3QuaGFzT3duKGVyciwgXCJuYW1lXCIpICYmIE9iamVjdC5oYXNPd24oZXJyLCBcIm1lc3NhZ2VcIik7XG5cdH0gY2F0Y2ggKF9ub29wRXJyKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59O1xuLyoqXG4qIEdpdmVuIGFuIGB1bmtub3duYCBvYmplY3QsIHJldHJpZXZlIHRoZSBgbWVzc2FnZWAgcHJvcGVydHkgZnJvbSBpdCwgb3IgZmFsbFxuKiBiYWNrIHRvIHRoZSBgZmFsbGJhY2tgIHN0cmluZyBpZiBpdCBkb2Vzbid0IGV4aXN0IG9yIGlzIGVtcHR5LlxuKi9cbmNvbnN0IGdldEVycm9yTWVzc2FnZSA9IChlcnIsIGZhbGxiYWNrKSA9PiB7XG5cdGNvbnN0IHsgbWVzc2FnZSB9ID0gei5vYmplY3QoeyBtZXNzYWdlOiB6LnN0cmluZygpLm1pbigxKSB9KS5jYXRjaCh7IG1lc3NhZ2U6IGZhbGxiYWNrIH0pLnBhcnNlKGVycik7XG5cdHJldHVybiBtZXNzYWdlO1xufTtcbi8qKlxuKiBHaXZlbiBhIHtAbGluayBQcmV0dHlFcnJvcn0sIHJldHVybiBhIG5pY2VseS1mb3JtYXR0ZWQgc3RyaW5nIHJlYWR5IHRvIGxvZ1xuKiBvciB0aHJvdy5cbipcbiogVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0IGVycm9ycyBhcmUgbG9nZ2VkIGluIGEgY29uc2lzdGVudCwgaGVscGZ1bCBmb3JtYXRcbiogYWNyb3NzIHRoZSBTREsgYnkgcHJvbXB0aW5nIGZvciBrZXkgcGllY2VzIG9mIGluZm9ybWF0aW9uLlxuKi9cbmNvbnN0IHByZXR0eUVycm9yID0gKHsgdHlwZSA9IFwiZXJyb3JcIiwgd2hhdEhhcHBlbmVkLCBvdGhlcndpc2UsIHJlYXNzdXJhbmNlLCB0b0ZpeE5vdywgd2h5LCBjb25zZXF1ZW5jZXMsIHN0YWNrLCBjb2RlIH0pID0+IHtcblx0Y29uc3QgeyBpY29uLCBjb2xvckZuIH0gPSB7XG5cdFx0ZXJyb3I6IHtcblx0XHRcdGljb246IFwi4p2MXCIsXG5cdFx0XHRjb2xvckZuOiBjaGFsay5yZWRcblx0XHR9LFxuXHRcdHdhcm46IHtcblx0XHRcdGljb246IFwi4pqg77iPXCIsXG5cdFx0XHRjb2xvckZuOiBjaGFsay55ZWxsb3dcblx0XHR9XG5cdH1bdHlwZV07XG5cdGxldCBoZWFkZXIgPSBgJHtpY29ufSAgJHtjaGFsay5ib2xkLnVuZGVybGluZSh3aGF0SGFwcGVuZWQudHJpbSgpKX1gO1xuXHRpZiAoc3RhY2spIGhlYWRlciArPSBcIlxcblwiICsgWy4uLigvKiBAX19QVVJFX18gKi8gbmV3IEVycm9yKCkpLnN0YWNrPy5zcGxpdChcIlxcblwiKS5zbGljZSgxKS5maWx0ZXIoQm9vbGVhbikgfHwgW11dLmpvaW4oXCJcXG5cIik7XG5cdGxldCB0b0ZpeE5vd1N0ciA9IChBcnJheS5pc0FycmF5KHRvRml4Tm93KSA/IHRvRml4Tm93Lm1hcCgocykgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKS5tYXAoKHMsIGkpID0+IGBcXHQke2kgKyAxfS4gJHtzfWApLmpvaW4oXCJcXG5cIikgOiB0b0ZpeE5vdz8udHJpbSgpKSA/PyBcIlwiO1xuXHRpZiAoQXJyYXkuaXNBcnJheSh0b0ZpeE5vdykgJiYgdG9GaXhOb3dTdHIpIHRvRml4Tm93U3RyID0gYFRvIGZpeCB0aGlzLCB5b3UgY2FuIHRha2Ugb25lIG9mIHRoZSBmb2xsb3dpbmcgY291cnNlcyBvZiBhY3Rpb246XFxuXFxuJHt0b0ZpeE5vd1N0cn1gO1xuXHRsZXQgYm9keSA9IFtcblx0XHRyZWFzc3VyYW5jZT8udHJpbSgpLFxuXHRcdHdoeT8udHJpbSgpLFxuXHRcdGNvbnNlcXVlbmNlcz8udHJpbSgpXG5cdF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xuXHRib2R5ICs9IGJvZHkgPyBgXFxuXFxuJHt0b0ZpeE5vd1N0cn1gIDogdG9GaXhOb3dTdHI7XG5cdGNvbnN0IHRyYWlsZXIgPSBbb3RoZXJ3aXNlPy50cmltKCldLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcblx0cmV0dXJuIGNvbG9yRm4oW1xuXHRcdHByZXR0eUVycm9yU3BsaXR0ZXIsXG5cdFx0aGVhZGVyLFxuXHRcdGJvZHksXG5cdFx0dHJhaWxlcixcblx0XHRjb2RlID8gYENvZGU6ICR7Y29kZX1gIDogXCJcIixcblx0XHRwcmV0dHlFcnJvclNwbGl0dGVyXG5cdF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcXG5cXG5cIikpO1xufTtcbmNvbnN0IGZpeEV2ZW50S2V5TWlzc2luZ1N0ZXBzID0gW1xuXHRcIlNldCB0aGUgYElOTkdFU1RfRVZFTlRfS0VZYCBlbnZpcm9ubWVudCB2YXJpYWJsZVwiLFxuXHRgUGFzcyBhIGtleSB0byB0aGUgXFxgbmV3IElubmdlc3QoKVxcYCBjb25zdHJ1Y3RvciB1c2luZyB0aGUgXFxgZXZlbnRLZXlcXGAgb3B0aW9uYCxcblx0YFVzZSBcXGBpbm5nZXN0LnNldEV2ZW50S2V5KClcXGAgYXQgcnVudGltZWBcbl07XG4vKipcbiogQW4gZXJyb3IgdGhhdCwgd2hlbiB0aHJvd24sIGluZGljYXRlcyBpbnRlcm5hbGx5IHRoYXQgYW4gb3V0Z29pbmcgb3BlcmF0aW9uXG4qIGNvbnRhaW5zIGFuIGVycm9yLlxuKlxuKiBXZSB1c2UgdGhpcyBiZWNhdXNlIHNlcmlhbGl6ZWQgYGRhdGFgIHNlbnQgYmFjayB0byBJbm5nZXN0IG1heSBkaWZmZXIgZnJvbVxuKiB0aGUgZXJyb3IgaW5zdGFuY2UgaXRzZWxmIGR1ZSB0byBtaWRkbGV3YXJlLlxuKlxuKiBAaW50ZXJuYWxcbiovXG52YXIgT3V0Z29pbmdSZXN1bHRFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHRyZXN1bHQ7XG5cdGNvbnN0cnVjdG9yKHJlc3VsdCkge1xuXHRcdHN1cGVyKFwiT3V0Z29pbmdPcEVycm9yXCIpO1xuXHRcdHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuXHR9XG59O1xuLyoqXG4qIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCByZXRocm93IGFuIGVycm9yIHdpdGggYSBwcmVmaXggYWRkZWQgdG8gdGhlXG4qIG1lc3NhZ2UuXG4qXG4qIFVzZWZ1bCBmb3IgYWRkaW5nIGNvbnRleHQgdG8gZXJyb3JzIHRoYXQgYXJlIHJldGhyb3duLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBhd2FpdCBkb1NvbWVBY3Rpb24oKS5jYXRjaChyZXRocm93RXJyb3IoXCJGYWlsZWQgdG8gZG8gc29tZSBhY3Rpb25cIikpO1xuKiBgYGBcbiovXG5jb25zdCByZXRocm93RXJyb3IgPSAocHJlZml4KSA9PiB7XG5cdHJldHVybiAoZXJyKSA9PiB7XG5cdFx0dHJ5IHtcblx0XHRcdGVyci5tZXNzYWdlICYmPSBgJHtwcmVmaXh9OyAke2Vyci5tZXNzYWdlfWA7XG5cdFx0fSBjYXRjaCAoX25vb3BFcnIpIHt9IGZpbmFsbHkge1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0fTtcbn07XG4vKipcbiogTGVnYWN5IHYwIGV4ZWN1dGlvbiBlcnJvciBmb3IgZnVuY3Rpb25zIHRoYXQgZG9uJ3Qgc3VwcG9ydCBtaXhpbmcgc3RlcHMgYW5kXG4qIHJlZ3VsYXIgYXN5bmMgYWN0aW9ucy5cbiovXG5jb25zdCBmdW5jdGlvblN0b3BwZWRSdW5uaW5nRXJyID0gKGNvZGUpID0+IHtcblx0cmV0dXJuIHByZXR0eUVycm9yKHtcblx0XHR3aGF0SGFwcGVuZWQ6IFwiWW91ciBmdW5jdGlvbiB3YXMgc3RvcHBlZCBmcm9tIHJ1bm5pbmdcIixcblx0XHR3aHk6IFwiV2UgZGV0ZWN0ZWQgYSBtaXggb2YgYXN5bmNocm9ub3VzIGxvZ2ljLCBzb21lIHVzaW5nIHN0ZXAgdG9vbGluZyBhbmQgc29tZSBub3QuXCIsXG5cdFx0Y29uc2VxdWVuY2VzOiBcIlRoaXMgY2FuIGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3VyIHdoZW4gYSBmdW5jdGlvbiBpcyBwYXVzZWQgYW5kIHJlc3VtZWQgYW5kIGlzIHRoZXJlZm9yZSBzdHJvbmdseSBkaXNjb3VyYWdlZDsgd2Ugc3RvcHBlZCB5b3VyIGZ1bmN0aW9uIHRvIGVuc3VyZSBub3RoaW5nIHVuZXhwZWN0ZWQgaGFwcGVuZWQhXCIsXG5cdFx0c3RhY2s6IHRydWUsXG5cdFx0dG9GaXhOb3c6IFwiRW5zdXJlIHRoYXQgeW91ciBmdW5jdGlvbiBpcyBlaXRoZXIgZW50aXJlbHkgc3RlcC1iYXNlZCBvciBlbnRpcmVseSBub24tc3RlcC1iYXNlZCwgYnkgZWl0aGVyIHdyYXBwaW5nIGFsbCBhc3luY2hyb25vdXMgbG9naWMgaW4gYHN0ZXAucnVuKClgIGNhbGxzIG9yIGJ5IHJlbW92aW5nIGFsbCBgc3RlcC4qKClgIGNhbGxzLlwiLFxuXHRcdG90aGVyd2lzZTogXCJGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB3aHkgc3RlcCBmdW5jdGlvbnMgd29yayBpbiB0aGlzIG1hbm5lciwgc2VlIGh0dHBzOi8vd3d3Lmlubmdlc3QuY29tL2RvY3MvZnVuY3Rpb25zL211bHRpLXN0ZXAjZ290Y2hhc1wiLFxuXHRcdGNvZGVcblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEVyckNvZGUsIGRlc2VyaWFsaXplRXJyb3IkMSBhcyBkZXNlcmlhbGl6ZUVycm9yLCBlcnJvcnNfZXhwb3J0cywgZml4RXZlbnRLZXlNaXNzaW5nU3RlcHMsIGZ1bmN0aW9uU3RvcHBlZFJ1bm5pbmdFcnIsIGdldEVycm9yTWVzc2FnZSwgbWluaWZ5UHJldHR5RXJyb3IsIHByZXR0eUVycm9yLCByZXRocm93RXJyb3IsIHNlcmlhbGl6ZUVycm9yJDEgYXMgc2VyaWFsaXplRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/functions.js":
/*!***************************************************!*\
  !*** ./node_modules/inngest/helpers/functions.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheFn: () => (/* binding */ cacheFn),\n/* harmony export */   fetchAllFnData: () => (/* binding */ fetchAllFnData),\n/* harmony export */   parseFnData: () => (/* binding */ parseFnData),\n/* harmony export */   undefinedToNull: () => (/* binding */ undefinedToNull),\n/* harmony export */   waterfall: () => (/* binding */ waterfall)\n/* harmony export */ });\n/* harmony import */ var _consts_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./consts.js */ \"(rsc)/./node_modules/inngest/helpers/consts.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types.js */ \"(rsc)/./node_modules/inngest/types.js\");\n/* harmony import */ var _api_schema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/schema.js */ \"(rsc)/./node_modules/inngest/api/schema.js\");\n/* harmony import */ var _components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/execution/InngestExecution.js */ \"(rsc)/./node_modules/inngest/components/execution/InngestExecution.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/inngest/helpers/errors.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\n\n\n\n\n\n\n//#region src/helpers/functions.ts\n/**\n* Wraps a function with a cache. When the returned function is run, it will\n* cache the result and return it on subsequent calls.\n*/\nconst cacheFn = (fn) => {\n\tconst key = \"value\";\n\tconst cache = /* @__PURE__ */ new Map();\n\treturn ((...args) => {\n\t\tif (!cache.has(key)) cache.set(key, fn(...args));\n\t\treturn cache.get(key);\n\t});\n};\n/**\n* Given an array of functions, return a new function that will run each\n* function in series and return the result of the final function. Regardless of\n* if the functions are synchronous or asynchronous, they'll be made into an\n* async promise chain.\n*\n* If an error is thrown, the waterfall will stop and return the error.\n*\n* Because this needs to support both sync and async functions, it only allows\n* functions that accept a single argument.\n*/\nconst waterfall = (fns, transform) => {\n\treturn (...args) => {\n\t\treturn fns.reduce(async (acc, fn) => {\n\t\t\tconst prev = await acc;\n\t\t\tconst output = await fn(prev);\n\t\t\tif (transform) return await transform(prev, output);\n\t\t\tif (typeof output === \"undefined\") return prev;\n\t\t\treturn output;\n\t\t}, Promise.resolve(args[0]));\n\t};\n};\n/**\n* Given a value `v`, return `v` if it's not undefined, otherwise return `null`.\n*/\nconst undefinedToNull = (v) => {\n\treturn typeof v === \"undefined\" ? null : v;\n};\nconst fnDataVersionSchema = zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({ version: zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(-1).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(0)).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(1)).or(zod_v3__WEBPACK_IMPORTED_MODULE_0__.literal(2)).optional().transform((v) => {\n\tif (typeof v === \"undefined\") {\n\t\tconsole.debug(`No request version specified by executor; defaulting to v${_components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__.PREFERRED_EXECUTION_VERSION}`);\n\t\treturn {\n\t\t\tsdkDecided: true,\n\t\t\tversion: _components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__.PREFERRED_EXECUTION_VERSION\n\t\t};\n\t}\n\tif (v === -1) return {\n\t\tsdkDecided: true,\n\t\tversion: _components_execution_InngestExecution_js__WEBPACK_IMPORTED_MODULE_1__.PREFERRED_EXECUTION_VERSION\n\t};\n\treturn {\n\t\tsdkDecided: false,\n\t\tversion: v\n\t};\n}) });\nconst parseFnData = (data) => {\n\tlet version;\n\ttry {\n\t\tconst parsedVersionData = fnDataVersionSchema.parse(data);\n\t\tversion = parsedVersionData.version.version;\n\t\tconst sdkDecided = parsedVersionData.version.sdkDecided;\n\t\treturn {\n\t\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0]: () => ({\n\t\t\t\tversion: _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0,\n\t\t\t\tsdkDecided,\n\t\t\t\t...zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()),\n\t\t\t\t\tevents: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any())).default([]),\n\t\t\t\t\tsteps: _api_schema_js__WEBPACK_IMPORTED_MODULE_3__.stepsSchemas[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0],\n\t\t\t\t\tctx: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\t\t\t\t\t\tattempt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().default(0),\n\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.string()).nullable().transform((v) => Array.isArray(v) ? v : []),\n\t\t\t\t\t\t\tcurrent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n\t\t\t\t\t\t}).optional().nullable()\n\t\t\t\t\t}).optional().nullable(),\n\t\t\t\t\tuse_api: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false)\n\t\t\t\t}).parse(data)\n\t\t\t}),\n\t\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1]: () => ({\n\t\t\t\tversion: _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1,\n\t\t\t\tsdkDecided,\n\t\t\t\t...zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()),\n\t\t\t\t\tevents: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any())).default([]),\n\t\t\t\t\tsteps: _api_schema_js__WEBPACK_IMPORTED_MODULE_3__.stepsSchemas[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1],\n\t\t\t\t\tctx: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\t\t\t\t\t\tfn_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tattempt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().default(0),\n\t\t\t\t\t\tmax_attempts: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n\t\t\t\t\t\tdisable_immediate_execution: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tuse_api: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tqi_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.string()).nullable().transform((v) => Array.isArray(v) ? v : []),\n\t\t\t\t\t\t\tcurrent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n\t\t\t\t\t\t}).optional().nullable()\n\t\t\t\t\t}).optional().nullable()\n\t\t\t\t}).parse(data)\n\t\t\t}),\n\t\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2]: () => ({\n\t\t\t\tversion: _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2,\n\t\t\t\tsdkDecided,\n\t\t\t\t...zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any()),\n\t\t\t\t\tevents: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.record(zod_v3__WEBPACK_IMPORTED_MODULE_0__.any())).default([]),\n\t\t\t\t\tsteps: _api_schema_js__WEBPACK_IMPORTED_MODULE_3__.stepsSchemas[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2],\n\t\t\t\t\tctx: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\trun_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string(),\n\t\t\t\t\t\tfn_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tattempt: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().default(0),\n\t\t\t\t\t\tmax_attempts: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n\t\t\t\t\t\tdisable_immediate_execution: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tuse_api: zod_v3__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n\t\t\t\t\t\tqi_id: zod_v3__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.object({\n\t\t\t\t\t\t\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_0__.array(zod_v3__WEBPACK_IMPORTED_MODULE_0__.string()).nullable().transform((v) => Array.isArray(v) ? v : []),\n\t\t\t\t\t\t\tcurrent: zod_v3__WEBPACK_IMPORTED_MODULE_0__.number()\n\t\t\t\t\t\t}).optional().nullable()\n\t\t\t\t\t}).optional().nullable()\n\t\t\t\t}).parse(data)\n\t\t\t})\n\t\t}[version]();\n\t} catch (err$1) {\n\t\tthrow new Error(parseFailureErr(err$1));\n\t}\n};\nconst fetchAllFnData = async ({ data, api, version }) => {\n\tconst result = { ...data };\n\tconst shouldFetchData = {\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0]: () => result.version === _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V0 && result.use_api,\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1]: () => result.version === _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V1 && Boolean(result.ctx?.use_api),\n\t\t[_consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2]: () => result.version === _consts_js__WEBPACK_IMPORTED_MODULE_2__.ExecutionVersion.V2 && Boolean(result.ctx?.use_api)\n\t};\n\ttry {\n\t\tif (shouldFetchData[result.version]()) {\n\t\t\tif (!result.ctx?.run_id) return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)((0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\t\t\twhatHappened: \"failed to attempt retrieving data from API\",\n\t\t\t\tconsequences: \"function execution can't continue\",\n\t\t\t\twhy: \"run_id is missing from context\",\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t\tconst [evtResp, stepResp] = await Promise.all([api.getRunBatch(result.ctx.run_id), api.getRunSteps(result.ctx.run_id, version)]);\n\t\t\tif (evtResp.ok) result.events = evtResp.value;\n\t\t\telse return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)((0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\t\t\twhatHappened: \"failed to retrieve list of events\",\n\t\t\t\tconsequences: \"function execution can't continue\",\n\t\t\t\twhy: evtResp.error?.error,\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t\tif (stepResp.ok) result.steps = stepResp.value;\n\t\t\telse return (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)((0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\t\t\twhatHappened: \"failed to retrieve steps for function run\",\n\t\t\t\tconsequences: \"function execution can't continue\",\n\t\t\t\twhy: stepResp.error?.error,\n\t\t\t\tstack: true\n\t\t\t}));\n\t\t}\n\t\tconst stepIds = Object.keys(result.steps || {});\n\t\tif (stepIds.length && !result.ctx?.stack?.stack?.length) result.ctx = {\n\t\t\t...result.ctx,\n\t\t\tstack: {\n\t\t\t\tstack: stepIds,\n\t\t\t\tcurrent: stepIds.length - 1\n\t\t\t}\n\t\t};\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.ok)(result);\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn (0,_types_js__WEBPACK_IMPORTED_MODULE_4__.err)(parseFailureErr(error));\n\t}\n};\nconst parseFailureErr = (err$1) => {\n\tlet why;\n\tif (err$1 instanceof zod_v3__WEBPACK_IMPORTED_MODULE_6__.ZodError) why = err$1.toString();\n\treturn (0,_errors_js__WEBPACK_IMPORTED_MODULE_5__.prettyError)({\n\t\twhatHappened: \"Failed to parse data from executor.\",\n\t\tconsequences: \"Function execution can't continue.\",\n\t\ttoFixNow: \"Make sure that your API is set up to parse incoming request bodies as JSON, like body-parser for Express (https://expressjs.com/en/resources/middleware/body-parser.html).\",\n\t\tstack: true,\n\t\twhy\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=functions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL2Z1bmN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDVDtBQUNVO0FBQzBDO0FBQ2hEO0FBQ0w7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBDQUFRLEdBQUcsU0FBUywyQ0FBUyxRQUFRLDJDQUFTLFFBQVEsMkNBQVMsUUFBUSwyQ0FBUztBQUM1RztBQUNBLDJEQUEyRCxpQkFBaUIsa0dBQTJCLENBQUM7QUFDeEc7QUFDQTtBQUNBLFlBQVksa0dBQTJCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxrR0FBMkI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBZ0I7QUFDcEIsYUFBYSx3REFBZ0I7QUFDN0I7QUFDQSxPQUFPLDBDQUFRO0FBQ2YsWUFBWSwwQ0FBUSxDQUFDLHVDQUFLO0FBQzFCLGFBQWEseUNBQU8sQ0FBQywwQ0FBUSxDQUFDLHVDQUFLO0FBQ25DLFlBQVksd0RBQVksQ0FBQyx3REFBZ0I7QUFDekMsVUFBVSwwQ0FBUTtBQUNsQixjQUFjLDBDQUFRO0FBQ3RCLGVBQWUsMENBQVE7QUFDdkIsYUFBYSwwQ0FBUTtBQUNyQixjQUFjLHlDQUFPLENBQUMsMENBQVE7QUFDOUIsZ0JBQWdCLDBDQUFRO0FBQ3hCLE9BQU87QUFDUCxNQUFNO0FBQ04sY0FBYywyQ0FBUztBQUN2QixLQUFLO0FBQ0wsSUFBSTtBQUNKLElBQUksd0RBQWdCO0FBQ3BCLGFBQWEsd0RBQWdCO0FBQzdCO0FBQ0EsT0FBTywwQ0FBUTtBQUNmLFlBQVksMENBQVEsQ0FBQyx1Q0FBSztBQUMxQixhQUFhLHlDQUFPLENBQUMsMENBQVEsQ0FBQyx1Q0FBSztBQUNuQyxZQUFZLHdEQUFZLENBQUMsd0RBQWdCO0FBQ3pDLFVBQVUsMENBQVE7QUFDbEIsY0FBYywwQ0FBUTtBQUN0QixhQUFhLDBDQUFRO0FBQ3JCLGVBQWUsMENBQVE7QUFDdkIsb0JBQW9CLDBDQUFRO0FBQzVCLG1DQUFtQywyQ0FBUztBQUM1QyxlQUFlLDJDQUFTO0FBQ3hCLGFBQWEsMENBQVE7QUFDckIsYUFBYSwwQ0FBUTtBQUNyQixjQUFjLHlDQUFPLENBQUMsMENBQVE7QUFDOUIsZ0JBQWdCLDBDQUFRO0FBQ3hCLE9BQU87QUFDUCxNQUFNO0FBQ04sS0FBSztBQUNMLElBQUk7QUFDSixJQUFJLHdEQUFnQjtBQUNwQixhQUFhLHdEQUFnQjtBQUM3QjtBQUNBLE9BQU8sMENBQVE7QUFDZixZQUFZLDBDQUFRLENBQUMsdUNBQUs7QUFDMUIsYUFBYSx5Q0FBTyxDQUFDLDBDQUFRLENBQUMsdUNBQUs7QUFDbkMsWUFBWSx3REFBWSxDQUFDLHdEQUFnQjtBQUN6QyxVQUFVLDBDQUFRO0FBQ2xCLGNBQWMsMENBQVE7QUFDdEIsYUFBYSwwQ0FBUTtBQUNyQixlQUFlLDBDQUFRO0FBQ3ZCLG9CQUFvQiwwQ0FBUTtBQUM1QixtQ0FBbUMsMkNBQVM7QUFDNUMsZUFBZSwyQ0FBUztBQUN4QixhQUFhLDBDQUFRO0FBQ3JCLGFBQWEsMENBQVE7QUFDckIsY0FBYyx5Q0FBTyxDQUFDLDBDQUFRO0FBQzlCLGdCQUFnQiwwQ0FBUTtBQUN4QixPQUFPO0FBQ1AsTUFBTTtBQUNOLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0JBQW9CO0FBQ3BELGtCQUFrQjtBQUNsQjtBQUNBLEdBQUcsd0RBQWdCLCtCQUErQix3REFBZ0I7QUFDbEUsR0FBRyx3REFBZ0IsK0JBQStCLHdEQUFnQjtBQUNsRSxHQUFHLHdEQUFnQiwrQkFBK0Isd0RBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw4Q0FBRyxDQUFDLHVEQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLDhDQUFHLENBQUMsdURBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxlQUFlLDhDQUFHLENBQUMsdURBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFFO0FBQ1gsR0FBRztBQUNIO0FBQ0EsU0FBUyw4Q0FBRztBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDRDQUFRO0FBQzlCLFFBQVEsdURBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUM0RTtBQUM1RSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvZnVuY3Rpb25zLmpzP2NiYTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXhlY3V0aW9uVmVyc2lvbiB9IGZyb20gXCIuL2NvbnN0cy5qc1wiO1xuaW1wb3J0IHsgZXJyLCBvayB9IGZyb20gXCIuLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgc3RlcHNTY2hlbWFzIH0gZnJvbSBcIi4uL2FwaS9zY2hlbWEuanNcIjtcbmltcG9ydCB7IFBSRUZFUlJFRF9FWEVDVVRJT05fVkVSU0lPTiB9IGZyb20gXCIuLi9jb21wb25lbnRzL2V4ZWN1dGlvbi9Jbm5nZXN0RXhlY3V0aW9uLmpzXCI7XG5pbXBvcnQgeyBwcmV0dHlFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgWm9kRXJyb3IsIHogfSBmcm9tIFwiem9kL3YzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvaGVscGVycy9mdW5jdGlvbnMudHNcbi8qKlxuKiBXcmFwcyBhIGZ1bmN0aW9uIHdpdGggYSBjYWNoZS4gV2hlbiB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gaXMgcnVuLCBpdCB3aWxsXG4qIGNhY2hlIHRoZSByZXN1bHQgYW5kIHJldHVybiBpdCBvbiBzdWJzZXF1ZW50IGNhbGxzLlxuKi9cbmNvbnN0IGNhY2hlRm4gPSAoZm4pID0+IHtcblx0Y29uc3Qga2V5ID0gXCJ2YWx1ZVwiO1xuXHRjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdHJldHVybiAoKC4uLmFyZ3MpID0+IHtcblx0XHRpZiAoIWNhY2hlLmhhcyhrZXkpKSBjYWNoZS5zZXQoa2V5LCBmbiguLi5hcmdzKSk7XG5cdFx0cmV0dXJuIGNhY2hlLmdldChrZXkpO1xuXHR9KTtcbn07XG4vKipcbiogR2l2ZW4gYW4gYXJyYXkgb2YgZnVuY3Rpb25zLCByZXR1cm4gYSBuZXcgZnVuY3Rpb24gdGhhdCB3aWxsIHJ1biBlYWNoXG4qIGZ1bmN0aW9uIGluIHNlcmllcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGZpbmFsIGZ1bmN0aW9uLiBSZWdhcmRsZXNzIG9mXG4qIGlmIHRoZSBmdW5jdGlvbnMgYXJlIHN5bmNocm9ub3VzIG9yIGFzeW5jaHJvbm91cywgdGhleSdsbCBiZSBtYWRlIGludG8gYW5cbiogYXN5bmMgcHJvbWlzZSBjaGFpbi5cbipcbiogSWYgYW4gZXJyb3IgaXMgdGhyb3duLCB0aGUgd2F0ZXJmYWxsIHdpbGwgc3RvcCBhbmQgcmV0dXJuIHRoZSBlcnJvci5cbipcbiogQmVjYXVzZSB0aGlzIG5lZWRzIHRvIHN1cHBvcnQgYm90aCBzeW5jIGFuZCBhc3luYyBmdW5jdGlvbnMsIGl0IG9ubHkgYWxsb3dzXG4qIGZ1bmN0aW9ucyB0aGF0IGFjY2VwdCBhIHNpbmdsZSBhcmd1bWVudC5cbiovXG5jb25zdCB3YXRlcmZhbGwgPSAoZm5zLCB0cmFuc2Zvcm0pID0+IHtcblx0cmV0dXJuICguLi5hcmdzKSA9PiB7XG5cdFx0cmV0dXJuIGZucy5yZWR1Y2UoYXN5bmMgKGFjYywgZm4pID0+IHtcblx0XHRcdGNvbnN0IHByZXYgPSBhd2FpdCBhY2M7XG5cdFx0XHRjb25zdCBvdXRwdXQgPSBhd2FpdCBmbihwcmV2KTtcblx0XHRcdGlmICh0cmFuc2Zvcm0pIHJldHVybiBhd2FpdCB0cmFuc2Zvcm0ocHJldiwgb3V0cHV0KTtcblx0XHRcdGlmICh0eXBlb2Ygb3V0cHV0ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gcHJldjtcblx0XHRcdHJldHVybiBvdXRwdXQ7XG5cdFx0fSwgUHJvbWlzZS5yZXNvbHZlKGFyZ3NbMF0pKTtcblx0fTtcbn07XG4vKipcbiogR2l2ZW4gYSB2YWx1ZSBgdmAsIHJldHVybiBgdmAgaWYgaXQncyBub3QgdW5kZWZpbmVkLCBvdGhlcndpc2UgcmV0dXJuIGBudWxsYC5cbiovXG5jb25zdCB1bmRlZmluZWRUb051bGwgPSAodikgPT4ge1xuXHRyZXR1cm4gdHlwZW9mIHYgPT09IFwidW5kZWZpbmVkXCIgPyBudWxsIDogdjtcbn07XG5jb25zdCBmbkRhdGFWZXJzaW9uU2NoZW1hID0gei5vYmplY3QoeyB2ZXJzaW9uOiB6LmxpdGVyYWwoLTEpLm9yKHoubGl0ZXJhbCgwKSkub3Ioei5saXRlcmFsKDEpKS5vcih6LmxpdGVyYWwoMikpLm9wdGlvbmFsKCkudHJhbnNmb3JtKCh2KSA9PiB7XG5cdGlmICh0eXBlb2YgdiA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGNvbnNvbGUuZGVidWcoYE5vIHJlcXVlc3QgdmVyc2lvbiBzcGVjaWZpZWQgYnkgZXhlY3V0b3I7IGRlZmF1bHRpbmcgdG8gdiR7UFJFRkVSUkVEX0VYRUNVVElPTl9WRVJTSU9OfWApO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZGtEZWNpZGVkOiB0cnVlLFxuXHRcdFx0dmVyc2lvbjogUFJFRkVSUkVEX0VYRUNVVElPTl9WRVJTSU9OXG5cdFx0fTtcblx0fVxuXHRpZiAodiA9PT0gLTEpIHJldHVybiB7XG5cdFx0c2RrRGVjaWRlZDogdHJ1ZSxcblx0XHR2ZXJzaW9uOiBQUkVGRVJSRURfRVhFQ1VUSU9OX1ZFUlNJT05cblx0fTtcblx0cmV0dXJuIHtcblx0XHRzZGtEZWNpZGVkOiBmYWxzZSxcblx0XHR2ZXJzaW9uOiB2XG5cdH07XG59KSB9KTtcbmNvbnN0IHBhcnNlRm5EYXRhID0gKGRhdGEpID0+IHtcblx0bGV0IHZlcnNpb247XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVmVyc2lvbkRhdGEgPSBmbkRhdGFWZXJzaW9uU2NoZW1hLnBhcnNlKGRhdGEpO1xuXHRcdHZlcnNpb24gPSBwYXJzZWRWZXJzaW9uRGF0YS52ZXJzaW9uLnZlcnNpb247XG5cdFx0Y29uc3Qgc2RrRGVjaWRlZCA9IHBhcnNlZFZlcnNpb25EYXRhLnZlcnNpb24uc2RrRGVjaWRlZDtcblx0XHRyZXR1cm4ge1xuXHRcdFx0W0V4ZWN1dGlvblZlcnNpb24uVjBdOiAoKSA9PiAoe1xuXHRcdFx0XHR2ZXJzaW9uOiBFeGVjdXRpb25WZXJzaW9uLlYwLFxuXHRcdFx0XHRzZGtEZWNpZGVkLFxuXHRcdFx0XHQuLi56Lm9iamVjdCh7XG5cdFx0XHRcdFx0ZXZlbnQ6IHoucmVjb3JkKHouYW55KCkpLFxuXHRcdFx0XHRcdGV2ZW50czogei5hcnJheSh6LnJlY29yZCh6LmFueSgpKSkuZGVmYXVsdChbXSksXG5cdFx0XHRcdFx0c3RlcHM6IHN0ZXBzU2NoZW1hc1tFeGVjdXRpb25WZXJzaW9uLlYwXSxcblx0XHRcdFx0XHRjdHg6IHoub2JqZWN0KHtcblx0XHRcdFx0XHRcdHJ1bl9pZDogei5zdHJpbmcoKSxcblx0XHRcdFx0XHRcdGF0dGVtcHQ6IHoubnVtYmVyKCkuZGVmYXVsdCgwKSxcblx0XHRcdFx0XHRcdHN0YWNrOiB6Lm9iamVjdCh7XG5cdFx0XHRcdFx0XHRcdHN0YWNrOiB6LmFycmF5KHouc3RyaW5nKCkpLm51bGxhYmxlKCkudHJhbnNmb3JtKCh2KSA9PiBBcnJheS5pc0FycmF5KHYpID8gdiA6IFtdKSxcblx0XHRcdFx0XHRcdFx0Y3VycmVudDogei5udW1iZXIoKVxuXHRcdFx0XHRcdFx0fSkub3B0aW9uYWwoKS5udWxsYWJsZSgpXG5cdFx0XHRcdFx0fSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuXHRcdFx0XHRcdHVzZV9hcGk6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpXG5cdFx0XHRcdH0pLnBhcnNlKGRhdGEpXG5cdFx0XHR9KSxcblx0XHRcdFtFeGVjdXRpb25WZXJzaW9uLlYxXTogKCkgPT4gKHtcblx0XHRcdFx0dmVyc2lvbjogRXhlY3V0aW9uVmVyc2lvbi5WMSxcblx0XHRcdFx0c2RrRGVjaWRlZCxcblx0XHRcdFx0Li4uei5vYmplY3Qoe1xuXHRcdFx0XHRcdGV2ZW50OiB6LnJlY29yZCh6LmFueSgpKSxcblx0XHRcdFx0XHRldmVudHM6IHouYXJyYXkoei5yZWNvcmQoei5hbnkoKSkpLmRlZmF1bHQoW10pLFxuXHRcdFx0XHRcdHN0ZXBzOiBzdGVwc1NjaGVtYXNbRXhlY3V0aW9uVmVyc2lvbi5WMV0sXG5cdFx0XHRcdFx0Y3R4OiB6Lm9iamVjdCh7XG5cdFx0XHRcdFx0XHRydW5faWQ6IHouc3RyaW5nKCksXG5cdFx0XHRcdFx0XHRmbl9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdFx0XHRcdFx0YXR0ZW1wdDogei5udW1iZXIoKS5kZWZhdWx0KDApLFxuXHRcdFx0XHRcdFx0bWF4X2F0dGVtcHRzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0XHRkaXNhYmxlX2ltbWVkaWF0ZV9leGVjdXRpb246IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuXHRcdFx0XHRcdFx0dXNlX2FwaTogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG5cdFx0XHRcdFx0XHRxaV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdFx0XHRcdFx0c3RhY2s6IHoub2JqZWN0KHtcblx0XHRcdFx0XHRcdFx0c3RhY2s6IHouYXJyYXkoei5zdHJpbmcoKSkubnVsbGFibGUoKS50cmFuc2Zvcm0oKHYpID0+IEFycmF5LmlzQXJyYXkodikgPyB2IDogW10pLFxuXHRcdFx0XHRcdFx0XHRjdXJyZW50OiB6Lm51bWJlcigpXG5cdFx0XHRcdFx0XHR9KS5vcHRpb25hbCgpLm51bGxhYmxlKClcblx0XHRcdFx0XHR9KS5vcHRpb25hbCgpLm51bGxhYmxlKClcblx0XHRcdFx0fSkucGFyc2UoZGF0YSlcblx0XHRcdH0pLFxuXHRcdFx0W0V4ZWN1dGlvblZlcnNpb24uVjJdOiAoKSA9PiAoe1xuXHRcdFx0XHR2ZXJzaW9uOiBFeGVjdXRpb25WZXJzaW9uLlYyLFxuXHRcdFx0XHRzZGtEZWNpZGVkLFxuXHRcdFx0XHQuLi56Lm9iamVjdCh7XG5cdFx0XHRcdFx0ZXZlbnQ6IHoucmVjb3JkKHouYW55KCkpLFxuXHRcdFx0XHRcdGV2ZW50czogei5hcnJheSh6LnJlY29yZCh6LmFueSgpKSkuZGVmYXVsdChbXSksXG5cdFx0XHRcdFx0c3RlcHM6IHN0ZXBzU2NoZW1hc1tFeGVjdXRpb25WZXJzaW9uLlYyXSxcblx0XHRcdFx0XHRjdHg6IHoub2JqZWN0KHtcblx0XHRcdFx0XHRcdHJ1bl9pZDogei5zdHJpbmcoKSxcblx0XHRcdFx0XHRcdGZuX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0XHRhdHRlbXB0OiB6Lm51bWJlcigpLmRlZmF1bHQoMCksXG5cdFx0XHRcdFx0XHRtYXhfYXR0ZW1wdHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcblx0XHRcdFx0XHRcdGRpc2FibGVfaW1tZWRpYXRlX2V4ZWN1dGlvbjogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG5cdFx0XHRcdFx0XHR1c2VfYXBpOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcblx0XHRcdFx0XHRcdHFpX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0XHRzdGFjazogei5vYmplY3Qoe1xuXHRcdFx0XHRcdFx0XHRzdGFjazogei5hcnJheSh6LnN0cmluZygpKS5udWxsYWJsZSgpLnRyYW5zZm9ybSgodikgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYgOiBbXSksXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnQ6IHoubnVtYmVyKClcblx0XHRcdFx0XHRcdH0pLm9wdGlvbmFsKCkubnVsbGFibGUoKVxuXHRcdFx0XHRcdH0pLm9wdGlvbmFsKCkubnVsbGFibGUoKVxuXHRcdFx0XHR9KS5wYXJzZShkYXRhKVxuXHRcdFx0fSlcblx0XHR9W3ZlcnNpb25dKCk7XG5cdH0gY2F0Y2ggKGVyciQxKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKHBhcnNlRmFpbHVyZUVycihlcnIkMSkpO1xuXHR9XG59O1xuY29uc3QgZmV0Y2hBbGxGbkRhdGEgPSBhc3luYyAoeyBkYXRhLCBhcGksIHZlcnNpb24gfSkgPT4ge1xuXHRjb25zdCByZXN1bHQgPSB7IC4uLmRhdGEgfTtcblx0Y29uc3Qgc2hvdWxkRmV0Y2hEYXRhID0ge1xuXHRcdFtFeGVjdXRpb25WZXJzaW9uLlYwXTogKCkgPT4gcmVzdWx0LnZlcnNpb24gPT09IEV4ZWN1dGlvblZlcnNpb24uVjAgJiYgcmVzdWx0LnVzZV9hcGksXG5cdFx0W0V4ZWN1dGlvblZlcnNpb24uVjFdOiAoKSA9PiByZXN1bHQudmVyc2lvbiA9PT0gRXhlY3V0aW9uVmVyc2lvbi5WMSAmJiBCb29sZWFuKHJlc3VsdC5jdHg/LnVzZV9hcGkpLFxuXHRcdFtFeGVjdXRpb25WZXJzaW9uLlYyXTogKCkgPT4gcmVzdWx0LnZlcnNpb24gPT09IEV4ZWN1dGlvblZlcnNpb24uVjIgJiYgQm9vbGVhbihyZXN1bHQuY3R4Py51c2VfYXBpKVxuXHR9O1xuXHR0cnkge1xuXHRcdGlmIChzaG91bGRGZXRjaERhdGFbcmVzdWx0LnZlcnNpb25dKCkpIHtcblx0XHRcdGlmICghcmVzdWx0LmN0eD8ucnVuX2lkKSByZXR1cm4gZXJyKHByZXR0eUVycm9yKHtcblx0XHRcdFx0d2hhdEhhcHBlbmVkOiBcImZhaWxlZCB0byBhdHRlbXB0IHJldHJpZXZpbmcgZGF0YSBmcm9tIEFQSVwiLFxuXHRcdFx0XHRjb25zZXF1ZW5jZXM6IFwiZnVuY3Rpb24gZXhlY3V0aW9uIGNhbid0IGNvbnRpbnVlXCIsXG5cdFx0XHRcdHdoeTogXCJydW5faWQgaXMgbWlzc2luZyBmcm9tIGNvbnRleHRcIixcblx0XHRcdFx0c3RhY2s6IHRydWVcblx0XHRcdH0pKTtcblx0XHRcdGNvbnN0IFtldnRSZXNwLCBzdGVwUmVzcF0gPSBhd2FpdCBQcm9taXNlLmFsbChbYXBpLmdldFJ1bkJhdGNoKHJlc3VsdC5jdHgucnVuX2lkKSwgYXBpLmdldFJ1blN0ZXBzKHJlc3VsdC5jdHgucnVuX2lkLCB2ZXJzaW9uKV0pO1xuXHRcdFx0aWYgKGV2dFJlc3Aub2spIHJlc3VsdC5ldmVudHMgPSBldnRSZXNwLnZhbHVlO1xuXHRcdFx0ZWxzZSByZXR1cm4gZXJyKHByZXR0eUVycm9yKHtcblx0XHRcdFx0d2hhdEhhcHBlbmVkOiBcImZhaWxlZCB0byByZXRyaWV2ZSBsaXN0IG9mIGV2ZW50c1wiLFxuXHRcdFx0XHRjb25zZXF1ZW5jZXM6IFwiZnVuY3Rpb24gZXhlY3V0aW9uIGNhbid0IGNvbnRpbnVlXCIsXG5cdFx0XHRcdHdoeTogZXZ0UmVzcC5lcnJvcj8uZXJyb3IsXG5cdFx0XHRcdHN0YWNrOiB0cnVlXG5cdFx0XHR9KSk7XG5cdFx0XHRpZiAoc3RlcFJlc3Aub2spIHJlc3VsdC5zdGVwcyA9IHN0ZXBSZXNwLnZhbHVlO1xuXHRcdFx0ZWxzZSByZXR1cm4gZXJyKHByZXR0eUVycm9yKHtcblx0XHRcdFx0d2hhdEhhcHBlbmVkOiBcImZhaWxlZCB0byByZXRyaWV2ZSBzdGVwcyBmb3IgZnVuY3Rpb24gcnVuXCIsXG5cdFx0XHRcdGNvbnNlcXVlbmNlczogXCJmdW5jdGlvbiBleGVjdXRpb24gY2FuJ3QgY29udGludWVcIixcblx0XHRcdFx0d2h5OiBzdGVwUmVzcC5lcnJvcj8uZXJyb3IsXG5cdFx0XHRcdHN0YWNrOiB0cnVlXG5cdFx0XHR9KSk7XG5cdFx0fVxuXHRcdGNvbnN0IHN0ZXBJZHMgPSBPYmplY3Qua2V5cyhyZXN1bHQuc3RlcHMgfHwge30pO1xuXHRcdGlmIChzdGVwSWRzLmxlbmd0aCAmJiAhcmVzdWx0LmN0eD8uc3RhY2s/LnN0YWNrPy5sZW5ndGgpIHJlc3VsdC5jdHggPSB7XG5cdFx0XHQuLi5yZXN1bHQuY3R4LFxuXHRcdFx0c3RhY2s6IHtcblx0XHRcdFx0c3RhY2s6IHN0ZXBJZHMsXG5cdFx0XHRcdGN1cnJlbnQ6IHN0ZXBJZHMubGVuZ3RoIC0gMVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0cmV0dXJuIG9rKHJlc3VsdCk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0cmV0dXJuIGVycihwYXJzZUZhaWx1cmVFcnIoZXJyb3IpKTtcblx0fVxufTtcbmNvbnN0IHBhcnNlRmFpbHVyZUVyciA9IChlcnIkMSkgPT4ge1xuXHRsZXQgd2h5O1xuXHRpZiAoZXJyJDEgaW5zdGFuY2VvZiBab2RFcnJvcikgd2h5ID0gZXJyJDEudG9TdHJpbmcoKTtcblx0cmV0dXJuIHByZXR0eUVycm9yKHtcblx0XHR3aGF0SGFwcGVuZWQ6IFwiRmFpbGVkIHRvIHBhcnNlIGRhdGEgZnJvbSBleGVjdXRvci5cIixcblx0XHRjb25zZXF1ZW5jZXM6IFwiRnVuY3Rpb24gZXhlY3V0aW9uIGNhbid0IGNvbnRpbnVlLlwiLFxuXHRcdHRvRml4Tm93OiBcIk1ha2Ugc3VyZSB0aGF0IHlvdXIgQVBJIGlzIHNldCB1cCB0byBwYXJzZSBpbmNvbWluZyByZXF1ZXN0IGJvZGllcyBhcyBKU09OLCBsaWtlIGJvZHktcGFyc2VyIGZvciBFeHByZXNzIChodHRwczovL2V4cHJlc3Nqcy5jb20vZW4vcmVzb3VyY2VzL21pZGRsZXdhcmUvYm9keS1wYXJzZXIuaHRtbCkuXCIsXG5cdFx0c3RhY2s6IHRydWUsXG5cdFx0d2h5XG5cdH0pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjYWNoZUZuLCBmZXRjaEFsbEZuRGF0YSwgcGFyc2VGbkRhdGEsIHVuZGVmaW5lZFRvTnVsbCwgd2F0ZXJmYWxsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdW5jdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/functions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/net.js":
/*!*********************************************!*\
  !*** ./node_modules/inngest/helpers/net.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchWithAuthFallback: () => (/* binding */ fetchWithAuthFallback),\n/* harmony export */   signDataWithKey: () => (/* binding */ signDataWithKey)\n/* harmony export */ });\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var canonicalize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! canonicalize */ \"(rsc)/./node_modules/canonicalize/lib/canonicalize.js\");\n\n\n\n//#region src/helpers/net.ts\nconst { hmac, sha256 } = hash_js__WEBPACK_IMPORTED_MODULE_0__;\n/**\n* Send an HTTP request with the given signing key. If the response is a 401 or\n* 403, then try again with the fallback signing key\n*/\nasync function fetchWithAuthFallback({ authToken, authTokenFallback, fetch, options, url }) {\n\tlet res = await fetch(url, {\n\t\t...options,\n\t\theaders: {\n\t\t\t...options?.headers,\n\t\t\tAuthorization: `Bearer ${authToken}`\n\t\t}\n\t});\n\tif ([401, 403].includes(res.status) && authTokenFallback) res = await fetch(url, {\n\t\t...options,\n\t\theaders: {\n\t\t\t...options?.headers,\n\t\t\tAuthorization: `Bearer ${authTokenFallback}`\n\t\t}\n\t});\n\treturn res;\n}\nfunction signDataWithKey(data, signingKey, ts) {\n\tconst encoded = typeof data === \"string\" ? data : canonicalize__WEBPACK_IMPORTED_MODULE_1__(data);\n\treturn hmac(sha256, signingKey.replace(/signkey-\\w+-/, \"\")).update(encoded).update(ts).digest(\"hex\");\n}\n\n//#endregion\n\n//# sourceMappingURL=net.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL25ldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZCO0FBQ1c7O0FBRXhDO0FBQ0EsUUFBUSxlQUFlLEVBQUUsb0NBQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsbURBQW1EO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFVBQVU7QUFDdEM7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0JBQWtCO0FBQzlDO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx5Q0FBWTtBQUMvRDtBQUNBOztBQUVBO0FBQ2tEO0FBQ2xEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9uZXQuanM/MjNlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaGFzaGpzIGZyb20gXCJoYXNoLmpzXCI7XG5pbXBvcnQgY2Fub25pY2FsaXplIGZyb20gXCJjYW5vbmljYWxpemVcIjtcblxuLy8jcmVnaW9uIHNyYy9oZWxwZXJzL25ldC50c1xuY29uc3QgeyBobWFjLCBzaGEyNTYgfSA9IGhhc2hqcztcbi8qKlxuKiBTZW5kIGFuIEhUVFAgcmVxdWVzdCB3aXRoIHRoZSBnaXZlbiBzaWduaW5nIGtleS4gSWYgdGhlIHJlc3BvbnNlIGlzIGEgNDAxIG9yXG4qIDQwMywgdGhlbiB0cnkgYWdhaW4gd2l0aCB0aGUgZmFsbGJhY2sgc2lnbmluZyBrZXlcbiovXG5hc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhBdXRoRmFsbGJhY2soeyBhdXRoVG9rZW4sIGF1dGhUb2tlbkZhbGxiYWNrLCBmZXRjaCwgb3B0aW9ucywgdXJsIH0pIHtcblx0bGV0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xuXHRcdC4uLm9wdGlvbnMsXG5cdFx0aGVhZGVyczoge1xuXHRcdFx0Li4ub3B0aW9ucz8uaGVhZGVycyxcblx0XHRcdEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthdXRoVG9rZW59YFxuXHRcdH1cblx0fSk7XG5cdGlmIChbNDAxLCA0MDNdLmluY2x1ZGVzKHJlcy5zdGF0dXMpICYmIGF1dGhUb2tlbkZhbGxiYWNrKSByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdGhlYWRlcnM6IHtcblx0XHRcdC4uLm9wdGlvbnM/LmhlYWRlcnMsXG5cdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXV0aFRva2VuRmFsbGJhY2t9YFxuXHRcdH1cblx0fSk7XG5cdHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBzaWduRGF0YVdpdGhLZXkoZGF0YSwgc2lnbmluZ0tleSwgdHMpIHtcblx0Y29uc3QgZW5jb2RlZCA9IHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiID8gZGF0YSA6IGNhbm9uaWNhbGl6ZShkYXRhKTtcblx0cmV0dXJuIGhtYWMoc2hhMjU2LCBzaWduaW5nS2V5LnJlcGxhY2UoL3NpZ25rZXktXFx3Ky0vLCBcIlwiKSkudXBkYXRlKGVuY29kZWQpLnVwZGF0ZSh0cykuZGlnZXN0KFwiaGV4XCIpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGZldGNoV2l0aEF1dGhGYWxsYmFjaywgc2lnbkRhdGFXaXRoS2V5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/net.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/promises.js":
/*!**************************************************!*\
  !*** ./node_modules/inngest/helpers/promises.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferredPromise: () => (/* binding */ createDeferredPromise),\n/* harmony export */   createDeferredPromiseWithStack: () => (/* binding */ createDeferredPromiseWithStack),\n/* harmony export */   createTimeoutPromise: () => (/* binding */ createTimeoutPromise),\n/* harmony export */   goIntervalTiming: () => (/* binding */ goIntervalTiming),\n/* harmony export */   resolveAfterPending: () => (/* binding */ resolveAfterPending),\n/* harmony export */   resolveNextTick: () => (/* binding */ resolveNextTick),\n/* harmony export */   retryWithBackoff: () => (/* binding */ retryWithBackoff),\n/* harmony export */   runAsPromise: () => (/* binding */ runAsPromise)\n/* harmony export */ });\n//#region src/helpers/promises.ts\n/**\n* Some environments don't allow access to the global queueMicrotask(). While we\n* had assumed this was only true for those powered by earlier versions of Node\n* (<14) that we don't officially support, Vercel's Edge Functions also obscure\n* the function in dev, even though the platform it's based on (Cloudflare\n* Workers) appropriately exposes it. Even worse, production Vercel Edge\n* Functions can see the function, but it immediately blows up the function when\n* used.\n*\n* Therefore, we can fall back to a reasonable alternative of\n* `Promise.resolve().then(fn)` instead. This _may_ be slightly slower in modern\n* environments, but at least we can still work in these environments.\n*/\nconst shimQueueMicrotask = (callback) => {\n\tPromise.resolve().then(callback);\n};\n/**\n* Returns a Promise that resolves after the current event loop's microtasks\n* have finished, but before the next event loop tick.\n*/\nconst resolveAfterPending = (count = 100) => {\n\t/**\n\t* This uses a brute force implementation that will continue to enqueue\n\t* microtasks 10 times before resolving. This is to ensure that the microtask\n\t* queue is drained, even if the microtask queue is being manipulated by other\n\t* code.\n\t*\n\t* While this still doesn't guarantee that the microtask queue is drained,\n\t* it's our best bet for giving other non-controlled promises a chance to\n\t* resolve before we continue without resorting to falling in to the next\n\t* tick.\n\t*/\n\treturn new Promise((resolve) => {\n\t\tlet i = 0;\n\t\tconst iterate = () => {\n\t\t\tshimQueueMicrotask(() => {\n\t\t\t\tif (i++ > count) return resolve();\n\t\t\t\titerate();\n\t\t\t});\n\t\t};\n\t\titerate();\n\t});\n};\n/**\n* Creates and returns Promise that can be resolved or rejected with the\n* returned `resolve` and `reject` functions.\n*\n* Resolving or rejecting the function will return a new set of Promise control\n* functions. These can be ignored if the original Promise is all that's needed.\n*/\nconst createDeferredPromise = () => {\n\tlet resolve;\n\tlet reject;\n\treturn {\n\t\tpromise: new Promise((_resolve, _reject) => {\n\t\t\tresolve = (value) => {\n\t\t\t\t_resolve(value);\n\t\t\t\treturn createDeferredPromise();\n\t\t\t};\n\t\t\treject = (reason) => {\n\t\t\t\t_reject(reason);\n\t\t\t\treturn createDeferredPromise();\n\t\t\t};\n\t\t}),\n\t\tresolve,\n\t\treject\n\t};\n};\n/**\n* Creates and returns a deferred Promise that can be resolved or rejected with\n* the returned `resolve` and `reject` functions.\n*\n* For each Promise resolved or rejected this way, this will also keep a stack\n* of all unhandled Promises, resolved or rejected.\n*\n* Once a Promise is read, it is removed from the stack.\n*/\nconst createDeferredPromiseWithStack = () => {\n\tconst settledPromises = [];\n\tlet rotateQueue = () => {};\n\tconst results = (async function* () {\n\t\twhile (true) {\n\t\t\tconst next = settledPromises.shift();\n\t\t\tif (next) yield next;\n\t\t\telse await new Promise((resolve) => {\n\t\t\t\trotateQueue = resolve;\n\t\t\t});\n\t\t}\n\t})();\n\tconst shimDeferredPromise = (deferred) => {\n\t\tconst originalResolve = deferred.resolve;\n\t\tconst originalReject = deferred.reject;\n\t\tdeferred.resolve = (value) => {\n\t\t\tsettledPromises.push(deferred.promise);\n\t\t\trotateQueue();\n\t\t\treturn shimDeferredPromise(originalResolve(value));\n\t\t};\n\t\tdeferred.reject = (reason) => {\n\t\t\tsettledPromises.push(deferred.promise);\n\t\t\trotateQueue();\n\t\t\treturn shimDeferredPromise(originalReject(reason));\n\t\t};\n\t\treturn deferred;\n\t};\n\treturn {\n\t\tdeferred: shimDeferredPromise(createDeferredPromise()),\n\t\tresults\n\t};\n};\n/**\n* Creates a Promise that will resolve after the given duration, along with\n* methods to start, clear, and reset the timeout.\n*/\nconst createTimeoutPromise = (duration) => {\n\tconst { promise, resolve } = createDeferredPromise();\n\tlet timeout;\n\tlet ret;\n\tconst start = () => {\n\t\tif (timeout) return ret;\n\t\ttimeout = setTimeout(() => {\n\t\t\tresolve();\n\t\t}, duration);\n\t\treturn ret;\n\t};\n\tconst clear = () => {\n\t\tclearTimeout(timeout);\n\t\ttimeout = void 0;\n\t};\n\tconst reset = () => {\n\t\tclear();\n\t\treturn start();\n\t};\n\tret = Object.assign(promise, {\n\t\tstart,\n\t\tclear,\n\t\treset\n\t});\n\treturn ret;\n};\n/**\n* Take any function and safely promisify such that both synchronous and\n* asynchronous errors are caught and returned as a rejected Promise.\n*\n* The passed `fn` can be undefined to support functions that may conditionally\n* be defined.\n*/\nconst runAsPromise = (fn) => {\n\treturn Promise.resolve().then(fn);\n};\n/**\n* Returns a Promise that resolve after the current event loop tick.\n*/\nconst resolveNextTick = () => {\n\treturn new Promise((resolve) => setTimeout(resolve));\n};\nconst retryWithBackoff = async (fn, opts) => {\n\tconst maxAttempts = opts?.maxAttempts || 5;\n\tconst baseDelay = opts?.baseDelay ?? 100;\n\tfor (let attempt = 1; attempt <= maxAttempts; attempt++) try {\n\t\treturn await fn();\n\t} catch (err) {\n\t\tif (attempt >= maxAttempts) throw err;\n\t\tconst jitter = Math.random() * baseDelay;\n\t\tconst delay = baseDelay * Math.pow(2, attempt - 1) + jitter;\n\t\tawait new Promise((resolve) => setTimeout(resolve, delay));\n\t}\n\tthrow new Error(\"Max retries reached; this should be unreachable.\");\n};\n/**\n* Given a function, returns a Promise that resolves with the result of the\n* function and a Go-compatible `interval.Interval` timing object.\n*/\nconst goIntervalTiming = async (fn) => {\n\tconst start = Date.now();\n\tconst resultPromise = runAsPromise(fn);\n\ttry {\n\t\tawait resultPromise;\n\t} catch {}\n\tconst end = Date.now();\n\treturn {\n\t\tresultPromise,\n\t\tinterval: {\n\t\t\ta: start * 1e6,\n\t\t\tb: (end - start) * 1e6\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=promises.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtQkFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMrSztBQUMvSyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvcHJvbWlzZXMuanM/YjE2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2hlbHBlcnMvcHJvbWlzZXMudHNcbi8qKlxuKiBTb21lIGVudmlyb25tZW50cyBkb24ndCBhbGxvdyBhY2Nlc3MgdG8gdGhlIGdsb2JhbCBxdWV1ZU1pY3JvdGFzaygpLiBXaGlsZSB3ZVxuKiBoYWQgYXNzdW1lZCB0aGlzIHdhcyBvbmx5IHRydWUgZm9yIHRob3NlIHBvd2VyZWQgYnkgZWFybGllciB2ZXJzaW9ucyBvZiBOb2RlXG4qICg8MTQpIHRoYXQgd2UgZG9uJ3Qgb2ZmaWNpYWxseSBzdXBwb3J0LCBWZXJjZWwncyBFZGdlIEZ1bmN0aW9ucyBhbHNvIG9ic2N1cmVcbiogdGhlIGZ1bmN0aW9uIGluIGRldiwgZXZlbiB0aG91Z2ggdGhlIHBsYXRmb3JtIGl0J3MgYmFzZWQgb24gKENsb3VkZmxhcmVcbiogV29ya2VycykgYXBwcm9wcmlhdGVseSBleHBvc2VzIGl0LiBFdmVuIHdvcnNlLCBwcm9kdWN0aW9uIFZlcmNlbCBFZGdlXG4qIEZ1bmN0aW9ucyBjYW4gc2VlIHRoZSBmdW5jdGlvbiwgYnV0IGl0IGltbWVkaWF0ZWx5IGJsb3dzIHVwIHRoZSBmdW5jdGlvbiB3aGVuXG4qIHVzZWQuXG4qXG4qIFRoZXJlZm9yZSwgd2UgY2FuIGZhbGwgYmFjayB0byBhIHJlYXNvbmFibGUgYWx0ZXJuYXRpdmUgb2ZcbiogYFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZm4pYCBpbnN0ZWFkLiBUaGlzIF9tYXlfIGJlIHNsaWdodGx5IHNsb3dlciBpbiBtb2Rlcm5cbiogZW52aXJvbm1lbnRzLCBidXQgYXQgbGVhc3Qgd2UgY2FuIHN0aWxsIHdvcmsgaW4gdGhlc2UgZW52aXJvbm1lbnRzLlxuKi9cbmNvbnN0IHNoaW1RdWV1ZU1pY3JvdGFzayA9IChjYWxsYmFjaykgPT4ge1xuXHRQcm9taXNlLnJlc29sdmUoKS50aGVuKGNhbGxiYWNrKTtcbn07XG4vKipcbiogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB0aGUgY3VycmVudCBldmVudCBsb29wJ3MgbWljcm90YXNrc1xuKiBoYXZlIGZpbmlzaGVkLCBidXQgYmVmb3JlIHRoZSBuZXh0IGV2ZW50IGxvb3AgdGljay5cbiovXG5jb25zdCByZXNvbHZlQWZ0ZXJQZW5kaW5nID0gKGNvdW50ID0gMTAwKSA9PiB7XG5cdC8qKlxuXHQqIFRoaXMgdXNlcyBhIGJydXRlIGZvcmNlIGltcGxlbWVudGF0aW9uIHRoYXQgd2lsbCBjb250aW51ZSB0byBlbnF1ZXVlXG5cdCogbWljcm90YXNrcyAxMCB0aW1lcyBiZWZvcmUgcmVzb2x2aW5nLiBUaGlzIGlzIHRvIGVuc3VyZSB0aGF0IHRoZSBtaWNyb3Rhc2tcblx0KiBxdWV1ZSBpcyBkcmFpbmVkLCBldmVuIGlmIHRoZSBtaWNyb3Rhc2sgcXVldWUgaXMgYmVpbmcgbWFuaXB1bGF0ZWQgYnkgb3RoZXJcblx0KiBjb2RlLlxuXHQqXG5cdCogV2hpbGUgdGhpcyBzdGlsbCBkb2Vzbid0IGd1YXJhbnRlZSB0aGF0IHRoZSBtaWNyb3Rhc2sgcXVldWUgaXMgZHJhaW5lZCxcblx0KiBpdCdzIG91ciBiZXN0IGJldCBmb3IgZ2l2aW5nIG90aGVyIG5vbi1jb250cm9sbGVkIHByb21pc2VzIGEgY2hhbmNlIHRvXG5cdCogcmVzb2x2ZSBiZWZvcmUgd2UgY29udGludWUgd2l0aG91dCByZXNvcnRpbmcgdG8gZmFsbGluZyBpbiB0byB0aGUgbmV4dFxuXHQqIHRpY2suXG5cdCovXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdGxldCBpID0gMDtcblx0XHRjb25zdCBpdGVyYXRlID0gKCkgPT4ge1xuXHRcdFx0c2hpbVF1ZXVlTWljcm90YXNrKCgpID0+IHtcblx0XHRcdFx0aWYgKGkrKyA+IGNvdW50KSByZXR1cm4gcmVzb2x2ZSgpO1xuXHRcdFx0XHRpdGVyYXRlKCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHRcdGl0ZXJhdGUoKTtcblx0fSk7XG59O1xuLyoqXG4qIENyZWF0ZXMgYW5kIHJldHVybnMgUHJvbWlzZSB0aGF0IGNhbiBiZSByZXNvbHZlZCBvciByZWplY3RlZCB3aXRoIHRoZVxuKiByZXR1cm5lZCBgcmVzb2x2ZWAgYW5kIGByZWplY3RgIGZ1bmN0aW9ucy5cbipcbiogUmVzb2x2aW5nIG9yIHJlamVjdGluZyB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gYSBuZXcgc2V0IG9mIFByb21pc2UgY29udHJvbFxuKiBmdW5jdGlvbnMuIFRoZXNlIGNhbiBiZSBpZ25vcmVkIGlmIHRoZSBvcmlnaW5hbCBQcm9taXNlIGlzIGFsbCB0aGF0J3MgbmVlZGVkLlxuKi9cbmNvbnN0IGNyZWF0ZURlZmVycmVkUHJvbWlzZSA9ICgpID0+IHtcblx0bGV0IHJlc29sdmU7XG5cdGxldCByZWplY3Q7XG5cdHJldHVybiB7XG5cdFx0cHJvbWlzZTogbmV3IFByb21pc2UoKF9yZXNvbHZlLCBfcmVqZWN0KSA9PiB7XG5cdFx0XHRyZXNvbHZlID0gKHZhbHVlKSA9PiB7XG5cdFx0XHRcdF9yZXNvbHZlKHZhbHVlKTtcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZURlZmVycmVkUHJvbWlzZSgpO1xuXHRcdFx0fTtcblx0XHRcdHJlamVjdCA9IChyZWFzb24pID0+IHtcblx0XHRcdFx0X3JlamVjdChyZWFzb24pO1xuXHRcdFx0XHRyZXR1cm4gY3JlYXRlRGVmZXJyZWRQcm9taXNlKCk7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXHRcdHJlc29sdmUsXG5cdFx0cmVqZWN0XG5cdH07XG59O1xuLyoqXG4qIENyZWF0ZXMgYW5kIHJldHVybnMgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgY2FuIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIHdpdGhcbiogdGhlIHJldHVybmVkIGByZXNvbHZlYCBhbmQgYHJlamVjdGAgZnVuY3Rpb25zLlxuKlxuKiBGb3IgZWFjaCBQcm9taXNlIHJlc29sdmVkIG9yIHJlamVjdGVkIHRoaXMgd2F5LCB0aGlzIHdpbGwgYWxzbyBrZWVwIGEgc3RhY2tcbiogb2YgYWxsIHVuaGFuZGxlZCBQcm9taXNlcywgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXG4qXG4qIE9uY2UgYSBQcm9taXNlIGlzIHJlYWQsIGl0IGlzIHJlbW92ZWQgZnJvbSB0aGUgc3RhY2suXG4qL1xuY29uc3QgY3JlYXRlRGVmZXJyZWRQcm9taXNlV2l0aFN0YWNrID0gKCkgPT4ge1xuXHRjb25zdCBzZXR0bGVkUHJvbWlzZXMgPSBbXTtcblx0bGV0IHJvdGF0ZVF1ZXVlID0gKCkgPT4ge307XG5cdGNvbnN0IHJlc3VsdHMgPSAoYXN5bmMgZnVuY3Rpb24qICgpIHtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0Y29uc3QgbmV4dCA9IHNldHRsZWRQcm9taXNlcy5zaGlmdCgpO1xuXHRcdFx0aWYgKG5leHQpIHlpZWxkIG5leHQ7XG5cdFx0XHRlbHNlIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRcdHJvdGF0ZVF1ZXVlID0gcmVzb2x2ZTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSkoKTtcblx0Y29uc3Qgc2hpbURlZmVycmVkUHJvbWlzZSA9IChkZWZlcnJlZCkgPT4ge1xuXHRcdGNvbnN0IG9yaWdpbmFsUmVzb2x2ZSA9IGRlZmVycmVkLnJlc29sdmU7XG5cdFx0Y29uc3Qgb3JpZ2luYWxSZWplY3QgPSBkZWZlcnJlZC5yZWplY3Q7XG5cdFx0ZGVmZXJyZWQucmVzb2x2ZSA9ICh2YWx1ZSkgPT4ge1xuXHRcdFx0c2V0dGxlZFByb21pc2VzLnB1c2goZGVmZXJyZWQucHJvbWlzZSk7XG5cdFx0XHRyb3RhdGVRdWV1ZSgpO1xuXHRcdFx0cmV0dXJuIHNoaW1EZWZlcnJlZFByb21pc2Uob3JpZ2luYWxSZXNvbHZlKHZhbHVlKSk7XG5cdFx0fTtcblx0XHRkZWZlcnJlZC5yZWplY3QgPSAocmVhc29uKSA9PiB7XG5cdFx0XHRzZXR0bGVkUHJvbWlzZXMucHVzaChkZWZlcnJlZC5wcm9taXNlKTtcblx0XHRcdHJvdGF0ZVF1ZXVlKCk7XG5cdFx0XHRyZXR1cm4gc2hpbURlZmVycmVkUHJvbWlzZShvcmlnaW5hbFJlamVjdChyZWFzb24pKTtcblx0XHR9O1xuXHRcdHJldHVybiBkZWZlcnJlZDtcblx0fTtcblx0cmV0dXJuIHtcblx0XHRkZWZlcnJlZDogc2hpbURlZmVycmVkUHJvbWlzZShjcmVhdGVEZWZlcnJlZFByb21pc2UoKSksXG5cdFx0cmVzdWx0c1xuXHR9O1xufTtcbi8qKlxuKiBDcmVhdGVzIGEgUHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBhZnRlciB0aGUgZ2l2ZW4gZHVyYXRpb24sIGFsb25nIHdpdGhcbiogbWV0aG9kcyB0byBzdGFydCwgY2xlYXIsIGFuZCByZXNldCB0aGUgdGltZW91dC5cbiovXG5jb25zdCBjcmVhdGVUaW1lb3V0UHJvbWlzZSA9IChkdXJhdGlvbikgPT4ge1xuXHRjb25zdCB7IHByb21pc2UsIHJlc29sdmUgfSA9IGNyZWF0ZURlZmVycmVkUHJvbWlzZSgpO1xuXHRsZXQgdGltZW91dDtcblx0bGV0IHJldDtcblx0Y29uc3Qgc3RhcnQgPSAoKSA9PiB7XG5cdFx0aWYgKHRpbWVvdXQpIHJldHVybiByZXQ7XG5cdFx0dGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdH0sIGR1cmF0aW9uKTtcblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xuXHRjb25zdCBjbGVhciA9ICgpID0+IHtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dGltZW91dCA9IHZvaWQgMDtcblx0fTtcblx0Y29uc3QgcmVzZXQgPSAoKSA9PiB7XG5cdFx0Y2xlYXIoKTtcblx0XHRyZXR1cm4gc3RhcnQoKTtcblx0fTtcblx0cmV0ID0gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG5cdFx0c3RhcnQsXG5cdFx0Y2xlYXIsXG5cdFx0cmVzZXRcblx0fSk7XG5cdHJldHVybiByZXQ7XG59O1xuLyoqXG4qIFRha2UgYW55IGZ1bmN0aW9uIGFuZCBzYWZlbHkgcHJvbWlzaWZ5IHN1Y2ggdGhhdCBib3RoIHN5bmNocm9ub3VzIGFuZFxuKiBhc3luY2hyb25vdXMgZXJyb3JzIGFyZSBjYXVnaHQgYW5kIHJldHVybmVkIGFzIGEgcmVqZWN0ZWQgUHJvbWlzZS5cbipcbiogVGhlIHBhc3NlZCBgZm5gIGNhbiBiZSB1bmRlZmluZWQgdG8gc3VwcG9ydCBmdW5jdGlvbnMgdGhhdCBtYXkgY29uZGl0aW9uYWxseVxuKiBiZSBkZWZpbmVkLlxuKi9cbmNvbnN0IHJ1bkFzUHJvbWlzZSA9IChmbikgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmbik7XG59O1xuLyoqXG4qIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZSBhZnRlciB0aGUgY3VycmVudCBldmVudCBsb29wIHRpY2suXG4qL1xuY29uc3QgcmVzb2x2ZU5leHRUaWNrID0gKCkgPT4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSkpO1xufTtcbmNvbnN0IHJldHJ5V2l0aEJhY2tvZmYgPSBhc3luYyAoZm4sIG9wdHMpID0+IHtcblx0Y29uc3QgbWF4QXR0ZW1wdHMgPSBvcHRzPy5tYXhBdHRlbXB0cyB8fCA1O1xuXHRjb25zdCBiYXNlRGVsYXkgPSBvcHRzPy5iYXNlRGVsYXkgPz8gMTAwO1xuXHRmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBtYXhBdHRlbXB0czsgYXR0ZW1wdCsrKSB0cnkge1xuXHRcdHJldHVybiBhd2FpdCBmbigpO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRpZiAoYXR0ZW1wdCA+PSBtYXhBdHRlbXB0cykgdGhyb3cgZXJyO1xuXHRcdGNvbnN0IGppdHRlciA9IE1hdGgucmFuZG9tKCkgKiBiYXNlRGVsYXk7XG5cdFx0Y29uc3QgZGVsYXkgPSBiYXNlRGVsYXkgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSkgKyBqaXR0ZXI7XG5cdFx0YXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoXCJNYXggcmV0cmllcyByZWFjaGVkOyB0aGlzIHNob3VsZCBiZSB1bnJlYWNoYWJsZS5cIik7XG59O1xuLyoqXG4qIEdpdmVuIGEgZnVuY3Rpb24sIHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZVxuKiBmdW5jdGlvbiBhbmQgYSBHby1jb21wYXRpYmxlIGBpbnRlcnZhbC5JbnRlcnZhbGAgdGltaW5nIG9iamVjdC5cbiovXG5jb25zdCBnb0ludGVydmFsVGltaW5nID0gYXN5bmMgKGZuKSA9PiB7XG5cdGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcblx0Y29uc3QgcmVzdWx0UHJvbWlzZSA9IHJ1bkFzUHJvbWlzZShmbik7XG5cdHRyeSB7XG5cdFx0YXdhaXQgcmVzdWx0UHJvbWlzZTtcblx0fSBjYXRjaCB7fVxuXHRjb25zdCBlbmQgPSBEYXRlLm5vdygpO1xuXHRyZXR1cm4ge1xuXHRcdHJlc3VsdFByb21pc2UsXG5cdFx0aW50ZXJ2YWw6IHtcblx0XHRcdGE6IHN0YXJ0ICogMWU2LFxuXHRcdFx0YjogKGVuZCAtIHN0YXJ0KSAqIDFlNlxuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRGVmZXJyZWRQcm9taXNlLCBjcmVhdGVEZWZlcnJlZFByb21pc2VXaXRoU3RhY2ssIGNyZWF0ZVRpbWVvdXRQcm9taXNlLCBnb0ludGVydmFsVGltaW5nLCByZXNvbHZlQWZ0ZXJQZW5kaW5nLCByZXNvbHZlTmV4dFRpY2ssIHJldHJ5V2l0aEJhY2tvZmYsIHJ1bkFzUHJvbWlzZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvbWlzZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/stream.js":
/*!************************************************!*\
  !*** ./node_modules/inngest/helpers/stream.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createStream: () => (/* binding */ createStream)\n/* harmony export */ });\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/inngest/helpers/strings.js\");\n\n\n//#region src/helpers/stream.ts\n/**\n* Creates a {@link ReadableStream} that sends a `value` every `interval`\n* milliseconds as a heartbeat, intended to keep a stream open.\n*\n* Returns the `stream` itself and a `finalize` function that can be used to\n* close the stream and send a final value.\n*/\nconst createStream = (opts) => {\n\t/**\n\t* We need to resolve this promise with both the stream and the `finalize`\n\t* function, but having them both instantiated synchronously is difficult, as\n\t* we need access to the stream's internals too.\n\t*\n\t* We create this cheeky deferred promise to grab the internal `finalize`\n\t* value. Be warned that simpler solutions may appear to compile, but fail at\n\t* runtime due to variables not being assigned; make sure to test your code!\n\t*/\n\tlet passFinalize;\n\tconst finalizeP = new Promise((resolve) => {\n\t\tpassFinalize = resolve;\n\t});\n\tconst interval = opts?.interval ?? 3e3;\n\tconst value = opts?.value ?? \" \";\n\treturn new Promise(async (resolve, reject) => {\n\t\ttry {\n\t\t\tresolve({\n\t\t\t\tstream: new ReadableStream({ start(controller) {\n\t\t\t\t\tconst encoder = new TextEncoder();\n\t\t\t\t\tconst heartbeat = setInterval(() => {\n\t\t\t\t\t\tcontroller.enqueue(encoder.encode(value));\n\t\t\t\t\t}, interval);\n\t\t\t\t\tconst finalize = (data) => {\n\t\t\t\t\t\tclearInterval(heartbeat);\n\t\t\t\t\t\tPromise.resolve(data).then((resolvedData) => {\n\t\t\t\t\t\t\tcontroller.enqueue(encoder.encode((0,_strings_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(resolvedData)));\n\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tpassFinalize(finalize);\n\t\t\t\t} }),\n\t\t\t\tfinalize: await finalizeP\n\t\t\t});\n\t\t} catch (err) {\n\t\t\treject(err);\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=stream.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5Qzs7QUFFekM7QUFDQTtBQUNBLGFBQWEsc0JBQXNCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzREFBUztBQUNsRDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy9zdHJlYW0uanM/YTk0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvaGVscGVycy9zdHJlYW0udHNcbi8qKlxuKiBDcmVhdGVzIGEge0BsaW5rIFJlYWRhYmxlU3RyZWFtfSB0aGF0IHNlbmRzIGEgYHZhbHVlYCBldmVyeSBgaW50ZXJ2YWxgXG4qIG1pbGxpc2Vjb25kcyBhcyBhIGhlYXJ0YmVhdCwgaW50ZW5kZWQgdG8ga2VlcCBhIHN0cmVhbSBvcGVuLlxuKlxuKiBSZXR1cm5zIHRoZSBgc3RyZWFtYCBpdHNlbGYgYW5kIGEgYGZpbmFsaXplYCBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvXG4qIGNsb3NlIHRoZSBzdHJlYW0gYW5kIHNlbmQgYSBmaW5hbCB2YWx1ZS5cbiovXG5jb25zdCBjcmVhdGVTdHJlYW0gPSAob3B0cykgPT4ge1xuXHQvKipcblx0KiBXZSBuZWVkIHRvIHJlc29sdmUgdGhpcyBwcm9taXNlIHdpdGggYm90aCB0aGUgc3RyZWFtIGFuZCB0aGUgYGZpbmFsaXplYFxuXHQqIGZ1bmN0aW9uLCBidXQgaGF2aW5nIHRoZW0gYm90aCBpbnN0YW50aWF0ZWQgc3luY2hyb25vdXNseSBpcyBkaWZmaWN1bHQsIGFzXG5cdCogd2UgbmVlZCBhY2Nlc3MgdG8gdGhlIHN0cmVhbSdzIGludGVybmFscyB0b28uXG5cdCpcblx0KiBXZSBjcmVhdGUgdGhpcyBjaGVla3kgZGVmZXJyZWQgcHJvbWlzZSB0byBncmFiIHRoZSBpbnRlcm5hbCBgZmluYWxpemVgXG5cdCogdmFsdWUuIEJlIHdhcm5lZCB0aGF0IHNpbXBsZXIgc29sdXRpb25zIG1heSBhcHBlYXIgdG8gY29tcGlsZSwgYnV0IGZhaWwgYXRcblx0KiBydW50aW1lIGR1ZSB0byB2YXJpYWJsZXMgbm90IGJlaW5nIGFzc2lnbmVkOyBtYWtlIHN1cmUgdG8gdGVzdCB5b3VyIGNvZGUhXG5cdCovXG5cdGxldCBwYXNzRmluYWxpemU7XG5cdGNvbnN0IGZpbmFsaXplUCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0cGFzc0ZpbmFsaXplID0gcmVzb2x2ZTtcblx0fSk7XG5cdGNvbnN0IGludGVydmFsID0gb3B0cz8uaW50ZXJ2YWwgPz8gM2UzO1xuXHRjb25zdCB2YWx1ZSA9IG9wdHM/LnZhbHVlID8/IFwiIFwiO1xuXHRyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0c3RyZWFtOiBuZXcgUmVhZGFibGVTdHJlYW0oeyBzdGFydChjb250cm9sbGVyKSB7XG5cdFx0XHRcdFx0Y29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuXHRcdFx0XHRcdGNvbnN0IGhlYXJ0YmVhdCA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZSh2YWx1ZSkpO1xuXHRcdFx0XHRcdH0sIGludGVydmFsKTtcblx0XHRcdFx0XHRjb25zdCBmaW5hbGl6ZSA9IChkYXRhKSA9PiB7XG5cdFx0XHRcdFx0XHRjbGVhckludGVydmFsKGhlYXJ0YmVhdCk7XG5cdFx0XHRcdFx0XHRQcm9taXNlLnJlc29sdmUoZGF0YSkudGhlbigocmVzb2x2ZWREYXRhKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShzdHJpbmdpZnkocmVzb2x2ZWREYXRhKSkpO1xuXHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHBhc3NGaW5hbGl6ZShmaW5hbGl6ZSk7XG5cdFx0XHRcdH0gfSksXG5cdFx0XHRcdGZpbmFsaXplOiBhd2FpdCBmaW5hbGl6ZVBcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0cmVqZWN0KGVycik7XG5cdFx0fVxuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlU3RyZWFtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJlYW0uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/strings.js":
/*!*************************************************!*\
  !*** ./node_modules/inngest/helpers/strings.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashEventKey: () => (/* binding */ hashEventKey),\n/* harmony export */   hashSigningKey: () => (/* binding */ hashSigningKey),\n/* harmony export */   slugify: () => (/* binding */ slugify),\n/* harmony export */   stringify: () => (/* binding */ stringify$1),\n/* harmony export */   stringifyUnknown: () => (/* binding */ stringifyUnknown),\n/* harmony export */   timeStr: () => (/* binding */ timeStr)\n/* harmony export */ });\n/* harmony import */ var json_stringify_safe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! json-stringify-safe */ \"(rsc)/./node_modules/json-stringify-safe/stringify.js\");\n/* harmony import */ var hash_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hash.js */ \"(rsc)/./node_modules/hash.js/lib/hash.js\");\n/* harmony import */ var ms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ms */ \"(rsc)/./node_modules/ms/index.js\");\n\n\n\n\n//#region src/helpers/strings.ts\nconst { sha256 } = hash_js__WEBPACK_IMPORTED_MODULE_1__;\n/**\n* Safely `JSON.stringify()` an `input`, handling circular refernences and\n* removing `BigInt` values.\n*/\nconst stringify$1 = (input) => {\n\treturn json_stringify_safe__WEBPACK_IMPORTED_MODULE_0__(input, (_key, value) => {\n\t\tif (typeof value !== \"bigint\") return value;\n\t});\n};\n/**\n* Returns a slugified string used to generate consistent IDs.\n*\n* This can be used to generate a consistent ID for a function when migrating\n* from v2 to v3 of the SDK.\n*\n* @public\n*/\nconst slugify = (str) => {\n\tconst join = \"-\";\n\treturn str.toLowerCase().replace(/[^a-z0-9-]+/g, join).replace(/-+/g, join).split(join).filter(Boolean).join(join);\n};\nconst second = 1 * 1e3;\nconst minute = second * 60;\nconst hour = minute * 60;\nconst day = hour * 24;\n/**\n* A collection of periods in milliseconds and their suffixes used when creating\n* time strings.\n*/\nconst periods = [\n\t[\"w\", day * 7],\n\t[\"d\", day],\n\t[\"h\", hour],\n\t[\"m\", minute],\n\t[\"s\", second]\n];\n/**\n* Convert a given `Date`, `number`, or `ms`-compatible `string` to a\n* Inngest sleep-compatible time string (e.g. `\"1d\"` or `\"2h3010s\"`).\n*\n* Can optionally provide a `now` date to use as the base for the calculation,\n* otherwise a new date will be created on invocation.\n*/\nconst timeStr = (input) => {\n\tif (input instanceof Date) return input.toISOString();\n\tconst milliseconds = typeof input === \"string\" ? ms__WEBPACK_IMPORTED_MODULE_2__(input) : input;\n\tconst [, timeStr$1] = periods.reduce(([num, str], [suffix, period]) => {\n\t\tconst numPeriods = Math.floor(num / period);\n\t\tif (numPeriods > 0) return [num % period, `${str}${numPeriods}${suffix}`];\n\t\treturn [num, str];\n\t}, [milliseconds, \"\"]);\n\treturn timeStr$1;\n};\n/**\n* Given an unknown input, stringify it if it's a boolean, a number, or a\n* string, else return `undefined`.\n*/\nconst stringifyUnknown = (input) => {\n\tif (typeof input === \"boolean\" || typeof input === \"number\" || typeof input === \"string\") return input.toString();\n};\nconst hashEventKey = (eventKey) => {\n\treturn sha256().update(eventKey).digest(\"hex\");\n};\nconst hashSigningKey = (signingKey) => {\n\tif (!signingKey) return \"\";\n\tconst prefix = signingKey.match(/^signkey-[\\w]+-/)?.shift() || \"\";\n\tconst key = signingKey.replace(/^signkey-[\\w]+-/, \"\");\n\treturn `${prefix}${sha256().update(key, \"hex\").digest(\"hex\")}`;\n};\n\n//#endregion\n\n//# sourceMappingURL=strings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3N0cmluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ2Y7QUFDVDs7QUFFcEI7QUFDQSxRQUFRLFNBQVMsRUFBRSxvQ0FBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBUztBQUNqQjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCwrQkFBRTtBQUNwRDtBQUNBO0FBQ0EsK0NBQStDLElBQUksRUFBRSxXQUFXLEVBQUUsT0FBTztBQUN6RTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTyxFQUFFLDBDQUEwQztBQUM5RDs7QUFFQTtBQUNzRztBQUN0RyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nzci1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9pbm5nZXN0L2hlbHBlcnMvc3RyaW5ncy5qcz85MTJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdHJpbmdpZnkgZnJvbSBcImpzb24tc3RyaW5naWZ5LXNhZmVcIjtcbmltcG9ydCBoYXNoanMgZnJvbSBcImhhc2guanNcIjtcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcblxuLy8jcmVnaW9uIHNyYy9oZWxwZXJzL3N0cmluZ3MudHNcbmNvbnN0IHsgc2hhMjU2IH0gPSBoYXNoanM7XG4vKipcbiogU2FmZWx5IGBKU09OLnN0cmluZ2lmeSgpYCBhbiBgaW5wdXRgLCBoYW5kbGluZyBjaXJjdWxhciByZWZlcm5lbmNlcyBhbmRcbiogcmVtb3ZpbmcgYEJpZ0ludGAgdmFsdWVzLlxuKi9cbmNvbnN0IHN0cmluZ2lmeSQxID0gKGlucHV0KSA9PiB7XG5cdHJldHVybiBzdHJpbmdpZnkoaW5wdXQsIChfa2V5LCB2YWx1ZSkgPT4ge1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgIT09IFwiYmlnaW50XCIpIHJldHVybiB2YWx1ZTtcblx0fSk7XG59O1xuLyoqXG4qIFJldHVybnMgYSBzbHVnaWZpZWQgc3RyaW5nIHVzZWQgdG8gZ2VuZXJhdGUgY29uc2lzdGVudCBJRHMuXG4qXG4qIFRoaXMgY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgYSBjb25zaXN0ZW50IElEIGZvciBhIGZ1bmN0aW9uIHdoZW4gbWlncmF0aW5nXG4qIGZyb20gdjIgdG8gdjMgb2YgdGhlIFNESy5cbipcbiogQHB1YmxpY1xuKi9cbmNvbnN0IHNsdWdpZnkgPSAoc3RyKSA9PiB7XG5cdGNvbnN0IGpvaW4gPSBcIi1cIjtcblx0cmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16MC05LV0rL2csIGpvaW4pLnJlcGxhY2UoLy0rL2csIGpvaW4pLnNwbGl0KGpvaW4pLmZpbHRlcihCb29sZWFuKS5qb2luKGpvaW4pO1xufTtcbmNvbnN0IHNlY29uZCA9IDEgKiAxZTM7XG5jb25zdCBtaW51dGUgPSBzZWNvbmQgKiA2MDtcbmNvbnN0IGhvdXIgPSBtaW51dGUgKiA2MDtcbmNvbnN0IGRheSA9IGhvdXIgKiAyNDtcbi8qKlxuKiBBIGNvbGxlY3Rpb24gb2YgcGVyaW9kcyBpbiBtaWxsaXNlY29uZHMgYW5kIHRoZWlyIHN1ZmZpeGVzIHVzZWQgd2hlbiBjcmVhdGluZ1xuKiB0aW1lIHN0cmluZ3MuXG4qL1xuY29uc3QgcGVyaW9kcyA9IFtcblx0W1wid1wiLCBkYXkgKiA3XSxcblx0W1wiZFwiLCBkYXldLFxuXHRbXCJoXCIsIGhvdXJdLFxuXHRbXCJtXCIsIG1pbnV0ZV0sXG5cdFtcInNcIiwgc2Vjb25kXVxuXTtcbi8qKlxuKiBDb252ZXJ0IGEgZ2l2ZW4gYERhdGVgLCBgbnVtYmVyYCwgb3IgYG1zYC1jb21wYXRpYmxlIGBzdHJpbmdgIHRvIGFcbiogSW5uZ2VzdCBzbGVlcC1jb21wYXRpYmxlIHRpbWUgc3RyaW5nIChlLmcuIGBcIjFkXCJgIG9yIGBcIjJoMzAxMHNcImApLlxuKlxuKiBDYW4gb3B0aW9uYWxseSBwcm92aWRlIGEgYG5vd2AgZGF0ZSB0byB1c2UgYXMgdGhlIGJhc2UgZm9yIHRoZSBjYWxjdWxhdGlvbixcbiogb3RoZXJ3aXNlIGEgbmV3IGRhdGUgd2lsbCBiZSBjcmVhdGVkIG9uIGludm9jYXRpb24uXG4qL1xuY29uc3QgdGltZVN0ciA9IChpbnB1dCkgPT4ge1xuXHRpZiAoaW5wdXQgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gaW5wdXQudG9JU09TdHJpbmcoKTtcblx0Y29uc3QgbWlsbGlzZWNvbmRzID0gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gbXMoaW5wdXQpIDogaW5wdXQ7XG5cdGNvbnN0IFssIHRpbWVTdHIkMV0gPSBwZXJpb2RzLnJlZHVjZSgoW251bSwgc3RyXSwgW3N1ZmZpeCwgcGVyaW9kXSkgPT4ge1xuXHRcdGNvbnN0IG51bVBlcmlvZHMgPSBNYXRoLmZsb29yKG51bSAvIHBlcmlvZCk7XG5cdFx0aWYgKG51bVBlcmlvZHMgPiAwKSByZXR1cm4gW251bSAlIHBlcmlvZCwgYCR7c3RyfSR7bnVtUGVyaW9kc30ke3N1ZmZpeH1gXTtcblx0XHRyZXR1cm4gW251bSwgc3RyXTtcblx0fSwgW21pbGxpc2Vjb25kcywgXCJcIl0pO1xuXHRyZXR1cm4gdGltZVN0ciQxO1xufTtcbi8qKlxuKiBHaXZlbiBhbiB1bmtub3duIGlucHV0LCBzdHJpbmdpZnkgaXQgaWYgaXQncyBhIGJvb2xlYW4sIGEgbnVtYmVyLCBvciBhXG4qIHN0cmluZywgZWxzZSByZXR1cm4gYHVuZGVmaW5lZGAuXG4qL1xuY29uc3Qgc3RyaW5naWZ5VW5rbm93biA9IChpbnB1dCkgPT4ge1xuXHRpZiAodHlwZW9mIGlucHV0ID09PSBcImJvb2xlYW5cIiB8fCB0eXBlb2YgaW5wdXQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSByZXR1cm4gaW5wdXQudG9TdHJpbmcoKTtcbn07XG5jb25zdCBoYXNoRXZlbnRLZXkgPSAoZXZlbnRLZXkpID0+IHtcblx0cmV0dXJuIHNoYTI1NigpLnVwZGF0ZShldmVudEtleSkuZGlnZXN0KFwiaGV4XCIpO1xufTtcbmNvbnN0IGhhc2hTaWduaW5nS2V5ID0gKHNpZ25pbmdLZXkpID0+IHtcblx0aWYgKCFzaWduaW5nS2V5KSByZXR1cm4gXCJcIjtcblx0Y29uc3QgcHJlZml4ID0gc2lnbmluZ0tleS5tYXRjaCgvXnNpZ25rZXktW1xcd10rLS8pPy5zaGlmdCgpIHx8IFwiXCI7XG5cdGNvbnN0IGtleSA9IHNpZ25pbmdLZXkucmVwbGFjZSgvXnNpZ25rZXktW1xcd10rLS8sIFwiXCIpO1xuXHRyZXR1cm4gYCR7cHJlZml4fSR7c2hhMjU2KCkudXBkYXRlKGtleSwgXCJoZXhcIikuZGlnZXN0KFwiaGV4XCIpfWA7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGhhc2hFdmVudEtleSwgaGFzaFNpZ25pbmdLZXksIHNsdWdpZnksIHN0cmluZ2lmeSQxIGFzIHN0cmluZ2lmeSwgc3RyaW5naWZ5VW5rbm93biwgdGltZVN0ciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/strings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/helpers/temporal.js":
/*!**************************************************!*\
  !*** ./node_modules/inngest/helpers/temporal.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getISOString: () => (/* binding */ getISOString),\n/* harmony export */   isTemporalDuration: () => (/* binding */ isTemporalDuration)\n/* harmony export */ });\n//#region src/helpers/temporal.ts\n/**\n* Asserts that the given `input` is a `Temporal.Duration` object.\n*/\nconst isTemporalDuration = (input) => {\n\ttry {\n\t\treturn input[Symbol.toStringTag] === \"Temporal.Duration\";\n\t} catch {\n\t\treturn false;\n\t}\n};\n/**\n* Asserts that the given `input` is a `Temporal.TimeZone` object.\n*/\nconst isTemporalInstant = (input) => {\n\ttry {\n\t\treturn input[Symbol.toStringTag] === \"Temporal.Instant\";\n\t} catch {\n\t\treturn false;\n\t}\n};\n/**\n* Asserts that the given `input` is a `Temporal.ZonedDateTime` object.\n*/\nconst isTemporalZonedDateTime = (input) => {\n\ttry {\n\t\treturn input[Symbol.toStringTag] === \"Temporal.ZonedDateTime\";\n\t} catch {\n\t\treturn false;\n\t}\n};\n/**\n* Converts a given `Date`, `string`, `Temporal.Instant`, or\n* `Temporal.ZonedDateTime` to an ISO 8601 string.\n*/\nconst getISOString = (time) => {\n\tif (typeof time === \"string\") return new Date(time).toISOString();\n\tif (time instanceof Date) return time.toISOString();\n\tif (isTemporalZonedDateTime(time)) return time.toInstant().toString();\n\tif (isTemporalInstant(time)) return time.toString();\n\tthrow new TypeError(\"Invalid date input\");\n};\n\n//#endregion\n\n//# sourceMappingURL=temporal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9oZWxwZXJzL3RlbXBvcmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRDO0FBQzVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvaGVscGVycy90ZW1wb3JhbC5qcz9iNmM0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvaGVscGVycy90ZW1wb3JhbC50c1xuLyoqXG4qIEFzc2VydHMgdGhhdCB0aGUgZ2l2ZW4gYGlucHV0YCBpcyBhIGBUZW1wb3JhbC5EdXJhdGlvbmAgb2JqZWN0LlxuKi9cbmNvbnN0IGlzVGVtcG9yYWxEdXJhdGlvbiA9IChpbnB1dCkgPT4ge1xuXHR0cnkge1xuXHRcdHJldHVybiBpbnB1dFtTeW1ib2wudG9TdHJpbmdUYWddID09PSBcIlRlbXBvcmFsLkR1cmF0aW9uXCI7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcbi8qKlxuKiBBc3NlcnRzIHRoYXQgdGhlIGdpdmVuIGBpbnB1dGAgaXMgYSBgVGVtcG9yYWwuVGltZVpvbmVgIG9iamVjdC5cbiovXG5jb25zdCBpc1RlbXBvcmFsSW5zdGFudCA9IChpbnB1dCkgPT4ge1xuXHR0cnkge1xuXHRcdHJldHVybiBpbnB1dFtTeW1ib2wudG9TdHJpbmdUYWddID09PSBcIlRlbXBvcmFsLkluc3RhbnRcIjtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59O1xuLyoqXG4qIEFzc2VydHMgdGhhdCB0aGUgZ2l2ZW4gYGlucHV0YCBpcyBhIGBUZW1wb3JhbC5ab25lZERhdGVUaW1lYCBvYmplY3QuXG4qL1xuY29uc3QgaXNUZW1wb3JhbFpvbmVkRGF0ZVRpbWUgPSAoaW5wdXQpID0+IHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gaW5wdXRbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gXCJUZW1wb3JhbC5ab25lZERhdGVUaW1lXCI7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcbi8qKlxuKiBDb252ZXJ0cyBhIGdpdmVuIGBEYXRlYCwgYHN0cmluZ2AsIGBUZW1wb3JhbC5JbnN0YW50YCwgb3JcbiogYFRlbXBvcmFsLlpvbmVkRGF0ZVRpbWVgIHRvIGFuIElTTyA4NjAxIHN0cmluZy5cbiovXG5jb25zdCBnZXRJU09TdHJpbmcgPSAodGltZSkgPT4ge1xuXHRpZiAodHlwZW9mIHRpbWUgPT09IFwic3RyaW5nXCIpIHJldHVybiBuZXcgRGF0ZSh0aW1lKS50b0lTT1N0cmluZygpO1xuXHRpZiAodGltZSBpbnN0YW5jZW9mIERhdGUpIHJldHVybiB0aW1lLnRvSVNPU3RyaW5nKCk7XG5cdGlmIChpc1RlbXBvcmFsWm9uZWREYXRlVGltZSh0aW1lKSkgcmV0dXJuIHRpbWUudG9JbnN0YW50KCkudG9TdHJpbmcoKTtcblx0aWYgKGlzVGVtcG9yYWxJbnN0YW50KHRpbWUpKSByZXR1cm4gdGltZS50b1N0cmluZygpO1xuXHR0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBkYXRlIGlucHV0XCIpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRJU09TdHJpbmcsIGlzVGVtcG9yYWxEdXJhdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcG9yYWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/helpers/temporal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/middleware/logger.js":
/*!***************************************************!*\
  !*** ./node_modules/inngest/middleware/logger.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultLogger: () => (/* binding */ DefaultLogger),\n/* harmony export */   ProxyLogger: () => (/* binding */ ProxyLogger)\n/* harmony export */ });\n/* harmony import */ var _helpers_promises_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/promises.js */ \"(rsc)/./node_modules/inngest/helpers/promises.js\");\n\n\n//#region src/middleware/logger.ts\nvar DefaultLogger = class {\n\tinfo(...args) {\n\t\tconsole.info(...args);\n\t}\n\twarn(...args) {\n\t\tconsole.warn(...args);\n\t}\n\terror(...args) {\n\t\tconsole.error(...args);\n\t}\n\tdebug(...args) {\n\t\tconsole.debug(...args);\n\t}\n};\n/**\n* ProxyLogger aims to provide a thin wrapper on user's provided logger.\n* It's expected to be turned on and off based on the function execution\n* context, so it doesn't result in duplicated logging.\n*\n* And also attempt to allow enough time for the logger to flush all logs.\n*\n* @public\n*/\nvar ProxyLogger = class {\n\tlogger;\n\tenabled = false;\n\tconstructor(logger) {\n\t\tthis.logger = logger;\n\t\treturn new Proxy(this, { get(target, prop, receiver) {\n\t\t\tif (prop in target) return Reflect.get(target, prop, receiver);\n\t\t\treturn Reflect.get(target.logger, prop, receiver);\n\t\t} });\n\t}\n\tinfo(...args) {\n\t\tif (!this.enabled) return;\n\t\tthis.logger.info(...args);\n\t}\n\twarn(...args) {\n\t\tif (!this.enabled) return;\n\t\tthis.logger.warn(...args);\n\t}\n\terror(...args) {\n\t\tif (!this.enabled) return;\n\t\tthis.logger.error(...args);\n\t}\n\tdebug(...args) {\n\t\tif (!this.enabled || !(typeof this.logger.debug === \"function\")) return;\n\t\tthis.logger.debug(...args);\n\t}\n\tenable() {\n\t\tthis.enabled = true;\n\t}\n\tdisable() {\n\t\tthis.enabled = false;\n\t}\n\tasync flush() {\n\t\tif (this.logger.constructor.name == DefaultLogger.name) return;\n\t\tconst logger = this.logger;\n\t\tif (typeof logger.flush === \"function\") {\n\t\t\tawait logger.flush();\n\t\t\treturn;\n\t\t}\n\t\tawait (0,_helpers_promises_js__WEBPACK_IMPORTED_MODULE_0__.resolveNextTick)();\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=logger.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9taWRkbGV3YXJlL2xvZ2dlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUQ7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFlO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDc0M7QUFDdEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9taWRkbGV3YXJlL2xvZ2dlci5qcz8xOTlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlc29sdmVOZXh0VGljayB9IGZyb20gXCIuLi9oZWxwZXJzL3Byb21pc2VzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvbWlkZGxld2FyZS9sb2dnZXIudHNcbnZhciBEZWZhdWx0TG9nZ2VyID0gY2xhc3Mge1xuXHRpbmZvKC4uLmFyZ3MpIHtcblx0XHRjb25zb2xlLmluZm8oLi4uYXJncyk7XG5cdH1cblx0d2FybiguLi5hcmdzKSB7XG5cdFx0Y29uc29sZS53YXJuKC4uLmFyZ3MpO1xuXHR9XG5cdGVycm9yKC4uLmFyZ3MpIHtcblx0XHRjb25zb2xlLmVycm9yKC4uLmFyZ3MpO1xuXHR9XG5cdGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRjb25zb2xlLmRlYnVnKC4uLmFyZ3MpO1xuXHR9XG59O1xuLyoqXG4qIFByb3h5TG9nZ2VyIGFpbXMgdG8gcHJvdmlkZSBhIHRoaW4gd3JhcHBlciBvbiB1c2VyJ3MgcHJvdmlkZWQgbG9nZ2VyLlxuKiBJdCdzIGV4cGVjdGVkIHRvIGJlIHR1cm5lZCBvbiBhbmQgb2ZmIGJhc2VkIG9uIHRoZSBmdW5jdGlvbiBleGVjdXRpb25cbiogY29udGV4dCwgc28gaXQgZG9lc24ndCByZXN1bHQgaW4gZHVwbGljYXRlZCBsb2dnaW5nLlxuKlxuKiBBbmQgYWxzbyBhdHRlbXB0IHRvIGFsbG93IGVub3VnaCB0aW1lIGZvciB0aGUgbG9nZ2VyIHRvIGZsdXNoIGFsbCBsb2dzLlxuKlxuKiBAcHVibGljXG4qL1xudmFyIFByb3h5TG9nZ2VyID0gY2xhc3Mge1xuXHRsb2dnZXI7XG5cdGVuYWJsZWQgPSBmYWxzZTtcblx0Y29uc3RydWN0b3IobG9nZ2VyKSB7XG5cdFx0dGhpcy5sb2dnZXIgPSBsb2dnZXI7XG5cdFx0cmV0dXJuIG5ldyBQcm94eSh0aGlzLCB7IGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG5cdFx0XHRpZiAocHJvcCBpbiB0YXJnZXQpIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcblx0XHRcdHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQubG9nZ2VyLCBwcm9wLCByZWNlaXZlcik7XG5cdFx0fSB9KTtcblx0fVxuXHRpbmZvKC4uLmFyZ3MpIHtcblx0XHRpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xuXHRcdHRoaXMubG9nZ2VyLmluZm8oLi4uYXJncyk7XG5cdH1cblx0d2FybiguLi5hcmdzKSB7XG5cdFx0aWYgKCF0aGlzLmVuYWJsZWQpIHJldHVybjtcblx0XHR0aGlzLmxvZ2dlci53YXJuKC4uLmFyZ3MpO1xuXHR9XG5cdGVycm9yKC4uLmFyZ3MpIHtcblx0XHRpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xuXHRcdHRoaXMubG9nZ2VyLmVycm9yKC4uLmFyZ3MpO1xuXHR9XG5cdGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRpZiAoIXRoaXMuZW5hYmxlZCB8fCAhKHR5cGVvZiB0aGlzLmxvZ2dlci5kZWJ1ZyA9PT0gXCJmdW5jdGlvblwiKSkgcmV0dXJuO1xuXHRcdHRoaXMubG9nZ2VyLmRlYnVnKC4uLmFyZ3MpO1xuXHR9XG5cdGVuYWJsZSgpIHtcblx0XHR0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXHR9XG5cdGRpc2FibGUoKSB7XG5cdFx0dGhpcy5lbmFibGVkID0gZmFsc2U7XG5cdH1cblx0YXN5bmMgZmx1c2goKSB7XG5cdFx0aWYgKHRoaXMubG9nZ2VyLmNvbnN0cnVjdG9yLm5hbWUgPT0gRGVmYXVsdExvZ2dlci5uYW1lKSByZXR1cm47XG5cdFx0Y29uc3QgbG9nZ2VyID0gdGhpcy5sb2dnZXI7XG5cdFx0aWYgKHR5cGVvZiBsb2dnZXIuZmx1c2ggPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0YXdhaXQgbG9nZ2VyLmZsdXNoKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGF3YWl0IHJlc29sdmVOZXh0VGljaygpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IERlZmF1bHRMb2dnZXIsIFByb3h5TG9nZ2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/middleware/logger.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/next.js":
/*!**************************************!*\
  !*** ./node_modules/inngest/next.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   frameworkName: () => (/* binding */ frameworkName),\n/* harmony export */   serve: () => (/* binding */ serve)\n/* harmony export */ });\n/* harmony import */ var _helpers_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers/env.js */ \"(rsc)/./node_modules/inngest/helpers/env.js\");\n/* harmony import */ var _components_InngestCommHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/InngestCommHandler.js */ \"(rsc)/./node_modules/inngest/components/InngestCommHandler.js\");\n\n\n\n//#region src/next.ts\n/**\n* The name of the framework, used to identify the framework in Inngest\n* dashboards and during testing.\n*/\nconst frameworkName = \"nextjs\";\nconst isRecord = (val) => {\n\treturn typeof val === \"object\" && val !== null;\n};\nconst isFunction = (val) => {\n\treturn typeof val === \"function\";\n};\nconst isNext12ApiResponse = (val) => {\n\treturn isRecord(val) && isFunction(val.setHeader) && isFunction(val.status) && isFunction(val.send);\n};\n/**\n* In Next.js, serve and register any declared functions with Inngest, making\n* them available to be triggered by events.\n*\n* Supports Next.js 12+, both serverless and edge.\n*\n* @example Next.js <=12 or the pages router can export the handler directly\n* ```ts\n* export default serve({ client: inngest, functions: [fn1, fn2] });\n* ```\n*\n* @example Next.js >=13 with the `app` dir must export individual methods\n* ```ts\n* export const { GET, POST, PUT } = serve({\n*            client: inngest,\n*            functions: [fn1, fn2],\n* });\n* ```\n*\n* @public\n*/\nconst serve = (options) => {\n\t/**\n\t* Next.js 13 uses\n\t* {@link https://beta.nextjs.org/docs/routing/route-handlers Route Handlers}\n\t* to declare API routes instead of a generic catch-all method that was\n\t* available using the `pages/api` directory.\n\t*\n\t* This means that users must now export a function for each method supported\n\t* by the endpoint. For us, this means requiring a user explicitly exports\n\t* `GET`, `POST`, and `PUT` functions.\n\t*\n\t* Because of this, we'll add circular references to those property names of\n\t* the returned handler, meaning we can write some succinct code to export\n\t* them. Thanks, @goodoldneon.\n\t*\n\t* @example\n\t* ```ts\n\t* export const { GET, POST, PUT } = serve(...);\n\t* ```\n\t*\n\t* See {@link https://beta.nextjs.org/docs/routing/route-handlers}\n\t*/\n\tconst baseFn = new _components_InngestCommHandler_js__WEBPACK_IMPORTED_MODULE_0__.InngestCommHandler({\n\t\tframeworkName,\n\t\t...options,\n\t\thandler: (reqMethod, ...args) => {\n\t\t\tconst [expectedReq, res] = args;\n\t\t\tconst req = expectedReq;\n\t\t\tconst getHeader = (key) => {\n\t\t\t\tconst header = typeof req.headers.get === \"function\" ? req.headers.get(key) : req.headers[key];\n\t\t\t\treturn Array.isArray(header) ? header[0] : header;\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tbody: async () => {\n\t\t\t\t\tif (typeof req.json === \"function\") return await req.json();\n\t\t\t\t\tif (req.body instanceof ReadableStream) return await streamToJSON(req.body);\n\t\t\t\t\treturn req.body;\n\t\t\t\t},\n\t\t\t\theaders: getHeader,\n\t\t\t\tmethod: () => {\n\t\t\t\t\treturn reqMethod || req.method || \"\";\n\t\t\t\t},\n\t\t\t\tisProduction: () => {\n\t\t\t\t\t/**\n\t\t\t\t\t* Vercel Edge Functions do not allow dynamic access to environment\n\t\t\t\t\t* variables, so we'll manage production checks directly here.\n\t\t\t\t\t*\n\t\t\t\t\t* We try/catch to avoid situations where Next.js is being used in\n\t\t\t\t\t* environments where `process.env` is not accessible or polyfilled.\n\t\t\t\t\t*/\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn \"development\" === \"production\";\n\t\t\t\t\t} catch (_err) {}\n\t\t\t\t},\n\t\t\t\tqueryString: (key, url) => {\n\t\t\t\t\tconst qs = req.query?.[key] || url.searchParams.get(key);\n\t\t\t\t\treturn Array.isArray(qs) ? qs[0] : qs;\n\t\t\t\t},\n\t\t\t\turl: () => {\n\t\t\t\t\tlet absoluteUrl;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tabsoluteUrl = new URL(req.url);\n\t\t\t\t\t} catch {}\n\t\t\t\t\tif (absoluteUrl) {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* `req.url` here should may be the full URL, including query string.\n\t\t\t\t\t\t* There are some caveats, however, where Next.js will obfuscate\n\t\t\t\t\t\t* the host. For example, in the case of `host.docker.internal`,\n\t\t\t\t\t\t* Next.js will instead set the host here to `localhost`.\n\t\t\t\t\t\t*\n\t\t\t\t\t\t* To avoid this, we'll try to parse the URL from `req.url`, but\n\t\t\t\t\t\t* also use the `host` header if it's available.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst host$1 = options.serveHost || getHeader(\"host\");\n\t\t\t\t\t\tif (host$1) {\n\t\t\t\t\t\t\tconst hostWithProtocol = new URL(host$1.includes(\"://\") ? host$1 : `${absoluteUrl.protocol}//${host$1}`);\n\t\t\t\t\t\t\tabsoluteUrl.protocol = hostWithProtocol.protocol;\n\t\t\t\t\t\t\tabsoluteUrl.host = hostWithProtocol.host;\n\t\t\t\t\t\t\tabsoluteUrl.port = hostWithProtocol.port;\n\t\t\t\t\t\t\tabsoluteUrl.username = hostWithProtocol.username;\n\t\t\t\t\t\t\tabsoluteUrl.password = hostWithProtocol.password;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn absoluteUrl;\n\t\t\t\t\t}\n\t\t\t\t\tlet scheme = \"https\";\n\t\t\t\t\tconst host = options.serveHost || getHeader(\"host\") || \"\";\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (true) scheme = \"http\";\n\t\t\t\t\t} catch (_err) {}\n\t\t\t\t\treturn new URL(req.url, `${scheme}://${host}`);\n\t\t\t\t},\n\t\t\t\ttransformResponse: ({ body, headers, status }) => {\n\t\t\t\t\t/**\n\t\t\t\t\t* Carefully attempt to set headers and data on the response object\n\t\t\t\t\t* for Next.js 12 support.\n\t\t\t\t\t*\n\t\t\t\t\t* This also assumes that we're not using Next.js 15, where the `res`\n\t\t\t\t\t* object is repopulated as a `RouteContext` object. We expect these\n\t\t\t\t\t* methods to NOT be defined in Next.js 15.\n\t\t\t\t\t*\n\t\t\t\t\t* We could likely use `instanceof ServerResponse` to better check the\n\t\t\t\t\t* type of this, though Next.js 12 had issues with this due to not\n\t\t\t\t\t* instantiating the response correctly.\n\t\t\t\t\t*/\n\t\t\t\t\tif (isNext12ApiResponse(res)) {\n\t\t\t\t\t\tfor (const [key, value] of Object.entries(headers)) res.setHeader(key, value);\n\t\t\t\t\t\tres.status(status);\n\t\t\t\t\t\tres.send(body);\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* If we're here, we're in a serverless endpoint (not edge), so\n\t\t\t\t\t\t* we've correctly sent the response and can return `undefined`.\n\t\t\t\t\t\t*\n\t\t\t\t\t\t* Next.js 13 edge requires that the return value is typed as\n\t\t\t\t\t\t* `Response`, so we still enforce that as we cannot dynamically\n\t\t\t\t\t\t* adjust typing based on the environment.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn new ((0,_helpers_env_js__WEBPACK_IMPORTED_MODULE_1__.getResponse)())(body, {\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\theaders\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\ttransformStreamingResponse: ({ body, headers, status }) => {\n\t\t\t\t\treturn new Response(body, {\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\theaders\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}).createHandler();\n\tconst fn = baseFn.bind(null, void 0);\n\t/**\n\t* Ensure we have a non-variadic length to avoid issues with forced type\n\t* checking.\n\t*/\n\tObject.defineProperty(fn, \"length\", { value: 1 });\n\treturn Object.defineProperties(fn, {\n\t\tGET: { value: baseFn.bind(null, \"GET\") },\n\t\tPOST: { value: baseFn.bind(null, \"POST\") },\n\t\tPUT: { value: baseFn.bind(null, \"PUT\") }\n\t});\n};\nasync function streamToJSON(stream) {\n\tconst chunks = [];\n\tconst reader = stream.getReader();\n\twhile (true) {\n\t\tconst { done, value } = await reader.read();\n\t\tif (done) break;\n\t\tchunks.push(value);\n\t}\n\treturn JSON.parse(Buffer.concat(chunks).toString(\"utf8\"));\n}\n\n//#endregion\n\n//# sourceMappingURL=next.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9uZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDeUI7O0FBRXhFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsd0NBQXdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0Esb0JBQW9CLGlGQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGFBQW9CO0FBQ2pDLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxxQkFBcUIsSUFBSSxPQUFPO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLElBQXNDO0FBQ2hELE9BQU87QUFDUCxnQ0FBZ0MsT0FBTyxLQUFLLEtBQUs7QUFDakQsS0FBSztBQUNMLDBCQUEwQix1QkFBdUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0REFBVztBQUM1QjtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTCxtQ0FBbUMsdUJBQXVCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxVQUFVO0FBQ2pEO0FBQ0EsU0FBUyxpQ0FBaUM7QUFDMUMsVUFBVSxrQ0FBa0M7QUFDNUMsU0FBUztBQUNULEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxjQUFjO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jc3ItZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC9uZXh0LmpzP2VlZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0UmVzcG9uc2UgfSBmcm9tIFwiLi9oZWxwZXJzL2Vudi5qc1wiO1xuaW1wb3J0IHsgSW5uZ2VzdENvbW1IYW5kbGVyIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Jbm5nZXN0Q29tbUhhbmRsZXIuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9uZXh0LnRzXG4vKipcbiogVGhlIG5hbWUgb2YgdGhlIGZyYW1ld29yaywgdXNlZCB0byBpZGVudGlmeSB0aGUgZnJhbWV3b3JrIGluIElubmdlc3RcbiogZGFzaGJvYXJkcyBhbmQgZHVyaW5nIHRlc3RpbmcuXG4qL1xuY29uc3QgZnJhbWV3b3JrTmFtZSA9IFwibmV4dGpzXCI7XG5jb25zdCBpc1JlY29yZCA9ICh2YWwpID0+IHtcblx0cmV0dXJuIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsO1xufTtcbmNvbnN0IGlzRnVuY3Rpb24gPSAodmFsKSA9PiB7XG5cdHJldHVybiB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCI7XG59O1xuY29uc3QgaXNOZXh0MTJBcGlSZXNwb25zZSA9ICh2YWwpID0+IHtcblx0cmV0dXJuIGlzUmVjb3JkKHZhbCkgJiYgaXNGdW5jdGlvbih2YWwuc2V0SGVhZGVyKSAmJiBpc0Z1bmN0aW9uKHZhbC5zdGF0dXMpICYmIGlzRnVuY3Rpb24odmFsLnNlbmQpO1xufTtcbi8qKlxuKiBJbiBOZXh0LmpzLCBzZXJ2ZSBhbmQgcmVnaXN0ZXIgYW55IGRlY2xhcmVkIGZ1bmN0aW9ucyB3aXRoIElubmdlc3QsIG1ha2luZ1xuKiB0aGVtIGF2YWlsYWJsZSB0byBiZSB0cmlnZ2VyZWQgYnkgZXZlbnRzLlxuKlxuKiBTdXBwb3J0cyBOZXh0LmpzIDEyKywgYm90aCBzZXJ2ZXJsZXNzIGFuZCBlZGdlLlxuKlxuKiBAZXhhbXBsZSBOZXh0LmpzIDw9MTIgb3IgdGhlIHBhZ2VzIHJvdXRlciBjYW4gZXhwb3J0IHRoZSBoYW5kbGVyIGRpcmVjdGx5XG4qIGBgYHRzXG4qIGV4cG9ydCBkZWZhdWx0IHNlcnZlKHsgY2xpZW50OiBpbm5nZXN0LCBmdW5jdGlvbnM6IFtmbjEsIGZuMl0gfSk7XG4qIGBgYFxuKlxuKiBAZXhhbXBsZSBOZXh0LmpzID49MTMgd2l0aCB0aGUgYGFwcGAgZGlyIG11c3QgZXhwb3J0IGluZGl2aWR1YWwgbWV0aG9kc1xuKiBgYGB0c1xuKiBleHBvcnQgY29uc3QgeyBHRVQsIFBPU1QsIFBVVCB9ID0gc2VydmUoe1xuKiAgICAgICAgICAgIGNsaWVudDogaW5uZ2VzdCxcbiogICAgICAgICAgICBmdW5jdGlvbnM6IFtmbjEsIGZuMl0sXG4qIH0pO1xuKiBgYGBcbipcbiogQHB1YmxpY1xuKi9cbmNvbnN0IHNlcnZlID0gKG9wdGlvbnMpID0+IHtcblx0LyoqXG5cdCogTmV4dC5qcyAxMyB1c2VzXG5cdCoge0BsaW5rIGh0dHBzOi8vYmV0YS5uZXh0anMub3JnL2RvY3Mvcm91dGluZy9yb3V0ZS1oYW5kbGVycyBSb3V0ZSBIYW5kbGVyc31cblx0KiB0byBkZWNsYXJlIEFQSSByb3V0ZXMgaW5zdGVhZCBvZiBhIGdlbmVyaWMgY2F0Y2gtYWxsIG1ldGhvZCB0aGF0IHdhc1xuXHQqIGF2YWlsYWJsZSB1c2luZyB0aGUgYHBhZ2VzL2FwaWAgZGlyZWN0b3J5LlxuXHQqXG5cdCogVGhpcyBtZWFucyB0aGF0IHVzZXJzIG11c3Qgbm93IGV4cG9ydCBhIGZ1bmN0aW9uIGZvciBlYWNoIG1ldGhvZCBzdXBwb3J0ZWRcblx0KiBieSB0aGUgZW5kcG9pbnQuIEZvciB1cywgdGhpcyBtZWFucyByZXF1aXJpbmcgYSB1c2VyIGV4cGxpY2l0bHkgZXhwb3J0c1xuXHQqIGBHRVRgLCBgUE9TVGAsIGFuZCBgUFVUYCBmdW5jdGlvbnMuXG5cdCpcblx0KiBCZWNhdXNlIG9mIHRoaXMsIHdlJ2xsIGFkZCBjaXJjdWxhciByZWZlcmVuY2VzIHRvIHRob3NlIHByb3BlcnR5IG5hbWVzIG9mXG5cdCogdGhlIHJldHVybmVkIGhhbmRsZXIsIG1lYW5pbmcgd2UgY2FuIHdyaXRlIHNvbWUgc3VjY2luY3QgY29kZSB0byBleHBvcnRcblx0KiB0aGVtLiBUaGFua3MsIEBnb29kb2xkbmVvbi5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogYGBgdHNcblx0KiBleHBvcnQgY29uc3QgeyBHRVQsIFBPU1QsIFBVVCB9ID0gc2VydmUoLi4uKTtcblx0KiBgYGBcblx0KlxuXHQqIFNlZSB7QGxpbmsgaHR0cHM6Ly9iZXRhLm5leHRqcy5vcmcvZG9jcy9yb3V0aW5nL3JvdXRlLWhhbmRsZXJzfVxuXHQqL1xuXHRjb25zdCBiYXNlRm4gPSBuZXcgSW5uZ2VzdENvbW1IYW5kbGVyKHtcblx0XHRmcmFtZXdvcmtOYW1lLFxuXHRcdC4uLm9wdGlvbnMsXG5cdFx0aGFuZGxlcjogKHJlcU1ldGhvZCwgLi4uYXJncykgPT4ge1xuXHRcdFx0Y29uc3QgW2V4cGVjdGVkUmVxLCByZXNdID0gYXJncztcblx0XHRcdGNvbnN0IHJlcSA9IGV4cGVjdGVkUmVxO1xuXHRcdFx0Y29uc3QgZ2V0SGVhZGVyID0gKGtleSkgPT4ge1xuXHRcdFx0XHRjb25zdCBoZWFkZXIgPSB0eXBlb2YgcmVxLmhlYWRlcnMuZ2V0ID09PSBcImZ1bmN0aW9uXCIgPyByZXEuaGVhZGVycy5nZXQoa2V5KSA6IHJlcS5oZWFkZXJzW2tleV07XG5cdFx0XHRcdHJldHVybiBBcnJheS5pc0FycmF5KGhlYWRlcikgPyBoZWFkZXJbMF0gOiBoZWFkZXI7XG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Ym9keTogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVxLmpzb24gPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGF3YWl0IHJlcS5qc29uKCk7XG5cdFx0XHRcdFx0aWYgKHJlcS5ib2R5IGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHJldHVybiBhd2FpdCBzdHJlYW1Ub0pTT04ocmVxLmJvZHkpO1xuXHRcdFx0XHRcdHJldHVybiByZXEuYm9keTtcblx0XHRcdFx0fSxcblx0XHRcdFx0aGVhZGVyczogZ2V0SGVhZGVyLFxuXHRcdFx0XHRtZXRob2Q6ICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gcmVxTWV0aG9kIHx8IHJlcS5tZXRob2QgfHwgXCJcIjtcblx0XHRcdFx0fSxcblx0XHRcdFx0aXNQcm9kdWN0aW9uOiAoKSA9PiB7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBWZXJjZWwgRWRnZSBGdW5jdGlvbnMgZG8gbm90IGFsbG93IGR5bmFtaWMgYWNjZXNzIHRvIGVudmlyb25tZW50XG5cdFx0XHRcdFx0KiB2YXJpYWJsZXMsIHNvIHdlJ2xsIG1hbmFnZSBwcm9kdWN0aW9uIGNoZWNrcyBkaXJlY3RseSBoZXJlLlxuXHRcdFx0XHRcdCpcblx0XHRcdFx0XHQqIFdlIHRyeS9jYXRjaCB0byBhdm9pZCBzaXR1YXRpb25zIHdoZXJlIE5leHQuanMgaXMgYmVpbmcgdXNlZCBpblxuXHRcdFx0XHRcdCogZW52aXJvbm1lbnRzIHdoZXJlIGBwcm9jZXNzLmVudmAgaXMgbm90IGFjY2Vzc2libGUgb3IgcG9seWZpbGxlZC5cblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKF9lcnIpIHt9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHF1ZXJ5U3RyaW5nOiAoa2V5LCB1cmwpID0+IHtcblx0XHRcdFx0XHRjb25zdCBxcyA9IHJlcS5xdWVyeT8uW2tleV0gfHwgdXJsLnNlYXJjaFBhcmFtcy5nZXQoa2V5KTtcblx0XHRcdFx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShxcykgPyBxc1swXSA6IHFzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cmw6ICgpID0+IHtcblx0XHRcdFx0XHRsZXQgYWJzb2x1dGVVcmw7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGFic29sdXRlVXJsID0gbmV3IFVSTChyZXEudXJsKTtcblx0XHRcdFx0XHR9IGNhdGNoIHt9XG5cdFx0XHRcdFx0aWYgKGFic29sdXRlVXJsKSB7XG5cdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdCogYHJlcS51cmxgIGhlcmUgc2hvdWxkIG1heSBiZSB0aGUgZnVsbCBVUkwsIGluY2x1ZGluZyBxdWVyeSBzdHJpbmcuXG5cdFx0XHRcdFx0XHQqIFRoZXJlIGFyZSBzb21lIGNhdmVhdHMsIGhvd2V2ZXIsIHdoZXJlIE5leHQuanMgd2lsbCBvYmZ1c2NhdGVcblx0XHRcdFx0XHRcdCogdGhlIGhvc3QuIEZvciBleGFtcGxlLCBpbiB0aGUgY2FzZSBvZiBgaG9zdC5kb2NrZXIuaW50ZXJuYWxgLFxuXHRcdFx0XHRcdFx0KiBOZXh0LmpzIHdpbGwgaW5zdGVhZCBzZXQgdGhlIGhvc3QgaGVyZSB0byBgbG9jYWxob3N0YC5cblx0XHRcdFx0XHRcdCpcblx0XHRcdFx0XHRcdCogVG8gYXZvaWQgdGhpcywgd2UnbGwgdHJ5IHRvIHBhcnNlIHRoZSBVUkwgZnJvbSBgcmVxLnVybGAsIGJ1dFxuXHRcdFx0XHRcdFx0KiBhbHNvIHVzZSB0aGUgYGhvc3RgIGhlYWRlciBpZiBpdCdzIGF2YWlsYWJsZS5cblx0XHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0XHRjb25zdCBob3N0JDEgPSBvcHRpb25zLnNlcnZlSG9zdCB8fCBnZXRIZWFkZXIoXCJob3N0XCIpO1xuXHRcdFx0XHRcdFx0aWYgKGhvc3QkMSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBob3N0V2l0aFByb3RvY29sID0gbmV3IFVSTChob3N0JDEuaW5jbHVkZXMoXCI6Ly9cIikgPyBob3N0JDEgOiBgJHthYnNvbHV0ZVVybC5wcm90b2NvbH0vLyR7aG9zdCQxfWApO1xuXHRcdFx0XHRcdFx0XHRhYnNvbHV0ZVVybC5wcm90b2NvbCA9IGhvc3RXaXRoUHJvdG9jb2wucHJvdG9jb2w7XG5cdFx0XHRcdFx0XHRcdGFic29sdXRlVXJsLmhvc3QgPSBob3N0V2l0aFByb3RvY29sLmhvc3Q7XG5cdFx0XHRcdFx0XHRcdGFic29sdXRlVXJsLnBvcnQgPSBob3N0V2l0aFByb3RvY29sLnBvcnQ7XG5cdFx0XHRcdFx0XHRcdGFic29sdXRlVXJsLnVzZXJuYW1lID0gaG9zdFdpdGhQcm90b2NvbC51c2VybmFtZTtcblx0XHRcdFx0XHRcdFx0YWJzb2x1dGVVcmwucGFzc3dvcmQgPSBob3N0V2l0aFByb3RvY29sLnBhc3N3b3JkO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIGFic29sdXRlVXJsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsZXQgc2NoZW1lID0gXCJodHRwc1wiO1xuXHRcdFx0XHRcdGNvbnN0IGhvc3QgPSBvcHRpb25zLnNlcnZlSG9zdCB8fCBnZXRIZWFkZXIoXCJob3N0XCIpIHx8IFwiXCI7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSBzY2hlbWUgPSBcImh0dHBcIjtcblx0XHRcdFx0XHR9IGNhdGNoIChfZXJyKSB7fVxuXHRcdFx0XHRcdHJldHVybiBuZXcgVVJMKHJlcS51cmwsIGAke3NjaGVtZX06Ly8ke2hvc3R9YCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRyYW5zZm9ybVJlc3BvbnNlOiAoeyBib2R5LCBoZWFkZXJzLCBzdGF0dXMgfSkgPT4ge1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCogQ2FyZWZ1bGx5IGF0dGVtcHQgdG8gc2V0IGhlYWRlcnMgYW5kIGRhdGEgb24gdGhlIHJlc3BvbnNlIG9iamVjdFxuXHRcdFx0XHRcdCogZm9yIE5leHQuanMgMTIgc3VwcG9ydC5cblx0XHRcdFx0XHQqXG5cdFx0XHRcdFx0KiBUaGlzIGFsc28gYXNzdW1lcyB0aGF0IHdlJ3JlIG5vdCB1c2luZyBOZXh0LmpzIDE1LCB3aGVyZSB0aGUgYHJlc2Bcblx0XHRcdFx0XHQqIG9iamVjdCBpcyByZXBvcHVsYXRlZCBhcyBhIGBSb3V0ZUNvbnRleHRgIG9iamVjdC4gV2UgZXhwZWN0IHRoZXNlXG5cdFx0XHRcdFx0KiBtZXRob2RzIHRvIE5PVCBiZSBkZWZpbmVkIGluIE5leHQuanMgMTUuXG5cdFx0XHRcdFx0KlxuXHRcdFx0XHRcdCogV2UgY291bGQgbGlrZWx5IHVzZSBgaW5zdGFuY2VvZiBTZXJ2ZXJSZXNwb25zZWAgdG8gYmV0dGVyIGNoZWNrIHRoZVxuXHRcdFx0XHRcdCogdHlwZSBvZiB0aGlzLCB0aG91Z2ggTmV4dC5qcyAxMiBoYWQgaXNzdWVzIHdpdGggdGhpcyBkdWUgdG8gbm90XG5cdFx0XHRcdFx0KiBpbnN0YW50aWF0aW5nIHRoZSByZXNwb25zZSBjb3JyZWN0bHkuXG5cdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRpZiAoaXNOZXh0MTJBcGlSZXNwb25zZShyZXMpKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSkgcmVzLnNldEhlYWRlcihrZXksIHZhbHVlKTtcblx0XHRcdFx0XHRcdHJlcy5zdGF0dXMoc3RhdHVzKTtcblx0XHRcdFx0XHRcdHJlcy5zZW5kKGJvZHkpO1xuXHRcdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0XHQqIElmIHdlJ3JlIGhlcmUsIHdlJ3JlIGluIGEgc2VydmVybGVzcyBlbmRwb2ludCAobm90IGVkZ2UpLCBzb1xuXHRcdFx0XHRcdFx0KiB3ZSd2ZSBjb3JyZWN0bHkgc2VudCB0aGUgcmVzcG9uc2UgYW5kIGNhbiByZXR1cm4gYHVuZGVmaW5lZGAuXG5cdFx0XHRcdFx0XHQqXG5cdFx0XHRcdFx0XHQqIE5leHQuanMgMTMgZWRnZSByZXF1aXJlcyB0aGF0IHRoZSByZXR1cm4gdmFsdWUgaXMgdHlwZWQgYXNcblx0XHRcdFx0XHRcdCogYFJlc3BvbnNlYCwgc28gd2Ugc3RpbGwgZW5mb3JjZSB0aGF0IGFzIHdlIGNhbm5vdCBkeW5hbWljYWxseVxuXHRcdFx0XHRcdFx0KiBhZGp1c3QgdHlwaW5nIGJhc2VkIG9uIHRoZSBlbnZpcm9ubWVudC5cblx0XHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBuZXcgKGdldFJlc3BvbnNlKCkpKGJvZHksIHtcblx0XHRcdFx0XHRcdHN0YXR1cyxcblx0XHRcdFx0XHRcdGhlYWRlcnNcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dHJhbnNmb3JtU3RyZWFtaW5nUmVzcG9uc2U6ICh7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9KSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBSZXNwb25zZShib2R5LCB7XG5cdFx0XHRcdFx0XHRzdGF0dXMsXG5cdFx0XHRcdFx0XHRoZWFkZXJzXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9KS5jcmVhdGVIYW5kbGVyKCk7XG5cdGNvbnN0IGZuID0gYmFzZUZuLmJpbmQobnVsbCwgdm9pZCAwKTtcblx0LyoqXG5cdCogRW5zdXJlIHdlIGhhdmUgYSBub24tdmFyaWFkaWMgbGVuZ3RoIHRvIGF2b2lkIGlzc3VlcyB3aXRoIGZvcmNlZCB0eXBlXG5cdCogY2hlY2tpbmcuXG5cdCovXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgXCJsZW5ndGhcIiwgeyB2YWx1ZTogMSB9KTtcblx0cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGZuLCB7XG5cdFx0R0VUOiB7IHZhbHVlOiBiYXNlRm4uYmluZChudWxsLCBcIkdFVFwiKSB9LFxuXHRcdFBPU1Q6IHsgdmFsdWU6IGJhc2VGbi5iaW5kKG51bGwsIFwiUE9TVFwiKSB9LFxuXHRcdFBVVDogeyB2YWx1ZTogYmFzZUZuLmJpbmQobnVsbCwgXCJQVVRcIikgfVxuXHR9KTtcbn07XG5hc3luYyBmdW5jdGlvbiBzdHJlYW1Ub0pTT04oc3RyZWFtKSB7XG5cdGNvbnN0IGNodW5rcyA9IFtdO1xuXHRjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG5cdHdoaWxlICh0cnVlKSB7XG5cdFx0Y29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcblx0XHRpZiAoZG9uZSkgYnJlYWs7XG5cdFx0Y2h1bmtzLnB1c2godmFsdWUpO1xuXHR9XG5cdHJldHVybiBKU09OLnBhcnNlKEJ1ZmZlci5jb25jYXQoY2h1bmtzKS50b1N0cmluZyhcInV0ZjhcIikpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGZyYW1ld29ya05hbWUsIHNlcnZlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXh0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/next.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/types.js":
/*!***************************************!*\
  !*** ./node_modules/inngest/types.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncResponseType: () => (/* binding */ AsyncResponseType),\n/* harmony export */   StepMode: () => (/* binding */ StepMode),\n/* harmony export */   StepOpCode: () => (/* binding */ StepOpCode),\n/* harmony export */   err: () => (/* binding */ err),\n/* harmony export */   functionConfigSchema: () => (/* binding */ functionConfigSchema),\n/* harmony export */   inBandSyncRequestBodySchema: () => (/* binding */ inBandSyncRequestBodySchema),\n/* harmony export */   incomingOpSchema: () => (/* binding */ incomingOpSchema),\n/* harmony export */   jsonErrorSchema: () => (/* binding */ jsonErrorSchema),\n/* harmony export */   logLevels: () => (/* binding */ logLevels),\n/* harmony export */   ok: () => (/* binding */ ok),\n/* harmony export */   sendEventResponseSchema: () => (/* binding */ sendEventResponseSchema),\n/* harmony export */   types_exports: () => (/* binding */ types_exports)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/rolldown_runtime.js */ \"(rsc)/./node_modules/inngest/_virtual/rolldown_runtime.js\");\n/* harmony import */ var zod_v3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod/v3 */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\n//#region src/types.ts\n/**\n* Internal types and schemas used throughout the Inngest SDK.\n*\n* Note that types intended to be imported and utilized in userland code will be\n* exported from the main entrypoint of the SDK, `inngest`; importing types\n* directly from this file may result in breaking changes in non-major bumps as\n* only those exported from `inngest` are considered stable.\n*\n* @module\n*/\nvar types_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_js__WEBPACK_IMPORTED_MODULE_0__.__export)({\n\tAsyncResponseType: () => AsyncResponseType,\n\tStepMode: () => StepMode,\n\tStepOpCode: () => StepOpCode,\n\terr: () => err,\n\tfunctionConfigSchema: () => functionConfigSchema,\n\tinBandSyncRequestBodySchema: () => inBandSyncRequestBodySchema,\n\tincomingOpSchema: () => incomingOpSchema,\n\tjsonErrorSchema: () => jsonErrorSchema,\n\tlogLevels: () => logLevels,\n\tok: () => ok,\n\tsendEventResponseSchema: () => sendEventResponseSchema\n});\nconst baseJsonErrorSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\tmessage: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional()\n});\nconst maybeJsonErrorSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.lazy(() => zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim(),\n\tmessage: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim(),\n\tstack: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().trim().optional(),\n\tcause: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([maybeJsonErrorSchema, zod_v3__WEBPACK_IMPORTED_MODULE_1__.unknown()]).optional()\n}));\nconst jsonErrorSchema = baseJsonErrorSchema.extend({ cause: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([maybeJsonErrorSchema, zod_v3__WEBPACK_IMPORTED_MODULE_1__.unknown()]).optional() }).passthrough().catch({}).transform((val) => {\n\treturn {\n\t\t...val,\n\t\tname: val.name || \"Error\",\n\t\tmessage: val.message || val.error || \"Unknown error\",\n\t\tstack: val.stack\n\t};\n});\n/**\n* Unique codes for the different types of operation that can be sent to Inngest\n* from SDK step functions.\n*/\nlet StepOpCode = /* @__PURE__ */ function(StepOpCode$1) {\n\tStepOpCode$1[\"WaitForSignal\"] = \"WaitForSignal\";\n\tStepOpCode$1[\"WaitForEvent\"] = \"WaitForEvent\";\n\t/**\n\t* Legacy equivalent to `\"StepRun\"`. Has mixed data wrapping (e.g. `data` or\n\t* `data.data` depending on SDK version), so this is phased out in favour of\n\t* `\"StepRun\"`, which never wraps.\n\t*\n\t* Note that it is still used for v0 executions for backwards compatibility.\n\t*\n\t* @deprecated Only used for v0 executions; use `\"StepRun\"` instead.\n\t*/\n\tStepOpCode$1[\"Step\"] = \"Step\";\n\tStepOpCode$1[\"StepRun\"] = \"StepRun\";\n\tStepOpCode$1[\"StepError\"] = \"StepError\";\n\tStepOpCode$1[\"StepFailed\"] = \"StepFailed\";\n\tStepOpCode$1[\"StepPlanned\"] = \"StepPlanned\";\n\tStepOpCode$1[\"Sleep\"] = \"Sleep\";\n\t/**\n\t* Used to signify that the executor has requested that a step run, but we\n\t* could not find that step.\n\t*\n\t* This is likely indicative that a step was renamed or removed from the\n\t* function.\n\t*/\n\tStepOpCode$1[\"StepNotFound\"] = \"StepNotFound\";\n\tStepOpCode$1[\"InvokeFunction\"] = \"InvokeFunction\";\n\tStepOpCode$1[\"AiGateway\"] = \"AIGateway\";\n\tStepOpCode$1[\"Gateway\"] = \"Gateway\";\n\tStepOpCode$1[\"RunComplete\"] = \"RunComplete\";\n\tStepOpCode$1[\"DiscoveryRequest\"] = \"DiscoveryRequest\";\n\treturn StepOpCode$1;\n}({});\n/**\n* StepModes are used to specify how the SDK should execute a function.\n*/\nlet StepMode = /* @__PURE__ */ function(StepMode$1) {\n\t/**\n\t* A synchronous method of execution, where steps are executed immediately and\n\t* their results are \"checkpointed\" back to Inngest in real-time.\n\t*/\n\tStepMode$1[\"Sync\"] = \"sync\";\n\t/**\n\t* The traditional, background method of execution, where all steps are queued\n\t* and executed asynchronously and always triggered by Inngest.\n\t*/\n\tStepMode$1[\"Async\"] = \"async\";\n\t/**\n\t* The traditional, background method of execution, but step results are\n\t* checkpointed when they can be to reduce latency and the number of requests\n\t* being sent back and forth between Inngest and the SDK.\n\t*/\n\tStepMode$1[\"AsyncCheckpointing\"] = \"async_checkpointing\";\n\treturn StepMode$1;\n}({});\n/**\n* The type of response you wish to return to an API endpoint when using steps\n* within it and we must transition to {@link StepMode.Async}.\n*\n* In most cases, this defaults to {@link AsyncResponseType.Redirect}.\n*/\nlet AsyncResponseType = /* @__PURE__ */ function(AsyncResponseType$1) {\n\t/**\n\t* When switching to {@link StepMode.Async}, respond with a 302 redirect which\n\t* will end the request once the run has completed asynchronously in the\n\t* background.\n\t*/\n\tAsyncResponseType$1[\"Redirect\"] = \"redirect\";\n\t/**\n\t* When switching to {@link StepMode.Async}, respond with a token and run ID\n\t* which can be used to poll for the status of the run.\n\t*/\n\tAsyncResponseType$1[\"Token\"] = \"token\";\n\treturn AsyncResponseType$1;\n\t/**\n\t* TODO Comment\n\t*/\n}({});\nconst incomingOpSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().min(1),\n\tdata: zod_v3__WEBPACK_IMPORTED_MODULE_1__.any().optional(),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_1__.any().optional(),\n\tinput: zod_v3__WEBPACK_IMPORTED_MODULE_1__.any().optional()\n});\nconst sendEventResponseSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.object({\n\tids: zod_v3__WEBPACK_IMPORTED_MODULE_1__.array(zod_v3__WEBPACK_IMPORTED_MODULE_1__.string()).default([]),\n\tstatus: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number().default(0),\n\terror: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n});\n/**\n* A set of log levels that can be used to control the amount of logging output\n* from various parts of the Inngest library.\n*\n* @public\n*/\nconst logLevels = [\n\t\"fatal\",\n\t\"error\",\n\t\"warn\",\n\t\"info\",\n\t\"debug\",\n\t\"silent\"\n];\n/**\n* This schema is used internally to share the shape of a concurrency option\n* when validating config. We cannot add comments to Zod fields, so we just use\n* an extra type check to ensure it matches our exported expectations.\n*/\nconst concurrencyOptionSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\tlimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\tscope: zod_v3__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n\t\t\"fn\",\n\t\t\"env\",\n\t\t\"account\"\n\t]).optional()\n});\n/**\n* The schema used to represent an individual function being synced with\n* Inngest.\n*\n* Note that this should only be used to validate the shape of a config object\n* and not used for feature compatibility, such as feature X being exclusive\n* with feature Y; these should be handled on the Inngest side.\n*/\nconst functionConfigSchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\tid: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\ttriggers: zod_v3__WEBPACK_IMPORTED_MODULE_1__.array(zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\texpression: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n\t}), zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ cron: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string() })])),\n\tsteps: zod_v3__WEBPACK_IMPORTED_MODULE_1__.record(zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tid: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\tname: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\truntime: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\t\ttype: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([zod_v3__WEBPACK_IMPORTED_MODULE_1__.literal(\"http\"), zod_v3__WEBPACK_IMPORTED_MODULE_1__.literal(\"ws\")]),\n\t\t\turl: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string()\n\t\t}),\n\t\tretries: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ attempts: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number().optional() }).optional()\n\t})),\n\tidempotency: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\tbatchEvents: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tmaxSize: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\ttimeout: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tif: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n\t}).optional(),\n\trateLimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tlimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\tperiod: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x)\n\t}).optional(),\n\tthrottle: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tlimit: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\tperiod: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x),\n\t\tburst: zod_v3__WEBPACK_IMPORTED_MODULE_1__.number().optional()\n\t}).optional(),\n\tsingleton: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tmode: zod_v3__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\"skip\", \"cancel\"])\n\t}).optional(),\n\tcancel: zod_v3__WEBPACK_IMPORTED_MODULE_1__.array(zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tevent: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string(),\n\t\tif: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\ttimeout: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n\t})).optional(),\n\tdebounce: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tkey: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n\t\tperiod: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x),\n\t\ttimeout: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x).optional()\n\t}).optional(),\n\ttimeouts: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({\n\t\tstart: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x).optional(),\n\t\tfinish: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().transform((x) => x).optional()\n\t}).optional(),\n\tpriority: zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ run: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string().optional() }).optional(),\n\tconcurrency: zod_v3__WEBPACK_IMPORTED_MODULE_1__.union([\n\t\tzod_v3__WEBPACK_IMPORTED_MODULE_1__.number(),\n\t\tconcurrencyOptionSchema.transform((x) => x),\n\t\tzod_v3__WEBPACK_IMPORTED_MODULE_1__.array(concurrencyOptionSchema.transform((x) => x)).min(1).max(2)\n\t]).optional()\n});\nconst ok = (data) => {\n\treturn {\n\t\tok: true,\n\t\tvalue: data\n\t};\n};\nconst err = (error) => {\n\treturn {\n\t\tok: false,\n\t\terror\n\t};\n};\nconst inBandSyncRequestBodySchema = zod_v3__WEBPACK_IMPORTED_MODULE_1__.strictObject({ url: zod_v3__WEBPACK_IMPORTED_MODULE_1__.string() });\n\n//#endregion\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUEwRDtBQUMvQjs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHNFQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLDBDQUFRO0FBQ3BDLE9BQU8sMENBQVE7QUFDZixRQUFRLDBDQUFRO0FBQ2hCLFVBQVUsMENBQVE7QUFDbEIsUUFBUSwwQ0FBUTtBQUNoQixDQUFDO0FBQ0QsNkJBQTZCLHdDQUFNLE9BQU8sMENBQVE7QUFDbEQsT0FBTywwQ0FBUTtBQUNmLFVBQVUsMENBQVE7QUFDbEIsUUFBUSwwQ0FBUTtBQUNoQixRQUFRLHlDQUFPLHdCQUF3QiwyQ0FBUztBQUNoRCxDQUFDO0FBQ0QscURBQXFELE9BQU8seUNBQU8sd0JBQXdCLDJDQUFTLGlCQUFpQix3QkFBd0I7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBLHVDQUF1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eXBlcy5qcz8wZDFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0IH0gZnJvbSBcIi4vX3ZpcnR1YWwvcm9sbGRvd25fcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjNcIjtcblxuLy8jcmVnaW9uIHNyYy90eXBlcy50c1xuLyoqXG4qIEludGVybmFsIHR5cGVzIGFuZCBzY2hlbWFzIHVzZWQgdGhyb3VnaG91dCB0aGUgSW5uZ2VzdCBTREsuXG4qXG4qIE5vdGUgdGhhdCB0eXBlcyBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBhbmQgdXRpbGl6ZWQgaW4gdXNlcmxhbmQgY29kZSB3aWxsIGJlXG4qIGV4cG9ydGVkIGZyb20gdGhlIG1haW4gZW50cnlwb2ludCBvZiB0aGUgU0RLLCBgaW5uZ2VzdGA7IGltcG9ydGluZyB0eXBlc1xuKiBkaXJlY3RseSBmcm9tIHRoaXMgZmlsZSBtYXkgcmVzdWx0IGluIGJyZWFraW5nIGNoYW5nZXMgaW4gbm9uLW1ham9yIGJ1bXBzIGFzXG4qIG9ubHkgdGhvc2UgZXhwb3J0ZWQgZnJvbSBgaW5uZ2VzdGAgYXJlIGNvbnNpZGVyZWQgc3RhYmxlLlxuKlxuKiBAbW9kdWxlXG4qL1xudmFyIHR5cGVzX2V4cG9ydHMgPSAvKiBAX19QVVJFX18gKi8gX19leHBvcnQoe1xuXHRBc3luY1Jlc3BvbnNlVHlwZTogKCkgPT4gQXN5bmNSZXNwb25zZVR5cGUsXG5cdFN0ZXBNb2RlOiAoKSA9PiBTdGVwTW9kZSxcblx0U3RlcE9wQ29kZTogKCkgPT4gU3RlcE9wQ29kZSxcblx0ZXJyOiAoKSA9PiBlcnIsXG5cdGZ1bmN0aW9uQ29uZmlnU2NoZW1hOiAoKSA9PiBmdW5jdGlvbkNvbmZpZ1NjaGVtYSxcblx0aW5CYW5kU3luY1JlcXVlc3RCb2R5U2NoZW1hOiAoKSA9PiBpbkJhbmRTeW5jUmVxdWVzdEJvZHlTY2hlbWEsXG5cdGluY29taW5nT3BTY2hlbWE6ICgpID0+IGluY29taW5nT3BTY2hlbWEsXG5cdGpzb25FcnJvclNjaGVtYTogKCkgPT4ganNvbkVycm9yU2NoZW1hLFxuXHRsb2dMZXZlbHM6ICgpID0+IGxvZ0xldmVscyxcblx0b2s6ICgpID0+IG9rLFxuXHRzZW5kRXZlbnRSZXNwb25zZVNjaGVtYTogKCkgPT4gc2VuZEV2ZW50UmVzcG9uc2VTY2hlbWFcbn0pO1xuY29uc3QgYmFzZUpzb25FcnJvclNjaGVtYSA9IHoub2JqZWN0KHtcblx0bmFtZTogei5zdHJpbmcoKS50cmltKCkub3B0aW9uYWwoKSxcblx0ZXJyb3I6IHouc3RyaW5nKCkudHJpbSgpLm9wdGlvbmFsKCksXG5cdG1lc3NhZ2U6IHouc3RyaW5nKCkudHJpbSgpLm9wdGlvbmFsKCksXG5cdHN0YWNrOiB6LnN0cmluZygpLnRyaW0oKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IG1heWJlSnNvbkVycm9yU2NoZW1hID0gei5sYXp5KCgpID0+IHoub2JqZWN0KHtcblx0bmFtZTogei5zdHJpbmcoKS50cmltKCksXG5cdG1lc3NhZ2U6IHouc3RyaW5nKCkudHJpbSgpLFxuXHRzdGFjazogei5zdHJpbmcoKS50cmltKCkub3B0aW9uYWwoKSxcblx0Y2F1c2U6IHoudW5pb24oW21heWJlSnNvbkVycm9yU2NoZW1hLCB6LnVua25vd24oKV0pLm9wdGlvbmFsKClcbn0pKTtcbmNvbnN0IGpzb25FcnJvclNjaGVtYSA9IGJhc2VKc29uRXJyb3JTY2hlbWEuZXh0ZW5kKHsgY2F1c2U6IHoudW5pb24oW21heWJlSnNvbkVycm9yU2NoZW1hLCB6LnVua25vd24oKV0pLm9wdGlvbmFsKCkgfSkucGFzc3Rocm91Z2goKS5jYXRjaCh7fSkudHJhbnNmb3JtKCh2YWwpID0+IHtcblx0cmV0dXJuIHtcblx0XHQuLi52YWwsXG5cdFx0bmFtZTogdmFsLm5hbWUgfHwgXCJFcnJvclwiLFxuXHRcdG1lc3NhZ2U6IHZhbC5tZXNzYWdlIHx8IHZhbC5lcnJvciB8fCBcIlVua25vd24gZXJyb3JcIixcblx0XHRzdGFjazogdmFsLnN0YWNrXG5cdH07XG59KTtcbi8qKlxuKiBVbmlxdWUgY29kZXMgZm9yIHRoZSBkaWZmZXJlbnQgdHlwZXMgb2Ygb3BlcmF0aW9uIHRoYXQgY2FuIGJlIHNlbnQgdG8gSW5uZ2VzdFxuKiBmcm9tIFNESyBzdGVwIGZ1bmN0aW9ucy5cbiovXG5sZXQgU3RlcE9wQ29kZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihTdGVwT3BDb2RlJDEpIHtcblx0U3RlcE9wQ29kZSQxW1wiV2FpdEZvclNpZ25hbFwiXSA9IFwiV2FpdEZvclNpZ25hbFwiO1xuXHRTdGVwT3BDb2RlJDFbXCJXYWl0Rm9yRXZlbnRcIl0gPSBcIldhaXRGb3JFdmVudFwiO1xuXHQvKipcblx0KiBMZWdhY3kgZXF1aXZhbGVudCB0byBgXCJTdGVwUnVuXCJgLiBIYXMgbWl4ZWQgZGF0YSB3cmFwcGluZyAoZS5nLiBgZGF0YWAgb3Jcblx0KiBgZGF0YS5kYXRhYCBkZXBlbmRpbmcgb24gU0RLIHZlcnNpb24pLCBzbyB0aGlzIGlzIHBoYXNlZCBvdXQgaW4gZmF2b3VyIG9mXG5cdCogYFwiU3RlcFJ1blwiYCwgd2hpY2ggbmV2ZXIgd3JhcHMuXG5cdCpcblx0KiBOb3RlIHRoYXQgaXQgaXMgc3RpbGwgdXNlZCBmb3IgdjAgZXhlY3V0aW9ucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5cdCpcblx0KiBAZGVwcmVjYXRlZCBPbmx5IHVzZWQgZm9yIHYwIGV4ZWN1dGlvbnM7IHVzZSBgXCJTdGVwUnVuXCJgIGluc3RlYWQuXG5cdCovXG5cdFN0ZXBPcENvZGUkMVtcIlN0ZXBcIl0gPSBcIlN0ZXBcIjtcblx0U3RlcE9wQ29kZSQxW1wiU3RlcFJ1blwiXSA9IFwiU3RlcFJ1blwiO1xuXHRTdGVwT3BDb2RlJDFbXCJTdGVwRXJyb3JcIl0gPSBcIlN0ZXBFcnJvclwiO1xuXHRTdGVwT3BDb2RlJDFbXCJTdGVwRmFpbGVkXCJdID0gXCJTdGVwRmFpbGVkXCI7XG5cdFN0ZXBPcENvZGUkMVtcIlN0ZXBQbGFubmVkXCJdID0gXCJTdGVwUGxhbm5lZFwiO1xuXHRTdGVwT3BDb2RlJDFbXCJTbGVlcFwiXSA9IFwiU2xlZXBcIjtcblx0LyoqXG5cdCogVXNlZCB0byBzaWduaWZ5IHRoYXQgdGhlIGV4ZWN1dG9yIGhhcyByZXF1ZXN0ZWQgdGhhdCBhIHN0ZXAgcnVuLCBidXQgd2Vcblx0KiBjb3VsZCBub3QgZmluZCB0aGF0IHN0ZXAuXG5cdCpcblx0KiBUaGlzIGlzIGxpa2VseSBpbmRpY2F0aXZlIHRoYXQgYSBzdGVwIHdhcyByZW5hbWVkIG9yIHJlbW92ZWQgZnJvbSB0aGVcblx0KiBmdW5jdGlvbi5cblx0Ki9cblx0U3RlcE9wQ29kZSQxW1wiU3RlcE5vdEZvdW5kXCJdID0gXCJTdGVwTm90Rm91bmRcIjtcblx0U3RlcE9wQ29kZSQxW1wiSW52b2tlRnVuY3Rpb25cIl0gPSBcIkludm9rZUZ1bmN0aW9uXCI7XG5cdFN0ZXBPcENvZGUkMVtcIkFpR2F0ZXdheVwiXSA9IFwiQUlHYXRld2F5XCI7XG5cdFN0ZXBPcENvZGUkMVtcIkdhdGV3YXlcIl0gPSBcIkdhdGV3YXlcIjtcblx0U3RlcE9wQ29kZSQxW1wiUnVuQ29tcGxldGVcIl0gPSBcIlJ1bkNvbXBsZXRlXCI7XG5cdFN0ZXBPcENvZGUkMVtcIkRpc2NvdmVyeVJlcXVlc3RcIl0gPSBcIkRpc2NvdmVyeVJlcXVlc3RcIjtcblx0cmV0dXJuIFN0ZXBPcENvZGUkMTtcbn0oe30pO1xuLyoqXG4qIFN0ZXBNb2RlcyBhcmUgdXNlZCB0byBzcGVjaWZ5IGhvdyB0aGUgU0RLIHNob3VsZCBleGVjdXRlIGEgZnVuY3Rpb24uXG4qL1xubGV0IFN0ZXBNb2RlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKFN0ZXBNb2RlJDEpIHtcblx0LyoqXG5cdCogQSBzeW5jaHJvbm91cyBtZXRob2Qgb2YgZXhlY3V0aW9uLCB3aGVyZSBzdGVwcyBhcmUgZXhlY3V0ZWQgaW1tZWRpYXRlbHkgYW5kXG5cdCogdGhlaXIgcmVzdWx0cyBhcmUgXCJjaGVja3BvaW50ZWRcIiBiYWNrIHRvIElubmdlc3QgaW4gcmVhbC10aW1lLlxuXHQqL1xuXHRTdGVwTW9kZSQxW1wiU3luY1wiXSA9IFwic3luY1wiO1xuXHQvKipcblx0KiBUaGUgdHJhZGl0aW9uYWwsIGJhY2tncm91bmQgbWV0aG9kIG9mIGV4ZWN1dGlvbiwgd2hlcmUgYWxsIHN0ZXBzIGFyZSBxdWV1ZWRcblx0KiBhbmQgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgYW5kIGFsd2F5cyB0cmlnZ2VyZWQgYnkgSW5uZ2VzdC5cblx0Ki9cblx0U3RlcE1vZGUkMVtcIkFzeW5jXCJdID0gXCJhc3luY1wiO1xuXHQvKipcblx0KiBUaGUgdHJhZGl0aW9uYWwsIGJhY2tncm91bmQgbWV0aG9kIG9mIGV4ZWN1dGlvbiwgYnV0IHN0ZXAgcmVzdWx0cyBhcmVcblx0KiBjaGVja3BvaW50ZWQgd2hlbiB0aGV5IGNhbiBiZSB0byByZWR1Y2UgbGF0ZW5jeSBhbmQgdGhlIG51bWJlciBvZiByZXF1ZXN0c1xuXHQqIGJlaW5nIHNlbnQgYmFjayBhbmQgZm9ydGggYmV0d2VlbiBJbm5nZXN0IGFuZCB0aGUgU0RLLlxuXHQqL1xuXHRTdGVwTW9kZSQxW1wiQXN5bmNDaGVja3BvaW50aW5nXCJdID0gXCJhc3luY19jaGVja3BvaW50aW5nXCI7XG5cdHJldHVybiBTdGVwTW9kZSQxO1xufSh7fSk7XG4vKipcbiogVGhlIHR5cGUgb2YgcmVzcG9uc2UgeW91IHdpc2ggdG8gcmV0dXJuIHRvIGFuIEFQSSBlbmRwb2ludCB3aGVuIHVzaW5nIHN0ZXBzXG4qIHdpdGhpbiBpdCBhbmQgd2UgbXVzdCB0cmFuc2l0aW9uIHRvIHtAbGluayBTdGVwTW9kZS5Bc3luY30uXG4qXG4qIEluIG1vc3QgY2FzZXMsIHRoaXMgZGVmYXVsdHMgdG8ge0BsaW5rIEFzeW5jUmVzcG9uc2VUeXBlLlJlZGlyZWN0fS5cbiovXG5sZXQgQXN5bmNSZXNwb25zZVR5cGUgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oQXN5bmNSZXNwb25zZVR5cGUkMSkge1xuXHQvKipcblx0KiBXaGVuIHN3aXRjaGluZyB0byB7QGxpbmsgU3RlcE1vZGUuQXN5bmN9LCByZXNwb25kIHdpdGggYSAzMDIgcmVkaXJlY3Qgd2hpY2hcblx0KiB3aWxsIGVuZCB0aGUgcmVxdWVzdCBvbmNlIHRoZSBydW4gaGFzIGNvbXBsZXRlZCBhc3luY2hyb25vdXNseSBpbiB0aGVcblx0KiBiYWNrZ3JvdW5kLlxuXHQqL1xuXHRBc3luY1Jlc3BvbnNlVHlwZSQxW1wiUmVkaXJlY3RcIl0gPSBcInJlZGlyZWN0XCI7XG5cdC8qKlxuXHQqIFdoZW4gc3dpdGNoaW5nIHRvIHtAbGluayBTdGVwTW9kZS5Bc3luY30sIHJlc3BvbmQgd2l0aCBhIHRva2VuIGFuZCBydW4gSURcblx0KiB3aGljaCBjYW4gYmUgdXNlZCB0byBwb2xsIGZvciB0aGUgc3RhdHVzIG9mIHRoZSBydW4uXG5cdCovXG5cdEFzeW5jUmVzcG9uc2VUeXBlJDFbXCJUb2tlblwiXSA9IFwidG9rZW5cIjtcblx0cmV0dXJuIEFzeW5jUmVzcG9uc2VUeXBlJDE7XG5cdC8qKlxuXHQqIFRPRE8gQ29tbWVudFxuXHQqL1xufSh7fSk7XG5jb25zdCBpbmNvbWluZ09wU2NoZW1hID0gei5vYmplY3Qoe1xuXHRpZDogei5zdHJpbmcoKS5taW4oMSksXG5cdGRhdGE6IHouYW55KCkub3B0aW9uYWwoKSxcblx0ZXJyb3I6IHouYW55KCkub3B0aW9uYWwoKSxcblx0aW5wdXQ6IHouYW55KCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBzZW5kRXZlbnRSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcblx0aWRzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoW10pLFxuXHRzdGF0dXM6IHoubnVtYmVyKCkuZGVmYXVsdCgwKSxcblx0ZXJyb3I6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG4vKipcbiogQSBzZXQgb2YgbG9nIGxldmVscyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbnRyb2wgdGhlIGFtb3VudCBvZiBsb2dnaW5nIG91dHB1dFxuKiBmcm9tIHZhcmlvdXMgcGFydHMgb2YgdGhlIElubmdlc3QgbGlicmFyeS5cbipcbiogQHB1YmxpY1xuKi9cbmNvbnN0IGxvZ0xldmVscyA9IFtcblx0XCJmYXRhbFwiLFxuXHRcImVycm9yXCIsXG5cdFwid2FyblwiLFxuXHRcImluZm9cIixcblx0XCJkZWJ1Z1wiLFxuXHRcInNpbGVudFwiXG5dO1xuLyoqXG4qIFRoaXMgc2NoZW1hIGlzIHVzZWQgaW50ZXJuYWxseSB0byBzaGFyZSB0aGUgc2hhcGUgb2YgYSBjb25jdXJyZW5jeSBvcHRpb25cbiogd2hlbiB2YWxpZGF0aW5nIGNvbmZpZy4gV2UgY2Fubm90IGFkZCBjb21tZW50cyB0byBab2QgZmllbGRzLCBzbyB3ZSBqdXN0IHVzZVxuKiBhbiBleHRyYSB0eXBlIGNoZWNrIHRvIGVuc3VyZSBpdCBtYXRjaGVzIG91ciBleHBvcnRlZCBleHBlY3RhdGlvbnMuXG4qL1xuY29uc3QgY29uY3VycmVuY3lPcHRpb25TY2hlbWEgPSB6LnN0cmljdE9iamVjdCh7XG5cdGxpbWl0OiB6Lm51bWJlcigpLFxuXHRrZXk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0c2NvcGU6IHouZW51bShbXG5cdFx0XCJmblwiLFxuXHRcdFwiZW52XCIsXG5cdFx0XCJhY2NvdW50XCJcblx0XSkub3B0aW9uYWwoKVxufSk7XG4vKipcbiogVGhlIHNjaGVtYSB1c2VkIHRvIHJlcHJlc2VudCBhbiBpbmRpdmlkdWFsIGZ1bmN0aW9uIGJlaW5nIHN5bmNlZCB3aXRoXG4qIElubmdlc3QuXG4qXG4qIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgdG8gdmFsaWRhdGUgdGhlIHNoYXBlIG9mIGEgY29uZmlnIG9iamVjdFxuKiBhbmQgbm90IHVzZWQgZm9yIGZlYXR1cmUgY29tcGF0aWJpbGl0eSwgc3VjaCBhcyBmZWF0dXJlIFggYmVpbmcgZXhjbHVzaXZlXG4qIHdpdGggZmVhdHVyZSBZOyB0aGVzZSBzaG91bGQgYmUgaGFuZGxlZCBvbiB0aGUgSW5uZ2VzdCBzaWRlLlxuKi9cbmNvbnN0IGZ1bmN0aW9uQ29uZmlnU2NoZW1hID0gei5zdHJpY3RPYmplY3Qoe1xuXHRuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGlkOiB6LnN0cmluZygpLFxuXHR0cmlnZ2Vyczogei5hcnJheSh6LnVuaW9uKFt6LnN0cmljdE9iamVjdCh7XG5cdFx0ZXZlbnQ6IHouc3RyaW5nKCksXG5cdFx0ZXhwcmVzc2lvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pLCB6LnN0cmljdE9iamVjdCh7IGNyb246IHouc3RyaW5nKCkgfSldKSksXG5cdHN0ZXBzOiB6LnJlY29yZCh6LnN0cmljdE9iamVjdCh7XG5cdFx0aWQ6IHouc3RyaW5nKCksXG5cdFx0bmFtZTogei5zdHJpbmcoKSxcblx0XHRydW50aW1lOiB6LnN0cmljdE9iamVjdCh7XG5cdFx0XHR0eXBlOiB6LnVuaW9uKFt6LmxpdGVyYWwoXCJodHRwXCIpLCB6LmxpdGVyYWwoXCJ3c1wiKV0pLFxuXHRcdFx0dXJsOiB6LnN0cmluZygpXG5cdFx0fSksXG5cdFx0cmV0cmllczogei5zdHJpY3RPYmplY3QoeyBhdHRlbXB0czogei5udW1iZXIoKS5vcHRpb25hbCgpIH0pLm9wdGlvbmFsKClcblx0fSkpLFxuXHRpZGVtcG90ZW5jeTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRiYXRjaEV2ZW50czogei5zdHJpY3RPYmplY3Qoe1xuXHRcdG1heFNpemU6IHoubnVtYmVyKCksXG5cdFx0dGltZW91dDogei5zdHJpbmcoKSxcblx0XHRrZXk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRpZjogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHJhdGVMaW1pdDogei5zdHJpY3RPYmplY3Qoe1xuXHRcdGtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdGxpbWl0OiB6Lm51bWJlcigpLFxuXHRcdHBlcmlvZDogei5zdHJpbmcoKS50cmFuc2Zvcm0oKHgpID0+IHgpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHRocm90dGxlOiB6LnN0cmljdE9iamVjdCh7XG5cdFx0a2V5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0bGltaXQ6IHoubnVtYmVyKCksXG5cdFx0cGVyaW9kOiB6LnN0cmluZygpLnRyYW5zZm9ybSgoeCkgPT4geCksXG5cdFx0YnVyc3Q6IHoubnVtYmVyKCkub3B0aW9uYWwoKVxuXHR9KS5vcHRpb25hbCgpLFxuXHRzaW5nbGV0b246IHouc3RyaWN0T2JqZWN0KHtcblx0XHRrZXk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRtb2RlOiB6LmVudW0oW1wic2tpcFwiLCBcImNhbmNlbFwiXSlcblx0fSkub3B0aW9uYWwoKSxcblx0Y2FuY2VsOiB6LmFycmF5KHouc3RyaWN0T2JqZWN0KHtcblx0XHRldmVudDogei5zdHJpbmcoKSxcblx0XHRpZjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdHRpbWVvdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuXHR9KSkub3B0aW9uYWwoKSxcblx0ZGVib3VuY2U6IHouc3RyaWN0T2JqZWN0KHtcblx0XHRrZXk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRwZXJpb2Q6IHouc3RyaW5nKCkudHJhbnNmb3JtKCh4KSA9PiB4KSxcblx0XHR0aW1lb3V0OiB6LnN0cmluZygpLnRyYW5zZm9ybSgoeCkgPT4geCkub3B0aW9uYWwoKVxuXHR9KS5vcHRpb25hbCgpLFxuXHR0aW1lb3V0czogei5zdHJpY3RPYmplY3Qoe1xuXHRcdHN0YXJ0OiB6LnN0cmluZygpLnRyYW5zZm9ybSgoeCkgPT4geCkub3B0aW9uYWwoKSxcblx0XHRmaW5pc2g6IHouc3RyaW5nKCkudHJhbnNmb3JtKCh4KSA9PiB4KS5vcHRpb25hbCgpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHByaW9yaXR5OiB6LnN0cmljdE9iamVjdCh7IHJ1bjogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pLm9wdGlvbmFsKCksXG5cdGNvbmN1cnJlbmN5OiB6LnVuaW9uKFtcblx0XHR6Lm51bWJlcigpLFxuXHRcdGNvbmN1cnJlbmN5T3B0aW9uU2NoZW1hLnRyYW5zZm9ybSgoeCkgPT4geCksXG5cdFx0ei5hcnJheShjb25jdXJyZW5jeU9wdGlvblNjaGVtYS50cmFuc2Zvcm0oKHgpID0+IHgpKS5taW4oMSkubWF4KDIpXG5cdF0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3Qgb2sgPSAoZGF0YSkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdG9rOiB0cnVlLFxuXHRcdHZhbHVlOiBkYXRhXG5cdH07XG59O1xuY29uc3QgZXJyID0gKGVycm9yKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0b2s6IGZhbHNlLFxuXHRcdGVycm9yXG5cdH07XG59O1xuY29uc3QgaW5CYW5kU3luY1JlcXVlc3RCb2R5U2NoZW1hID0gei5zdHJpY3RPYmplY3QoeyB1cmw6IHouc3RyaW5nKCkgfSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQXN5bmNSZXNwb25zZVR5cGUsIFN0ZXBNb2RlLCBTdGVwT3BDb2RlLCBlcnIsIGZ1bmN0aW9uQ29uZmlnU2NoZW1hLCBpbkJhbmRTeW5jUmVxdWVzdEJvZHlTY2hlbWEsIGluY29taW5nT3BTY2hlbWEsIGpzb25FcnJvclNjaGVtYSwgbG9nTGV2ZWxzLCBvaywgc2VuZEV2ZW50UmVzcG9uc2VTY2hlbWEsIHR5cGVzX2V4cG9ydHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/inngest/version.js":
/*!*****************************************!*\
  !*** ./node_modules/inngest/version.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n//#region src/version.ts\nconst version = \"3.49.3\";\n\n//#endregion\n\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvaW5uZ2VzdC92ZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3NyLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2lubmdlc3QvdmVyc2lvbi5qcz8xOTJmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdmVyc2lvbi50c1xuY29uc3QgdmVyc2lvbiA9IFwiMy40OS4zXCI7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdmVyc2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/inngest/version.js\n");

/***/ })

};
;