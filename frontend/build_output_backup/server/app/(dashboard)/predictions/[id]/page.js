(()=>{var e={};e.id=457,e.ids=[457],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},74026:e=>{"use strict";e.exports=require("string_decoder")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},91178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l}),r(8659),r(68032),r(35866),r(48457);var s=r(23191),n=r(88716),i=r(37922),o=r.n(i),a=r(95231),d={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);r.d(t,d);let l=["",{children:["(dashboard)",{children:["predictions",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8659)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\predictions\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,68032)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,48457)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\predictions\\[id]\\page.tsx"],u="/(dashboard)/predictions/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(dashboard)/predictions/[id]/page",pathname:"/predictions/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},81646:(e,t,r)=>{Promise.resolve().then(r.bind(r,41756))},41756:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(10326),n=r(20108),i=r(35047),o=r(33071),a=r(25517),d=r(567);function l(e){return null==e||Number.isNaN(e)?"—":e.toLocaleString()}function c(){var e;let t=(0,i.useParams)(),r=t?.id,c=(0,n.a)({queryKey:["prediction",r],queryFn:()=>a.h.predictionDetail(r),enabled:!!r,refetchInterval:5e3}),u=c.data?.result,p=Number(u?.churn_probability??0),m=Number(u?.ltv_estimate??0),x=p>=.7?{label:"High Risk",tone:"danger"}:p>=.4?{label:"At Risk",tone:"warning"}:m>=1e3&&p<.3?{label:"Loyal",tone:"success"}:{label:"Stable",tone:"neutral"};return(0,s.jsxs)(o.Zb,{children:[s.jsx(o.ll,{children:"Single Prediction"}),s.jsx(o.SZ,{children:"Review the latest prediction output."}),s.jsx("div",{className:"mt-4 rounded-xl border border-panelBorder bg-background p-4",children:c.isLoading?s.jsx("p",{className:"text-sm text-muted",children:"Loading prediction..."}):c.isError?s.jsx("p",{className:"text-sm text-danger",children:"Unable to load prediction."}):u?(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-panel p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Customer"}),s.jsx("p",{className:"text-sm font-semibold",children:u.customer_id??"—"})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-panel p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Segment"}),s.jsx("p",{className:"text-sm font-semibold",children:l(u.segment)})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-panel p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Churn probability"}),s.jsx("p",{className:"text-sm font-semibold",children:null==(e=u.churn_probability)||Number.isNaN(e)?"—":`${Math.round(100*e)}%`})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-panel p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"LTV estimate"}),s.jsx("p",{className:"text-sm font-semibold",children:l(u.ltv_estimate)})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-panel p-3 md:col-span-2",children:[s.jsx("p",{className:"text-xs text-muted",children:"Recommended action"}),s.jsx("p",{className:"text-sm font-semibold",children:u.recommended_action??"—"})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-panel p-3 md:col-span-2",children:[s.jsx("p",{className:"text-xs text-muted",children:"Risk"}),s.jsx("div",{className:"mt-2 flex items-center",children:s.jsx(d.C,{tone:x.tone,children:x.label})})]})]}):s.jsx("p",{className:"text-sm text-muted",children:"Prediction not ready yet."})})]})}},567:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var s=r(10326),n=r(77863);function i({className:e,tone:t="neutral",...r}){return s.jsx("span",{className:(0,n.cn)("inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium",{success:"bg-success/20 text-success border-success/40",warning:"bg-warn/20 text-warn border-warn/40",danger:"bg-danger/20 text-danger border-danger/40",neutral:"bg-accentSoft text-accent border-accent/40"}[t],e),...r})}},33071:(e,t,r)=>{"use strict";r.d(t,{SZ:()=>a,Zb:()=>i,ll:()=>o});var s=r(10326),n=r(77863);function i({className:e,...t}){return s.jsx("div",{className:(0,n.cn)("rounded-xl border border-panelBorder bg-panel p-4",e),...t})}function o({className:e,...t}){return s.jsx("h3",{className:(0,n.cn)("text-lg font-semibold",e),...t})}function a({className:e,...t}){return s.jsx("p",{className:(0,n.cn)("text-sm text-muted",e),...t})}},25517:(e,t,r)=>{"use strict";r.d(t,{h:()=>i});let s=function(){let e=process.env.NEXT_PUBLIC_API_BASE_URL;return e&&e.trim()?e.trim():"https://csr-vx85.onrender.com"}();async function n(e,t){let{auth:n}=await Promise.resolve().then(r.bind(r,20902)),i=n.currentUser,o=i?await i.getIdToken():null,a=i?.uid,d=await fetch(`${s}${e}`,{headers:{"Content-Type":"application/json",...o?{Authorization:`Bearer ${o}`}:{},...a?{"X-Tenant-Id":a}:{}},...t});if(!d.ok)throw Error(`API request failed: ${d.status}`);return d.json()}let i={health:()=>n("/health"),predict:e=>n("/predict",{method:"POST",body:JSON.stringify(e)}),metrics:()=>n("/metrics"),segments:()=>n("/segments"),models:()=>n("/models"),modelDetail:e=>n(`/models/${e}`),modelJson:e=>n(`/models/${e}/json`),modelDataset:e=>n(`/models/${e}/dataset`),defaultModel:()=>n("/models/default"),setDefaultModel:e=>n("/models/default",{method:"POST",body:JSON.stringify({model_id:e})}),predictions:()=>n("/predictions"),predictionDetail:e=>n(`/predictions/${e}`),predictionDownload:e=>n(`/predictions/${e}/download`),predictionCsv:async e=>{let{auth:t}=await Promise.resolve().then(r.bind(r,20902));return fetch(`${s}/predictions/${e}/csv`,{headers:{"Content-Type":"text/csv",...t.currentUser?.uid?{"X-Tenant-Id":t.currentUser.uid}:{}}})},retrain:async e=>{let t=await fetch("/api/queue/train",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to queue training");return t.json()},uploadDataset:async(e,t,r)=>{let n=new FormData;n.append("tenant_id",e),n.append("file",t),r&&n.append("mapping",JSON.stringify(r));let i=await fetch(`${s}/upload`,{method:"POST",body:n});if(!i.ok)throw Error("Upload failed");return i.json()},queueSinglePrediction:async e=>{let t=await fetch("/api/queue/predict-single",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Failed to queue single prediction");return t.json()},queueBatchPrediction:async e=>{let t=await fetch("/api/queue/predict-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to queue batch prediction");return t.json()}}},8659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Data-Science-Project\Customer-Segmentation-Retention-Analysis\frontend\app\(dashboard)\predictions\[id]\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,771,496,872,108,332],()=>r(91178));module.exports=s})();