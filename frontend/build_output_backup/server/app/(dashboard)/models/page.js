(()=>{var e={};e.id=441,e.ids=[441],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},74026:e=>{"use strict";e.exports=require("string_decoder")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},9144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l}),r(19049),r(68032),r(35866),r(48457);var s=r(23191),n=r(88716),o=r(37922),i=r.n(o),a=r(95231),d={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);r.d(t,d);let l=["",{children:["(dashboard)",{children:["models",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,19049)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\models\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,68032)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,48457)),"C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Data-Science-Project\\Customer-Segmentation-Retention-Analysis\\frontend\\app\\(dashboard)\\models\\page.tsx"],u="/(dashboard)/models/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(dashboard)/models/page",pathname:"/models",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},62195:(e,t,r)=>{Promise.resolve().then(r.bind(r,7288))},7288:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(10326),n=r(20108),o=r(90772),i=r(33071),a=r(25517),d=r(53812),l=r(17577),c=r(15940),u=r(567),m=r(90434),p=r(39183);function x(e){if(!e)return"--";let t=null;if(e instanceof Date&&(t=e),"number"==typeof e&&(t=new Date(e)),"string"==typeof e){let r=new Date(e);t=Number.isNaN(r.getTime())?null:r}if(e.seconds&&(t=new Date(1e3*e.seconds)),e._seconds&&(t=new Date(1e3*e._seconds)),e.toDate&&(t=e.toDate()),e.toMillis&&(t=new Date(e.toMillis())),!t)return"--";let r=Date.now()-t.getTime();if(r<0)return"just now";let s=Math.floor(r/1e3),n=Math.floor(s/60),o=Math.floor(n/60),i=Math.floor(o/24),a=Math.floor(i/30);return s<60?`${s}s ago`:n<60?`${n}m ago`:o<24?`${o}h ago`:i<30?`${i}d ago`:a<12?`${a}mo ago`:`${Math.floor(i/365)}y ago`}function h(e){if(!e)return 0;if(e instanceof Date)return e.getTime();if("number"==typeof e)return e;if("string"==typeof e){let t=new Date(e);return Number.isNaN(t.getTime())?0:t.getTime()}return e.seconds?1e3*e.seconds:e._seconds?1e3*e._seconds:e.toMillis?e.toMillis():e.toDate?e.toDate().getTime():0}function f(){let{push:e}=(0,d.p)(),[t,r]=(0,l.useState)([]);(0,l.useRef)(0);let f=(0,n.a)({queryKey:["metrics"],queryFn:a.h.metrics,retry:!1,refetchInterval:5e3}),g=(0,n.a)({queryKey:["models"],queryFn:a.h.models,retry:!1,refetchInterval:5e3}),j=(0,n.a)({queryKey:["default-model"],queryFn:a.h.defaultModel,retry:!1,refetchInterval:5e3}),b=j.data?.model_id??"",y=(0,l.useMemo)(()=>[...g.data??[]].sort((e,t)=>h(t.created_at)-h(e.created_at)),[g.data]),T=t.length+y.length>0,_=async t=>{await a.h.setDefaultModel(t),e({title:"Default model updated.",tone:"success"})},v=(0,l.useMemo)(()=>y.find(e=>e.model_id===b),[y,b]),D=v?.metrics?.logreg_acc??f.data?.logreg_acc,q=v?.metrics?.logreg_f1??f.data?.logreg_f1;return(0,s.jsxs)(i.Zb,{children:[s.jsx(i.ll,{children:"Model Management"}),s.jsx(i.SZ,{children:"Review trained models and manage production default."}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-background p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"Accuracy"}),s.jsx("p",{className:"text-2xl font-semibold",children:"number"==typeof D?`${(100*D).toFixed(1)}%`:"--"})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-panelBorder bg-background p-3",children:[s.jsx("p",{className:"text-xs text-muted",children:"F1 Score"}),s.jsx("p",{className:"text-2xl font-semibold",children:"number"==typeof q?q.toFixed(2):"--"})]})]}),s.jsx("div",{className:"mt-5 rounded-xl border border-panelBorder bg-background",children:T?(0,s.jsxs)(c.iA,{children:[s.jsx(c.Et,{children:(0,s.jsxs)(c.TR,{children:[s.jsx(c.TH,{children:"Model"}),s.jsx(c.TH,{children:"Created"}),s.jsx(c.TH,{children:"Accuracy"}),s.jsx(c.TH,{children:"F1"}),s.jsx(c.TH,{children:"Status"}),s.jsx(c.TH,{children:"Actions"}),s.jsx(c.TH,{})]})}),(0,s.jsxs)(c.XP,{children:[t.map(e=>(0,s.jsxs)(c.TR,{className:"opacity-70",children:[s.jsx(c.TD,{className:"font-medium",children:e.name}),s.jsx(c.TD,{children:x(e.createdAt)}),s.jsx(c.TD,{children:"—"}),s.jsx(c.TD,{children:"—"}),s.jsx(c.TD,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(u.C,{tone:"neutral",children:"Queued"}),s.jsx("span",{className:"h-3 w-3 animate-spin rounded-full border-2 border-muted border-t-transparent"})]})}),s.jsx(c.TD,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:s.jsx(o.z,{variant:"secondary",disabled:!0,children:"Set Default"})})}),s.jsx(c.TD,{children:s.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-panelBorder text-muted",children:s.jsx(p.Z,{size:14})})})]},e.tempId)),y.map(e=>(0,s.jsxs)(c.TR,{children:[s.jsx(c.TD,{className:"font-medium",children:e.name}),s.jsx(c.TD,{children:x(e.created_at)}),s.jsx(c.TD,{children:e.metrics?.logreg_acc?`${(100*e.metrics.logreg_acc).toFixed(1)}%`:"--"}),s.jsx(c.TD,{children:e.metrics?.logreg_f1?e.metrics.logreg_f1.toFixed(2):"--"}),s.jsx(c.TD,{children:e.model_id===b?s.jsx(u.C,{tone:"success",children:"Default"}):s.jsx(u.C,{tone:"neutral",children:"Available"})}),s.jsx(c.TD,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.model_id!==b&&s.jsx(o.z,{variant:"secondary",onClick:()=>_(e.model_id),children:"Set Default"})})}),s.jsx(c.TD,{children:s.jsx(m.default,{href:`/models/${e.model_id}`,className:"flex h-7 w-7 items-center justify-center rounded-full border border-panelBorder text-muted transition hover:border-accent/60 hover:text-text","aria-label":`View ${e.name}`,children:s.jsx(p.Z,{size:14})})})]},e.model_id))]})]}):s.jsx("div",{className:"p-4 text-sm text-muted",children:"No trained models yet. Go to Train Model."})})]})}},567:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(10326),n=r(77863);function o({className:e,tone:t="neutral",...r}){return s.jsx("span",{className:(0,n.cn)("inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium",{success:"bg-success/20 text-success border-success/40",warning:"bg-warn/20 text-warn border-warn/40",danger:"bg-danger/20 text-danger border-danger/40",neutral:"bg-accentSoft text-accent border-accent/40"}[t],e),...r})}},33071:(e,t,r)=>{"use strict";r.d(t,{SZ:()=>a,Zb:()=>o,ll:()=>i});var s=r(10326),n=r(77863);function o({className:e,...t}){return s.jsx("div",{className:(0,n.cn)("rounded-xl border border-panelBorder bg-panel p-4",e),...t})}function i({className:e,...t}){return s.jsx("h3",{className:(0,n.cn)("text-lg font-semibold",e),...t})}function a({className:e,...t}){return s.jsx("p",{className:(0,n.cn)("text-sm text-muted",e),...t})}},15940:(e,t,r)=>{"use strict";r.d(t,{Et:()=>i,TD:()=>c,TH:()=>l,TR:()=>d,XP:()=>a,iA:()=>o});var s=r(10326),n=r(77863);function o({className:e,...t}){return s.jsx("table",{className:(0,n.cn)("w-full border-collapse text-sm",e),...t})}function i({className:e,...t}){return s.jsx("thead",{className:(0,n.cn)("text-left text-xs uppercase text-muted",e),...t})}function a({className:e,...t}){return s.jsx("tbody",{className:(0,n.cn)("divide-y divide-panelBorder",e),...t})}function d({className:e,...t}){return s.jsx("tr",{className:(0,n.cn)("hover:bg-panelBorder/40",e),...t})}function l({className:e,...t}){return s.jsx("th",{className:(0,n.cn)("px-4 py-3 font-semibold",e),...t})}function c({className:e,...t}){return s.jsx("td",{className:(0,n.cn)("px-4 py-3",e),...t})}},25517:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});let s=function(){let e=process.env.NEXT_PUBLIC_API_BASE_URL;return e&&e.trim()?e.trim():"https://csr-vx85.onrender.com"}();async function n(e,t){let{auth:n}=await Promise.resolve().then(r.bind(r,20902)),o=n.currentUser,i=o?await o.getIdToken():null,a=o?.uid,d=await fetch(`${s}${e}`,{headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{},...a?{"X-Tenant-Id":a}:{}},...t});if(!d.ok)throw Error(`API request failed: ${d.status}`);return d.json()}let o={health:()=>n("/health"),predict:e=>n("/predict",{method:"POST",body:JSON.stringify(e)}),metrics:()=>n("/metrics"),segments:()=>n("/segments"),models:()=>n("/models"),modelDetail:e=>n(`/models/${e}`),modelJson:e=>n(`/models/${e}/json`),modelDataset:e=>n(`/models/${e}/dataset`),defaultModel:()=>n("/models/default"),setDefaultModel:e=>n("/models/default",{method:"POST",body:JSON.stringify({model_id:e})}),predictions:()=>n("/predictions"),predictionDetail:e=>n(`/predictions/${e}`),predictionDownload:e=>n(`/predictions/${e}/download`),predictionCsv:async e=>{let{auth:t}=await Promise.resolve().then(r.bind(r,20902));return fetch(`${s}/predictions/${e}/csv`,{headers:{"Content-Type":"text/csv",...t.currentUser?.uid?{"X-Tenant-Id":t.currentUser.uid}:{}}})},retrain:async e=>{let t=await fetch("/api/queue/train",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to queue training");return t.json()},uploadDataset:async(e,t,r)=>{let n=new FormData;n.append("tenant_id",e),n.append("file",t),r&&n.append("mapping",JSON.stringify(r));let o=await fetch(`${s}/upload`,{method:"POST",body:n});if(!o.ok)throw Error("Upload failed");return o.json()},queueSinglePrediction:async e=>{let t=await fetch("/api/queue/predict-single",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text()||"Failed to queue single prediction");return t.json()},queueBatchPrediction:async e=>{let t=await fetch("/api/queue/predict-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to queue batch prediction");return t.json()}}},19049:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Data-Science-Project\Customer-Segmentation-Retention-Analysis\frontend\app\(dashboard)\models\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,771,496,872,108,332],()=>r(9144));module.exports=s})();